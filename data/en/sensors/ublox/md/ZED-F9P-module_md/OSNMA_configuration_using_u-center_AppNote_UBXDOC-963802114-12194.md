

# **Configuring and verifying OSNMA using u-center**

**OSNMA configuration and verification for generation-9 receivers**

**Application note**

#### **Abstract**

This document explains how to configure the u-blox receiver to verify the OSNMA feature for GALILEO constellation.



UBXDOC-963802114-12194 – R02 **[www.u-blox.com](http://www.u-blox.com/)** C1-Public



### <span id="page-1-0"></span>**Document information**

| Title                  | Configuring and verifying OSNMA using u-center                  |             |  |
|------------------------|-----------------------------------------------------------------|-------------|--|
| Subtitle               | OSNMA configuration and verification for generation-9 receivers |             |  |
| Document type          | Application note                                                |             |  |
| Document number        | UBXDOC-963802114-12194                                          |             |  |
| Revision and date      | R03                                                             | 10-Mar-2025 |  |
| Disclosure restriction | C1-Public                                                       |             |  |

u-blox or third parties may hold intellectual property rights in the products, names, logos, and designs included in this document. Copying, reproduction, or modification of this document or any part thereof is only permitted with the express written permission of u-blox. Disclosure to third parties is permitted for clearly public documents only. The information contained herein is provided "as is" and u-blox assumes no liability for its use. No warranty, either express or implied, is given, including but not limited to, with respect to the accuracy, correctness, reliability, and fitness for a particular purpose of the information. This document may be revised by u-blox at any time without notice. For the most recent documents and product statuses, visit www.u-blox.com. Copyright © u-blox AG.

<span id="page-2-0"></span>

|     |                     | Document information  2     |  |  |  |  |
|-----|---------------------|-----------------------------|--|--|--|--|
|     |                     | Contents  3                 |  |  |  |  |
| 1   | Overview  4         |                             |  |  |  |  |
| 2   |                     | Configuring OSNMA feature 5 |  |  |  |  |
| 2.1 |                     | Providing OSNMA assistance5 |  |  |  |  |
|     | 2.1.1               | UBX-MGA-GAL-OSNMA_MERKLE5   |  |  |  |  |
|     | 2.1.2               | UBX-MGA-GAL-OSNMA_PUBKEY7   |  |  |  |  |
|     | 2.1.3               | UBX-MGA-INI-TIME_UTC9       |  |  |  |  |
| 3   |                     | Verifying OSNMA feature 11  |  |  |  |  |
|     | 3.1.1               | UBX-NAV-PVT  11             |  |  |  |  |
|     | 3.1.2               | UBX-NAV-SIG 12              |  |  |  |  |
|     | 3.1.3               | UBX-NAV-TIMEUTC 12          |  |  |  |  |
|     | 3.1.4               | UBX-NAV-TIMETRUSTED  12     |  |  |  |  |
|     | 3.1.5               | UBX-SEC-OSNMA 13            |  |  |  |  |
|     |                     | Related documentation15     |  |  |  |  |
|     | Revision history 15 |                             |  |  |  |  |
|     |                     | Contact15                   |  |  |  |  |



## <span id="page-3-0"></span>**1 Overview**

Selected u-blox receivers support the evaluation of the new GALILEO Open Service Navigation Message Authentication (OSNMA) feature.OSNMA is a data authentication function for Galileo Open Service that provides receivers with the assurance that the received Galileo navigation message comes from the system itself and has not been modified. This application note provides information on providing OSNMA assistance to the receiver and verifying the OSNMA feature using u-center v24.02 and greater.



## <span id="page-4-0"></span>**2 Configuring OSNMA feature**

The Galileo OSNMA protocol is configured using the CFG-GAL configuration items as shown i[n Figure](#page-4-3)  [1.](#page-4-3) For more information about the configuration items, refer to the applicable Interface description.

| ⊟. <mark>CFG-GAL</mark>       |             |              |
|-------------------------------|-------------|--------------|
| i∓i⊹CFG-GAL-USE_OSNMA         | $: \perp 1$ |              |
| FI-CFG-GAL-OSNMA_MINTAGLENGTH |             | : U1 80 0x50 |
| i∓i⊹CFG-GAL-OSNMA_TIMESYNC    | $\pm$ 1     |              |
| FI-CFG-GAL-OSNMA_INAVPRIM     | $\pm$ 1 1   |              |
|                               |             |              |

<span id="page-4-3"></span>**Figure 1: CFG-GAL configuration items for OSNMA protocol.**

[Table 1](#page-4-4) lists the UBX-MGA assistance messages which can be used to provide key and time information to the firmware. Table 1 also includes the CFG-NAVSPG configuration items for additional OSNMA configuration.

| Input assistance message       | Description                                                               |
|--------------------------------|---------------------------------------------------------------------------|
| UBX-MGA-GAL-OSNMA_MERKLE       | Allows to provide Merkle tree root assistance for OSNMA service           |
| UBX-MGA-GAL-OSNMA_PUBKEY       | Allows to provide public key assistance for OSNMA service                 |
| UBX-MGA-INI-TIME_UTC           | Allows to provide time trusted flag to the UTC time assistance            |
| UBX-MGA-INI-TIME_GNSS          | Allows to provide time trusted flag to the GNSS time assistance           |
| CFG-NAVSPG-ONLY_AUTHDATA       | When enabled, use signals with authenticated navigation data only         |
| CFG-NAVSPG-MAX_TIMETRUSTED_ACC | Configure max. trusted time accuracy value to perform time authentication |

<span id="page-4-4"></span>**Table 1: Configuration messages for OSNMA service.**

### <span id="page-4-1"></span>**2.1 Providing OSNMA assistance**

The UBX-MGA OSNMA assistance messages can be sent to the receiver from the UBX message window in the u-center messages view. To send the OSNMA assistance messages, you need the following information.

To download the Public Key and Merkle tree root, register at th[e European GNSS Service Center \(GSC\)](https://www.gsc-europa.eu/sites/default/files/sites/all/files/Galileo_OSNMA_IDD_ICD_v1.1.pdf) web portal. Subscribe to the OSNMA products and after that has been confirmed, download the Public Key and Merkle tree xml files from the GSC PRODUCTS menu.

For detailed information, refer to the GSC OSNMA Internet data distribution interface control document [\[1\].](#page-14-3)

#### <span id="page-4-2"></span>**2.1.1 UBX-MGA-GAL-OSNMA\_MERKLE**

The UBX-MGA-GAL-OSNMA\_MERKLE message is explained i[nFigure 2.](#page-5-0) For further information, refer to the applicable Interface description.



| <b>Message</b>       | <b>UBX-MGA-GAL-OSNMA MERKLE</b>                                                            |                                         |                |                                                                                                                                                                                                                         |                                                                                                                                      |          |  |  |  |
|----------------------|--------------------------------------------------------------------------------------------|-----------------------------------------|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------|----------|--|--|--|
|                      | Galileo Open Service Navigation Message Authentication (OSNMA) Merkle tree root assistance |                                         |                |                                                                                                                                                                                                                         |                                                                                                                                      |          |  |  |  |
| Type                 | Input                                                                                      |                                         |                |                                                                                                                                                                                                                         |                                                                                                                                      |          |  |  |  |
| Comment              |                                                                                            | www.gsc-europa.eu/gsc-products/OSNMA/MT |                | This message allows the delivery of the applicable Merkle tree root for Galileo OSNMA service. Supported<br>Merkle trees have 16 leaves and the hash function is SHA-256. Information available in GSC website https:// |                                                                                                                                      |          |  |  |  |
| Message              | Header                                                                                     | ID<br>Class                             | Length (Bytes) |                                                                                                                                                                                                                         | Payload                                                                                                                              | Checksum |  |  |  |
| structure            | 0xb5 0x62                                                                                  | 0x02<br>0x13                            | 36             |                                                                                                                                                                                                                         | see below                                                                                                                            | CK ACK B |  |  |  |
| Payload description: |                                                                                            |                                         |                |                                                                                                                                                                                                                         |                                                                                                                                      |          |  |  |  |
| <b>Byte offset</b>   | Type                                                                                       | Name                                    | Scale          | Unit                                                                                                                                                                                                                    | <b>Description</b>                                                                                                                   |          |  |  |  |
| 0                    | U1                                                                                         | type                                    | $\blacksquare$ | $\frac{1}{2}$                                                                                                                                                                                                           | Message type (0x08 for this type)                                                                                                    |          |  |  |  |
| $\mathbf{1}$         | U1                                                                                         | version                                 | ۰              | ۰                                                                                                                                                                                                                       | Message version (0x00 for this version)                                                                                              |          |  |  |  |
| 2                    | X1                                                                                         | bitfield0                               | ٠              | $\blacksquare$                                                                                                                                                                                                          | bitfield                                                                                                                             |          |  |  |  |
|                      | bit $0$ $U_{:1}$                                                                           | applicability                           |                |                                                                                                                                                                                                                         | Merkle tree root applicability time: current or future                                                                               |          |  |  |  |
|                      | Time                                                                                       |                                         |                |                                                                                                                                                                                                                         | Applicability time of the Merkle tree root. When both<br>current and future keys are provided, the current one<br>must be sent first |          |  |  |  |
|                      |                                                                                            |                                         |                |                                                                                                                                                                                                                         | 0: Aided Merkle tree root is currently in use. This                                                                                  |          |  |  |  |
|                      |                                                                                            |                                         |                |                                                                                                                                                                                                                         | new key overwrites the current one in use and                                                                                        |          |  |  |  |
|                      |                                                                                            |                                         |                |                                                                                                                                                                                                                         | invalidates any previously sent as future key                                                                                        |          |  |  |  |
|                      |                                                                                            |                                         |                |                                                                                                                                                                                                                         | 1: Aided Merkle tree root will be in use. This new<br>۰                                                                              |          |  |  |  |
|                      |                                                                                            |                                         |                |                                                                                                                                                                                                                         | key overwrites any future key previously sent                                                                                        |          |  |  |  |
| з                    | U1                                                                                         | reserved0                               |                | ٠                                                                                                                                                                                                                       | Reserved                                                                                                                             |          |  |  |  |
| 4                    | U1[32]                                                                                     | treeNode                                |                |                                                                                                                                                                                                                         | Merkle tree node corresponding to the root: (j,i)=(4,0)                                                                              |          |  |  |  |

#### <span id="page-5-0"></span>**Figure 2: OSNMA\_MERKLE message.**

The 32-byte Merkle tree node is available in the Merkle tree xmlfile downloaded from the GSC OSNMA server. Use the HEX string with tag <x\_ji>, corresponding to the Tree node j= 4, i=0

#### **Example**:

The Merkle tree node from Merkle tree xml at the time of writing (April 2024) is:

#### <TreeNode>

| <j>4</j>                         |
|----------------------------------|
| <i>0</i>                         |
| <lengthinbits>256</lengthinbits> |
|                                  |

<x\_ji>832E15EDE55655EA C6E399A539477B7C034CCE24C3C93FFC904ACD9BF842F04E</x\_ji>

#### </TreeNode>

Merkle tree to be provided in the UBX-MGA-GAL-OSNMAMERKLEmessage window is: 83 2E 15 ED E5 56 55 EA C6 E3 99 A5 39 47 7B 7C 03 4C CE 24 C3 C9 3F FC 90 4A CD 9B F8 42 F0 4E

For sending the Merkle tree hex string using the UBX-MGA-GAL-OSNMA MERKLE message window in u-center, se[e Figure 3](#page-6-1)

The applicability time of Merkle tree has two options, current and future:

• The future Merkle tree is used only during the Merkle tree renewal process.



• The new Merkle tree will be published in the GSC OSNMA server at least two years before the planned renewal.

For more information, refer to the Merkle tree renewal process section in [GSC Signal-in-Space](https://www.gsc-europa.eu/sites/default/files/sites/all/files/Galileo_OSNMA_SIS_ICD_v1.1.pdf)  [interface control](https://www.gsc-europa.eu/sites/default/files/sites/all/files/Galileo_OSNMA_SIS_ICD_v1.1.pdf) document [\[1\]](#page-14-3).



<span id="page-6-1"></span>**Figure 3: Sending Merkle tree assistance using UBX-MGA-GAL-OSNMA MERKLE message window in u-center.**

#### <span id="page-6-0"></span>**2.1.2 UBX-MGA-GAL-OSNMA\_PUBKEY**

The UBX-MGA-GAL-OSNMA\_PUBKEY message is explained in [Figure 4.](#page-7-0) For further information, refer to the applicable Interface description.



| <b>Message</b>               |           | UBX-MGA-GAL-OSNMA_PUBKEY |                              |                |                                                                                                                                                                                   |          |  |  |  |
|------------------------------|-----------|--------------------------|------------------------------|----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|--|--|--|
|                              |           |                          |                              |                | Galileo Open Service Navigation Message Authentication (OSNMA) Public key assistance                                                                                              |          |  |  |  |
| <b>Type</b>                  | Input     |                          |                              |                |                                                                                                                                                                                   |          |  |  |  |
| Comment                      |           |                          |                              |                | This message allows the delivery of the applicable public key for Galileo OSNMA service. Information available<br>in GSC website https://www.gsc-europa.eu/gsc-products/OSNMA/PKI |          |  |  |  |
| Message                      | Header    | ID<br>Class              | Length (Bytes)               |                | Payload                                                                                                                                                                           | Checksum |  |  |  |
| structure                    | 0xb5 0x62 | 0x13<br>0x02             | 72                           |                | see below                                                                                                                                                                         | CK ACK B |  |  |  |
| Payload description:         |           |                          |                              |                |                                                                                                                                                                                   |          |  |  |  |
| <b>Byte offset</b>           | Type      | <b>Name</b>              | Scale                        | Unit           | <b>Description</b>                                                                                                                                                                |          |  |  |  |
| O                            | U1        | type                     | ٠                            | ÷              | Message type (0x07 for this type)                                                                                                                                                 |          |  |  |  |
| 1                            | U1        | version                  | $\qquad \qquad \blacksquare$ | $\blacksquare$ | Message version (0x00 for this version)                                                                                                                                           |          |  |  |  |
| 2                            | X1        | bitfield0                | $\qquad \qquad \blacksquare$ | ÷              | bitfield                                                                                                                                                                          |          |  |  |  |
| bits 3 0 U <sub>:4</sub>     |           | pubKeyId                 | ۰                            | $\blacksquare$ | Public Key identifier                                                                                                                                                             |          |  |  |  |
| bits 7 $4 \text{ U} \cdot 4$ |           | pubKeyType               |                              | $\blacksquare$ | Signature algorithm associated with the public key                                                                                                                                |          |  |  |  |
|                              |           |                          |                              |                | 1: ECDSA P-256<br>۰                                                                                                                                                               |          |  |  |  |
|                              |           |                          |                              |                | 3: ECDSA P-521<br>۰                                                                                                                                                               |          |  |  |  |
| 3                            | U1        | reserved0                | $\blacksquare$               | $\blacksquare$ | Reserved                                                                                                                                                                          |          |  |  |  |
| 4                            | U1[67]    | pubKeyPoint              | ٠                            | $\blacksquare$ | Public Key Point (HEX compressed format)                                                                                                                                          |          |  |  |  |
| 71                           | U1        | reserved1                | ۰                            | $\blacksquare$ | Reserved                                                                                                                                                                          |          |  |  |  |

#### <span id="page-7-0"></span>**Figure 4: OSNMA\_PUBKEY message.**

The OSNMA public key is available in the public key xml file downloadedfrom the GSC OSNMA server. The required fields are explained below:

- Public key ID is available with tag <PKID>
- Public key type is available with tag <PKType> (ECDSA P-256 / ECDSA P-512)
- Public key point is available with tag <point>

#### **Example:**

At the time of writing (April 2024), the OSNMA public key from the public key xml file is:

#### <PKID>1</PKID>

<point>0397EB43789AA0F6D052A638468ECF5278E6F6DF8465ECB8D8B84B8C7A3501F73B</point>

<PKType>ECDSA P-256/SHA-256</PKType>

Public key to be provided in UBX-MGA-GAL-OSNMA PUBKEY message window is: <sup>03</sup> <sup>97</sup> EB <sup>43</sup> <sup>78</sup> 9A A0 F6 D0 52 A6 38 46 8E CF 52 78 E6 F6 DF 84 65 EC B8 D8 B8 4B 8C 7A 35 01 F7 3B

For sending the public key assistance using the UBX-MGA-GAL-OSNMA PUBKEY message window in u-center, see [Figure 5](#page-8-1)





<span id="page-8-1"></span>**Figure 5: Sending public key assistance using UBX-MGA-GAL-OSNMA PUBKEY message window.**

### <span id="page-8-0"></span>**2.1.3 UBX-MGA-INI-TIME\_UTC**

UBX-MGA-INI-TIME\_UTC message allows the user to send the trusted UTC time assistance to the receiver. For details about this message, refer to the applicable Interface description.

The u-center UBX-MGA-INI\_TIME\_UTC message window comes with pre-filled system date and time. Update the timeto the **current UTC time** and specify the accuracy of the time provided. The accuracy should be better than 15 sec to allow normal OSNMA operation. Also, make sure that the "Time trusted" box is checked. For an example of sending the trusted time assistance, see [Figur](#page-8-2)e 6.



<span id="page-8-2"></span>**Figure 6 : Sending trusted time assistance using UBX-MGA-INI-TIME\_UTC message window.**



For testing purposes, the trusted time check can be disabledusing the CFG-GAL-OSNMA\_TIMESYNC configuration item. In this case, the trusted time assistance is not necessary.



## <span id="page-10-0"></span>**3 Verifying OSNMA feature**

u-blox firmware offers multiple messages to verify the OSNMA feature, as listed in [Table 2.](#page-10-2) The ucenter application can be used to monitor these messages.

| UBX message         | Verification field                   |
|---------------------|--------------------------------------|
| UBX-NAV-PVT         | NMA and time authentication status   |
| UBX-NAV-SIG         | Galileo signal authentication status |
| UBX-SEC-OSNMA       | OSNMA status information             |
| UBX-NAV-TIMEUTC     | UTC time authentication status       |
| UBX-NAV-TIMETRUSTED | External trusted time information    |

<span id="page-10-2"></span>**Table 2: OSNMA verification messages**

#### <span id="page-10-1"></span>**3.1.1 UBX-NAV-PVT**

The UBX-NAV-PVT message has beenmodified to provide two extra fields to indicate if the OSNMA authentication data is used in the navigation solution.

#### **NMA Fix status**:

Unknown: It is not possible to perform the verification (does not imply spoofing).

Verified: The navigation solution uses enough signals with OSNMA authenticated data.

#### **Time Authentication Status**:

Not authenticated:Trusted time has not been provided,or its accuracy is not good enough to perform the authentication, or estimated time does not match trusted time.

Authenticated: Trusted time and estimated time match with required accuracy.

| Param                                               | Value                              | Units         |
|-----------------------------------------------------|------------------------------------|---------------|
| GPS Time Tag                                        | 380777.000                         | [s]           |
| <b>UTC Date and Time</b>                            | 7/ 3/ 2024 09:45:59 +000447333     |               |
| UTC Date and Time Confirmation Status               | Date: CONFIRMED, Time: CONFIRM     |               |
| UTC Time Accuracy                                   | 17                                 | [ns]          |
| Position Fix Type                                   | 3D Fix                             |               |
| Fix Flags                                           | FixOK                              |               |
| PSM state                                           | n/a                                |               |
| Position Latitude, Longitude, Height, MSL           | 52.2227356, 0.0748338, 127.3, 81.5 | [deg,deg,m,m] |
| Invalid Position Latitude, Longitude, Height, MSL   | No                                 |               |
| Position Accuracy Estimate Horizontal, Vertical     | 0.8.1.1                            | [m,m]         |
| Velocity North, East, Down                          | $0.000, 0.000, -0.004$             | [m/s,m/s,m/s] |
| Velocity, Heading Accuracy Estimate                 | 0.019, 163.8                       | [m/s.dea]     |
| Speed over Ground                                   | 0.000                              | [m/s]         |
| Heading of Motion, Heading of Vehicle               | $0.0$ , n/a                        | [deg,deg]     |
| Magnetic Declination, Declination Accuracy Estim    | n/a, n/a                           | [deg,deg]     |
| PDOP                                                | 1.95                               |               |
| #SVs Used                                           | 7                                  |               |
| Carrier Range Status                                | Not used                           |               |
| Age of the most recently received differential corr | N/A                                | [sec]         |
| <b>NMA Fix Status</b>                               | Verified                           |               |
| Time Authentication Status                          | Authenticated                      |               |

**Figure 7: UBX-NAV-PVT authentication information fields.**



#### <span id="page-11-0"></span>**3.1.2 UBX-NAV-SIG**

The UBX-NAV-SIG message indicates if the navigation data from Galileo INAV signal has been authenticated.

| SV<br>GLO<br><b>CNO</b><br>PR used<br>CR used<br>Qi<br>Signal<br>DO used<br>Healthy<br>Residual<br>Correction source<br>Corrections used<br>Auth, Data<br>Iono. model<br>o Y<br>E <sub>1C</sub><br>47<br>$0.00m + S$<br>οY<br>070Y<br>$\circ$ E4<br>$\bullet$ N<br>DUAL FREQ<br>None<br>$\sim$<br>,o Y<br>52<br>$\circ$ E4<br>$0.00m + S$<br>E5BQ<br>070Y<br>$\bullet$ N<br>⊕ N<br>DUAL FREQ<br>None<br>$\bullet$ Y<br>$\circ$ E9<br>$-0.50m$ $M$ S<br>E <sub>1</sub> C<br>οY<br>070Y<br>DUAL FREQ<br>42<br>$\bullet$ N<br>None<br>$\bullet$ Y<br>$\circ$ E9<br>E5BQ<br>070Y<br>$-0.50m$ $M$ S<br>44<br>$\bullet$ N<br>DUAL FREQ<br>• N<br>None<br>$\bullet$ Y<br>$0.00m + S$<br>070Y<br>O E13<br>E <sub>1</sub> C<br>43<br>οY<br>DUAL FREQ<br>$\bullet$ N<br>None<br>٠<br>ιoγ<br>$0.00m$ $\frac{1}{2}$ S<br>O E13<br>070Y<br>E5BQ<br>46<br>• N<br>DUAL FREQ<br>$\bullet$ N<br>None<br>٠<br>$\bullet$ Y<br>O E15<br>$0.50m + S$<br>E <sub>1C</sub><br>38<br>οY<br>070Y<br>GPS<br>$\bullet$ N<br>None<br>$\sim$<br>o Y<br>$\circ$ E15<br>$0.40m$ $M$ S<br>o Y<br>E5BQ<br>47<br>070Y<br>GPS<br>$\bullet$ N<br>None<br>$\sim$<br>$\bullet$ Y<br>$-0.70m$ $M$ S<br>$\circ$ E19<br>οY<br>E1C<br>36<br>070Y<br>$\bullet$ N<br>DUAL FREQ<br>None<br>OY.<br>l⊕ E19<br>$-0.70m$ $M$ S<br>E5BQ<br>39<br>070Y<br>ON.<br>ON.<br>DUAL FREQ<br>None<br>$\sim$<br>$\bullet$ Y<br>$0.30m$ $\frac{1}{2}$ S<br>$\circ$ E21<br>οY<br>E1C<br>$\bullet$ N<br>070Y<br>DUAL FREQ<br>49<br>None<br>$\overline{\phantom{a}}$<br>$\bullet$ Y<br>$\circ$ E21<br>E5BQ<br>53<br>$0.30m$ $\frac{1}{2}$ S<br>070Y<br>DUAL FREQ<br>$\bullet$ N<br>0 N<br>None<br>$\circ$ E26<br>E <sub>1</sub> C<br>31<br>$-20.20m$ $\bullet$ N<br>070Y<br>DUAL FREQ<br>$\bullet$ N<br>$\bullet$ N<br>• N<br>None<br>$\circ$ E26<br>070Y<br>E5BQ<br>34<br>$-20.20m$ $\bullet$ N<br>DUAL FREQ<br>$\bullet$ N<br>$\bullet$ N<br>• N<br>None<br>$\bullet$ Y<br> ⊕ E27<br>E <sub>1C</sub><br>070Y<br>DUAL FREQ<br>$-2.10m$ $\bullet$ N<br>$\bullet$ N<br>0 N<br>40<br>None<br>$\sim$<br>$\bullet$ Y<br>l⊕ E27<br>E5BQ<br>070Y<br>DUAL FREQ<br>44<br>$-2.10m$ $\bullet$ N<br>$\bullet$ N<br>. N<br>None<br>$\bullet$ Y<br>$0.60m$ $\frac{10}{10}$ S<br>O E 31<br>ΟY<br>E1C<br>38<br>070Y<br>DUAL FREQ<br>0 N<br>None<br>o Y<br>O E 31<br>$0.60m$ $\frac{10}{10}$ S<br>070Y<br>E5BQ<br>ON.<br>DUAL FREQ<br>41<br>ON.<br>None |  |  |  |  |  |  |  |  |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--|--|--|--|--|--|--|--|
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |  |

**Figure 8: UBX-NAV-SIG authentication data field.**

#### <span id="page-11-1"></span>**3.1.3 UBX-NAV-TIMEUTC**

The UBX-NAV-TIMEUTC has an extra field to indicate the UTC data authentication status. OSNMA authenticates the parameters to convert Galileo time to UTC time. To get the UTC time using authenticated data, change CFG-NAVSPG-UTCSTANDARD to the European standard.

| Time of week                     | 380385.000       | [s]     |  |
|----------------------------------|------------------|---------|--|
| Date                             | 7.3.2024         | [D/M/Y] |  |
| Time                             | 09:39:27 [H/M/S] |         |  |
| Standard                         | Europe           |         |  |
| Fract. Seconds                   | -386187          | [ns]    |  |
| <b>Accuracy Estimate</b>         |                  |         |  |
| Time                             | $0.017$ [us]     |         |  |
| Data<br>authentication<br>status | Authenticated    |         |  |
|                                  |                  |         |  |

**Figure 9: UBX-NAV-TIMEUTC data authentication field.**

#### <span id="page-11-2"></span>**3.1.4 UBX-NAV-TIMETRUSTED**

The UBX-NAV-TIMETRUSTED message gives information about external trusted time. It displays the comparison between provided trusted time and the estimated time.



| Indication if the trusted<br>time is set | 380126.000<br>iTOW [s]<br>Status<br><b>GPS</b><br>$\blacksquare$ Trusted time set<br><b>Time System</b>                                                                                                                                                |                                                                              |
|------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------|
| Initial time values<br>provided          | Initial Trusted Time<br><b>Propagated Trusted Time</b><br>2304<br>2304<br>Week number<br>Week number<br>378913.663 [s]<br>380125.663 [s]<br>Time of Week<br>Time of Week<br>$4.000$ [s]<br>$4.009$ [s]<br><b>Time Accuracy</b><br><b>Time Accuracy</b> | <b>Current trusted time</b><br>after the propagation at<br>nominal frequency |
|                                          | Estimated minus propagated Trusted Time<br>0.336<br>$\blacksquare$ Time delta validity<br>Time delta [s] (est - trusted)                                                                                                                               | Difference between the<br>estimated time and the<br>trusted time             |

**Figure 10: UBX-NAV-TIMETRUSTED message information.**

### <span id="page-12-0"></span>**3.1.5 UBX-SEC-OSNMA**

The new UBX-SEC-OSNMA message provides all the information about the OSNMA status.





If the difference between GST (Galileo system time) and the trusted time provided is:

- <15 sec: OSNMA uses fast MACs. Normal OSNMA operation.
- 15 165 sec: OSNMA uses slow MACs.Time to authentication is longer than with fast MACs.

- >=165 sec: OSNMA will not be performed.
- **☞** The UBX-NAV-TIMETRUSTED messagedisplays the difference between the estimated time and the trusted time assistance, whereas the UBX-SEC-OSNMA message displays the difference between the GST (time decoded from Galileo signals) and the trusted time assistance.



### <span id="page-14-0"></span>**Related documentation**

<span id="page-14-3"></span>[1] [GSC OSNMA Internet data distribution interface control documen](https://www.gsc-europa.eu/sites/default/files/sites/all/files/Galileo_OSNMA_IDD_ICD_v1.1.pdf)t

**☞** For product change notifications and regular updates of u-blox documentation, register on our website, [www.u-blox.com](http://www.u-blox.com/).

## <span id="page-14-1"></span>**Revision history**

| Revision | Date        | Comments                                                                                               |
|----------|-------------|--------------------------------------------------------------------------------------------------------|
| R01      | 17-Aug-2023 | Initial release                                                                                        |
| R02      | 02-Apr-2024 | Updated firmware<br>Updated Merkle tree and public key<br>Changed OSNMA assistance providing procedure |
| R03      | 10-Mar-2025 | Updated for all generation-9 u-blox receivers which support OSNMA                                      |

## <span id="page-14-2"></span>**Contact**

#### **u-blox AG**

Address: Zürcherstrasse 68 8800 Thalwil Switzerland

For further support and contact information, visit us at [www.u-blox.com/suppo](http://www.u-blox.com/support)rt.