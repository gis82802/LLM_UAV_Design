

# **u-blox 8 / u-blox M8**

## **Receiver description**

**Including protocol specification**

## **Abstract**

The receiver description including protocol specification describes the firmware features, specifications and configuration for u-blox 8 / u-blox M8 high performance positioning modules.

The receiver description provides an overview and conceptual details of the supported features. The protocol specification describes the NMEA and RTCM protocols as well as the UBX protocol (version 15. 00 up to 19.20, version 20.00 to 20.30, version 22.00 to 22.01 and version 23.00 to 23.01) and serves as a reference manual. It includes the standard precision GNSS, Time Sync, Time & Frequency Sync, High precision GNSS, ADR and UDR products.

**www.u-blox.com UBX-13003221 - R28**



| Document Information |                                                     |                 |  |
|----------------------|-----------------------------------------------------|-----------------|--|
| Title                | u-blox 8 / u-blox M8 Receiver description           |                 |  |
| Subtitle             | Including protocol specification v15-20.30,22-23.01 |                 |  |
| Document type        | Manual                                              |                 |  |
| Document number      | UBX-13003221                                        |                 |  |
| Revision and date    | R28 (d6aadc7)                                       | 30 January 2023 |  |
| Document status      | Early production information                        |                 |  |

#### **Document status explanation**

| Objective Specification      | Document contains target values. Revised and supplementary data will be published later.                 |
|------------------------------|----------------------------------------------------------------------------------------------------------|
| Advance Information          | Document contains data based on early testing. Revised and supplementary data will be published later.   |
| Early Production Information | Document contains data from product verification. Revised and supplementary data may be published later. |
| Production Information       | Document contains the final product specification.                                                       |

#### **This document applies to the following products:**

| Product name | Type number    | Firmware version | Product category        |
|--------------|----------------|------------------|-------------------------|
| CAM-M8C      | CAM-M8C-0-10   | SPG 3.01         | Standard Precision GNSS |
| CAM-M8Q      | CAM-M8Q-0-10   | SPG 3.01         | Standard Precision GNSS |
| EVA-M8M      | EVA-M8M-0-10   | SPG 3.01         | Standard Precision GNSS |
| EVA-M8M      | EVA-M8M-1-10   | SPG 3.01         | Standard Precision GNSS |
| EVA-M8Q      | EVA-M8Q-0-10   | SPG 3.01         | Standard Precision GNSS |
| MAX-M8C      | MAX-M8C-0-10   | SPG 3.01         | Standard Precision GNSS |
| MAX-M8Q      | MAX-M8Q-0-10   | SPG 3.01         | Standard Precision GNSS |
| MAX-M8W      | MAX-M8W-0-10   | SPG 3.01         | Standard Precision GNSS |
| NEO-M8M      | NEO-M8M-0-11   | SPG 3.01         | Standard Precision GNSS |
| NEO-M8N      | NEO-M8N-0-12   | SPG 3.01         | Standard Precision GNSS |
| NEO-M8Q      | NEO-M8Q-0-12   | SPG 3.01         | Standard Precision GNSS |
| NEO-M8Q      | NEO-M8Q-01A-10 | SPG 3.01         | Standard Precision GNSS |
| NEO-M8J      | NEO-M8J-0-11   | SPG 3.05         | Standard Precision GNSS |
| LEA-M8S      | LEA-M8S-0-10   | SPG 3.01         | Standard Precision GNSS |
| SAM-M8Q      | SAM-M8Q-0-10   | SPG 3.01         | Standard Precision GNSS |
| ZOE-M8G      | ZOE-M8G-0-11   | SPG 3.01         | Standard Precision GNSS |
| ZOE-M8Q      | ZOE-M8Q-0-10   | SPG 3.01         | Standard Precision GNSS |
| ZOE-M8B      | ZOE-M8B-0-11   | SPG 3.51         | Standard Precision GNSS |
| EVA-8M       | EVA-8M-0-10    | SPG 3.01         | Standard Precision GNSS |
| MAX-8C       | MAX-8C-0-10    | SPG 3.01         | Standard Precision GNSS |
| MAX-8Q       | MAX-8Q-0-10    | SPG 3.01         | Standard Precision GNSS |
| NEO-8Q       | NEO-8Q-0-11    | SPG 3.01         | Standard Precision GNSS |
| NEO-M8P      | NEO-M8P-0-11   | HPG 1.40         | High Precision GNSS     |
| NEO-M8P      | NEO-M8P-2-11   | HPG 1.40         | High Precision GNSS     |
| NEO-M8P      | NEO-M8P-0-12   | HPG 1.43         | High Precision GNSS     |



#### u-blox 8 / u-blox M8 Receiver description - Manual

| NEO-M8P | NEO-M8P-2-12   | HPG 1.43                      | High Precision GNSS |
|---------|----------------|-------------------------------|---------------------|
| NEO-M8L | NEO-M8L-0-10   | ADR 4.00 / 4.21 / 4.31 / 4.50 | Dead Reckoning      |
| NEO-M8L | NEO-M8L-0-11   | ADR 4.10 / 4.21 / 4.31 / 4.50 | Dead Reckoning      |
| NEO-M8L | NEO-M8L-0-12   | ADR 4.11 / 4.21 / 4.31 / 4.50 | Dead Reckoning      |
| NEO-M8L | NEO-M8L-04B-00 | ADR 4.21 / 4.31 / 4.50        | Dead Reckoning      |
| NEO-M8L | NEO-M8L-05B-00 | ADR 4.31 / 4.50               | Dead Reckoning      |
| NEO-M8L | NEO-M8L-06B-00 | ADR 4.50                      | Dead Reckoning      |
| NEO-M8L | NEO-M8L-02A-11 | ADR 4.10 / 4.21 / 4.31 / 4.50 | Dead Reckoning      |
| NEO-M8L | NEO-M8L-03A-12 | ADR 4.11 / 4.21 / 4.31 / 4.50 | Dead Reckoning      |
| NEO-M8L | NEO-M8L-04A-00 | ADR 4.21 / 4.31 / 4.50        | Dead Reckoning      |
| EVA-M8E | EVA-M8E-0-11   | UDR 1.00 / 1.21 / 1.31 / 1.50 | Dead Reckoning      |
| NEO-M8U | NEO-M8U-0-10   | UDR 1.00 / 1.21 / 1.31 / 1.50 | Dead Reckoning      |
| NEO-M8U | NEO-M8U-04B-00 | UDR 1.21 / 1.31 / 1.50        | Dead Reckoning      |
| NEO-M8U | NEO-M8U-05B-00 | UDR 1.31 / 1.50               | Dead Reckoning      |
| NEO-M8U | NEO-M8U-06B-00 | UDR 1.50                      | Dead Reckoning      |
| NEO-M8T | NEO-M8T-0-11   | TIM 1.10                      | Timing              |
| LEA-M8T | LEA-M8T-0-10   | TIM 1.10                      | Timing              |
| LEA-M8T | LEA-M8T-1-00   | TIM 1.11                      | Timing              |
| LEA-M8T | LEA-M8T-1-01   | TIM 1.12                      | Timing              |
| LEA-M8F | LEA-M8F-0-00   | FTS 1.01                      | Timing              |

u-blox reserves all rights to this document and the information contained herein. Products, names, logos and designs described herein may in whole or in part be subject to intellectual property rights. Reproduction, use, modification or disclosure to third parties of this document or any part thereof without the express permission of u-blox is strictly prohibited.

The information contained herein is provided "as is" and u-blox assumes no liability for the use of the information. No warranty, either express or implied, is given, including but not limited, with respect to the accuracy, correctness, reliability and fitness for a particular purpose of the information. This document may be revised by u-blox at any time. For most recent documents, please visit [www.u-blox.com](http://www.u-blox.com/).

Copyright © 2023, u-blox AG.

u-blox is a registered trademark of u-blox Holding AG in the EU and other countries.



| Preface 1                                                                           |  |
|-------------------------------------------------------------------------------------|--|
| 1 Document Overview 1                                                               |  |
| 2 Firmware and Protocol Versions  1                                                 |  |
| 2.1 How to Determine the Version and the Location of the Firmware 1                 |  |
| 2.1.1 Decoding the Boot Screen (for Protocol Version 17 and Below)  1               |  |
| 2.1.2 Decoding the Boot Screen (for Protocol Version from 18 to 23.01) 3            |  |
| 2.1.3 Decoding the output of UBX-MON-VER (for Protocol Version 17 and below)  4     |  |
| 2.1.4 Decoding the output of UBX-MON-VER (for Protocol Version from 18 and 23.01) 6 |  |
| 2.2 How to Determine the Supported Protocol Version of the u-blox Receiver  7       |  |
| 2.2.1 u-blox 8 / u-blox M8 Firmware and Supported Protocol Versions  7              |  |
| Receiver Description 9                                                              |  |
| 3 Receiver Configuration 9                                                          |  |
| 3.1 Configuration Concept  9                                                        |  |
| 3.2 Organization of the Configuration Sections 10                                   |  |
| 3.3 Permanent Configuration Storage Media 11                                        |  |
| 3.4 u-blox Receiver Default Configuration 11                                        |  |
| 3.5 Save-on-Shutdown Feature 11                                                     |  |
| 4 Concurrent GNSS 12                                                                |  |
| 4.1 GNSS Types 12                                                                   |  |
| 4.1.1 Major GNSS  12                                                                |  |
| 4.1.2 Augmentation Systems 13                                                       |  |
| 4.2 Configuration 14                                                                |  |
| 4.2.1 Switching between GNSS 14                                                     |  |
| 4.2.2 Configuring QZSS L1SAIF  15                                                   |  |
| 5 SBAS Configuration Settings Description 15                                        |  |
| 5.1 SBAS (Satellite Based Augmentation Systems) 15                                  |  |
| 5.2 SBAS Features  17                                                               |  |
| 5.3 SBAS Configuration 18                                                           |  |
| 6 QZSS L1S SLAS Configuration Settings Description 19                               |  |
| 6.1 QZSS L1S SLAS (Sub-meter Level Augmentation Service) 19                         |  |
| 6.2 QZSS L1S SLAS Features 19                                                       |  |
| 6.3 QZSS L1S SLAS Configuration 20                                                  |  |
| 7 IMES Description  20                                                              |  |
| 7.1 IMES Features 21                                                                |  |
| 8 Navigation Configuration Settings Description 21                                  |  |
| 8.1 Platform settings 21                                                            |  |
| 8.2 Navigation Input Filters 22                                                     |  |
| 8.3 Navigation Output Filters  23                                                   |  |
| 8.3.1 Speed (3-D) Low-pass Filter  23                                               |  |



|  | 8.3.2 Course over Ground Low-pass Filter 23        |  |
|--|----------------------------------------------------|--|
|  | 8.3.3 Low-speed Course Over Ground Filter 24       |  |
|  | 8.4 Static Hold 24                                 |  |
|  | 8.5 Freezing the Course Over Ground  24            |  |
|  | 8.6 Degraded Navigation  24                        |  |
|  | 8.6.1 2D Navigation  24                            |  |
|  | 8.7 Geodetic Coordinate Systems and Ellipsoids  25 |  |
|  | 9 Clocks and Time  26                              |  |
|  | 9.1 Receiver Local Time  26                        |  |
|  | 9.2 Navigation Epochs 26                           |  |
|  | 9.3 iTOW Timestamps  27                            |  |
|  | 9.4 GNSS Times  27                                 |  |
|  | 9.5 Time Validity 28                               |  |
|  | 9.6 UTC Representation  28                         |  |
|  | 9.7 Leap Seconds  28                               |  |
|  | 9.8 Real Time Clock 29                             |  |
|  | 9.9 Date  29                                       |  |
|  | 9.9.1 GPS-only Date Resolution  29                 |  |
|  | 10 Broadcast Navigation Data  30                   |  |
|  | 10.1 Parsing Navigation Data Subframes 30          |  |
|  | 10.2 GPS  30                                       |  |
|  | 10.2.1 GPS L1C/A 31                                |  |
|  | 10.3 GLONASS 31                                    |  |
|  | 10.4 BeiDou  32                                    |  |
|  | 10.5 Galileo  32                                   |  |
|  | 10.5.1 Galileo E1OS 32                             |  |
|  | 10.6 SBAS 33                                       |  |
|  | 10.7 QZSS 34                                       |  |
|  | 10.8 IMES 34                                       |  |
|  | 10.9 Summary  34                                   |  |
|  | 11 Serial Communication Ports Description 35       |  |
|  | 11.1 TX-ready indication  35                       |  |
|  | 11.2 Extended TX timeout  36                       |  |
|  | 11.3 UART Ports  36                                |  |
|  | 11.4 USB Port 37                                   |  |
|  | 11.5 DDC Port  37                                  |  |
|  | 11.5.1 Read Access 38                              |  |
|  | 11.5.2 Write Access  39                            |  |
|  | 11.6 SPI Port  40                                  |  |
|  | 11.6.1 Maximum SPI clock speed  40                 |  |
|  | 11.6.2 Read Access  40                             |  |
|  | 11.6.3 Back-To-Back Read and Write Access  40      |  |
|  | 11.7 How to change between protocols  41           |  |
|  |                                                    |  |



|  | 12 Multiple GNSS assistance (MGA) 41                          |  |
|--|---------------------------------------------------------------|--|
|  | 12.1 Introduction  41                                         |  |
|  | 12.2 Assistance Data  42                                      |  |
|  | 12.3 AssistNow Online  42                                     |  |
|  | 12.3.1 Host Software 43                                       |  |
|  | 12.3.2 AssistNow Online Sequence  44                          |  |
|  | 12.3.3 Flow Control 44                                        |  |
|  | 12.3.4 Authorization 44                                       |  |
|  | 12.3.5 Service Parameters 44                                  |  |
|  | 12.3.6 Multiple Servers 46                                    |  |
|  | 12.4 AssistNow Offline 47                                     |  |
|  | 12.4.1 Service Parameters 47                                  |  |
|  | 12.4.2 Authorization 48                                       |  |
|  | 12.4.3 Multiple Servers 48                                    |  |
|  | 12.4.4 Time, Position and Almanac 48                          |  |
|  | 12.4.5 Flash-based AssistNow Offline  49                      |  |
|  | 12.4.6 Host-based AssistNow Offline  50                       |  |
|  | 12.5 Preserving Information During Power-off 51               |  |
|  | 12.6 AssistNow Autonomous 51                                  |  |
|  | 12.6.1 Introduction 51                                        |  |
|  | 12.6.2 Concept  51                                            |  |
|  | 12.6.3 Interface  53                                          |  |
|  | 12.6.4 Benefits and Drawbacks  54                             |  |
|  | 13 Power Management  55                                       |  |
|  | 13.1 Continuous Mode 56                                       |  |
|  | 13.2 Power Save Mode  56                                      |  |
|  | 13.2.1 Operation 57                                           |  |
|  | 13.2.2 Configuration  61                                      |  |
|  | 13.2.3 Features  64                                           |  |
|  | 13.2.4 Examples 65                                            |  |
|  | 13.3 Peak current settings 66                                 |  |
|  | 13.4 Power On/Off command  66                                 |  |
|  | 13.5 EXTINT pin control when Power Save Mode is not active 66 |  |
|  | 13.6 Measurement and navigation rate with Power Save Mode 66  |  |
|  | 13.7 Power mode setup 66                                      |  |
|  | 14 Forcing a Receiver Reset  67                               |  |
|  | 15 Receiver Status Monitoring  68                             |  |
|  | 15.1 Input/Output system  68                                  |  |
|  | 15.2 Jamming/Interference Indicator 69                        |  |
|  | 15.3 Jamming/Interference Monitor (ITFM) 69                   |  |
|  | 16 Spoofing Detection  70                                     |  |
|  | 16.1 Introduction 70                                          |  |
|  | 16.2 Scope  70                                                |  |



| 17 Signal Attenuation Compensation 70           |  |
|-------------------------------------------------|--|
| 18 Remote Inventory  71                         |  |
| 18.1 Description  71                            |  |
| 18.2 Usage 71                                   |  |
| 19 Time pulse  71                               |  |
| 19.1 Introduction 71                            |  |
| 19.2 Recommendations 72                         |  |
| 19.3 GNSS time bases 73                         |  |
| 19.4 Time pulse configuration 74                |  |
| 19.5 Configuring time pulse with UBX-CFG-TP5 74 |  |
| 19.5.1 Example 1 75                             |  |
| 19.5.2 Example 2  75                            |  |
| 20 Timemark 76                                  |  |
| 21 Odometer  77                                 |  |
| 21.1 Introduction 77                            |  |
| 21.2 Odometer Output  77                        |  |
| 21.3 Odometer Configuration 78                  |  |
| 21.4 Resetting the Odometer  78                 |  |
| 22 Logging 78                                   |  |
| 22.1 Introduction 78                            |  |
| 22.2 Setting the logging system up 79           |  |
| 22.3 Information about the log  79              |  |
| 22.4 Recording 80                               |  |
| 22.5 Retrieval  81                              |  |
| 22.6 Command message acknowledgement  82        |  |
| 23 Data Batching 82                             |  |
| 23.1 Introduction 82                            |  |
| 23.2 Setting up the data batching 82            |  |
| 23.3 Retrieval  83                              |  |
| 24 Geofencing  84                               |  |
| 24.1 Introduction 84                            |  |
| 24.2 Interface  84                              |  |
| 24.3 Geofence state evaluation 84               |  |
| 24.4 Using a PIO for Geofence State Output 85   |  |
| 25 Time Mode Configuration 85                   |  |
| 25.1 Introduction 85                            |  |
| 25.2 Fixed Position 85                          |  |
| 25.3 Survey-in  85                              |  |
| 26 Time & Frequency Sync (FTS) 86               |  |
| 26.1 Introduction 86                            |  |
| 26.2 Example use cases  87                      |  |
| 26.2.1 Stand-alone synchronization system 87    |  |
| 26.2.2 Oscillator control via host  88          |  |



| 26.2.3 Oscillator control via directly-connected DAC 89                 |  |
|-------------------------------------------------------------------------|--|
| 26.2.4 External (coherent) PPS 89                                       |  |
| 26.3 Synchronization Manager Concept 90                                 |  |
| 26.4 Oscillator and source specification  92                            |  |
| 26.5 Calibration 93                                                     |  |
| 26.6 FTS device Output and Top Of Second (TOS) message  94              |  |
| 26.7 Message transmission time slot reservations on host interfaces  95 |  |
| 26.7.1 Example setup 95                                                 |  |
| 27 RTK Mode Configuration 96                                            |  |
| 27.1 Reference Station Mode Configuration 96                            |  |
| 27.2 Rover Mode Configuration  97                                       |  |
| 27.3 Moving Baseline RTK Configuration 97                               |  |
| 27.3.1 MB Reference Configuration  97                                   |  |
| 27.3.2 MB Rover Configuration 97                                        |  |
| 27.3.3 Expected Performance  98                                         |  |
| 28 Automotive Dead Reckoning (ADR)  98                                  |  |
| 28.1 Introduction 98                                                    |  |
| 28.2 Solution Types  98                                                 |  |
| 28.2.1 GAWT: Gyroscope, Accelerometer and Wheel Tick Solution  98       |  |
| 28.3 Installation Configuration 99                                      |  |
| 28.3.1 IMU-mount Alignment 99                                           |  |
| 28.4 Sensor Configuration 102                                           |  |
| 28.4.1 Accelerometer Configuration 102                                  |  |
| 28.4.2 Gyroscope Configuration 103                                      |  |
| 28.4.3 Wheel-Tick/Speed Sensor Configuration  104                       |  |
| 28.4.4 Sensor Time Tagging 106                                          |  |
| 28.5 ADR System Configuration  108                                      |  |
| 28.5.1 Enabling/Disabling Fusion Filter 108                             |  |
| 28.5.2 Recommended Configuration  108                                   |  |
| 28.6 Operation 108                                                      |  |
| 28.6.1 Fusion Filter Modes 108                                          |  |
| 28.6.2 Accelerated Initialization and Calibration Procedure 111         |  |
| 28.6.3 Automatic IMU-mount Alignment 112                                |  |
| 28.6.4 Navigation Output  114                                           |  |
| 28.6.5 Sensor Data Types 117                                            |  |
| 28.6.6 Raw Sensor Data Output  118                                      |  |
| 28.6.7 Receiver Startup and Shutdown 119                                |  |
| 29 Untethered Dead Reckoning (UDR) 119                                  |  |
| 29.1 Introduction 119                                                   |  |
| 29.2 Installation Configuration 119                                     |  |
| 29.2.1 IMU-mount Alignment 119                                          |  |
| 29.3 Sensor Configuration 123                                           |  |
| 29.3.1 Accelerometer Configuration 123                                  |  |



| 29.3.2 Gyroscope Configuration 124                               |  |
|------------------------------------------------------------------|--|
| 29.3.3 Sensor Time Tagging  125                                  |  |
| 29.4 UDR System Configuration 126                                |  |
| 29.4.1 Enabling/Disabling Fusion Filter  126                     |  |
| 29.4.2 Recommended Configuration 126                             |  |
| 29.5 Operation 126                                               |  |
| 29.5.1 Fusion Filter Modes  127                                  |  |
| 29.5.2 Accelerated Initialization and Calibration Procedure  129 |  |
| 29.5.3 Automatic IMU-mount Alignment  131                        |  |
| 29.5.4 Navigation Output  133                                    |  |
| 29.5.5 Sensor Data Types 135                                     |  |
| 29.5.6 Raw Sensor Data Output 136                                |  |
| 29.5.7 Receiver Startup and Shutdown  137                        |  |
| 30 High Navigation Rate (HNR) 137                                |  |
| 30.1 Introduction  137                                           |  |
| 30.2 Configuration 137                                           |  |
| Interface Description  138                                       |  |
| 31 NMEA Protocol 138                                             |  |
| 31.1 Protocol overview  138                                      |  |
| 31.1.1 Message format  138                                       |  |
| 31.1.2 Talker ID 138                                             |  |
| 31.1.3 Protocol configuration 139                                |  |
| 31.1.4 Satellite numbering 140                                   |  |
| 31.1.5 Latitude and longitude format  141                        |  |
| 31.1.6 Position fix flags  141                                   |  |
| 31.1.7 Multi-GNSS considerations  142                            |  |
| 31.1.8 Output of invalid/unknown data 143                        |  |
| 31.1.9 Messages overview  143                                    |  |
| 31.2 Standard Messages 145                                       |  |
| 31.2.1 DTM  145                                                  |  |
| 31.2.2 GBQ  146                                                  |  |
| 31.2.3 GBS  146                                                  |  |
| 31.2.4 GGA  147                                                  |  |
| 31.2.5 GLL 149                                                   |  |
| 31.2.6 GLQ  150                                                  |  |
| 31.2.7 GNQ 150                                                   |  |
| 31.2.8 GNS 151                                                   |  |
| 31.2.9 GPQ  152                                                  |  |
| 31.2.10 GRS 153                                                  |  |
| 31.2.11 GSA  154                                                 |  |
| 31.2.12 GST 155                                                  |  |
| 31.2.13 GSV 156                                                  |  |
| 31.2.14 RMC 157                                                  |  |



| 31.2.15 THS 158                        |  |
|----------------------------------------|--|
| 31.2.16 TXT  159                       |  |
| 31.2.17 VLW 160                        |  |
| 31.2.18 VTG  161                       |  |
| 31.2.19 ZDA 162                        |  |
| 31.3 PUBX Messages 163                 |  |
| 31.3.1 CONFIG (PUBX,41) 163            |  |
| 31.3.2 POSITION (PUBX,00) 164          |  |
| 31.3.3 RATE (PUBX,40) 165              |  |
| 31.3.4 SVSTATUS (PUBX,03) 166          |  |
| 31.3.5 TIME (PUBX,04) 167              |  |
| 32 UBX Protocol 168                    |  |
| 32.1 UBX Protocol Key Features 168     |  |
| 32.2 UBX Frame Structure 168           |  |
| 32.3 UBX Payload Definition Rules 169  |  |
| 32.3.1 Structure Packing 169           |  |
| 32.3.2 Reserved Elements 169           |  |
| 32.3.3 Undefined Values  170           |  |
| 32.3.4 Message Naming 170              |  |
| 32.3.5 Number Formats 170              |  |
| 32.4 UBX Checksum 171                  |  |
| 32.5 UBX Message Flow  172             |  |
| 32.5.1 Acknowledgement  172            |  |
| 32.5.2 Polling Mechanism 172           |  |
| 32.6 UBX Class IDs 172                 |  |
| 32.7 UBX Messages Overview  173        |  |
| 32.8 UBX-ACK (0x05) 179                |  |
| 32.8.1 UBX-ACK-ACK (0x05 0x01)  179    |  |
| 32.8.2 UBX-ACK-NAK (0x05 0x00)  179    |  |
| 32.9 UBX-AID (0x0B) 180                |  |
| 32.9.1 UBX-AID-ALM (0x0B 0x30) 180     |  |
| 32.9.2 UBX-AID-AOP (0x0B 0x33) 182     |  |
| 32.9.3 UBX-AID-EPH (0x0B 0x31) 184     |  |
| 32.9.4 UBX-AID-HUI (0x0B 0x02)  186    |  |
| 32.9.5 UBX-AID-INI (0x0B 0x01) 188     |  |
| 32.10 UBX-CFG (0x06)  191              |  |
| 32.10.1 UBX-CFG-ANT (0x06 0x13) 191    |  |
| 32.10.2 UBX-CFG-BATCH (0x06 0x93) 192  |  |
| 32.10.3 UBX-CFG-CFG (0x06 0x09)  193   |  |
| 32.10.4 UBX-CFG-DAT (0x06 0x06) 195    |  |
| 32.10.5 UBX-CFG-DGNSS (0x06 0x70) 197  |  |
| 32.10.6 UBX-CFG-DOSC (0x06 0x61)  197  |  |
| 32.10.7 UBX-CFG-ESFALG (0x06 0x56) 199 |  |
|                                        |  |



| 32.10.8 UBX-CFG-ESFA (0x06 0x4C) 200       |  |
|--------------------------------------------|--|
| 32.10.9 UBX-CFG-ESFG (0x06 0x4D) 201       |  |
| 32.10.10 UBX-CFG-ESFWT (0x06 0x82)  201    |  |
| 32.10.11 UBX-CFG-ESRC (0x06 0x60) 204      |  |
| 32.10.12 UBX-CFG-GEOFENCE (0x06 0x69) 206  |  |
| 32.10.13 UBX-CFG-GNSS (0x06 0x3E) 207      |  |
| 32.10.14 UBX-CFG-HNR (0x06 0x5C) 210       |  |
| 32.10.15 UBX-CFG-INF (0x06 0x02)  210      |  |
| 32.10.16 UBX-CFG-ITFM (0x06 0x39)  212     |  |
| 32.10.17 UBX-CFG-LOGFILTER (0x06 0x47) 213 |  |
| 32.10.18 UBX-CFG-MSG (0x06 0x01)  215      |  |
| 32.10.19 UBX-CFG-NAV5 (0x06 0x24)  216     |  |
| 32.10.20 UBX-CFG-NAVX5 (0x06 0x23) 219     |  |
| 32.10.21 UBX-CFG-NMEA (0x06 0x17)  226     |  |
| 32.10.22 UBX-CFG-ODO (0x06 0x1E)  234      |  |
| 32.10.23 UBX-CFG-PM2 (0x06 0x3B) 235       |  |
| 32.10.24 UBX-CFG-PMS (0x06 0x86) 242       |  |
| 32.10.25 UBX-CFG-PRT (0x06 0x00)  243      |  |
| 32.10.26 UBX-CFG-PWR (0x06 0x57)  253      |  |
| 32.10.27 UBX-CFG-RATE (0x06 0x08) 254      |  |
| 32.10.28 UBX-CFG-RINV (0x06 0x34) 255      |  |
| 32.10.29 UBX-CFG-RST (0x06 0x04)  256      |  |
| 32.10.30 UBX-CFG-RXM (0x06 0x11) 258       |  |
| 32.10.31 UBX-CFG-SBAS (0x06 0x16)  259     |  |
| 32.10.32 UBX-CFG-SENIF (0x06 0x88)  261    |  |
| 32.10.33 UBX-CFG-SLAS (0x06 0x8D)  262     |  |
| 32.10.34 UBX-CFG-SMGR (0x06 0x62) 263      |  |
| 32.10.35 UBX-CFG-SPT (0x06 0x64) 266       |  |
| 32.10.36 UBX-CFG-TMODE2 (0x06 0x3D) 266    |  |
| 32.10.37 UBX-CFG-TMODE3 (0x06 0x71) 268    |  |
| 32.10.38 UBX-CFG-TP5 (0x06 0x31) 270       |  |
| 32.10.39 UBX-CFG-TXSLOT (0x06 0x53) 274    |  |
| 32.10.40 UBX-CFG-USB (0x06 0x1B) 275       |  |
| 32.11 UBX-ESF (0x10)  277                  |  |
| 32.11.1 UBX-ESF-ALG (0x10 0x14) 277        |  |
| 32.11.2 UBX-ESF-INS (0x10 0x15) 278        |  |
| 32.11.3 UBX-ESF-MEAS (0x10 0x02) 280       |  |
| 32.11.4 UBX-ESF-RAW (0x10 0x03) 281        |  |
| 32.11.5 UBX-ESF-STATUS (0x10 0x10)  282    |  |
| 32.12 UBX-HNR (0x28)  286                  |  |
| 32.12.1 UBX-HNR-ATT (0x28 0x01) 286        |  |
| 32.12.2 UBX-HNR-INS (0x28 0x02) 287        |  |
| 32.12.3 UBX-HNR-PVT (0x28 0x00) 288        |  |



| 32.13 UBX-INF (0x04)  291                        |  |
|--------------------------------------------------|--|
| 32.13.1 UBX-INF-DEBUG (0x04 0x04)  291           |  |
| 32.13.2 UBX-INF-ERROR (0x04 0x00)  291           |  |
| 32.13.3 UBX-INF-NOTICE (0x04 0x02) 292           |  |
| 32.13.4 UBX-INF-TEST (0x04 0x03) 292             |  |
| 32.13.5 UBX-INF-WARNING (0x04 0x01) 293          |  |
| 32.14 UBX-LOG (0x21) 294                         |  |
| 32.14.1 UBX-LOG-BATCH (0x21 0x11)  294           |  |
| 32.14.2 UBX-LOG-CREATE (0x21 0x07)  297          |  |
| 32.14.3 UBX-LOG-ERASE (0x21 0x03)  298           |  |
| 32.14.4 UBX-LOG-FINDTIME (0x21 0x0E)  298        |  |
| 32.14.5 UBX-LOG-INFO (0x21 0x08) 300             |  |
| 32.14.6 UBX-LOG-RETRIEVEBATCH (0x21 0x10)  302   |  |
| 32.14.7 UBX-LOG-RETRIEVEPOSEXTRA (0x21 0x0f) 303 |  |
| 32.14.8 UBX-LOG-RETRIEVEPOS (0x21 0x0b) 303      |  |
| 32.14.9 UBX-LOG-RETRIEVESTRING (0x21 0x0d)  304  |  |
| 32.14.10 UBX-LOG-RETRIEVE (0x21 0x09)  305       |  |
| 32.14.11 UBX-LOG-STRING (0x21 0x04) 306          |  |
| 32.15 UBX-MGA (0x13) 307                         |  |
| 32.15.1 UBX-MGA-ACK (0x13 0x60) 307              |  |
| 32.15.2 UBX-MGA-ANO (0x13 0x20)  308             |  |
| 32.15.3 UBX-MGA-BDS (0x13 0x03) 309              |  |
| 32.15.4 UBX-MGA-DBD (0x13 0x80) 313              |  |
| 32.15.5 UBX-MGA-FLASH (0x13 0x21) 314            |  |
| 32.15.6 UBX-MGA-GAL (0x13 0x02) 316              |  |
| 32.15.7 UBX-MGA-GLO (0x13 0x06)  320             |  |
| 32.15.8 UBX-MGA-GPS (0x13 0x00) 323              |  |
| 32.15.9 UBX-MGA-INI (0x13 0x40)  328             |  |
| 32.15.10 UBX-MGA-QZSS (0x13 0x05) 334            |  |
| 32.16 UBX-MON (0x0A) 338                         |  |
| 32.16.1 UBX-MON-BATCH (0x0A 0x32) 338            |  |
| 32.16.2 UBX-MON-GNSS (0x0A 0x28) 339             |  |
| 32.16.3 UBX-MON-HW2 (0x0A 0x0B) 341              |  |
| 32.16.4 UBX-MON-HW (0x0A 0x09) 342               |  |
| 32.16.5 UBX-MON-IO (0x0A 0x02) 343               |  |
| 32.16.6 UBX-MON-MSGPP (0x0A 0x06) 344            |  |
| 32.16.7 UBX-MON-PATCH (0x0A 0x27) 344            |  |
| 32.16.8 UBX-MON-RXBUF (0x0A 0x07) 346            |  |
| 32.16.9 UBX-MON-RXR (0x0A 0x21) 346              |  |
| 32.16.10 UBX-MON-SMGR (0x0A 0x2E)  347           |  |
| 32.16.11 UBX-MON-SPT (0x0A 0x2F) 350             |  |
| 32.16.12 UBX-MON-TXBUF (0x0A 0x08) 354           |  |
| 32.16.13 UBX-MON-VER (0x0A 0x04) 355             |  |



| 32.17 UBX-NAV (0x01) 357                   |  |
|--------------------------------------------|--|
| 32.17.1 UBX-NAV-AOPSTATUS (0x01 0x60) 357  |  |
| 32.17.2 UBX-NAV-ATT (0x01 0x05) 358        |  |
| 32.17.3 UBX-NAV-CLOCK (0x01 0x22) 359      |  |
| 32.17.4 UBX-NAV-COV (0x01 0x36) 359        |  |
| 32.17.5 UBX-NAV-DGPS (0x01 0x31) 360       |  |
| 32.17.6 UBX-NAV-DOP (0x01 0x04) 361        |  |
| 32.17.7 UBX-NAV-EELL (0x01 0x3d) 362       |  |
| 32.17.8 UBX-NAV-EOE (0x01 0x61) 363        |  |
| 32.17.9 UBX-NAV-GEOFENCE (0x01 0x39) 363   |  |
| 32.17.10 UBX-NAV-HPPOSECEF (0x01 0x13) 364 |  |
| 32.17.11 UBX-NAV-HPPOSLLH (0x01 0x14) 365  |  |
| 32.17.12 UBX-NAV-NMI (0x01 0x28)  367      |  |
| 32.17.13 UBX-NAV-ODO (0x01 0x09) 370       |  |
| 32.17.14 UBX-NAV-ORB (0x01 0x34) 371       |  |
| 32.17.15 UBX-NAV-POSECEF (0x01 0x01)  374  |  |
| 32.17.16 UBX-NAV-POSLLH (0x01 0x02) 374    |  |
| 32.17.17 UBX-NAV-PVT (0x01 0x07)  375      |  |
| 32.17.18 UBX-NAV-RELPOSNED (0x01 0x3C) 379 |  |
| 32.17.19 UBX-NAV-RESETODO (0x01 0x10)  381 |  |
| 32.17.20 UBX-NAV-SAT (0x01 0x35)  381      |  |
| 32.17.21 UBX-NAV-SBAS (0x01 0x32) 383      |  |
| 32.17.22 UBX-NAV-SLAS (0x01 0x42) 385      |  |
| 32.17.23 UBX-NAV-SOL (0x01 0x06) 386       |  |
| 32.17.24 UBX-NAV-STATUS (0x01 0x03) 388    |  |
| 32.17.25 UBX-NAV-SVINFO (0x01 0x30) 390    |  |
| 32.17.26 UBX-NAV-SVIN (0x01 0x3B)  392     |  |
| 32.17.27 UBX-NAV-TIMEBDS (0x01 0x24)  393  |  |
| 32.17.28 UBX-NAV-TIMEGAL (0x01 0x25)  394  |  |
| 32.17.29 UBX-NAV-TIMEGLO (0x01 0x23) 395   |  |
| 32.17.30 UBX-NAV-TIMEGPS (0x01 0x20)  397  |  |
| 32.17.31 UBX-NAV-TIMELS (0x01 0x26) 398    |  |
| 32.17.32 UBX-NAV-TIMEUTC (0x01 0x21) 400   |  |
| 32.17.33 UBX-NAV-VELECEF (0x01 0x11)  401  |  |
| 32.17.34 UBX-NAV-VELNED (0x01 0x12) 402    |  |
| 32.18 UBX-RXM (0x02) 403                   |  |
| 32.18.1 UBX-RXM-IMES (0x02 0x61)  403      |  |
| 32.18.2 UBX-RXM-MEASX (0x02 0x14) 406      |  |
| 32.18.3 UBX-RXM-PMREQ (0x02 0x41)  407     |  |
| 32.18.4 UBX-RXM-RAWX (0x02 0x15) 409       |  |
| 32.18.5 UBX-RXM-RLM (0x02 0x59) 416        |  |
| 32.18.6 UBX-RXM-RTCM (0x02 0x32) 418       |  |
| 32.18.7 UBX-RXM-SFRBX (0x02 0x13) 419      |  |



| 32.18.8 UBX-RXM-SVSI (0x02 0x20) 421                |  |
|-----------------------------------------------------|--|
| 32.19 UBX-SEC (0x27)  423                           |  |
| 32.19.1 UBX-SEC-UNIQID (0x27 0x03)  423             |  |
| 32.20 UBX-TIM (0x0D)  424                           |  |
| 32.20.1 UBX-TIM-DOSC (0x0D 0x11) 424                |  |
| 32.20.2 UBX-TIM-FCHG (0x0D 0x16)  424               |  |
| 32.20.3 UBX-TIM-HOC (0x0D 0x17) 425                 |  |
| 32.20.4 UBX-TIM-SMEAS (0x0D 0x13) 426               |  |
| 32.20.5 UBX-TIM-SVIN (0x0D 0x04) 428                |  |
| 32.20.6 UBX-TIM-TM2 (0x0D 0x03)  429                |  |
| 32.20.7 UBX-TIM-TOS (0x0D 0x12) 430                 |  |
| 32.20.8 UBX-TIM-TP (0x0D 0x01) 432                  |  |
| 32.20.9 UBX-TIM-VCOCAL (0x0D 0x15) 434              |  |
| 32.20.10 UBX-TIM-VRFY (0x0D 0x06) 437               |  |
| 32.21 UBX-UPD (0x09) 438                            |  |
| 32.21.1 UBX-UPD-SOS (0x09 0x14) 438                 |  |
| 33 RTCM Protocol  441                               |  |
| 33.1 RTCM2 441                                      |  |
| 33.1.1 Introduction  441                            |  |
| 33.1.2 Supported Messages 441                       |  |
| 33.1.3 Configuration 441                            |  |
| 33.1.4 Output  441                                  |  |
| 33.1.5 Restrictions 442                             |  |
| 33.1.6 Reference 442                                |  |
| 33.2 RTCM version 3  442                            |  |
| 33.2.1 Introduction 442                             |  |
| 33.2.2 Supported Messages  443                      |  |
| 33.2.3 u-blox Proprietary RTCM Messages 444         |  |
| 33.2.4 Configuration  444                           |  |
| 33.2.5 Output  445                                  |  |
| 33.2.6 Reference 445                                |  |
| Appendix 446                                        |  |
| A Satellite Numbering 446                           |  |
| B UBX and NMEA Signal Identifiers 446               |  |
| C u-blox 8 / u-blox M8 Default Settings  446        |  |
| C.1 Antenna Supervisor Settings (UBX-CFG-ANT)  446  |  |
| C.2 Data Batching Settings (UBX-CFG-BATCH) 447      |  |
| C.3 Datum Settings (UBX-CFG-DAT) 447                |  |
| C.4 Geofencing Settings (UBX-CFG-GEOFENCE)  447     |  |
| C.5 High Navigation Rate Settings (UBX-CFG-HNR) 448 |  |
| C.6 GNSS System Settings (UBX-CFG-GNSS)  448        |  |
| C.7 INF Messages Settings (UBX-CFG-INF) 448         |  |
| C.7.1 UBX Protocol 448                              |  |

<span id="page-14-0"></span>

| C.7.2 NMEA Protocol 449                                         |  |
|-----------------------------------------------------------------|--|
| C.8 Jammer/Interference Monitor Settings (UBX-CFG-ITFM)  449    |  |
| C.9 Logging Settings (UBX-CFG-LOGFILTER) 449                    |  |
| C.10 Navigation Settings (UBX-CFG-NAV5) 449                     |  |
| C.11 Navigation Settings (UBX-CFG-NAVX5) 450                    |  |
| C.12 NMEA Protocol Settings (UBX-CFG-NMEA) 452                  |  |
| C.13 Odometer Settings (UBX-CFG-ODO) 452                        |  |
| C.14 Power Management 2 Configuration (UBX-CFG-PM2) 452         |  |
| C.15 Port Configuration (UBX-CFG-PRT)  453                      |  |
| C.15.1 UART Port Configuration 453                              |  |
| C.15.2 USB Port Configuration 453                               |  |
| C.15.3 SPI Port Configuration 454                               |  |
| C.15.4 DDC Port Configuration 454                               |  |
| C.16 Output Rate Settings (UBX-CFG-RATE)  454                   |  |
| C.17 Remote Inventory Settings (UBX-CFG-RINV) 455               |  |
| C.18 Receiver Manager Configuration Settings (UBX-CFG-RXM)  455 |  |
| C.19 SBAS Configuration Settings (UBX-CFG-SBAS)  455            |  |
| C.20 Timepulse Settings (UBX-CFG-TP5) 456                       |  |
| C.21 USB Settings (UBX-CFG-USB) 456                             |  |
| Related Documents 457                                           |  |
| Overview 457                                                    |  |
| Revision History  458                                           |  |
| Contact  460                                                    |  |
| u-blox Offices  460                                             |  |

<span id="page-15-0"></span>

# **Preface**

## <span id="page-15-1"></span>**1 Document Overview**

The interface description including receiver description is an important resource for integrating and configuring u-blox receivers. This document has a modular structure and it is not necessary to read it from the beginning to the end. There are two main sections: The Receiver Description and the Interface Description.

The Receiver Description describes the software aspects of system features and configuration of u-blox receivers. The Receiver Description is structured according to areas of functionality, with links provided to the corresponding NMEA and UBX messages, which are described in the Interface Description.

The Interface Description is a reference describing the messages used by the u-blox receiver and is organized by the specific NMEA, UBX, and RTCM messages.

## This document provides general information on u-blox receivers. Some information might not apply to certain products. Refer to the product data sheet and/or integration manual for possible restrictions or limitations.

## <span id="page-15-2"></span>**2 Firmware and Protocol Versions**

The protocol version defines a set of messages that are applicable across various u-blox products. Each firmware used by a u-blox receiver supports a specific protocol version, which is not configurable.

The following sections will explain how to decode the shown information to get the firmware and the protocol version.

## <span id="page-15-3"></span>**2.1 How to Determine the Version and the Location of the Firmware**

The u-blox receiver contains a firmware in two different locations:

- Internal ROM
- External flash memory

The location and the version of the currently running firmware can be found in the boot screen or in the UBX-MON-VER message.

For firmware supporting [Protocol Version 17 and below:](#page-21-1)

- [Boot screen, Protocol Version 17 and below](#page-15-4)
- [UBX-MON-VER, Protocol Version 17 and below](#page-18-0)

For firmware supporting [Protocol Version from 18 to 23.01:](#page-21-1)

- [Boot screen, Protocol Version from 18 to 23.01](#page-17-0)
- [UBX-MON-VER, Protocol Version 18 to 23.01](#page-20-0)

## <span id="page-15-4"></span>**2.1.1 Decoding the Boot Screen (for Protocol Version 17 and Below)**

Boot screen for a u-blox receiver running from ROM:



| Text Console<br><b>ABLE</b>                                                                                                                                                                                                                                                                                                                                                                                                                                       |                     |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
| 22:22:22<br>$SGNTXT$ , 01, 01, 02, u-blox AG - www. u-blox. com*4E<br>\$GNTXT.01.01.02.HW UBX-M80xx 00080000 *43<br>22:22:22<br>\$GNTXT, 01, 01, 02, ROM CORE 2.01 (75331) Oct 29 2013 13:28:17*4A<br>27:27:27<br>22:22:22<br>\$GNTXT, 01, 01, 02, PROTVER 15, 00*01<br>22:22:22<br>$SGNTXT, 01, 01, 02, GNSS$ OTP: GPS GLO, SEL: GPS GLO*67<br>22:22:22<br>\$GNTXT.01.01.02.ANTSUPERV=AC SD PDoS SR*3E<br>22:22:22<br>\$GNTXT, 01, 01, 02, ANTSTATUS=DONTKNOW*2D | ▴<br>$\overline{a}$ |
| \$GNTXT,01,01,02,LLC FFFFFFFF-FF7F7C3F-FFFFFF96-FFFFFFFF-FFFFFF79*41<br>27:27:27<br>\$GNTXT, 01, 01, 02, RF0 dev ok*04<br>??:??:??<br>誣<br>ΠП                                                                                                                                                                                                                                                                                                                     |                     |

Boot screen for a u-blox receiver running from flash:

| Text Console<br>-9                                                                 |   |
|------------------------------------------------------------------------------------|---|
| 07:24:13<br>$SGNTXT.01.01.02.u-bllox AG - www.u-bllox.com*4E$                      |   |
| \$GNTXT, 01, 01, 02, HW UBX-M80xx 00080000 *43<br> 07:24:13                        |   |
| \$GNTXT.01.01.02.EXT CORE 2.01 (75350) Oct 29 2013 16:15:41*5C<br> 07:24:13        |   |
| \$GNTXT, 01, 01, 02, ROM BASE 2.01 (75331) Oct 29 2013 13:28:17*44<br> 07:24:13    | Ξ |
| 07:24:13<br>\$GNTXT, 01, 01, 02, PROTVER 15, 00*01                                 |   |
| 07:24:13<br>\$GNTXT,01,01,02,GNSS OTP: GPS GLO, SEL: GPS GLO*67                    |   |
| 07:24:13<br>\$GNTXT, 01, 01, 02, ANTSUPERV=AC SD PDoS SR*3E                        |   |
| 107:24:13<br>\$GNTXT, 01, 01, 02, ANTSTATUS=DONTKNOW*2D                            |   |
| \$GNTXT, 01, 01, 02, FIS 0xEF4015 (100111) found*13<br> 07:24:13                   |   |
| \$GNTXT.01.01.02.LLC FFFFFFFF-FFFFFFED-FFFFFFFFF-FFFFFFFF-FFFFFF69*3E<br> 07:24:13 |   |
| \$GNTXT, 01, 01, 02, RF0 dev ok*04<br> 07:24:13                                    |   |
|                                                                                    |   |
| å                                                                                  |   |

Not every line is output by every u-blox receiver in the boot screen. This depends on the product, the firmware location and the firmware version.

### **Possible lines in the boot screen and their meanings:**

| Entry                       | Description                                                  |
|-----------------------------|--------------------------------------------------------------|
| u-blox AG - www.u-blox.com  | Start of the boot screen                                     |
| HW UBX-M80xx 00800000       | Hardware version of the u-blox receiver (u-blox M8 receiver) |
| ROM CORE 2.01 (75331)       | Firmware version 2.01 running from ROM (revision number)     |
| Oct 29 2013 13:28:17        | compilation date/time                                        |
| EXT CORE 2.01 (75350)       | Firmware version 2.01 running from flash (revision number)   |
| Oct 29 2013 16:15:41        | compilation date/time                                        |
| ROM BASE 2.01 (75331)       | Underlying firmware version 2.01 in ROM (revision number)    |
| Oct 29 2013 13:28:17        | compilation date/time                                        |
| PROTVER 15.00               | Supported protocol version                                   |
| GNSS OTP:<br>GPS GLO,       | Default Major GNSS selection.                                |
| SEL:<br>GPS GLO             | Current Major GNSS selection.                                |
| ANTSUPERV=AC SD PDoS SR     | Configuration of the Antenna supervisor where                |
|                             | AC: Active Antenna Control enabled                           |
|                             | SD: Short Circuit Detection enabled                          |
|                             | OD: Open Circuit Detection enabled                           |
|                             | PDoS: Short Circuit Power Down Logic enabled                 |
|                             | SR: Automatic Recovery from Short state                      |
| LLC FFFFFFFF-FF7F7C3F       | Low-level configuration of the u-blox receiver.              |
| FFFFFF96-FFFFFFFF-FFFFFF79  |                                                              |
| FIS 0xEF4015 (100111) found | Flash Information Structure (FIS) file for flash memory with |
|                             | JEDEC 0xEF4015 found in the external flash memory. Revision  |
|                             | number of the file is indicated in brackets.                 |



Possible lines in the boot screen and their meanings: continued

| Entry                                            | Description |
|--------------------------------------------------|-------------|
| RF0 dev ok<br>RF channel 0 configured correctly. |             |
|                                                  |             |

The line containing the CORE indicates which version of the firmware is currently running. The firmware is running either from ROM (indicated with ROM CORE) or from external flash memory (indicated with EXT CORE).

The line containing the CORE is called **firmware string** in the rest of the document.

## <span id="page-17-0"></span>**2.1.2 Decoding the Boot Screen (for Protocol Version from 18 to 23.01)**

Boot screen for a u-blox receiver running from ROM:

| Text Console             |                                                                   |   |
|--------------------------|-------------------------------------------------------------------|---|
| 09:06:40                 | $SGNTXT, 01, 01, 02, u-b \n\log AG - www.u-b \n\log x \n\cong 4E$ | ┻ |
| 109:06:40                | \$GNTXT, 01, 01, 02, HW UBX-M8030 00080000*60                     |   |
| 109:06:40                | \$GNTXT.01.01.02.ROM CORE 3.01 (107888)*2B                        | E |
| $ 09:06:40\rangle$       | \$GNTXT, 01, 01, 02, FWVER=SPG 3.01*46                            |   |
| 109:06:40                | \$GNTXT, 01, 01, 02, PROTVER=18, 00*11                            |   |
| 109:06:40                | \$GNTXT, 01, 01, 02, GPS; GLO; GAL; BDS*77                        |   |
| 109:06:40                | \$GNTXT, 01, 01, 02, SBAS; IMES; QZSS*49                          |   |
| 109:06:40                | \$GNTXT, 01, 01, 02, GNSS OTP=GPS; GLO*37                         |   |
| 09:06:40                 | \$GNTXT.01.01.02.LLC=FFFFFFFF-FFFFFFFFFFFFFFFFFFFFFFFFFFF         |   |
| 109:06:40                | \$GNTXT, 01, 01, 02, ANTSUPERV=AC SD PDoS SR*3E                   |   |
| 09:06:40                 | \$GNTXT, 01, 01, 02, ANTSTATUS=DONTKNOW*2D                        |   |
| $\vert 09:06:40 \rangle$ | \$GNTXT.01.01.02.PF=3FF*4B                                        |   |
|                          |                                                                   |   |
| ீ<br>誣                   |                                                                   |   |

Boot screen for a u-blox receiver running from flash:

| <sup>o</sup> . Text Console | $\vert$ = $\vert$                                                     |  |
|-----------------------------|-----------------------------------------------------------------------|--|
| [09:15:59]                  | $SGNTXT, 01, 01, 02, u-b \nvert v - KG - www.u-b \nvert v - KG$       |  |
| 109:15:59                   | \$GNTXT, 01, 01, 02, HW UBX-M8030 00080000*60                         |  |
| 109:15:59                   | \$GNTXT, 01, 01, 02, EXT CORE 3.01 (107900)*33                        |  |
| 09:15:59                    | \$GNTXT, 01, 01, 02, ROM BASE 3.01 (107888)*25                        |  |
| 09:15:59                    | \$GNTXT, 01, 01, 02, FWVER=SPG 3, 01*46                               |  |
| 09:15:59                    | \$GNTXT, 01, 01, 02, PROTVER=18, 00*11                                |  |
| 109:15:59                   | \$GNTXT, 01, 01, 02, MOD=NEO-M8N-0*67                                 |  |
| 109:15:59                   | \$GNTXT, 01, 01, 02, FIS=0xEF4015 (100111)*58                         |  |
| 109:15:59                   | \$GNTXT, 01, 01, 02, GPS; GLO; GAL; BDS*77                            |  |
| $ 09:15:59\rangle$          | \$GNTXT, 01, 01, 02, SBAS; IMES; QZSS*49                              |  |
| 09:15:59                    | \$GNTXT, 01, 01, 02, GNSS OTP=GPS; GLO*37                             |  |
| $\vert 09:15:59 \rangle$    | \$GNTXT,01,01,02,LLC=FFFFFFFF-FFFFFFEC-FFFFFFFFF-FFFFFFBF-FFFFFF68*21 |  |
| $\vert 09:15:59 \rangle$    | \$GNTXT, 01, 01, 02, ANTSUPERV=AC SD PDoS SR*3E                       |  |
| IO9:15:59                   | \$GNTXT, 01, 01, 02, ANTSTATUS=DONTKNOW*2D                            |  |
| 09:15:59                    | \$GNTXT, 01, 01, 02, PF=3FB*4F                                        |  |
|                             |                                                                       |  |

Not every line is output by every u-blox receiver in the boot screen. This depends on the product, the firmware location and the firmware version.

| Entry                      | Description                                                  |  |
|----------------------------|--------------------------------------------------------------|--|
| u-blox AG - www.u-blox.com | Start of the boot screen                                     |  |
| HW UBX-M8030 00800000      | Hardware version of the u-blox receiver (u-blox M8 receiver) |  |
| HW UBX-G8020 00800000      | Hardware version of the u-blox receiver (u-blox 8 receiver)  |  |
| ROM CORE 3.01 (107888)     | Firmware version 3.01 running from ROM (revision number)     |  |
| EXT CORE 3.01 (107900)     | Firmware version 3.01 running from flash (revision number)   |  |
| ROM BASE 3.01 (107888)     | Underlying firmware version 3.01 in ROM (revision number)    |  |

#### **Possible lines in the boot screen and their meanings:**



Possible lines in the boot screen and their meanings: continued

| Entry                      | Description                                                  |
|----------------------------|--------------------------------------------------------------|
| FWVER=SPG 3.01             | Firmware of product category and version where               |
|                            | SPG: Firmware of Standard Precision GNSS product             |
|                            | HPG: Firmware of High Precision GNSS product                 |
|                            | ADR: Firmware of ADR product                                 |
|                            | UDR: Firmware of UDR product                                 |
|                            | TIM: Firmware of Time Sync product                           |
|                            | FTS: Firmware of Time & Frequency Sync product               |
| PROTVER=18.00              | Supported protocol version                                   |
| MOD=NEO-M8N-0              | Module identification. Set in production.                    |
| FIS=0xEF4015 (100111)      | Flash Information Structure (FIS) file for flash memory with |
|                            | JEDEC 0xEF4015 found in the external flash memory. Revision  |
|                            | number of the file is indicated in brackets.                 |
| GPS;GLO;GAL;BDS            | Supported Major GNSS.                                        |
| SBAS;IMES;QZSS             | Supported Augmentation systems.                              |
| GNSS OTP=GPS;GLO           | Default Major GNSS selection.                                |
| LLC FFFFFFFF-FFFFFFFF      | Low-level configuration of the u-blox receiver.              |
| FFFFFFFF-FFFFFFFF-FFCFFFFF |                                                              |
| ANTSUPERV=AC SD PDoS SR    | Configuration of the Antenna supervisor where                |
|                            | AC: Active Antenna Control enabled                           |
|                            | SD: Short Circuit Detection enabled                          |
|                            | OD: Open Circuit Detection enabled                           |
|                            | PDoS: Short Circuit Power Down Logic enabled                 |
|                            | SR: Automatic Recovery from Short state                      |
| PF=3FF                     | Product configuration.                                       |

The line containing the FWVER indicates which version of the firmware is currently running and is called **firmware version** in the rest of the document.

The numbers in parentheses (revision numbers) should only be used to identify a known firmware version and are not guaranteed to increase over time.

## <span id="page-18-0"></span>**2.1.3 Decoding the output of UBX-MON-VER (for Protocol Version 17 and below)**



| UBX-MON-VER for receiver                               | UBX-MON-VER for receiver                                                                        |
|--------------------------------------------------------|-------------------------------------------------------------------------------------------------|
| running from ROM                                       | running from Flash                                                                              |
| $\bullet$ Messages - UBX - M $\Box$                    | ● Messages - UBX - M $\boxed{\Box}$                                                             |
| $\mathbf{z}$                                           | -23                                                                                             |
| UBX - MON (Monitor) - VER (Version)                    | UBX - MON (Monitor) - VER (Version)                                                             |
| Software Version                                       | Software Version                                                                                |
| 2.01 (75331)                                           | 2.01 (75350)                                                                                    |
| Hardware Version                                       | Hardware Version                                                                                |
| 00080000                                               | 00080000                                                                                        |
| Extension(s)<br>PROTVER 15.00<br>GPS:SBAS:GLO:BDS:QZSS | Extension(s)<br>2.01 (75331)<br>PROTVER 15.00<br>FIS 0xEF4015 (100111)<br>GPS;SBAS;GLO;BDS;QZSS |
| B <sup>≥</sup> Poll  没<br>手Send                        | ia Send n <sup>3</sup> Poll<br>a<br>  没                                                         |

## **Possible fields in UBX-MON-VER and their meanings:**

| Entry            | Description                                                        |
|------------------|--------------------------------------------------------------------|
| Software Version | Currently running firmware version.                                |
|                  | If no firmware version is shown in the first line of Extension(s), |
|                  | then the u-blox receiver runs from ROM.                            |
|                  | If a firmware version is shown in the first line of Extension(s),  |
|                  | then the u-blox receiver runs from flash.                          |
| Hardware Version | The hardware version of the u-blox receiver.                       |
| Extension(s)     | Extended information about the u-blox receiver firmware. See       |
|                  | table below for the entries.                                       |

Not every entry is output by every u-blox receiver in the UBX-MON-VER extensions. This depends on the product, the firmware location and the firmware version.

## **Possible entries in UBX-MON-VER Extension(s):**

| Entry                 | Description                                                     |  |
|-----------------------|-----------------------------------------------------------------|--|
| 2.01 (75331)          | Underlying firmware version in ROM.                             |  |
|                       | If such an entry is present, then the u-blox receiver runs from |  |
|                       | flash.                                                          |  |
| PROTVER 15.00         | Supported protocol version.                                     |  |
| FIS 0xEF4015 (100111) | Flash Information Structure (FIS) file for flash memory with    |  |
|                       | JEDEC 0xEF4015 found in the external flash memory. Revision     |  |
|                       | number of the file is indicated in brackets.                    |  |
| MOD NEO-M8N-0         | Module identification. Set in production.                       |  |
| GPS;SBAS;GLO;BDS;QZSS | Supported GNSS.                                                 |  |



## <span id="page-20-0"></span>**2.1.4 Decoding the output of UBX-MON-VER (for Protocol Version from 18 and 23.01)**

| UBX-MON-VER for receiver<br>running from ROM                                                                                              | UBX-MON-VER for receiver<br>running from Flash                                                                                                                                                                                                                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| O. Messages - UBX - M $\boxed{\phantom{a}}$ $\boxed{\phantom{a}}$ $\boxed{\phantom{a}}$                                                   | <b>O.</b> Messages - UBX - M $\boxed{\Box}$ $\boxed{\Box}$                                                                                                                                                                                                                                  |
| UBX - MON (Monitor) - VER (Version)                                                                                                       | UBX - MON (Monitor) - VER (Version)                                                                                                                                                                                                                                                         |
| Software Version                                                                                                                          | Software Version                                                                                                                                                                                                                                                                            |
| ROM CORE 3.01 (107888)                                                                                                                    | EXT CORE 3.01 (107900)                                                                                                                                                                                                                                                                      |
| Hardware Version                                                                                                                          | Hardware Version                                                                                                                                                                                                                                                                            |
| 00080000                                                                                                                                  | 00080000                                                                                                                                                                                                                                                                                    |
| Extension(s)                                                                                                                              | Extension(s)                                                                                                                                                                                                                                                                                |
| FWVER=SPG 3.01                                                                                                                            | ROM BASE 3.01 (107888)                                                                                                                                                                                                                                                                      |
| PROTVER=18.00<br>GPS:GLO:GAL:BDS                                                                                                          | FWVER=SPG 3.01<br>PROTVER=18.00                                                                                                                                                                                                                                                             |
| SBAS:IMES:0ZSS                                                                                                                            | MOD=NEO-M8N-0                                                                                                                                                                                                                                                                               |
|                                                                                                                                           | FIS=0xEF4015 (100111)                                                                                                                                                                                                                                                                       |
|                                                                                                                                           | GPS;GLO;GAL;BDS<br>SBAS:IMES:0ZSS                                                                                                                                                                                                                                                           |
|                                                                                                                                           |                                                                                                                                                                                                                                                                                             |
|                                                                                                                                           |                                                                                                                                                                                                                                                                                             |
| $\mathsf{X} \parallel \widehat{\mathbb{E}}$ Send $\mathbb{E}^\mathbf{P}$ Poll $\mathbb{R}^\mathbf{C} \parallel \widehat{\mathbb{E}}$<br>a | $\left \begin{array}{c c c c} \mathbf{a} & \mathbf{b} & \mathbf{c} & \mathbf{c} \ \hline \mathbf{c} & \mathbf{c} & \mathbf{c} \end{array} \right  \leq \left \begin{array}{c c c c} \mathbf{c} & \mathbf{c} & \mathbf{c} \ \hline \mathbf{c} & \mathbf{c} & \mathbf{c} \end{array} \right $ |

## **Possible fields in UBX-MON-VER and their meanings:**

| Entry                  | Description                                                  |  |
|------------------------|--------------------------------------------------------------|--|
| Software Version       | Currently running firmware version.                          |  |
| ROM CORE 3.01 (107888) | If ROM CORE, then the u-blox receiver runs from ROM.         |  |
| EXT CORE 3.01 (107900) | If EXT CORE, then the u-blox receiver runs from Flash.       |  |
| Hardware Version       | The hardware version of the u-blox receiver.                 |  |
| Extension(s)           | Extended information about the u-blox receiver firmware. See |  |
|                        | table below for the entries.                                 |  |

Not every entry is output by every u-blox receiver in the UBX-MON-VER extensions. This depends on the product, the firmware location and the firmware version.

## **Possible entries in UBX-MON-VER Extension(s):**

| Entry                  | Description                                                     |
|------------------------|-----------------------------------------------------------------|
| ROM BASE 3.01 (107888) | Underlying firmware version in ROM.                             |
|                        | If such an entry is present, then the u-blox receiver runs from |
|                        | flash.                                                          |
| FWVER=SPG 3.01         | Firmware of product category and version where                  |
|                        | SPG: Firmware of Standard Precision GNSS product                |
|                        | HPG: Firmware of High Precision GNSS product                    |
|                        | ADR: Firmware of ADR product                                    |
|                        | UDR: Firmware of UDR product                                    |
|                        | TIM: Firmware of Time Sync product                              |
|                        | FTS: Firmware of Time & Frequency Sync product                  |
| PROTVER=18.00          | Supported protocol version.                                     |
| MOD=NEO-M8N-0          | Module identification. Set in production.                       |



Possible entries in UBX-MON-VER Extension(s): continued

| Entry                 | Description                                                  |
|-----------------------|--------------------------------------------------------------|
| FIS=0xEF4015 (100111) | Flash Information Structure (FIS) file for flash memory with |
|                       | JEDEC 0xEF4015 found in the external flash memory. Revision  |
|                       | number of the file is indicated in brackets.                 |
| GPS;GLO;GAL;BDS       | Supported Major GNSS.                                        |
| SBAS;IMES;QZSS        | Supported Augmentation systems.                              |

## <span id="page-21-0"></span>**2.2 How to Determine the Supported Protocol Version of the u-blox Receiver**

Each u-blox receiver reports its supported protocol version in the following ways:

- On start-up in the [boot screen](#page-17-0)
- In the [UBX-MON-VER message](#page-20-0)

with the line containing PROTVER (example: PROTVER=18.00).

Additionally, the firmware string, together with the firmware version, can be used to look up the corresponding protocol version. The tables below give an overview of the released firmware and their corresponding protocol versions.

## <span id="page-21-1"></span>**2.2.1 u-blox 8 / u-blox M8 Firmware and Supported Protocol Versions**

## **Firmware for Standard Precision GNSS products**

| Firmware version | Firmware string                            | Protocol Version |
|------------------|--------------------------------------------|------------------|
| SPG 2.01         | ROM CORE 2.01 (75331) Oct 29 2013 13:28:17 | 15.00            |
| SPG 2.01         | EXT CORE 2.01 (75350) Oct 29 2013 16:15:41 | 15.00            |
| SPG 3.01         | ROM CORE 3.01 (107888)                     | 18.00            |
| SPG 3.01         | EXT CORE 3.01 (107900)                     | 18.00            |
| SPG 3.05         | EXT CORE 3.05 (a5d3549)                    | 18.00            |
| SPG 3.50         | EXT CORE 3.50 (190461)                     | 23.00            |
| SPG 3.51         | ROM CORE 3.51 (19dc23)                     | 23.01            |
| SPG 3.51         | EXT CORE 3.51 (19dc23)                     | 23.01            |

#### **Firmware for High Precision GNSS Products**

| Firmware version | Firmware string        | Protocol Version |
|------------------|------------------------|------------------|
| HPG 1.00         | EXT CORE 3.01 (111160) | 20.00            |
| HPG 1.11         | EXT CORE 3.01 (b8bc67) | 20.01            |
| HPG 1.20         | EXT CORE 3.01 (d34ed4) | 20.10            |
| HPG 1.30         | EXT CORE 3.01 (d080e3) | 20.20            |
| HPG 1.40         | EXT CORE 3.01 (db0c89) | 20.30            |
| HPG 1.43         | EXT CORE 3.05 (ff96ba) | 20.30            |

#### **Firmware for Dead Reckoning products**

| Firmware version | Firmware string                                       | Protocol Version |
|------------------|-------------------------------------------------------|------------------|
| ADR 3.00         | EXT CORE 2.01 (77076) Dec 18 2013 09:40:24 ADR 3.00   | 15.00            |
| ADR 3.10         | EXT CORE 2.01 (87683) Nov 21 2014 14:03:10 ADR 3.10   | 15.01            |
|                  | M8L                                                   |                  |
| ADR 3.11         | EXT CORE 2.01 (89981) Jan 20 2015 17:22:06 ADR 3.11   | 15.01            |
|                  | M8L                                                   |                  |
| ADR 4.00         | EXT CORE 3.01 (16559bf) Apr 21 2016 15:49:07 ADR 4.00 | 19.00            |



#### Firmware for Dead Reckoning products continued

| Firmware version | Firmware string                                       | Protocol Version |
|------------------|-------------------------------------------------------|------------------|
| ADR 4.10         | EXT CORE 3.01 (c0c787c) Apr 24 2017 17:31:42 ADR 4.10 | 19.10            |
| ADR 4.11         | EXT CORE 3.01 (d189ff) Aug 22 2017 14:40:05 ADR 4.11  | 19.10            |
| ADR 4.21         | EXT CORE 3.01 (3620e2)                                | 19.20            |
| ADR 4.31         | EXT CORE 3.01 (e3981c)                                | 19.20            |
| ADR 4.50         | EXT CORE 3.01 (86c0ce)                                | 19.20            |
| UDR 1.00         | EXT CORE 3.01 (16559bf) Apr 21 2016 15:50:59 UDR 1.00 | 19.00            |
| UDR 1.21         | EXT CORE 3.01 (3620e2)                                | 19.20            |
| UDR 1.31         | EXT CORE 3.01 (e3981c)                                | 19.20            |
| UDR 1.50         | EXT CORE 3.01 (86c0ce)                                | 19.20            |

#### **Firmware for Timing products**

| Firmware version | Firmware string                            | Protocol Version |
|------------------|--------------------------------------------|------------------|
| FTS 1.01         | EXT CORE 2.20 (81289) May 14 2014 14:11:24 | 16.00            |
| TIM 1.00         | EXT CORE 2.30 (85522) Sep 29 2014 09:40:12 | 17.00            |
| TIM 1.01         | EXT CORE 2.30 (86283) Oct 20 2014 13:51:49 | 17.00            |
| TIM 1.02         | EXT CORE 2.30 (93796) Apr 8 2015 15:53:38  | 17.00            |
| TIM 1.10         | EXT CORE 3.01 (111141)                     | 22.00            |
| TIM 1.11         | EXT CORE 3.01 (29b2c9)                     | 22.01            |
| TIM 1.12         | EXT CORE 3.01 (3e7a32)                     | 22.01            |

<span id="page-23-0"></span>

# **Receiver Description**

## <span id="page-23-1"></span>**3 Receiver Configuration**

## <span id="page-23-2"></span>**3.1 Configuration Concept**

u-blox receivers are fully configurable with UBX protocol configuration messages (message class UBX-CFG). The configuration used by the u-blox receiver during normal operation is called "Current Configuration". The Current Configuration can be changed during normal operation by sending any UBX-CFG-XXX message to the u-blox receiver over an I/O port. The u-blox receiver will change its Current Configuration immediately after receiving the configuration message. The ublox receiver always uses only the Current Configuration.

Unless the Current Configuration is made permanent by using [UBX-CFG-CFG](#page-207-1) as described below, the Current Configuration will be lost when there is:

- a power cycle
- a hardware reset
- a (complete) controlled software reset

See the [section on resetting a u-blox receiver](#page-81-0) for details.

The Current Configuration can be made permanent (stored in a non-volatile memory) by saving it to the "Permanent Configuration". This is done by sending a [UBX-CFG-CFG](#page-207-1) message with an appropriate **saveMask** (UBX-CFG-CFG/save).

The Permanent Configuration is copied to the Current Configuration during start-up or when a [UBX-CFG-CFG](#page-207-1) message with an appropriate **loadMask** (UBX-CFG-CFG/load) is sent to the u-blox receiver.

The Permanent Configuration can be restored to the u-blox receiver's Default Configuration by sending a [UBX-CFG-CFG](#page-207-1) message with an appropriate **clearMask** (UBX-CFG-CFG/clear) to the ublox receiver. This only replaces the Permanent Configuration, not the Current Configuration. To make the u-blox receiver operate with the Default Configuration which was restored to the Permanent Configuration, a UBX-CFG-CFG/load command must be sent or the u-blox receiver must be reset.

The mentioned masks (saveMask, loadMask, clearMask) are 4-byte bitfields. Every bit represents one configuration sub-section. These sub-sections are defined in section ["Organization of the](#page-24-0) [Configuration Sections".](#page-24-0) All three masks are part of every UBX-CFG-CFG message. Save, load and clear commands can be combined in the same message. Order of execution is: clear, save, load. The following diagram illustrates the process:





It is possible to change the current communications port settings using a [UBX-CFG-CFG](#page-207-1) message. This could affect baud rate and other transmission parameters. Because there may be messages queued for transmission there may be uncertainty about which protocol applies to such messages. In addition a message currently in transmission may be corrupted by a protocol change. Host data reception parameters may have to be changed to be able to receive future messages, including the acknowledge message associated with the UBX-CFG-CFG message.

## <span id="page-24-0"></span>**3.2 Organization of the Configuration Sections**

The configuration is divided into several sub-sections. Each of these sub-sections corresponds to one or several UBX-CFG-XXX messages. The sub-section numbers in the following tables correspond to the bit position in the masks mentioned above. All values not listed are reserved.

| Number | Name | CFG messages   | Description                                            |  |
|--------|------|----------------|--------------------------------------------------------|--|
| 0      | PRT  | UBX-CFG-PRT    | Port and USB settings                                  |  |
|        |      | UBX-CFG-USB    |                                                        |  |
| 1      | MSG  | UBX-CFG-MSG    | Message settings (enable/disable, update rate)         |  |
| 2      | INF  | UBX-CFG-INF    | Information output settings (Errors, Warnings, Notice, |  |
|        |      |                | Test etc.)                                             |  |
| 3      | NAV  | UBX-CFG-NAV5   | Settings for Navigation Parameters, Receiver Datum,    |  |
|        |      | UBX-CFG-NAVX5  | Measurement and Navigation Rate, SBAS, NMEA            |  |
|        |      | UBX-CFG-DAT    | protocol and Time mode (Timing products only)          |  |
|        |      | UBX-CFG-RATE   |                                                        |  |
|        |      | UBX-CFG-SBAS   |                                                        |  |
|        |      | UBX-CFG-NMEA   |                                                        |  |
|        |      | UBX-CFG-TMODE2 |                                                        |  |
| 4      | RXM  | UBX-CFG-GNSS   | GNSS Settings, Power Mode Settings, Time Pulse         |  |
|        |      | UBX-CFG-TP5    | Settings, Jamming/Interference Monitor Settings        |  |
|        |      | UBX-CFG-RXM    |                                                        |  |
|        |      | UBX-CFG-PM2    |                                                        |  |
|        |      | UBX-CFG-ITFM   |                                                        |  |
| 9      | RINV | UBX-CFG-RINV   | Remote Inventory configuration                         |  |
| 10     | ANT  | UBX-CFG-ANT    | Antenna configuration                                  |  |
| 11     | LOG  | UBX-CFG        | Logging configuration                                  |  |
|        |      | LOGFILTER      |                                                        |  |

## **Configuration sub-sections**



Configuration sub-sections continued

| Number | Name | CFG messages | Description                                               |
|--------|------|--------------|-----------------------------------------------------------|
| 12     | FTS  | UBX-CFG-DOSC | Disciplining configuration. Only applicable to the Time & |
|        |      | UBX-CFG-ESRC | Frequency Sync product.                                   |
|        |      | UBX-CFG-SMGR |                                                           |

## <span id="page-25-0"></span>**3.3 Permanent Configuration Storage Media**

The Current Configuration is stored in the volatile RAM of the u-blox receiver. Hence, any changes made to the Current Configuration without saving will be lost if any of the reset events listed in the section above occur. By using UBX-CFG-CFG/save, the selected configuration sub-sections are saved to all non-volatile memories available:

- On-chip BBR (battery backed RAM). In order for the BBR to work, a backup battery must be applied to the u-blox receiver.
- External flash memory, where available.

## <span id="page-25-1"></span>**3.4 u-blox Receiver Default Configuration**

The Permanent Configuration can be reset to Default Configuration through a [UBX-CFG-CFG](#page-207-1)/clear message. The Default Configuration of the u-blox receiver is normally determined when the u-blox receiver is manufactured. Refer to specific product data sheet for further details.

## <span id="page-25-2"></span>**3.5 Save-on-Shutdown Feature**

The save-on-shutdown feature (SOS) enables the u-blox receiver to store the contents of the battery-backed RAM to an external flash memory and restore it upon startup. This allows the ublox receiver to preserve some of the features available only with a battery backup (preserving configuration and satellite orbit knowledge) without having a battery backup supply present. It does not, however, preserve any kind of time knowledge. The save-on-shutdown must be commanded by the host. The restore-on-startup is automatically done if the corresponding data is present in the flash. No expiration check of the data is done.

The following outlines the suggested shutdown procedure when using the save-on-shutdown feature:

- With the [UBX-CFG-RST](#page-270-1) message, the host commands the u-blox receiver to stop, specifying reset mode 0x08 ("Controlled GNSS stop") and a BBR mask of 0 ("Hotstart").
- The u-blox receiver confirms the reception of a valid / invalid request with a [UBX-ACK-ACK](#page-193-0) / [UBX-](#page-193-0)[ACK-NAK](#page-193-0) message.
- The host commands the saving of the contents of BBR to the flash memory using the [UBX-UPD-](#page-452-0)[SOS-BACKUP](#page-452-0) message.
- The u-blox receiver confirms the reception of a valid / invalid request with a [UBX-ACK-ACK](#page-193-0) / [UBX-](#page-193-0)[ACK-NAK](#page-193-0) message.
- For a valid request the u-blox receiver reports on the success of the backup operation with a [UBX-](#page-453-0)[UPD-SOS-ACK](#page-453-0) message.
- The host powers off the u-blox receiver.
- Do not expect [UBX-CFG-RST](#page-270-1) and [UBX-UPD-SOS-BACKUP](#page-452-0) message to be acknowledged with a [UBX-ACK-ACK](#page-193-0) / [UBX-ACK-NAK](#page-193-0) message by the receiver with newer FW versions.

And consequently the startup procedure is as follows:



- The host powers on the u-blox receiver.
- The u-blox receiver detects the previously stored data in flash. It restores the corresponding memory and reports the success of the operation with a [UBX-UPD-SOS-RESTORED](#page-454-0) message on the port where it had received the save command message (if the output protocol filter on that port allows it). It does not report anything if no stored data has been detected.
- Additionally the u-blox receiver outputs a [UBX-INF-NOTICE](#page-306-2) and/or a [NMEA-TXT](#page-173-1) message with the contents RESTORED in the boot screen (depends on port and information messages configuration) upon success.
- Optionally the host can deliver coarse time assistance using [UBX-MGA-INI-TIME\\_UTC](#page-343-0) for better startup performance.

Once the u-blox receiver has started up it is suggested to delete the stored data using a [UBX-UPD-](#page-453-0)[SOS-CLEAR](#page-453-0) message. The u-blox receiver responds with a [UBX-ACK-ACK](#page-193-0) or [UBX-ACK-NAK](#page-193-0) message.

Note that this feature must not be used with [power save mode](#page-69-0) and that saved data must be deleted before switching to that mode.

## <span id="page-26-0"></span>**4 Concurrent GNSS**

Many u-blox positioning modules and chips are multi-GNSS receivers capable of receiving and processing signals from multiple Global Navigation Satellite Systems (GNSS).

u-blox concurrent GNSS receivers are multi-GNSS receivers that can acquire and track satellites from more than one GNSS system at the same time, and utilize them in positioning.

## <span id="page-26-1"></span>**4.1 GNSS Types**

u-blox receivers support a wide range of different GNSS. Some GNSS have large numbers of satellites deployed globally and therefore are generally capable of providing navigation solutions on their own. u-blox designates these as "major GNSS". By contrast, some are designed to be used to enhance the use of one or more major GNSS and u-blox designates these "augmentation systems".

In many cases, such as [Satellite Numbering,](#page-460-1) this distinction does not matter as u-blox receivers generally try to combine information from all available GNSS to create the best possible navigation information. However, particularly in relation to [configuring the receiver,](#page-28-0) the distinction can be important.

## <span id="page-26-2"></span>**4.1.1 Major GNSS**

The major GNSS supported by u-blox receivers are described below.

## **4.1.1.1 GPS**

The Global Positioning System (GPS) is a GNSS operated by the US department of defense. Its purpose is to provide position, velocity and time for civilian and defense users on a global basis. The system currently consists of 32 medium earth orbit satellites and several ground control stations.

## **4.1.1.2 GLONASS**

GLONASS is a GNSS operated by Russian Federation department of defense. Its purpose is to provide position, velocity and time for civilian and defense users on a global basis. The system consists of 24 medium earth orbit satellites and ground control stations.



It has a number of significant differences when compared to GPS. In most cases, u-blox receivers operate in a very similar manner when they are configured to use GLONASS signals instead of GPS. However some aspects of receiver output are likely to be noticeably affected.

## **4.1.1.3 Galileo**

At the time of writing (early 2018), the Galileo system was still under development with only a few fully operational SVs. Therefore, the precise performance and reliability of ublox receivers when receiving Galileo signals is effectively impossible to guarantee.

Galileo is a GNSS operated by the European Union. Its purpose is to provide position, velocity and time for civilian users on a global basis. The system is currently not fully operational. It is eventually expected to consist of 30 medium earth orbit satellites.

On u-blox M8 receivers a maximum of ten channels can be assigned to Galileo for signal acquisition and tracking. Note that at most eight Galileo satellites will be used for navigation. It is recommended not to set the number of Galileo channels higher than eight in [UBX-CFG-GNSS](#page-221-1).

## **4.1.1.3.1 Search and Rescue Return Link Message**

The receiver supports reception and output of Search and Rescue (SAR) Return Link Messages (RLM). When enabled, a [UBX-RXM-RLM](#page-430-1) message will be generated whenever an RLM is detected by the receiver.

At the time of writing (early 2018), no live transmission of RLMs by Galileo SVs had been observed, so the details of their use was impossible to verify completely.

## **4.1.1.4 BeiDou**

BeiDou is a GNSS operated by China. Its purpose is to initially provide position, velocity and time for users in Asia. In a later stage when the system is fully deployed it will have worldwide coverage. The full system will consist of five geostationary, five inclined geosynchronous and 27 medium earth orbit satellites, as well as control, upload and monitoring stations. Although this implies a full constellation of 37 SVs, only SVs numbered 1 to 30 are fully supported in the D1/D2 NAV message described by the Interface Control Document version 2.0. For SVs numbered above 30, there is currently no almanac or differential correction. Consequently, u-blox receivers only use BeiDou SVs numbered 1 to 30.

## <span id="page-27-0"></span>**4.1.2 Augmentation Systems**

The augmentation systems supported by u-blox receivers are described below.

## **4.1.2.1 SBAS**

There are a number of Space Based Augmentation Systems (SBAS) operated by different countries using geostationary satellites. u-blox receivers currently support the following:

- WAAS (Wide Area Augmentation System) operated by the US.
- EGNOS (European Geostationary Navigation Overlay Service) operated by the EU.
- MSAS (Multi-functional Satellite Augmentation System) operated by Japan.
- GAGAN (GPS Aided Geo Augmented Navigation) operated by India.

See section [SBAS](#page-29-1) for more details.



## **4.1.2.2 QZSS**

The Quasi Zenith Satellite System (QZSS) is a regional satellite augmentation system operated by [Japan Aerospace Exploration Agency](http://www.jaxa.jp) (JAXA). It is intended as an enhancement to GPS, to increase availability and positional accuracy. The QZSS system achieves this by transmitting GPS-compatible signals in the GPS bands.

NMEA messages will show the QZSS satellites only if configured to do so (see section [Satellite](#page-460-1) [Numbering](#page-460-1)).

The QZSS L1SAIF is an additional signal broadcast by QZSS satellites that contains augmentation and other data.

## **4.1.2.3 IMES**

The Indoor MEssaging System (IMES) is an extension to the QZSS specification. See section [IMES](#page-34-1) for more details.

## <span id="page-28-0"></span>**4.2 Configuration**

The [UBX-CFG-GNSS](#page-221-1) message allows the user to specify which GNSS signals should be processed along with limits on how many tracking channels should be allocated to each GNSS. The receiver will respond to such a request with a [UBX-ACK-ACK](#page-193-0) message if it can support the requested configuration or a [UBX-ACK-NAK](#page-193-0) message if not.

Customers enabling BeiDou and/or Galileo who wish to use the NMEA protocol are recommended to select NMEA version 4.1, as earlier versions have no support for these two GNSS. See the [NMEA protocol section](#page-152-2) for details on selecting NMEA versions.

The combinations of systems which can be configured simultaneously depends on the receiver's capability to receive several carrier frequencies. The [UBX-MON-GNSS](#page-353-1) message reports which major GNSS can be selected. Refer to the data sheet of the corresponding u-blox receiver for full information. Usually GPS, SBAS (e.g. WAAS, EGNOS, MSAS), QZSS and Galileo can be enabled together, because they all use the 1575.42MHz L1 frequency. GLONASS and BeiDou both operate on different frequencies, therefore the receiver must be able to receive a second or even third carrier frequency in order to process these systems together with GPS.

It is recommended to disable GLONASS and BeiDou if a GPS-only antenna or GPS-only SAW filter is used.

In all circumstances, it is necessary for at least one [major GNSS](#page-26-2) to be enabled. It is also required that at least 4 tracking channels are available to each enabled major GNSS, i.e. maxTrkCh must have a minimum value of 4 for each enabled major GNSS. Further requirements on generating configurations acceptable by the receiver can be found in [UBX-CFG-GNSS](#page-221-1).

## <span id="page-28-1"></span>**4.2.1 Switching between GNSS**

Users should be aware that switching between GNSS (and especially away from GPS) may affect the long term accuracy of the receiver until the next [cold start](#page-81-0). In normal operation the receiver selects the best models and corrections from the transmitted auxiliary data (e.g. UTC and Ionospheric parameters), basing this selection on the configured GNSS. Disabling a major GNSS prevents auxiliary data from that GNSS being refreshed and so it will become stale, resulting in progressively degraded performance. This can occur even if the main power supply is removed, as most receivers retain auxiliary data in non-volatile storage, e.g. battery backed RAM (BBR). For this reason, u-blox recommends that receivers are [cold started](#page-81-0) after any change that disables an



active GNSS, within a few weeks, but preferably immediately. This will ensure that the receiver then uses only regularly refreshed information from the newly configured constellations.

## <span id="page-29-0"></span>**4.2.2 Configuring QZSS L1SAIF**

By default the receiver will be configured for QZSS L1C/A, this can be changed so the receiver can be configured for QZSS L1SAIF also. See the table below for [UBX-CFG-GNSS](#page-221-1) sigCfgMask settings for signals on QZSS. For example, to enable QZSS L1C/A and QZSS L1SAIF, set the gnssId to 5 (for QZSS) and sigCfgMask to 0x05. If supported by the firmware, L1SAIF would then be enabled.

## **QZSS Signal configuration for UBX-CFG-GNSS**

| GnssId | Description | Signal mask        |  |
|--------|-------------|--------------------|--|
| 5      | QZSS        | 0x01 = QZSS L1C/A  |  |
|        |             | 0x04 = QZSS L1SAIF |  |

## <span id="page-29-1"></span>**5 SBAS Configuration Settings Description**

## <span id="page-29-2"></span>**5.1 SBAS (Satellite Based Augmentation Systems)**

SBAS (Satellite Based Augmentation System) is an augmentation technology for GPS, which calculates GPS integrity and correction data with RIMS (Ranging and Integrity Monitoring Stations) on the ground and uses geostationary satellites to broadcast GPS integrity and correction data to GPS users. The correction data is transmitted on the GPS L1 frequency (1575.42 MHz), and therefore no additional receiver is required to make use of the correction and integrity data.

u-blox receivers will only process corrections for GPS. Other corrections are not applied, even if, as planned, some SBAS satellites start to transmit them (e.g. SDCM for GLONASS).





## **SBAS Principle**

There are several compatible SBAS systems available or in development all around the world:

- WAAS (Wide Area Augmentation System) for North America has been in operation since 2003.
- MSAS (Multi-Functional Satellite Augmentation System) for Japan has been in operation since 2007.
- EGNOS (European Geostationary Navigation Overlay Service) has been in operation since 2009.
- GAGAN (GPS Aided Geo Augmented Navigation), for India has been in operation since 2014.
- SDCM (System for Differential Corrections and Monitoring), for Russia is at the time of writing in test mode.

Support of SBAS allows u-blox GPS technology to take full advantage of the augmentation systems that are currently available (i.e. WAAS, EGNOS, MSAS, GAGAN). Signals from systems currently being tested and/or planned (such as SDCM) may also work, when those systems become fully operational, but this cannot be relied upon and u-blox receivers are not configured to support them by default.

With SBAS enabled, the user benefits from additional satellites for ranging (navigation). u-blox GPS technology uses the available SBAS satellites for navigation just like GPS satellites, if the SBAS satellites offer this service.

To improve position accuracy, SBAS uses different types of correction data:

- **Fast Corrections** for short-term disturbances in GPS signals (due to clock problems, etc.).
- **Long-term corrections** for GPS clock problems, broadcast orbit errors etc.
- **Ionosphere corrections** for Ionosphere activity

Another benefit of SBAS is the use of GPS integrity information. In this way SBAS control stations can 'disable' the use of GPS satellites within a 6-second alarm time in case of major GPS satellite problems. If integrity monitoring is enabled, u-blox GPS technology only uses satellites, for which



integrity information is available.

For more information on SBAS and associated services, refer to the following resources:

- RTCA/DO-229D (MOPS). Available from [www.rtca.org](http://www.rtca.org)
- [gps.faa.gov](http://gps.faa.gov) for information on WAAS.
- [www.esa.int](http://www.esa.int) for information on EGNOS.
- [www.essp-sas.eu](http://www.essp-sas.eu) for information about European Satellite Services Provider (ESSP), the EGNOS operations manager.
- [www.isro.org](http://www.isro.org) for information on GAGAN.
- [www.sdcm.ru](http://www.sdcm.ru) for information on SDCM.

## **SBAS satellites tracked (as of November 2015)**

| Identification     | Position | GPS PRN | SBAS Provider |
|--------------------|----------|---------|---------------|
| AMR                | 98° W    | 133     | WAAS          |
| PanAmSat Galaxy XV | 133.0° W | 135     | WAAS          |
| TeleSat Anik F1R   | 107.3° W | 138     | WAAS          |
| Inmarsat 3F2 AOR-E | 15.5° W  | 120     | EGNOS         |
| Artemis            | 21.5° W  | 124     | EGNOS         |
| Inmarsat 3F5 IOR-W | 25° E    | 126     | EGNOS         |
| MTSAT-1R           | 140.1° E | 129     | MSAS          |
| MTSAT-2            | 145° E   | 137     | MSAS          |
| Inmarsat-4F1/IOR   | 64° E    | 127     | GAGAN         |
| GSAT-10            | 83° E    | 128     | GAGAN         |

## <span id="page-31-0"></span>**5.2 SBAS Features**

This u-blox SBAS implementation is, in accordance with standard RTCA/DO-229D, a class Beta-1 equipment. All timeouts etc. are chosen for the En Route Case. Do not use this equipment under any circumstances for "safety of life" applications!

u-blox receivers are capable of receiving multiple SBAS signals concurrently, even from different SBAS systems (WAAS, EGNOS, MSAS, etc.). They can be tracked and used for navigation simultaneously. Every tracked SBAS satellite utilizes one vacant receiver tracking channel. Only the number of receiver channels limits the total number of satellites used. Every SBAS satellite that broadcasts ephemeris or almanac information can be used for navigation, just like a normal GPS satellite.

For receiving correction data, the u-blox receiver automatically chooses the best SBAS satellite as its primary source. It will select only one since the information received from other SBAS satellites is redundant and/or could be inconsistent. The selection strategy is determined by the proximity of the satellites, the services offered by the satellite, the configuration of the receiver (Testmode allowed/disallowed, Integrity enabled/disabled) and the signal link quality to the satellite.

If corrections are available from the chosen SBAS satellite and used in the navigation calculation, the DGPS flag is set in the receiver's output protocol messages (see [UBX-NAV-PVT](#page-389-1), [UBX-NAV-SOL](#page-400-1), [UBX-NAV-STATUS](#page-402-1), [UBX-NAV-SVINFO](#page-404-1), [NMEA Position Fix Flags description\)](#page-155-1). The message [UBX-](#page-397-1)[NAV-SBAS](#page-397-1) provides detailed information about which corrections are available and applied.

The most important SBAS feature for accuracy improvement is Ionosphere correction. The measured data from regional RIMS stations are combined to make a TEC (Total Electron Content) Map. This map is transferred to the receiver via the satellites to allow a correction of the



ionosphere error on each received satellite.

| Message Type | Message Content                    | Source  |
|--------------|------------------------------------|---------|
| 0(0/2)       | Test Mode                          | All     |
| 1            | PRN Mask Assignment                | Primary |
| 2, 3, 4, 5   | Fast Corrections                   | Primary |
| 6            | Integrity                          | Primary |
| 7            | Fast Correction Degradation        | Primary |
| 9            | Satellite Navigation (Ephemeris)   | All     |
| 10           | Degradation                        | Primary |
| 12           | Time Offset                        | Primary |
| 17           | Satellite Almanac                  | All     |
| 18           | Ionosphere Grid Point Assignment   | Primary |
| 24           | Mixed Fast / Long term Corrections | Primary |
| 25           | Long term Corrections              | Primary |
| 26           | Ionosphere Delays                  | Primary |

## **Supported SBAS messages**

Each satellite services a specific region and its correction signal is only useful within that region. Planning is crucial to determine the best possible configuration, especially in areas where signals from different SBAS systems can be received:

## **Example 1: SBAS Receiver in North America**

In the eastern parts of North America, make sure that EGNOS satellites do not take preference over WAAS satellites. The satellite signals from the EGNOS system should be disallowed by using the PRN Mask.

## **Example 2: SBAS Receiver in Europe**

Some WAAS satellite signals can be received in the western parts of Europe, therefore it is recommended that the satellites from all but the EGNOS system should be disallowed using the PRN Mask.

- Although u-blox receivers try to select the best available SBAS correction data, it is recommended to configure them to disallow using unwanted SBAS satellites.
- The EGNOS SBAS system does not provide the satellite ranging function.

## <span id="page-32-0"></span>**5.3 SBAS Configuration**

To configure the SBAS functionalities use the UBX proprietary message [UBX-CFG-SBAS](#page-273-1) (SBAS Configuration).

| SBAS Configuration parameters |             |
|-------------------------------|-------------|
| Parameter                     | Description |

| Parameter                    | Description                                                  |  |
|------------------------------|--------------------------------------------------------------|--|
| Mode - SBAS Subsystem        | Enabled / Disabled status of the SBAS subsystem. To          |  |
|                              | enable/disable SBAS operation use UBX-CFG-GNSS. The field in |  |
|                              | UBX-CFG-SBAS is no longer supported.                         |  |
| Mode - Allow test mode usage | Allow / Disallow SBAS usage from satellites in Test Mode     |  |
|                              | (Message 0)                                                  |  |
| Services/Usage - Ranging     | Use the SBAS satellites for navigation                       |  |



SBAS Configuration parameters continued

| Parameter                        | Description                                                 |
|----------------------------------|-------------------------------------------------------------|
| Services/Usage - Apply SBAS      | Combined enable/disable switch for Fast-, Long-Term and     |
| correction data                  | Ionosphere Corrections                                      |
| Services/Usage - Apply integrity | Use integrity data                                          |
| information                      |                                                             |
| Number of tracking channels      | Should be set using UBX-CFG-GNSS. The field in UBX-CFG-SBAS |
|                                  | is no longer supported.                                     |
| PRN Mask                         | Allows selectively enabling/disabling SBAS satellites (e.g. |
|                                  | restrict SBAS usage to WAAS-only).                          |

By default, SBAS is enabled with three prioritized SBAS channels and it will use any received SBAS satellites (except for those in test mode) for navigation, ionosphere parameters and corrections.

## <span id="page-33-0"></span>**6 QZSS L1S SLAS Configuration Settings Description**

## <span id="page-33-1"></span>**6.1 QZSS L1S SLAS (Sub-meter Level Augmentation Service)**

The L1S signal was formerly known as L1SAIF.

QZSS SLAS (Sub-meter Level Augmentation Service) is an augmentation technology, which provides correction data for pseudoranges of GPS and QZSS satellites (as of October 2017). Ground monitoring stations (GMS) positioned in Japan calculate independent corrections for each visible satellite and broadcast this data to the user via QZSS satellites. The correction stream is transmitted on the L1 frequency (1575.42 Mhz) and therefore no additional receiver is required to make use of the correction data.

With QZSS SLAS enabled, u-blox receivers autonomously select the most suitable GMS based on the user's location. The correction stream of this GMS will then be applied to the measurements in order to improve position accuracy.

Furthermore, QZSS SLAS provides the user with reports for disaster and crisis management (DC Reports) from the Japan Meteorological Agency (JMA) and other sources. Those reports are provided by [UBX-RXM-SFRBX](#page-433-1) messages.

For more information on QZSS SLAS, refer to the Interface Document IS-QZSS-L1S-001 (March 28, 2017) issued by the Cabinet Office, available from [qzss.go.jp/en/](http://qzss.go.jp/en/).

## <span id="page-33-2"></span>**6.2 QZSS L1S SLAS Features**

Multiple SLAS signals can be tracked simultaneously. Only the number of receiver channels limits the total number of satellites tracked.

The correction stream will be automatically detected from the most suitable ground monitoring stations and QZSS satellites. The selection of the QZSS satellite is dependent on the quality of the signals and the receiver configuration to allow satellites in test mode. The GMS that is not flagged as unhealthy and is closest to the user will be selected. If the distance to the closest GMS exceeds 200 km, no corrections will be used. The receiver might then fall back to using SBAS corrections. Changes of the most suitable GMS or QZSS satellite as well as transitions in the provided correction data stream will be handled in the background leading to a continuous set of corrections for the navigation solution, if possible.

If corrections are available from the chosen QZSS satellite and used in the navigation calculation,



the DGNSS flag is set in the receiver's output protocol messages (see [UBX-NAV-PVT](#page-389-1), [UBX-NAV-SOL](#page-400-1), [UBX-NAV-STATUS](#page-402-1), [UBX-NAV-SVINFO](#page-404-1), [NMEA Position Fix Flags description\)](#page-155-1). The message [UBX-](#page-399-1)[NAV-SLAS](#page-399-1) provides detailed information about which corrections are available and applied.

By setting the RAIM feature (see [UBX-CFG-SLAS](#page-276-1)), the user can setup the receiver to provide DGPS-only solutions or to mix corrected and uncorrected measurements.

If in [UBX-CFG-SLAS](#page-276-1) the RAIM option is set, other GNSS time systems than the QZSS time system can't be observed by measurements.

| Message Type | Message Content                |
|--------------|--------------------------------|
| 0            | Test Mode                      |
| 47           | Monitoring Station Information |
| 48           | PRN Mask                       |
| 49           | Data Issue Number              |
| 50           | DGPS Correction                |
| 51           | Satellite Health               |

## **Supported QZSS L1S SLAS messages for navigation enhancing**

## <span id="page-34-0"></span>**6.3 QZSS L1S SLAS Configuration**

To read and set the SLAS configurations use [UBX-CFG-SLAS](#page-276-1) as follows:

| Parameter      | Description                                                         |
|----------------|---------------------------------------------------------------------|
| Mode - enabled | Apply QZSS SLAS corrections                                         |
| Mode - test    | Allow the correction provided by QZSS satellites that are in        |
|                | test mode                                                           |
| Mode - raim    | If this configuration is set, the receiver will try to estimate the |
|                | position by using only corrected measurements; if all corrected     |
|                | measurements are not available, it won't use any corrections. If    |
|                | this configuration is not set, the receiver will mix corrected and  |
|                | uncorrected measurements for the navigation solution.               |

## **QZSS L1S SLAS Configuration parameters**

## <span id="page-34-1"></span>**7 IMES Description**

Indoor MEssaging System (IMES) is an extension to the QZSS specification using ground based beacons that broadcast their location. Its purpose is to allow GNSS users to continue to navigate inside buildings, when they can no longer reliably receive satellite based signals.

Operation of IMES beacons is only allowed within Japan.

u-blox receivers with IMES enabled conform to **IS-QZSS v1.5** and do not support v1.4 or earlier IMES signals. In particular, u-blox receivers rely on the IMES station's carrier frequency being 1575.4282MHz ± 0.2ppm as specified in the IMES specification. Transmissions from IMES stations that are not within this frequency range are unlikely to be reliably received. Also the receiver expects the preamble 0x9E as well as the correct sequence of CNT values as specified by the IS-QZSS.

u-blox receivers report the position information they receive from IMES transmitters directly with [UBX-RXM-IMES](#page-417-0). They do not, however, combine this information with navigation solutions derived from satellite signals (reported via various NMEA and UBX-NAV messages). Consequently, the



IMES position information may not always be consistent with satellite signal derived position information.

## <span id="page-35-0"></span>**7.1 IMES Features**

- **50/250bps Auto-Detection:** Both 50bps and 250bps IMES signals are supported by u-blox receivers. The transmitter's data rate is detected automatically which allows the receiver to even work in a mixed 50bps/250bps IMES environment.
- **Dynamic Tracking Channel Allocation:** The allocation of the tracking channels is done dynamically, in the same way that channels are allocated to other GNSS. If sufficient IMES stations are within reach of the receiver, it will track as many signals as it can up to the value of maxTrkCh configured in [UBX-CFG-GNSS](#page-221-1) (8 by default). To reserve a certain number of channels for IMES only (preventing them from being dynamically allocated to other GNSS), set the resTrkCh field in [UBX-CFG-GNSS](#page-221-1) accordingly.
- **Data summary:** A summary of all the tracked IMES signals and what position information they are providing is given in the [UBX-RXM-IMES](#page-417-0) message.
- **Raw IMES frames:** The raw IMES subframes received from the IMES stations are reported as they are received with [UBX-RXM-SFRBX](#page-433-1) messages.

## <span id="page-35-1"></span>**8 Navigation Configuration Settings Description**

This section relates to the configuration message [UBX-CFG-NAV5](#page-230-1).

## <span id="page-35-2"></span>**8.1 Platform settings**

u-blox receivers support different dynamic platform models (see table below) to adjust the navigation engine to the expected application environment. These platform settings can be changed dynamically without performing a power cycle or reset. The settings improve the receiver's interpretation of the measurements and thus provide a more accurate position output. Setting the receiver to an unsuitable platform model for the given application environment is likely to result in a loss of receiver performance and position accuracy.

| Platform     | Description                                                                     |
|--------------|---------------------------------------------------------------------------------|
| Portable     | Applications with low acceleration, e.g. portable devices. Suitable for most    |
|              | situations.                                                                     |
| Stationary   | Used in timing applications (antenna must be stationary) or other stationary    |
|              | applications. Velocity restricted to 0 m/s. Zero dynamics assumed.              |
| Pedestrian   | Applications with low acceleration and speed, e.g. how a pedestrian would move. |
|              | Low acceleration assumed.                                                       |
| Automotive   | Used for applications with equivalent dynamics to those of a passenger car. Low |
|              | vertical acceleration assumed.                                                  |
| At sea       | Recommended for applications at sea, with zero vertical velocity. Zero vertical |
|              | velocity assumed. Sea level assumed.                                            |
| Airborne <1g | Used for applications with a higher dynamic range and greater vertical          |
|              | acceleration than a passenger car. No 2D position fixes supported.              |
| Airborne <2g | Recommended for typical airborne environments. No 2D position fixes             |
|              | supported.                                                                      |

## **Dynamic Platform Models**



| Platform     | Description                                                                  |
|--------------|------------------------------------------------------------------------------|
| Airborne <4g | Only recommended for extremely dynamic environments. No 2D position fixes    |
|              | supported.                                                                   |
| Wrist        | Only recommended for wrist-worn applications. Receiver will filter out arm   |
|              | motion (just available for protocol version > 17).                           |
| Bike         | Used for applications with equivalent dynamics to those of a motor bike. Low |
|              | vertical acceleration assumed.                                               |

Dynamic Platform Models continued

## **Dynamic Platform Model Details**

| Platform     | Max Altitude | MAX Horizontal | MAX Vertical   | Sanity check type     | Max Position |
|--------------|--------------|----------------|----------------|-----------------------|--------------|
|              | [m]          | Velocity [m/s] | Velocity [m/s] |                       | Deviation    |
| Portable     | 12000        | 310            | 50             | Altitude and Velocity | Medium       |
| Stationary   | 9000         | 10             | 6              | Altitude and Velocity | Small        |
| Pedestrian   | 9000         | 30             | 20             | Altitude and Velocity | Small        |
| Automotive   | 6000         | 100            | 15             | Altitude and Velocity | Medium       |
| At sea       | 500          | 25             | 5              | Altitude and Velocity | Medium       |
| Airborne <1g | 50000        | 100            | 100            | Altitude              | Large        |
| Airborne <2g | 50000        | 250            | 100            | Altitude              | Large        |
| Airborne <4g | 50000        | 500            | 100            | Altitude              | Large        |
| Wrist        | 9000         | 30             | 20             | Altitude and Velocity | Medium       |
| Bike         | 6000         | 100            | 15             | Altitude and Velocity | Medium       |

Dynamic platforms designed for high acceleration systems (e.g. airborne <2g) can result in a higher standard deviation in the reported position.

If a sanity check against a limit of the dynamic platform model fails, then the position solution is invalidated. The table above shows the types of sanity checks which are applied for a particular dynamic platform model.

## <span id="page-36-0"></span>**8.2 Navigation Input Filters**

The navigation input filters in [UBX-CFG-NAV5](#page-230-1) mask the input data of the navigation engine.

These settings are already optimized. Do not change any parameters unless advised by u-blox support engineers.

## **Navigation Input Filter parameters**

| Parameter    | Description                                                                         |
|--------------|-------------------------------------------------------------------------------------|
| fixMode      | By default, the receiver calculates a 3D position fix if possible but reverts to 2D |
|              | position if necessary (Auto 2D/3D). The receiver can be forced to only calculate    |
|              | 2D (2D only) or 3D (3D only) positions.                                             |
| fixedAlt and | The fixed altitude is used if fixMode is set to 2D only. A variance greater than    |
| fixedAltVar  | zero must also be supplied.                                                         |
| minElev      | Minimum elevation of a satellite above the horizon in order to be used in the       |
|              | navigation solution. Low elevation satellites may provide degraded accuracy,        |
|              | due to the long signal path through the atmosphere.                                 |
| cnoThreshNum | A navigation solution will only be attempted if there are at least the given        |
| SVs and      | number of SVs with signals at least as strong as the given threshold.               |
| cnoThresh    |                                                                                     |



See also comments in section [Degraded Navigation](#page-38-3) below.

## <span id="page-37-0"></span>**8.3 Navigation Output Filters**

The result of a navigation solution is initially classified by the fix type (as detailed in the fixType field of [UBX-NAV-PVT](#page-389-1) message). This distinguishes between failures to obtain a fix at all ("No Fix") and cases where a fix has been achieved, which are further subdivided into specific types of fixes (e.g. 2D, 3D, dead reckoning).

Where a fix has been achieved, a check is made to determine whether the fix should be classified as valid or not. A fix is only valid if it passes the navigation output filters as defined in [UBX-CFG-](#page-230-1)[NAV5](#page-230-1). In particular, both PDOP and accuracy values must lie below the respective limits.

Valid fixes are marked using the valid flag in certain NMEA messages (see [Position Fix Flags in](#page-155-1) [NMEA\)](#page-155-1) and the gnssFixOK flag in [UBX-NAV-PVT](#page-389-1) message.

- Important: Users are recommended to check the gnssFixOK flag in the [UBX-NAV-PVT](#page-389-1) or the NMEA valid flag. Fixes not marked valid should not normally be used.
- The [UBX-NAV-SOL](#page-400-1) and [UBX-NAV-STATUS](#page-402-1) messages also report whether a fix is valid in their gpsFixOK and GPSfixOk flags. These messages have only been retained for backwards compatibility and users are recommended to use the [UBX-NAV-PVT](#page-389-1) message in preference.

The [UBX-CFG-NAV5](#page-230-1) message also defines TDOP and time accuracy values that are used in order to establish whether a fix is regarded as locked to GNSS or not, and as a consequence of this, which time pulse setting has to be used. Fixes that do not meet both criteria will be regarded as unlocked to GNSS, and the corresponding time pulse settings of [UBX-CFG-TP5](#page-284-1) will be used to generate a time pulse.

## <span id="page-37-1"></span>**8.3.1 Speed (3-D) Low-pass Filter**

The [UBX-CFG-ODO](#page-248-1) message offers the possibility to activate a speed (3-D) low-pass filter. The output of the speed low-pass filter is published in the [UBX-NAV-VELNED](#page-416-1) message (speed field). The filtering level can be set via the [UBX-CFG-ODO](#page-248-1) message (velLpGain field) and must be comprised between 0 (heavy low-pass filtering) and 255 (weak low-pass filtering).

The internal filter gain is computed as a function of speed. Therefore, the level as defined in the [UBX-CFG-ODO](#page-248-1) message (velLpGain field) defines the nominal filtering level for speeds below 5m/s.

## <span id="page-37-2"></span>**8.3.2 Course over Ground Low-pass Filter**

The [UBX-CFG-ODO](#page-248-1) message offers the possibility to activate a course over ground low-pass filter when the speed is below 8m/s. The output of the course over ground (also named heading of motion 2-D) low-pass filter is published in the [UBX-NAV-PVT](#page-389-1) message (headMot field), [UBX-NAV-](#page-416-1)[VELNED](#page-416-1) message (heading field), [NMEA-RMC](#page-171-1) message (cog field) and [NMEA-VTG](#page-175-1) message (cogt field). The filtering level can be set via the [UBX-CFG-ODO](#page-248-1) message (cogLpGain field) and must be comprised between 0 (heavy low-pass filtering) and 255 (weak low-pass filtering).

The filtering level as defined in the [UBX-CFG-ODO](#page-248-1) message (cogLpGain field) defines the filter gain for speeds below 8m/s. If the speed is higher than 8m/s, no course over ground low-pass filtering is performed.



## <span id="page-38-0"></span>**8.3.3 Low-speed Course Over Ground Filter**

The [UBX-CFG-ODO](#page-248-1) message offers the possibility to activate a low-speed course over ground filter (also called heading of motion 2-D). This filter derives the course over ground from position at very low speed. The output of the low-speed course over ground filter is published in the [UBX-NAV-PVT](#page-389-1) message (headMot field), [UBX-NAV-VELNED](#page-416-1) message (heading field), [NMEA-RMC](#page-171-1) message (cog field) and [NMEA-VTG](#page-175-1) message (cogt field). If the low-speed course over ground filter is not activated or inactive, then the course over ground is computed as described in section [Freezing](#page-38-2) [the Course Over Ground.](#page-38-2)

## <span id="page-38-1"></span>**8.4 Static Hold**

Static Hold Mode allows the navigation algorithms to decrease the noise in the position output when the velocity is below a pre-defined 'Static Hold Threshold'. This reduces the position wander caused by environmental factors such as multi-path and improves position accuracy especially in stationary applications. By default, static hold mode is disabled.

If the speed drops below the defined 'Static Hold Threshold, the Static Hold Mode will be activated. Once Static Hold Mode has been entered, the position output is kept static and the velocity is set to zero until there is evidence of movement again. Such evidence can be velocity, acceleration, changes of the valid flag (e.g. position accuracy estimate exceeding the Position Accuracy Mask, see also section [Navigation Output Filters](#page-37-0)), position displacement, etc.

The [UBX-CFG-NAV5](#page-230-1) message additionally allows for configuration of distance threshold (field staticHoldMaxDist). If the estimated position is farther away from the static hold position than this threshold, static mode will be quit.

## <span id="page-38-2"></span>**8.5 Freezing the Course Over Ground**

If the low-speed course over ground filter is deactivated or inactive (see section [Low-speed Course](#page-38-0) [over Ground Filter\)](#page-38-0), the receiver derives the course over ground from the GNSS velocity information. If the velocity cannot be calculated with sufficient accuracy (e.g., with bad signals) or if the absolute speed value is very low (under 0.1m/s) then the course over ground value becomes inaccurate too. In this case the course over ground value is frozen, i.e. the previous value is kept and its accuracy is degraded over time. These frozen values will not be output in the NMEA messages [NMEA-RMC](#page-171-1) and [NMEA-VTG](#page-175-1) unless the NMEA protocol is explicitely configured to do so (see [NMEA Protocol Configuration](#page-153-0)).

## <span id="page-38-3"></span>**8.6 Degraded Navigation**

Degraded navigation describes all navigation modes which use less than four Satellite Vehicles (SV).

## <span id="page-38-4"></span>**8.6.1 2D Navigation**

If the receiver only has three SVs for calculating a position, the navigation algorithm uses a constant altitude to compensate for the missing fourth SV. When an SV is lost after a successful 3D fix (min. four SVs available), the altitude is kept constant at the last known value. This is called a 2D fix.

u-blox receivers do not calculate any navigation solution with less than three SVs. Only ublox Timing products can calculate a timing solution with only one SV when they are in stationary mode.



## <span id="page-39-0"></span>**8.7 Geodetic Coordinate Systems and Ellipsoids**

In order to have any useful meaning, the positions reported by a u-blox receiver must be referenced to some coordinate system which defines the origin and, for example, which way is "up". For many reasons, including history, practical autonomy and politics, all the major GNSS define their own theoretical coordinate systems from which they realize a practical reference frame by means of a network of reference points. Specifically:

- GPS uses WGS84
- GLONASS uses PZ90
- Galileo uses GTRF
- BeiDou uses CGCS2000

In practice, the relevant organisations choose to keep their respective frames very close to the International Terrestrial Reference Frame (ITRF), defined and managed by the International Earth Rotation and Reference Systems Service (IERS). However, because the Earth's tectonic plates and even parts of the Earth's core move, new versions of ITRF are defined every few years, generally with changes of the order of a few millimetres. Consequently, the major GNSS occasionally decide that they need to update their reference frames to be better aligned to the latest ITRF. So, for example, GPS switched to WGS84 (G1150) in GPS week 1150 (early 2002) based on ITRF2000, while GLONASS switched from PZ90.02 to PZ90.11 at the end of 2013, based on ITRF2008. The net effect of this, is that all the major GNSS use almost the same reference frame, but there are some small (generally sub-cm) differences between them and these differences occasionally change.

In order to produce positions that can be shown on a map, it is necessary to translate between raw coordinates (e.g. x, y, z) and a position relative to the Earth's surface (e.g. latitude, longitude and altitude) and that requires defining the form of ellipsoid that best matches the shape of the Earth. Historically many different ellipsoid definitions have been used for maps, many of which predate the existence of GNSS and show quite significant differences, leading to discrepencies of as much as 100 m in places. Fortunately, most digital maps now use the WGS84 ellipsoid, which is distinct from the WGS84 coordinate system, but defined by the same body.

All u-blox receivers use (the current) version of WGS84 frame as their reference frame, carrying out any necessary corrections internally. What is more, by default, u-blox receivers use the WGS84 ellipsoid and therefore all positions communicated from/to a u-blox receiver will be relative to that. However, users can alter this by specifying their chosen geodetic datum parameters using the [UBX-CFG-DAT](#page-209-1) message. The table below indicates the values u-blox recommends for use.

| Ellipsoid       | majA      | flat          | dX  | dY  | dZ  | rotX | rotY | rotZ |
|-----------------|-----------|---------------|-----|-----|-----|------|------|------|
| WGS84 (default) | 6378137.0 | 298.257223563 | 0.0 | 0.0 | 0.0 | 0.0  | 0.0  | 0.0  |
| PZ90            | 6378136.0 | 298.257839303 | 0.0 | 0.0 | 0.0 | 0.0  | 0.0  | 0.0  |
| CGCS2000        | 6378137.0 | 298.257227101 | 0.0 | 0.0 | 0.0 | 0.0  | 0.0  | 0.0  |

## **Recommended UBX-CFG-DAT parameters**

Where the receiver is configured to use differential correction data (e.g. via an RTCM stream), as a direct consequence, the receiver's coordinate frame will switch to whatever frame the source of correction data is using.



## <span id="page-40-0"></span>**9 Clocks and Time**

## <span id="page-40-1"></span>**9.1 Receiver Local Time**

The receiver is dependent on a local oscillator (normally a TCXO or Crystal oscillator) for both the operation of its radio parts and also for timing within its signal processing. No matter what nominal frequency the local oscillator has (e.g. 26 MHz), u-blox receivers subdivide the oscillator signal to provide a 1 kHz reference clock signal, which is used to drive many of the receiver's processes. In particular, the measurement of satellite signals is arranged to be synchronised with the "ticking" of this 1 kHz clock signal.

When the receiver first starts, it has no information about how these clock ticks relate to other time systems; it can only count time in 1 millisecond steps. However, as the receiver derives information from the satellites it is tracking or from aiding messages, it estimates the time that each 1 kHz clock tick takes in the time-base of the relevant GNSS system. In previous generations of u-blox receivers this was always the GPS time-base, but for this generation it could be GPS, GLONASS, Galileo, or BeiDou. This estimate of GNSS time based on the local 1 kHz clock is called **receiver local time**.

As receiver local time is a mapping of the local 1 kHz reference onto a GNSS time-base, it may experience occasional discontinuities, especially when the receiver first starts up and the information it has about the time-base is changing. Indeed after a cold start receiver local time will initially indicate the length of time that the receiver has been running. However, when the receiver obtains some credible timing information from a satellite or aiding message, it will jump to an estimate of GNSS time.

## <span id="page-40-2"></span>**9.2 Navigation Epochs**

Each navigation solution is triggered by the tick of the 1 kHz clock nearest to the desired navigation solution time. This tick is referred to as a **navigation epoch**. If the navigation solution attempt is successful, one of the results is an accurate measurement of time in the time-base of the chosen GNSS system, called **GNSS system time**. The difference between the calculated GNSS system time and receiver local time is called the **clock bias** (and the **clock drift** is the rate at which this bias is changing).

In practice the receiver's local oscillator will not be as stable as the atomic clocks to which GNSS systems are referenced and consequently clock bias will tend to accumulate. However, when selecting the next navigation epoch, the receiver will always try to use the 1 kHz clock tick which it estimates to be closest to the desired fix period as measured in GNSS system time. Consequently the number of 1 kHz clock ticks between fixes will occasionally vary (so when producing one fix per second, there will normally be 1000 clock ticks between fixes, but sometimes, to correct drift away from GNSS system time, there will be 999 or 1001).

The GNSS system time calculated in the navigation solution is always converted to a time in both the GPS and UTC time-bases for output.

Clearly when the receiver has chosen to use the GPS time-base for its GNSS system time, conversion to GPS time requires no work at all, but conversion to UTC requires knowledge of the number of leap seconds since GPS time started (and other minor correction terms). The relevant GPS to UTC conversion parameters are transmitted periodically (every 12.5 minutes) by GPS satellites, but can also be supplied to the receiver via the [UBX-MGA-GPS-UTC](#page-340-0) aiding message. By contrast when the receiver has chosen to use the GLONASS time-base as its GNSS system time,



conversion to GPS time is more difficult as it requires knowledge of the difference between the two time-bases, but conversion to UTC is easier (as GLONASS time is closely linked to UTC).

Where insufficient information is available for the receiver to perform any of these time-base conversions precisely, pre-defined default offsets are used. Consequently plausible times are nearly always generated, but they may be wrong by a few seconds (especially shortly after receiver start). Depending on the configuration of the receiver, such "invalid" times may well be output, but with flags indicating their state (e.g. the "valid" flags in [UBX-NAV-PVT](#page-389-1)).

u-blox receivers employ multiple GNSS system times and/or receiver local times (in order to support multiple GNSS systems concurrently), so users should not rely on UBX messages that report GNSS system time or receiver local time being supported in future. It is therefore recommended to give preference to those messages that report UTC time.

## <span id="page-41-0"></span>**9.3 iTOW Timestamps**

All the main UBX-NAV messages (and some other messages) contain an **iTOW** field which indicates the GPS time at which the navigation epoch occurred. Messages with the same iTOW value can be assumed to have come from the same navigation solution.

Note that iTOW values may not be valid (i.e. they may have been generated with insufficient conversion data) and therefore it is not recommended to use the iTOW field for any other purpose.

The original designers of GPS chose to express time/date as an integer week number (starting with the first full week in January 1980) and a time of week (often abbreviated to TOW) expressed in seconds. Manipulating time/date in this form is far easier for digital systems than the more "conventional" year/month/day, hour/minute/second representation. Consequently, most GNSS receivers use this representation internally, only converting to a more "conventional form" at external interfaces. The iTOW field is the most obvious externally visible consequence of this internal representation.

If reliable absolute time information is required, users are recommended to use the [UBX-NAV-PVT](#page-389-1) or [UBX-HNR-PVT](#page-302-1) navigation solution messages which also contain additional fields that indicate the validity (and accuracy in [UBX-NAV-PVT](#page-389-1)) of the calculated times (see also the [GNSS Times](#page-41-1) section below for further messages containing time information).

## <span id="page-41-1"></span>**9.4 GNSS Times**

Each GNSS has its own time reference for which detailed and reliable information is provided in the messages listed in the table below.

## **GNSS Times**

| Time Reference | Message         |
|----------------|-----------------|
| GPS Time       | UBX-NAV-TIMEGPS |
| BeiDou Time    | UBX-NAV-TIMEBDS |
| GLONASS Time   | UBX-NAV-TIMEGLO |
| Galileo Time   | UBX-NAV-TIMEGAL |
| UTC Time       | UBX-NAV-TIMEUTC |



## <span id="page-42-0"></span>**9.5 Time Validity**

Information about the validity of the time solution is given in the following form:

- **Time validity**: Information about time validity is provided in the valid flags (e.g. validDate and validTime flags in the [UBX-NAV-PVT](#page-389-1) message). If these flags are set, the time is known and considered as valid for being used. These flags can be found in the GNSS Times table in the [GNSS Times](#page-41-1) section above as well as in the [UBX-NAV-PVT](#page-389-1) and [UBX-HNR-PVT](#page-302-1) messages.
- **Time validity confirmation**: Information about confirmed validity is provided in the confirmedDate and confirmedTime flags in the [UBX-NAV-PVT](#page-389-1) message. If these flags are set, the time validity could be confirmed by using an additional independent source, meaning that the probability of the time to be correct is very high. Note that information about time validity confirmation is only available if the confirmedAvai bit in the [UBX-NAV-PVT](#page-389-1) message is set. Check [UBX-NAV-PVT](#page-389-1) which Protocol Version supports this flag.

## <span id="page-42-1"></span>**9.6 UTC Representation**

UTC time is used in many NMEA and UBX messages. In NMEA messages it is always reported rounded to the nearest hundredth of a second. Consequently, it is normally reported with two decimal places (e.g. 124923.52). What is more, although compatibility mode (selected using [UBX-](#page-240-1)[CFG-NMEA](#page-240-1)) requires three decimal places, rounding to the nearest hundredth of a second remains, so the extra digit is always 0.

UTC time is is also reported within some UBX messages, such as [UBX-NAV-TIMEUTC](#page-414-1) and [UBX-NAV-](#page-389-1)[PVT](#page-389-1). In these messages date and time are separated into seven distinct integer fields. Six of these (year, month, day, hour, min and sec) have fairly obvious meanings and are all guaranteed to match the corresponding values in NMEA messages generated by the same navigation epoch. This facilitates simple synchronisation between associated UBX and NMEA messages.

The seventh field is called nano and it contains the number of nanoseconds by which the rest of the time and date fields need to be corrected to get the precise time. So, for example, the UTC time 12:49:23.521 would be reported as: hour: 12, min: 49, sec: 23, nano: 521000000.

It is however important to note that the first six fields are the result of rounding to the nearest hundredth of a second. Consequently the nano value can range from -5000000 (i.e. -5 ms) to +994999999 (i.e. nearly 995 ms).

When the nano field is negative, the number of seconds (and maybe minutes, hours, days, months or even years) will have been rounded up. Therefore, some or all of them will need to be adjusted in order to get the correct time and date. Thus in an extreme example, the UTC time 23:59:59.9993 on 31st December 2011 would be reported as: year: 2012, month: 1, day: 1, hour: 0, min: 0, sec: 0, nano: -700000.

Of course, if a resolution of one hundredth of a second is adequate, negative nano values can simply be rounded up to 0 and effectively ignored.

Which master clock the UTC time is referenced to is output in the message [UBX-NAV-TIMEUTC](#page-414-1).

For [protocol versions 16 or greater,](#page-14-0) the preferred variant of UTC time can be specified using [UBX-](#page-230-1)[CFG-NAV5](#page-230-1).

## <span id="page-42-2"></span>**9.7 Leap Seconds**

Occasionally it is decided (by one of the international time keeping bodies) that, due to the slightly uneven spin rate of the Earth, UTC has moved sufficiently out of alignment with mean solar time (i.e. the Sun no longer appears directly overhead at 0 longitude at midday). A "leap second" is



therefore announced to bring UTC back into close alignment. This normally involves adding an extra second to the last minute of the year, but it can also happen on 30th June. When this happens UTC clocks are expected to go from 23:59:59 to 23:59:60 and only then on to 00:00:00.

It is also theoretically possible to have a negative leap second, in which case there will only be 59 seconds in a minute and 23:59:58 will be followed by 00:00:00.

u-blox receivers are designed to handle leap seconds in their UTC output and consequently users processing UTC times from either NMEA and UBX messages should be prepared to handle minutes that are either 59 or 61 seconds long.

Leap second information be be polled from the u-blox receiver with the message [UBX-NAV-TIMELS](#page-412-1) for [Protocol Version 18 and above.](#page-15-2)

## <span id="page-43-0"></span>**9.8 Real Time Clock**

u-blox receivers contain circuitry to support a **real time clock**, which (if correctly fitted and powered) keeps time while the receiver is otherwise powered off. When the receiver powers up, it attempts to use the real time clock to initialise receiver local time and in most cases this leads to appreciably faster first fixes.

## <span id="page-43-1"></span>**9.9 Date**

All GNSS frequently transmit information about the current time within their data message. In most cases, this is a time of week (often abbreviated to TOW), which indicates the elapsed number of seconds since the start of the week (midnight Saturday/Sunday). In order to map this to a full date, it is necessary to know which week and so the GNSS also transmit a week number, typically every 30 seconds. Unfortunately the GPS data message was designed in a way that only allows the bottom 10 bits of the week number to be transmitted. This is not sufficient to yield a completely unambiguous date as every 1024 weeks (a bit less than 20 years), the transmitted week number value "rolls over" back to zero. Consequently, GPS receivers can't tell the difference between, for example, 1980, 1999 or 2019 etc.

Fortunately, although BeiDou and Galileo have similar representations of time, they transmit sufficient bits for the week number to be unambiguous for the forseeable future (the first ambiguity will be in 2078 for Galileo and not until 2163 for BeiDou). GLONASS has a different structure, based on a time of day, but again transmits sufficient information to avoid any ambiguity during the expected lifetime of the system (the first ambiguous date will be in 2124). Therefore, u-blox 8 / u-blox M8 receivers using [Protocol Version 18 and above](#page-15-2) regard the date information transmitted by GLONASS, BeiDou and Galileo to be unambiguous and, where necessary, use this to resolve any ambiguity in the GPS date.

Customers attaching u-blox receivers to simulators should be aware that GPS time is referenced to 6th January 1980, GLONASS to 1st January 1996, Galileo to 22nd August 1999 and BeiDou to 1st January 2006; the receiver cannot be expected to work reliably with signals that appear to come from before these dates.

## <span id="page-43-2"></span>**9.9.1 GPS-only Date Resolution**

In circumstances where only GPS signals are available and for receivers with earlier firmware versions, the receiver establishes the date by assuming that all week numbers must be at least as large as a reference rollover week number. This reference rollover week number is hard-coded into the firmware at compile time and is normally set a few weeks before the s/w is completed, but it can be overridden by the wknRollover field of the [UBX-CFG-NAVX5](#page-233-1) message to any value the user



wishes.

The following example illustrates how this works: Assume that the reference rollover week number set in the firmware at compile time is 1524 (which corresponds to a week in calendar year 2009, but would be transmitted by the satellites as 500). In this case, if the receiver sees transmissions containing week numbers in the range 500 ... 1023, these will be interpreted as week numbers 1524 ... 2047 (CY 2009 ... 2019), whereas transmissions with week numbers from 0 to 499 are interpreted as week numbers 2048 ... 2547 (CY 2019 ... 2028).

It is important to set the reference rollover week number appropriately when supplying ublox receivers with simulated signals, especially when the scenarios are in the past.

## <span id="page-44-0"></span>**10 Broadcast Navigation Data**

Reporting of broadcast navigation data is supported for products using protocol version 17 onwards.

The [UBX-RXM-SFRBX](#page-433-1) reports the broadcast navigation data message collected by the receiver from each tracked signal. When enabled, a separate message is generated every time the receiver decodes a complete subframe of data from a tracked signal. The data bits are reported, as received, including preambles and error checking bits as appropriate. However because there is considerable variation in the data structure of the different GNSS signals, the form of the reported data also varies. Indeed, although this document uses the term "subframe" generically, it is not strictly the correct term for all GNSS (e.g. GLONASS has "strings" and Galileo has "pages").

## <span id="page-44-1"></span>**10.1 Parsing Navigation Data Subframes**

Each [UBX-RXM-SFRBX](#page-433-1) message contains a subframe of data bits appropriate for the relevant GNSS, delivered in a number of 32 bit words, as indicated by numWords field.

Due to the variation in data structure between different GNSS, the most important step in parsing a [UBX-RXM-SFRBX](#page-433-1) message is to identify the form of the data. This should be done by reading the gnssId field, which indicates which GNSS the data was decoded from. In almost all cases, this is sufficient to indicate the structure and the following sections are organised by GNSS for that reason. However, in some cases the identity of the GNSS is not sufficient, and this is described, where appropriate, in the following sections.

In most cases, the data does not map perfectly into a number of 32 bit words and, consequently, some of the words reported in [UBX-RXM-SFRBX](#page-433-1) messages contain fields marked as "Pad". These fields should be ignored and no assumption should be made about their contents.

[UBX-RXM-SFRBX](#page-433-1) messages are only generated when complete subframes are detected by the receiver and all appropriate parity checks have passed.

Where the parity checking algorithm requires data to be inverted before it is decoded (e.g. GPS L1C/A), the receiver carries this out before the message output. Therefore, users can process data directly and do not need to worry about repeating any parity processing.

The meaning of the content of each subframe depends on the sending GNSS and is described in the relevant Interface Control Documents (ICD).

## <span id="page-44-2"></span>**10.2 GPS**

The data structure in the GPS L1C/A and L2C signals is dissimilar and thus the [UBX-RXM-SFRBX](#page-433-1) message structure differs as well. For the GPS L1C/A and L2C signals it is as follows.



### <span id="page-45-0"></span>**10.2.1 GPS L1C/A**

For GPS L1C/A signals, there is a fairly straightforward mapping between the reported subframe and the structure of subframe and words described in the GPS ICD. Each subframe comprises ten data words, which are reported in the same order they are received.

Each word is arranged as follows:

| <b>MSB</b>      |               |                 |                  |  |  |
|-----------------|---------------|-----------------|------------------|--|--|
| $\frac{10}{10}$ | Pad<br>2 bits | Data<br>24 bits | Parity<br>6 bits |  |  |

Note that as the GPS data words only comprise 30 bits, the 2 most significant bits in each word reported by [UBX-RXM-SFRBX](#page-433-1) are padding and should be ignored.

## <span id="page-45-1"></span>**10.3 GLONASS**

For GLONASS L1OF and L2OF signals, each reported subframe contains a string as described in the GLONASS ICD. This string comprises 85 data bits which are reported over three 32 bit words in the [UBX-RXM-SFRBX](#page-433-1) message. Data bits 1 to 8 are always a hamming code, whilst bits 81 to 84 are a string number and bit 85 is the idle chip, which should always have a value of zero. The meaning of other bits vary with string and frame number.

The fourth and final 32 bit word in the [UBX-RXM-SFRBX](#page-433-1) message contains frame and superframe numbers (where available). These values aren't actually transmitted by the SVs, but are deduced by the receiver and are included to aid decoding of the transmitted data. However, the receiver does not always know these values, in which case a value of zero is reported.



The four words are arranged as follows:

In some circumstances, (especially on startup) the receiver may be able to decode data from a GLONASS SV before it can identify the SV. When this occurs [UBX-RXM-SFRBX](#page-433-1) messages will be issued with an svId of 255 to indicate "unknown".



## <span id="page-46-0"></span>**10.4 BeiDou**

For BeiDou (B1I) signals, there is a fairly straightforward mapping between the reported subframe and the structure of subframe and words described in the BeiDou ICD. Each subframe comprises ten data words, which are reported in the same order they are received.

Each word is arranged as follows:

| <b>MSB</b>      |               |                 |                  |  |
|-----------------|---------------|-----------------|------------------|--|
| $\frac{10}{10}$ | Pad<br>2 bits | Data<br>22 bits | Parity<br>8 bits |  |

Note that as the BeiDou data words only comprise 30 bits, the 2 most significant bits in each word reported by [UBX-RXM-SFRBX](#page-433-1) are padding and should be ignored.

## <span id="page-46-1"></span>**10.5 Galileo**

The Galileo E1OS and E5b signals both transmit the I/NAV message but in different configurations. The [UBX-RXM-SFRBX](#page-433-1) structures for them are as follows.

## <span id="page-46-2"></span>**10.5.1 Galileo E1OS**

For Galileo E1OS signals, each reported subframe contains a pair of I/NAV pages as described in the Galileo ICD.

Galileo pages can either be "Nominal" or "Alert" pages. For Nominal pages the eight words are arranged as follows:





Alert pages are reported in very similar manner, but the page type bits will have value 1 and the structure of the eight words will be slightly different (as indicated by the Galileo ICD).

## <span id="page-47-0"></span>**10.6 SBAS**

For SBAS (L1C/A) signals each reported subframe contains eight 32 data words to deliver the 250 bits transmitted in each SBAS data block.

The eight words are arranged as follows:





## <span id="page-48-0"></span>**10.7 QZSS**

The structure of the data delivered by QZSS L1C/A signals is effectively identical to that of [GPS](#page-44-2) [\(L1C/A\).](#page-44-2) Similarly the QZSS L2C signal is effectively identical to the [GPS \(L2C\)](#page-44-2).

The QZSS (L1SAIF) signal is different and uses the same data block format as used by [SBAS](#page-47-0) [\(L1C/A\).](#page-47-0) QZSS (SAIF) signals can be distinguished from QZSS (L1C/A and L2C) by noting that they have 8 words, instead of 10 for QZSS (L1C/A and L2C).

## <span id="page-48-1"></span>**10.8 IMES**

Data messages from IMES are of variable length and u-blox receivers currently support the following varieties:

- Short comprising of a single word
- Medium comprising of two words
- Position 1 comprising of three words
- Position 2 comprising of four words

As a consequence, an IMES [UBX-RXM-SFRBX](#page-433-1) message may have a numWords value of 1, 2, 3 or 4.

In all cases the structure of words follows the same pattern, with the first word being different from any/all subsequent words as indicated by the following diagram:

|                                        | <b>MSB</b>    |                 |                    |                           |                 | <b>LSB</b>       |
|----------------------------------------|---------------|-----------------|--------------------|---------------------------|-----------------|------------------|
| 1                                      | Pad<br>2 bits |                 | Preamble<br>8 bits | Message<br>Type<br>3 bits | Data<br>13 bits | Parity<br>6 bits |
|                                        |               |                 |                    |                           |                 |                  |
| $\overline{2}$<br>to<br>$\overline{4}$ | Pad<br>2 bits | Count<br>3 bits |                    |                           | Data<br>21 bits | Parity<br>6 bits |

## <span id="page-48-2"></span>**10.9 Summary**

The following table gives a summary of the different data message formats reported by the [UBX-](#page-433-1)[RXM-SFRBX](#page-433-1) message.



| GNSS    | Signal     | gnssId | numWords | period |
|---------|------------|--------|----------|--------|
| GPS     | L1C/A      | 0      | 10       | 6s     |
| SBAS    | L1C/A      | 1      | 8        | 1s     |
| Galileo | E1OS       | 2      | 8        | 2s     |
| BeiDou  | B1I D1     | 3      | 10       | 6s     |
| BeiDou  | B1I D2     | 3      | 10       | 0.6s   |
| IMES    | Short      | 4      | 1        | -      |
| IMES    | Medium     | 4      | 2        | -      |
| IMES    | Position 1 | 4      | 3        | -      |
| IMES    | Position 2 | 4      | 4        | -      |
| QZSS    | L1C/A      | 5      | 10       | 6s     |
| QZSS    | L1SAIF     | 5      | 8        | 1s     |
| GLONASS | L1OF       | 6      | 4        | 2s     |
|         |            |        |          |        |

## **Data message formats reported by UBX-RXM-SFRBX**

## <span id="page-49-0"></span>**11 Serial Communication Ports Description**

u-blox receivers come with a highly flexible communication interface. It supports the NMEA and the proprietary UBX protocols, and is truly multi-port and multi-protocol capable. Each protocol (UBX, NMEA) can be assigned to several ports at the same time (multi-port capability) with individual settings (e.g. baud rate, message rates, etc.) for each port. It is even possible to assign more than one protocol (e.g. UBX protocol and NMEA at the same time) to a single port (multiprotocol capability), which is particularly useful for debugging purposes.

To enable a message on a port, the UBX and/or NMEA protocol must be enabled on that port using the UBX proprietary message [UBX-CFG-PRT](#page-257-1). This message also allows changing port-specific settings (baud rate, address etc.). See [UBX-CFG-MSG](#page-229-1) for a description of the mechanism for enabling and disabling messages.

The following table shows the port numbers reported in the messages [UBX-MON-IO](#page-357-1), [UBX-MON-](#page-358-2)[MSGPP](#page-358-2), [UBX-MON-TXBUF](#page-368-1), [UBX-MON-RXBUF](#page-360-2). Note that any numbers not listed are reserved for future use.

## **Port Number assignment**

| Port # | Electrical Interface |
|--------|----------------------|
| 0      | DDC (I2C compatible) |
| 1      | UART 1               |
| 3      | USB                  |
| 4      | SPI                  |

## <span id="page-49-1"></span>**11.1 TX-ready indication**

This feature enables each port to define a corresponding pin, which indicates if bytes are ready to be transmitted. By default, this feature is disabled. For USB, this feature is configurable but might not behave as described below due to a different internal transmission mechanism. If the number of pending bytes reaches the threshold configured for this port, the corresponding pin will become active (configurable active-low or active-high), and stay active until the last bytes have been transferred from software to hardware (note that this is not necessarily equal to all bytes transmitted, i.e. after the pin has become inactive, up to 16 bytes can still need to be transferred to the host).



The TX-ready pin can be selected from all PIOs which are not in use (see [UBX-MON-HW](#page-356-1) for a list of the PIOs and their mapping), each TX-ready pin is exclusively for one port and cannot be shared. If the PIO is invalid or already in use, only the configuration for the TX-ready pin is ignored, the rest of the port configuration is applied if valid. The acknowledge message does not indicate if the TXready configuration is successfully set, it only indicates the successful configuration of the port. To validate successful configuration of the TX-ready pin, the port configuration should be polled and the settings of TX-ready feature verified (will be set to disabled/all zero if the settings are invalid).

The threshold should not be set above 2 kB, as the internal message buffer limit can be reached before this, resulting in the TX-ready pin never being set as messages are discarded before the threshold is reached.

## <span id="page-50-0"></span>**11.2 Extended TX timeout**

If the host does not communicate over SPI or DDC for more than approximately 2 seconds, the device assumes that the host is no longer using this interface and no more packets are scheduled for this port. This mechanism can be changed by enabling "extended TX timeouts", in which case the receiver delays idling the port until the allocated and undelivered bytes for this port reach 4 kB. This feature is especially useful when using the TX-ready feature with a message output rate of less than once per second, and polling data only when data is available, determined by the TXready pin becoming active.

## <span id="page-50-1"></span>**11.3 UART Ports**

One or two Universal Asynchronous Receiver/Transmitter ([UART](http://en.wikipedia.org/wiki/Uart)) ports are featured, that can be used to transmit GNSS measurements, monitor status information and configure the receiver. See our online product descriptions for availability.

The serial ports consist of an RX and a TX line. Neither handshaking signals nor hardware flow control signals are available. These serial ports operate in asynchronous mode. The baud rates can be configured individually for each serial port. However, there is no support for setting different baud rates for reception and transmission.

As of [Protocol version 18+](#page-15-2), the UART RX interface will be disabled when more than 100 frame errors are detected during a one-second period. This can happen if the wrong baud rate is used or the UART RX pin is grounded. The error message appears when the UART RX interface is re-enabled at the end of the one-second period.

| Baud Rate | Data Bits | Parity | Stop Bits |
|-----------|-----------|--------|-----------|
| 4800      | 8         | none   | 1         |
| 9600      | 8         | none   | 1         |
| 19200     | 8         | none   | 1         |
| 38400     | 8         | none   | 1         |
| 57600     | 8         | none   | 1         |
| 115200    | 8         | none   | 1         |
| 230400    | 8         | none   | 1         |
| 460800    | 8         | none   | 1         |

Note that for protocols such as NMEA or UBX, it does not make sense to change the default word length values (data bits) since these properties are defined by the protocol and not by the



electrical interface.

If the amount of data configured is too much for a certain port's bandwidth (e.g. all UBX messages output on a UART port with a baud rate of 9600), the buffer will fill up. Once the buffer space is exceeded, new messages to be sent will be dropped. To prevent message losses, the baud rate and communication speed or the number of enabled messages should be selected so that the expected number of bytes can be transmitted in less than one second.

See [UBX-CFG-PRT for UART](#page-257-1) for a description of the contents of the UART port configuration message.

## <span id="page-51-0"></span>**11.4 USB Port**

One Universal Serial Bus ([USB\)](http://en.wikipedia.org/wiki/Universal_Serial_Bus) port is featured. See the data sheet for availability. This port can be used for communication purposes and to power the positioning chip or module.

The USB interface supports two different power modes:

- In Self Powered Mode the receiver is powered by its own power supply. **VDDUSB** is used to detect the availability of the USB port, i.e. whether the receiver is connected to a USB host.
- In Bus Powered Mode the device is powered by the USB bus, therefore no additional power supply is needed. See the table below for the default maximum current that can be drawn by the receiver. See [UBX-CFG-USB](#page-289-1) for a description on how to change this maximum. Configuring Bus Powered Mode indicates that the device will enter a low power state with disabled GNSS functionality when the host suspends the device, e.g. when the host is put into stand-by mode.

#### **Maximum Current in Bus Powered Mode**

| Generation           | Max Current |
|----------------------|-------------|
| u-blox 8 / u-blox M8 | 100 mA      |

The voltage range for **VDDUSB** is specified from 3.0 V to 3.6 V, which differs slightly from the specification for VCC.

The boot screen is retransmitted on the USB port after the enumeration. However, messages generated between boot-up of the receiver and USB enumeration are not visible on the USB port.

## <span id="page-51-1"></span>**11.5 DDC Port**

The Display Data Channel [\(DDC](http://en.wikipedia.org/wiki/Display_Data_Channel)) bus is a two-wire communication interface compatible with the I2C standard [\(Inter-Integrated Circuit](http://en.wikipedia.org/wiki/I%C2%B2C)). See our online product selector matrix for availability.

Unlike all other interfaces, the DDC is not able to communicate in full-duplex mode, i.e. TX and RX are mutually exclusive. u-blox receivers act as a slave in the communication setup, therefore they cannot initiate data transfers on their own. The host, which is always master, provides the data clock (SCL), and the clock frequency is therefore not configurable on the slave.

The receiver's DDC address is set to 0x42 by default. This address can be changed by setting the mode field in [UBX-CFG-PRT for DDC](#page-265-0) accordingly.

As the receiver will be run in slave mode and the DDC physical layer lacks a handshake mechanism to inform the master about data availability, a layer has been inserted between the physical layer and the UBX and NMEA layer. The receiver DDC interface implements a simple streaming interface that allows the constant polling of data, discarding everything that is not parse-able. The receiver returns 0xFF if no data is available. The [TX-ready](#page-49-1) feature can be used to inform the master about data availability and can be used as a trigger for data transmission.



## <span id="page-52-0"></span>**11.5.1 Read Access**

The DDC interface allows 256 slave registers to be addressed. As shown in Figure DDC Register Layout only three of these are currently implemented. The data registers 0 to 252, at addresses 0x00 to 0xFC, each 1 byte in size, contain information to be defined later - the result of reading them is undefined. The currently available number of bytes in the message stream can be read at addresses 0xFD and 0xFE. The register at address 0xFF allows the data stream to be read. If there is no data awaiting transmission from the receiver, then this register will deliver the value 0xff, which cannot be the first byte of a valid message. If message data is ready for transmission, then successive reads of register 0xff will deliver the waiting message data.

The registers 0x00 to 0xFC are reserved for future use and may be defined in a later firmware release. Do not use them, as they don't provide any meaningful data!

## **DDC Register Layout**



## **11.5.1.1 Read Access Forms**

There are two forms of DDC read transfer. The 'random access' form includes a slave register address and thus allows any register to be read. The second 'current address' form omits the register address. If this second form is used, then an address pointer in the receiver is used to determine which register to read. This address pointer will increment after each read unless it is already pointing at register 0xff, the highest addressable register, in which case it remains unaltered. The initial value of this address pointer at start-up is 0xff, so by default all current address reads will repeatedly read register 0xff and receive the next byte of message data (or 0xff if no message data is waiting). Figure DDC Random Read Access shows the format of the random access form of the request. Following the start condition from the master, the 7-bit device address and the RW bit (which is a logic low for write access) are clocked onto the bus by the master transmitter. The receiver answers with an acknowledge (logic low) to indicate that it



recognises the address. Next, the 8-bit address of the register to be read must be written to the bus. Following the receiver's acknowledge, the master again triggers a start condition and writes the device address, but this time the RW bit is a logic high to initiate the read access. Now, the master can read 1 to N bytes from the receiver, generating a not-acknowledge and a stop condition after the last byte being read.

## **DDC Random Read Access**





## <span id="page-53-0"></span>**11.5.2 Write Access**

The receiver does not provide any write access except for writing UBX and NMEA messages to the receiver, such as configuration or aiding data. Therefore, the register set mentioned in section [Read Access](#page-52-0) is not writeable. Following the start condition from the master, the 7-bit device address and the RW bit (which is a logic low for write access) are clocked onto the bus by the master transmitter. The receiver answers with an acknowledge (logic low) to indicate that it is responsible for the given address. Now, the master can write 2 to N bytes to the receiver, generating a stop condition after the last byte being written. The number of data bytes must be at least 2 to properly distinguish from the write access to set the address counter in random read accesses.



## **DDC Write Access**



## <span id="page-54-0"></span>**11.6 SPI Port**

A Serial Peripheral Interface [\(SPI](http://en.wikipedia.org/wiki/Serial_Peripheral_Interface_Bus)) bus is available with selected receivers. See our online product descriptions for availability.

SPI is a four-wire synchronous communication interface. In contrast to UART, the master provides the clock signal, which therefore doesn't need to be specified for the slave in advance. Moreover, a baud rate setting is not applicable for the slave. SPI modes 0-3 are implemented and can be configured using the field mode.spiMode in [CFG-PRT for SPI](#page-262-0) (default is SPI mode 0).

The SPI clock speed is limited depending on hardware and firmware versions!

## <span id="page-54-1"></span>**11.6.1 Maximum SPI clock speed**

u-blox 8 / u-blox M8 receivers support a maximum SPI clock speed of 5.5 MHz.

## <span id="page-54-2"></span>**11.6.2 Read Access**

As the register mode is not implemented for the SPI port, only the UBX/NMEA message stream is provided. This stream is accessed using the Back-To-Back Read and Write Access (see section [Back-To-Back Read and Write Access](#page-54-3)). When no data is available to be written to the receiver, MOSI should be held logic high, i.e. all bytes written to the receiver are set to 0xFF.

To prevent the receiver from being busy parsing incoming data, the parsing process is stopped after 50 subsequent bytes containing 0xFF. The parsing process is re-enabled with the first byte not equal to 0xFF. The number of bytes to wait for deactivation (50 by default) can be adjusted using the field mode.ffCnt in [CFG-PRT for SPI](#page-262-0), which is only necessary when messages shall be sent containing a large number of subsequent 0xFF bytes.

If the receiver has no more data to send, it sets MISO to logic high, i.e. all bytes transmitted decode to 0xFF. An efficient parser in the host will ignore all 0xFF bytes which are not part of a message and will resume data processing as soon as the first byte not equal to 0xFF is received.

## <span id="page-54-3"></span>**11.6.3 Back-To-Back Read and Write Access**

The receiver does not provide any write access except for writing UBX and NMEA messages to the receiver, such as configuration or aiding data. For every byte written to the receiver, a byte will simultaneously be read from the receiver. While the master writes to MOSI, at the same time it



needs to read from MISO, as any pending data will be output by the receiver with this access. The data on MISO represents the results from a current address read, returning 0xFF when no more data is available.



## **SPI Back-To-Back Read/Write Access**

## <span id="page-55-0"></span>**11.7 How to change between protocols**

Reconfiguring a port from one protocol to another is a two-step process:

- Step 1: the preferred protocol(s) needs to be enabled on a port using [UBX-CFG-PRT](#page-257-1). One port can handle several protocols at the same time (e.g. NMEA and UBX). By default, all ports are configured for UBX and NMEA protocol so in most cases, it's not necessary to change the port settings at all. Port settings can be viewed and changed using the [UBX-CFG-PRT](#page-257-1) messages.
- Step 2: activate certain messages on each port using [UBX-CFG-MSG](#page-229-1).

## <span id="page-55-1"></span>**12 Multiple GNSS assistance (MGA)**

## <span id="page-55-2"></span>**12.1 Introduction**

Users would ideally like GNSS receivers to provide accurate position information the moment the receivers are turned on. With standard GNSS receivers there can be a significant delay in providing the first position fix, principally because the receiver needs to obtain data from several satellites and the satellites transmit that data slowly. Under adverse signal conditions, data downloads from the satellites to the receiver can take minutes, hours or even fail altogether.

Assisted GNSS (A-GNSS) is a common solution to this problem and involves some form of reference network of receivers that collect data such as ephemeris, almanac, accurate time and satellite status and pass this onto to the target receiver via any suitable communications link. Such assistance data enables the receiver to compute a position within a few seconds, even under poor signal conditions.

The UBX-MGA message class provides the means for delivering assistance data to u-blox receivers and customers can obtain it from the u-blox AssistNow Online or AssistNow Offline Services. Alternatively they can obtain assistance data from third-party sources (e.g. SUPL/RRLP) and generate the appropriate UBX-MGA messages to send this data to the receiver.



## <span id="page-56-0"></span>**12.2 Assistance Data**

u-blox receivers currently accept the following types of assistance data:

- **Position:** Estimated receiver position can be submitted to the receiver using the [UBX-MGA-INI-](#page-342-1)[POS\\_XYZ](#page-342-1) or [UBX-MGA-INI-POS\\_LLH](#page-343-0) messages.
- **Time:** The current time can either be supplied as an inexact value via the standard communication interfaces, suffering from latency depending on the baud rate, or using hardware time synchronization where an accurate time pulse is connected to an external interrupt. The preferred option is to supply UTC time using the [UBX-MGA-INI-TIME\\_UTC](#page-343-0) message, but times referenced to some GNSS can be delivered with the [UBX-MGA-INI-TIME\\_](#page-345-0) [GNSS](#page-345-0) message.
- **Clock drift:** An estimate of the clock drift can be sent to the receiver using the [UBX-MGA-INI-](#page-346-0)[CLKD](#page-346-0) message.
- **Frequency:** It is possible to supply hardware frequency aiding by connecting a periodic rectangular signal with a frequency up to 500 kHz and arbitrary duty cycle (low/high phase duration must not be shorter than 50 ns) to an external interrupt, and providing the applied frequency value using the [UBX-MGA-INI-FREQ](#page-347-0) message.
- **Current orbit data:** Each different GNSS transmits orbit data in slightly different forms. For each system there are separate messages for delivering ephemeris and almanac. So for example GPS ephemeris is delivered to the receiver using the [UBX-MGA-GPS-EPH](#page-337-1) message, while GLONASS almanac is delivered with the [UBX-MGA-GLO-ALM](#page-335-0) message.
- **Predicted orbit data:** [UBX-MGA-ANO](#page-322-1) messages can be used to supply predictions of future orbit information to a u-blox receiver. These messages can be obtained from the AssistNow Offline Service and allow a receiver to improve its TTFF even when it is no longer connected to the internet.
- **Auxiliary information:** Each GNSS transmits some auxiliary data (such as SV health information or UTC parameters) to the receiver. A selection of messages exist for providing such information to the receiver, such as [UBX-MGA-GPS-IONO](#page-341-0) for ionospheric data from GPS.
- **EOP:** Earth Orientation Parameters can be sent to the receiver using the [UBX-MGA-INI-EOP](#page-348-1) message. This will replace the default model used by the AssistNow Autonomous feature and may improve performance (particularly as the receiver gets older and the built-in model decays).
- **Navigation Database:** u-blox receivers can be instructed to dump the current state of their internal navigation database with the [UBX-MGA-DBD-POLL](#page-327-1) message; sending this information back to the receiver (e.g. after a period when the receiver was turned off) restores the database to its former state, and thus allows the receiver to restart rapidly.

## <span id="page-56-1"></span>**12.3 AssistNow Online**

AssistNow Online is u-blox' end-to-end Assisted GNSS (A-GNSS) solution for receivers that have access to the internet. Data supplied by the AssistNow Online Service can be directly uploaded to a u-blox receiver in order to substantially reduce Time To First Fix (TTFF), even under poor signal conditions. The system works by collecting data such as ephemeris and almanac from the satellites through u-blox' Global Reference Network of receivers and providing this data to customers in a convenient form that can be forwarded on directly to u-blox receivers.

The AssistNow Online Service uses a simple, stateless, HTTP interface. Therefore, it works on all standard mobile communication networks that support internet access, including GPRS, UMTS and Wireless LAN. No special arrangements need to be made with mobile network operators to



## enable AssistNow Online.



The data returned by the AssistNow Online Service is a sequence of UBX-MGA messages, starting with an estimate of the current time in the form of a [UBX-MGA-INI-TIME\\_UTC](#page-343-0) message.

AssistNow Online currently supports GPS, GLONASS, BeiDou, Galileo, and QZSS.

Customers may choose to use third party sources of assistance data instead of using the AssistNow Online Service. Customers choosing this option will need to ensure that the data is converted from the format used by the third party source to the appropriate MGA messages. However, it is important to ensure that the receiver has an estimate of the current time before it processes any other assistance data. For this reason, it is strongly recommended to send a [UBX-MGA-INI-TIME\\_UTC](#page-343-0) or [UBX-MGA-INI-TIME\\_GNSS](#page-345-0) as the first message of any assistance.

#### <span id="page-57-0"></span>**12.3.1 Host Software**

As u-blox receivers have no means to connect directly with the internet, the AssistNow Online system can only work if the host system that contains the receiver can connect to the internet, download the data from the AssistNow Online Service and forward it on to the receiver. In the simplest case that may involve fetching the data from the AssistNow Online Service (by means of a single HTTP GET request), and sending the resulting data to the receiver.

Depending on the circumstances, it may be beneficial for the host software to include:

- Creating an appropriate [UBX-MGA-INI-TIME\\_UTC](#page-343-0) message to deliver a better sense of time to the receiver, especially if the host system has a very good sense of the current time and can deliver a time pulse to one of the receiver's EXTINT pins.
- Enable and use [flow control](#page-58-1) to prevent loss of data due to buffer overflow in the receiver.
- u-blox provides the source code for an example library, called libMGA, that provides all of



the functionality we expect in most host software.

## <span id="page-58-0"></span>**12.3.2 AssistNow Online Sequence**

A typical sequence of use of the AssistNow Online Service comprises the following steps:

- Power-up the u-blox receiver
- Request data from the AssistNow Online Service
- Optionally send [UBX-MGA-INI-TIME\\_UTC](#page-343-0) followed by hardware time synchronization pulse if hardware time synchronization is required.
- Send the UBX messages obtained from the AssistNow Online Service to the receiver.

#### <span id="page-58-1"></span>**12.3.3 Flow Control**

u-blox receivers aim to process incoming messages as quickly as possible, but there will always be a small delay in processing each message. Uploading assistance data to the receiver can involve sending as many as one hundred individual messages to the receiver, one after the other. If the communication link is fast, and/or the receiver is busy (trying to acquire new signals), it is possible that the internal buffers will overflow and some messages will be lost. In order to combat this, ublox receivers support an optional flow control mechanism for assistance.

Flow control is activated by setting the ackAiding parameter in the [UBX-CFG-NAVX5](#page-233-1) message.

As a result the receiver will issue an acknowledgement message ([UBX-MGA-ACK](#page-321-0)) for each assistance message it successfully receives. The host software can examine these acknowledgements to establish whether there were any problems with the data sent to the receiver and deduce (by the lack of acknowledgement) if any messages have been lost. It may then be appropriate to resend some of the assistance messages.

The simplest way to implement flow control would be to send one UBX-MGA assistance message at a time, waiting for the acknowledgement, before sending the next. However, such a strategy is likely to introduce significant delays into the whole assistance process. The best strategy will depend on the amount of assistance data being sent and the nature of the communications link (e.g. baud rate of serial link). u-blox recommends that when customers are developing their host software they start by sending all assistance messages and then analyse the resulting acknowledgements to see whether there have been significant losses. Adding small delays during the transmission may be a simple but effective way to avoid substantial loss of data.

#### <span id="page-58-2"></span>**12.3.4 Authorization**

The AssistNow Online Service is only available for use by u-blox customers. In order to use the services, customers will need to obtain an authorization token from u-blox. This token must be supplied as a parameter whenever a request is made to either service.

## <span id="page-58-3"></span>**12.3.5 Service Parameters**

The information exchange with the AssistNow Online Service is based on the HTTP protocol. Upon reception of an HTTP GET request, the server will respond with the required messages in binary format or with an error string in text format. After delivery of all data, the server will terminate the connection.

The HTTP GET request from the client to the server should contain a standard HTTP query string in the request URL. The query string consists of a set of "key=value" parameters in the following form:



key=value;key=value;key=value;

The following rules apply:

- The order of keys is not important.
- Keys and values are case sensitive.
- Keys and values must be separated by an equals character ('=').
- Key/value pairs must be separated by semicolons (';').
- If a value contains a list, each item in the list must be separated by a comma (',').

The following table describes the keys that are supported.

| Key Name    | Unit/Range | Optional | Description                                                           |
|-------------|------------|----------|-----------------------------------------------------------------------|
| token       | String     |          | Mandatory The authorization token supplied by u-blox when a client    |
|             |            |          | registers to use the service.                                         |
| gnss        | String     |          | Mandatory A comma separated list of the GNSS for which data should be |
|             |            |          | returned. Valid GNSS are: gps, qzss and glo.                          |
| datatype    | String     |          | Mandatory A comma separated list of the data types required by the    |
|             |            |          | client. Valid data types are: eph, alm, aux and pos. Time data        |
|             |            |          | is always returned for each request. If the value of this             |
|             |            |          | parameter is an empty string, only time data will be returned.        |
| lat         | Numeric    | Optional | Approximate user latitude in WGS 84 expressed in degrees              |
|             | [degrees]  |          | and fractional degrees. Must be in range -90 to 90. Example:          |
|             |            |          | lat=47.2.                                                             |
| lon         | Numeric    | Optional | Approximate user longitude in WGS 84 expressed in degrees             |
|             | [degrees]  |          | and fractional degrees. Must be in range -180 to 180. Example:        |
|             |            |          | lon=8.55.                                                             |
| alt         | Numeric    | Optional | Approximate user altitude above WGS 84 Ellipsoid. If this             |
|             | [meters]   |          | value is not provided, the server assumes an altitude of 0            |
|             |            |          | meters. Must be in range -1000 to 50000.                              |
| pacc        | Numeric    | Optional | Approximate accuracy of submitted position (see position              |
|             | [meters]   |          | parameters note below). If this value is not provided, the            |
|             |            |          | server assumes an accuracy of 300 km. Must be in range 0 to           |
|             |            |          | 6000000.                                                              |
| tacc        | Numeric    | Optional | The timing accuracy (see time parameters note below). If this         |
|             | [seconds]  |          | value is not provided, the server assumes an accuracy of 10           |
|             |            |          | seconds. Must be in range 0 to 3600.                                  |
| latency     | Numeric    | Optional | Typical latency between the time the server receives the              |
|             | [seconds]  |          | request, and the time when the assistance data arrives at the         |
|             |            |          | u-blox receiver. The server can use this value to correct the         |
|             |            |          | time being transmitted to the client. If this value is not            |
|             |            |          | provided, the server assumes a latency of 0. Must be in range         |
|             |            |          | 0 to 3600.                                                            |
| filteronpos | (no value  | Optional | If present, the ephemeris data returned to the client will only       |
|             | required)  |          | contain data for the satellites which are likely to be visible        |
|             |            |          | from the approximate position provided by the lat, lon, alt and       |
|             |            |          | pacc parameters. If the lat and lon parameters are not                |
|             |            |          | provided the service will return an error.                            |

## **AssistNow Online Parameter Keys**



AssistNow Online Parameter Keys continued

| Key Name   | Unit/Range | Optional | Description                                                  |
|------------|------------|----------|--------------------------------------------------------------|
| filteronsv | String     | Optional | A comma separated list of u-blox gnssId:svId pairs. The      |
|            |            |          | ephemeris data returned to the client will only contain data |
|            |            |          | for the listed satellites.                                   |

Thus, as an example, a valid parameter string would be:

token=XXXXXXXXXXXXXXXXXXXXXX;gnss=gps,qzss;datatype=eph,pos,aux;lat=47.28;lon=8.56; pacc=1000

## **12.3.5.1 Position parameters (lat, lon, alt and pacc)**

The position parameters (lat, lon, alt and pacc) are used by the server for two purposes:

- If the filteronpos parameter is provided, the server determines the currently visible satellites at the user position, and only sends the ephemeris data of those satellites which should be in view at the location of the user. This reduces bandwidth requirements. In this case the 'pacc' value is taken into account, meaning that the server will return all SVs visible in the given uncertainty region.
- If the datatype 'pos' is requested, the server will return the position and accuracy in the response data. When this data is supplied to the u-blox receiver, depending on the accuracy of the provided data, the receiver can then choose to select a better startup strategy. For example, if the position is accurate to 100 km or better, the u-blox receiver will choose to go for a more optimistic startup strategy. This will result in quicker startup time. The receiver will decide which strategy to choose, depending on the 'pacc' parameter. If the submitted user position is less accurate than what is being specified with the 'pacc' parameter, then the user will experience prolonged or even failed startups.

## **12.3.5.2 Time parameters (tacc and latency)**

Time data is always returned with each request. The time data refers to the time at which the response leaves the server, corrected by an optional latency value. This time data provided by the service is accurate to approximately 10 ms but by default the time accuracy is indicated to be +/- 10 seconds in order to account for network latency and any time between the client receiving the data and it being provided to the receiver.

If both the network latency and the client latency can safely be assumed to be very low (or are known), the client can choose to set the accuracy of the time message (tacc) to a much smaller value (e.g. 0.5 s). This will result in a faster TTFF. The latency can also be adjusted as appropriate. However, these fields should be used with caution: if the time accuracy is not correct when the time data reaches the receiver, the receiver may experience prolonged or even failed start-ups.

For optimal results, the client should establish an accurate sense of time itself (e.g. by calibrating its system clock using a local NTP service) and then modify the time data received from the service as appropriate.

## <span id="page-60-0"></span>**12.3.6 Multiple Servers**

u-blox has designed and implemented the AssistNow Online Service in a way that should provide very high reliability. Nonetheless, there will be rare occasions when a server is not available (e.g. due to failure or some form of maintenance activity). In order to protect customers against the impact of such outages, u-blox will run at least two instances of the AssistNow Online Service on independent machines. Customers will have a free choice of requesting assistance data from any



of these servers, as all will provide the same information. However, should one fail for whatever reason, it is highly unlikely that the other server(s) will also be unavailable. Therefore customers requiring the best possible availability are recommended to implement a scheme where they direct their requests to a chosen server, but, if that server fails to respond, have a fall-back mechanism to use another server instead.

## <span id="page-61-0"></span>**12.4 AssistNow Offline**

AssistNow Offline is a feature that combines special firmware in u-blox receivers and a proprietary service run by u-blox. It is targeted at receivers that only have occasional internet access and so cannot use AssistNow Online. AssistNow Offline speeds up Time To First Fix (TTFF), typically to considerably less than 10 s

AssistNow Offline currently supports GPS and GLONASS. u-blox intends to expand the AssistNow Offline Service to support other GNSS (such as BeiDou and Galileo) in due course.

The AssistNow Offline Service uses a simple, stateless, HTTP interface. Therefore, it works on all standard mobile communication networks that support internet access, including GPRS, UMTS and Wireless LAN. No special arrangements need to be made with mobile network operators to enable AssistNow Offline.

Users of AssistNow Offline are expected to download data from the AssistNow Offline Service, specifying the time period they want covered (1 to 5 weeks) and the types of GNSS. This data must be uploaded to a u-blox receiver, so that it can estimate the positions of the satellites, when no better data is available. Using these estimates will not provide as accurate a position fix as if current ephemeris data is used, but it will allow much faster TTFFs in nearly all cases.

The data obtained from the AssistNow Offline Service is organised by date, normally a day at a time. Consequently the more weeks for which coverage is requested, the larger the amount of data to handle. Similarly, each different GNSS requires its own data and in the extreme cases, several hundred kilobytes of data will be provided by the service. This amount can be reduced by requesting lower resolution, but this will have a small negative impact on both position accuracy and TTFF. See section [Offline Service Parameters](#page-61-1) for details of how to specify these options.

The downloaded Offline data is encoded in a sequence of [UBX-MGA-ANO](#page-322-1) messages, one for every SV for every day of the period covered. Thus, for example, data for all GPS SVs for 4 weeks will involve in excess of 900 separate messages, taking up around 70 kbytes. Where a u-blox receiver has flash storage, all the data can be directly uploaded to be stored in the flash until it is needed. In this case, the receiver will automatically select the most appropriate data to use at any time. See section [flash-based AssistNow Offline](#page-63-0) for further details.

AssistNow Offline can also be used where the receiver has no flash storage, or there is insufficient spare flash memory. In this case the customer's system must store the AssistNow Offline data until the receiver needs it and then upload only the appropriate part for immediate use. See section [host-based AssistNow Offline](#page-64-0) for further details.

## <span id="page-61-1"></span>**12.4.1 Service Parameters**

The information exchange with the AssistNow Offline Service is based on the HTTP protocol. Upon reception of an HTTP GET request, the server will respond with the required messages in binary format or with an error string in text format. After delivery of all data, the server will terminate the connection.

The HTTP GET request from the client to the server should contain a standard HTTP querystring



in the request URL. The querystring consists of a set of "key=value" parameters in the following form:

key=value;key=value;key=value;

The following rules apply:

- The order of keys is not important.
- Keys and values are case sensitive.
- Keys and values must be separated by an equals character ('=').
- Key/value pairs must be separated by semicolons (';').
- If a value contains a list, each item in the list must be separated by a comma (',').

The following table describes the keys that are supported.

| Key Name   | Unit/Range | Optional | Description                                                           |
|------------|------------|----------|-----------------------------------------------------------------------|
| token      | String     |          | Mandatory The authorization token supplied by u-blox when a client    |
|            |            |          | registers to use the service.                                         |
| gnss       | String     |          | Mandatory A comma separated list of the GNSS for which data should be |
|            |            |          | returned. The currently supported GNSS are: gps and glo.              |
| period     | Numeric    | Optional | The number of weeks into the future the data should be valid          |
|            | [weeks]    |          | for. Data can be requested for up to 5 weeks in to the future. If     |
|            |            |          | this value is not provided, the server assumes a period of 4          |
|            |            |          | weeks.                                                                |
| resolution | Numeric    | Optional | The resolution of the data: 1=every day, 2=every other day,           |
|            | [days]     |          | 3=every third day. If this value is not provided, the server          |
|            |            |          | assumes a resolution of 1 day.                                        |

## **AssistNow Offline Parameter Keys**

Thus, as an example, a valid parameter string would be:

token=XXXXXXXXXXXXXXXXXXXXXX;gnss=gps,glo;

## <span id="page-62-0"></span>**12.4.2 Authorization**

The AssistNow Offline Service uses the same authorization process as AssistNow Online; see [above](#page-58-2) for details.

## <span id="page-62-1"></span>**12.4.3 Multiple Servers**

The AssistNow Offline Service uses the same multiple server mechanism to provide high availability as AssistNow Online; see [above](#page-60-0) for details.

## <span id="page-62-2"></span>**12.4.4 Time, Position and Almanac**

While AssistNow Offline can be used on its own, it is expected that the user will provide estimates of the receiver's current position, the current time and ensure that a reasonably up to date almanac is available. In most cases this information is likely to be available without the user needing to do anything. For example, where the receiver is connected to a battery backup power supply and has a functioning real time clock (RTC), the receiver will keep its own sense of time and will retain the last known position and any almanac. However, should the receiver be completely unpowered before startup, then it will greatly improve TTFF if time, position and almanac can be supplied in some form.

Almanac data has a validity period of several weeks, so it can be downloaded from the AssistNow



Online service at roughly the same time the Offline data is obtained. It can then be stored in the host for uploading on receiver startup, or it can be transferred to the receiver straight away and preserved there (provided suitable non-volatile storage is available).

Obviously, where a receiver has a functioning RTC, it should be able to keep its own sense of time, but where no RTC is fitted (or power is completely turned off), providing a time estimate via the [UBX-MGA-INI-TIME\\_UTC](#page-343-0) message will be beneficial.

Similarly, where a receiver has effective non-volatile storage, the last known position will be recalled, but if this is not the case, then it will help TTFF to provide a position estimate via one of the [UBX-MGA-INI-POS\\_XYZ](#page-342-1) or [UBX-MGA-INI-POS\\_LLH](#page-343-0) messages.

Where circumstance prevent the provision of all three of these pieces of data, providing some is likely to be better than none at all.

## <span id="page-63-0"></span>**12.4.5 Flash-based AssistNow Offline**

Flash-based AssistNow Offline functionality means that AssistNow Offline data is stored in the flash memory connected to the chip.

The user's host system must download the data from the AssistNow Offline service when an internet connection is available, and then deliver all of that data to the u-blox receiver. As the total amount of data to be uploaded is large (typically around 100 kbytes) and writing to flash memory is slow, the upload must be done in blocks of up to 512 bytes, one at a time. The [UBX-MGA-FLASH-](#page-328-1)[DATA](#page-328-1) message is used to transmit each block to the receiver.

AssistNow Offline data stored in flash memory is not affected by any reset of the receiver. The only simple ways to clear it are to completely erase the whole flash memory or to overwrite it with a new set of AssistNow Offline data. Uploading a dummy block of data (e.g. all zeros) will also have the effect of deleting the data, although a small amount of flash storage will be used.

## **12.4.5.1 Flash-based Storage Procedure**

The following steps are a typical sequence for transferring AssistNow Offline data into the receiver's flash memory:

- The host downloads a copy of a latest data from the AssistNow Offline service and stores it locally.
- It sends the first 512 bytes of that data using the [UBX-MGA-FLASH-DATA](#page-328-1) message.
- It awaits a [UBX-MGA-FLASH-ACK](#page-329-0) message in reply.
- Based on the contents of the [UBX-MGA-FLASH-ACK](#page-329-0) message it, sends the next block, resends the last block or aborts the whole process.
- The above three steps are repeated until all the rest of the data has been successfully transferred (or the process has been aborted).
- The host sends an [UBX-MGA-FLASH-STOP](#page-329-0) message to indicate completion of the upload.
- It awaits the final [UBX-MGA-FLASH-ACK](#page-329-0) message in reply. Background processing in the receiver prepares the downloaded data for use at this stage. Particularly if the receiver is currently busy, this may take quite a few seconds, so the host has to be prepared for a delay before the [UBX-](#page-329-0)[MGA-FLASH-ACK](#page-329-0) is seen.

Note that the final block may be smaller than 512 bytes (where the total data size is not perfectly divisible by 512). Also, the [UBX-MGA-FLASH-ACK](#page-329-0) messages are distinct from the [UBX-MGA-ACK](#page-321-0) messages used for other AssistNow functions.



Any existing data will be deleted as soon as the first block of new data arrives, so no useful data will be available till the completion of the data transfer. Each block of data has a sequence number, starting at zero for the first block. In order to guard against invalid partial data downloads the receiver will not accept blocks which are out of sequence.

## <span id="page-64-0"></span>**12.4.6 Host-based AssistNow Offline**

Host-based AssistNow Offline involves AssistNow Offline data being stored until it is needed by the user's host system in whatever memory it has available.

The user's host system must download the data from the AssistNow Offline service when an internet connection is available, but retain it until the time the u-blox receiver needs it. At this point, the host must upload just the relevant portion of the data to the receiver, so that the receiver can start using it. This is achieved by parsing all the data and selecting for upload to the receiver only those [UBX-MGA-ANO](#page-322-1) messages with a date-stamp nearest the current time. As each is a complete UBX message it can be sent directly to the receiver with no extra packaging. If required the user can select to employ [flow control,](#page-58-1) but in most cases this is likely to prove unnecessary.

When parsing the data obtained from the AssistNow Offline service the following points should be noted:

- The data is made up of a sequence of [UBX-MGA-ANO](#page-322-1) messages.
- Customers should not rely on the messages all being of a fixed size, but should read their length from the UBX header to work out where the message ends (and where the next begins).
- Each message indicates the SV for which it is applicable through the svId and gnssId fields.
- Each message contains a date-stamp within the year, month and day fields.
- Midday (UTC) on the day indicated should be considered to be the point at which the data is most applicable.
- The messages will be ordered chronologically, earliest first.
- Messages with same date-stamp will be ordered by ascending gnssId and then ascending svId.

## **12.4.6.1 Host-based Procedure**

The following steps are a typical sequence for host-based AssistNow Offline:

- The host downloads a copy of the latest data from the AssistNow Offline service and stores it locally.
- Optionally it may also download a current set of almanac data from the AssistNow Online service.
- It waits until it wants to use the u-blox receiver.
- If necessary it uploads any almanac, position estimate and/or time estimate to the receiver.
- The host scans through AssistNow Offline data looking for entries with a date-stamp that most closely matches the current (UTC) time/date.
- The host sends each such [UBX-MGA-ANO](#page-322-1) message to the receiver.

Note that when data has been downloaded from the AssistNow Offline service with the (default) resolution of one day, the means for selecting the closest matching date-stamp is simply to look for ones with the current (UTC) date.



## <span id="page-65-0"></span>**12.5 Preserving Information During Power-off**

The performance of u-blox receivers immediately after they are turned on is enhanced by providing them with as much useful information as possible. Assistance (both [Online](#page-56-1) and [Offline](#page-61-0)) is one way to achieve this, but retaining information from previous use of the receiver can be just as valuable. All the [types of data delivered by assistance](#page-56-0) can be retained while the receiver is powered down for use when power is restored. Obviously the value of this data will diminish as time passes, but in many cases it remains very useful and can significantly improve time to first fix.

The are several ways in which a u-blox receiver can retain useful data while it is powered down, including:

- **Battery Backed RAM:** The receiver can be supplied with sufficient power to maintain a small portion of internal storage, while it is otherwise turned off. This is the best mechanism, provided that the small amount of electrical power required can be supplied continuously.
- **Save on Shutdown:** The receiver can be instructed to dump its current state to the attached flash memory (where fitted) as part of the shutdown procedure; this data is then automatically retrieved when the receiver is restarted. See the description of the UBX-UPD-SOS messages for more information.
- **Database Dump:** The receiver can be asked to dump the state of its internal database in the form of a sequence of UBX messages reported to the host; these messages can be stored by the host and then sent back to the receiver when it has been restarted. See the description of the [UBX-MGA-DBD](#page-327-1) messages for more information.

## <span id="page-65-1"></span>**12.6 AssistNow Autonomous**

(Note: some functionality described in this chapter may not be available in [protocol versions less](#page-15-2) [than 18](#page-15-2)).

## <span id="page-65-2"></span>**12.6.1 Introduction**

The assistance scenarios covered by AssistNow Online and AssistNow Offline require an online connection and a host that can use this connection to download aiding data and provide this to the receiver when required.

The AssistNow Autonomous feature provides a functionality similar to AssistNow Offline without the need for a host and a connection. Based on a broadcast ephemeris downloaded from the satellite (or obtained by AssistNow Online) the receiver can autonomously (i.e. without any host interaction or online connection) generate an accurate satellite orbit representation («AssistNow Autonomous data») that is usable for navigation much longer than the underlying broadcast ephemeris was intended for. This makes downloading new ephemeris or aiding data for the first fix unnecessary for subsequent start-ups of the receiver.

The AssistNow Autonomous feature is disabled by default. It can be enabled using the [UBX-CFG-NAVX5](#page-233-1) message.

## <span id="page-65-3"></span>**12.6.2 Concept**

The figure below illustrates the AssistNow Autonomous concept in a graphical way. Note that the figure is a qualitative illustration and is not to scale.

• A broadcast ephemeris downloaded from the satellite is a precise representation of a part (for GPS nominally four hours) of the satellite's true orbit (trajectory). It is not usable for positioning



beyond this validity period because it diverges dramatically from the true orbit afterwards.

- The AssistNow Autonomous orbit is an extension of one or more broadcast ephemerides. It provides a long-term orbit for the satellite for several revolutions. Although this orbit is not perfectly precise it is a sufficiently accurate representation of the true orbit to be used for navigation.
- The AssistNow Autonomous data is automatically and autonomously generated from downloaded (or assisted) ephemerides. The data is stored automatically in the on-chip batterybacked memory (BBR). Optionally, the data can be backed-up in external flash memory or on the host. The number of satellites for which data can be stored depends on the receiver configuration and may change during operation.
- If no broadcast ephemeris is available for navigation AssistNow Autonomous automatically generates the required parts of the orbits suitable for navigation from the stored data. The data is also automatically kept current in order to minimize the calculation time once the navigation engine needs orbits.
- The operation of the AssistNow Autonomous feature is transparent to the user and the operation of the receiver. All calculations are done in background and do not affect the normal operation of the receiver.
- The AssistNow Autonomous subsystem automatically invalidates data that has become too old and that would introduce unacceptable positioning errors. This threshold is configurable (see below).
- The prediction quality will be automatically improved if the satellite has been observed multiple times. However, this requires the availability of a suitable flash memory (see the integration manual for a list of supported devices). Improved prediction quality also positively affects the maximum usability period of the data.
- AssistNow Autonomous considers GPS, GLONASS, Galileo and BeiDou satellites only. It will not consider satellites on orbits with an eccentricity of >0.05 (e.g., Galileo E18). For GLONASS support a suitable flash memory is mandatory because a single broadcast ephemeris spans to little of the orbit (only approx. 30 minutes) in order to extend it in a usable way. Only multiple observations of the same GLONASS satellite that span at least four hours will be used to generate data.





## <span id="page-67-0"></span>**12.6.3 Interface**

Several UBX protocol messages provide interfaces to the AssistNow Autonomous feature. They are:

- The [UBX-CFG-NAVX5](#page-233-1) message is used to enable or disable the AssistNow Autonomous feature. It is disabled by default. Once enabled, the receiver will automatically produce AssistNow Autonomous data for newly received broadcast ephemerides and, if that data is available, automatically provide the navigation subsystem with orbits when necessary and adequate. The message also allows for a configuration of the maximum acceptable orbit error. See the next section for an explanation of this feature. It is recommended to use the firmware default value that corresponds to a default orbit data validity of approximately three days (for GPS satellites observed once) and up to six days (for GPS and GLONASS satellites observed multiple times over a period of at least half a day).
- Note that disabling the AssistNow Autonomous feature will delete all previously collected satellite observation data from the flash memory.
- The [UBX-NAV-AOPSTATUS](#page-371-0) message provides information on the current state of the AssistNow Autonomous subsystem. The status indicates whether the AssistNow Autonomous subsystem is currently idle (or not enabled) or busy generating data or orbits. Hosts should monitor this information and only power-off the receiver when the subsystem is idle (that is, when the status field shows a steady zero).
- The [UBX-NAV-SAT](#page-395-2) message indicates the use of AssistNow Autonomous orbits for individual satellites.



- The [UBX-NAV-ORB](#page-385-1) message indicates the availability of AssistNow Autonomous orbits for individual satellites.
- The [UBX-MGA-DBD](#page-327-1) message provides a means to retrieve the AssistNow Autonomous data from the receiver in order to preserve the data in power-off mode where no battery backup is available. Note that the receiver requires the absolute time (i.e. full date and time) to calculate AssistNow Autonomous orbits. For best performance it is, therefore, recommended to supply this information to the receiver using the [UBX-MGA-INI-TIME\\_UTC](#page-343-0) message in this scenario.
- The [Save-on-Shutdown](#page-25-2) feature preserves AssistNow Autonomous data.

## <span id="page-68-0"></span>**12.6.4 Benefits and Drawbacks**

AssistNow Autonomous can provide quicker start-up times (lower the TTFF) provided that data is available for enough visible satellites. This is particularly true under weak signal conditions where it might not be possible to download broadcast ephemerides at all, and, therefore, no fix at all would be possible without AssistNow Autonomous (or A-GNSS). It is, however, required that the receiver roughly knows the absolute time, either from an RTC or from time-aiding (see the Interface section above), and that it knows which satellites are visible, either from the almanac or from tracking the respective signals.

The AssistNow Autonomous orbit (satellite position) accuracy depends on various factors, such as the particular type of satellite, the accuracy of the underlying broadcast ephemeris, or the orbital phase of the satellite and Earth, and the age of the data (errors add up over time).

AssistNow Autonomous will typically extend a broadcast ephemeris for up to three to six days. The [UBX-CFG-NAVX5](#page-233-1) (see above) message allows changing this threshold by setting the «maximum acceptable modelled orbit error» (in meters). Note that this number does not reflect the true orbit error introduced by extending the ephemeris. It is a statistical value that represents a certain expected upper limit based on a number of parameters. A rough approximation that relates the maximum extension time to this setting is: maxError [m] = maxAge [d] \* f, where the factor f is 30 for data derived from satellites seen once and and 16 for data derived for satellites seen multiple times during a long enough time period (see the Concept section above).

There is no direct relation between (true and statistical) orbit accuracy and positioning accuracy. The positioning accuracy depends on various factors, such as the satellite position accuracy, the number of visible satellites, and the geometry (DOP) of the visible satellites. Position fixes that include AssistNow Autonomous orbit information may be significantly worse than fixes using only broadcast ephemerides. It might be necessary to adjust the limits of the [Navigation Output](#page-37-0) [Filters.](#page-37-0)

A fundamental deficiency of any system to predict satellite orbits precisely is unknown future events. Hence, the receiver will not be able to know about satellites that will have become unhealthy, have undergone a clock swap, or have had a manoeuvre. This means that the navigation engine might rarely mistake a wrong satellite position as the true satellite position. However, provided that there are enough other good satellites, the navigation algorithms will eventually eliminate a defective orbit from the navigation solution.

The repeatability of the satellite constellation is a potential pitfall for the use of the AssistNow Autonomous feature. For a given location on Earth the (GPS) constellation (geometry of visible satellites) repeats every 24 hours. Hence, when the receiver «learned» about a number of satellites at some point in time the same satellites will in most places not be visible 12 hours later, and the available AssistNow Autonomous data will not be of any help. Again 12 hours later, however, usable data would be available because it had been generated 24 hours ago.



The longer a receiver observes the sky the more satellites it will have seen. At the equator, and with full sky view, approximately ten (GPS) satellites will show up in a one hour window. After four hours of observation approx. 16 satellites (i.e. half the constellation), after 10 hours approx. 24 satellites (2/3rd of the constellation), and after approx. 16 hours the full constellation will have been observed (and AssistNow Autonomous data generated for). Lower sky visibility reduces these figures. Further away from the equator the numbers improve because the satellites can be seen twice a day. E.g. at 47 degrees north the full constellation can be observed in approx. 12 hours with full sky view.

The calculations required for AssistNow Autonomous are carried out on the receiver. This requires energy and users may therefore occasionally see increased power consumption during short periods (several seconds, rarely more than 60 seconds) when such calculations are running. Ongoing calculations will automatically prevent the [power save mode](#page-69-0) from entering the power-off state. The power-down will be delayed until all calculations are done.

The AssistNow Offline and AssistNow Autonomous features are exclusive and should not be used at the same time. Every satellite will be ignored by AssistNow Autonomous if there is AssistNow Offline data available for it.

## <span id="page-69-0"></span>**13 Power Management**

u-blox receivers support different power modes. These modes represent strategies of how to control the acquisition and tracking engines in order to achieve either the best possible performance or good performance with reduced power consumption.

Receiver power management can split into two categories:

- Externally Controlled Power Management: This includes various modes of power management that are directly operated by the user or host device. These modes are: 1. External cycling of the receiver main power supply. 2. Instruct the receiver to turn On/Off via the [UBX-RXM-PMREQ](#page-421-1) message. 3. Instruct the receiver to turn On/Off via [external pins](#page-80-2) (EXTINT0 or EXTINT1).
- Internally Controlled Power Management: Here the receiver makes the decision when to power down/up some/all of its internal components according to predefined parameters. It is also referred to as Power Save Modes (PSM). In PSM one of three modes of operations can be selected (not all are supported in a single firmware): 1. ON/OFF Operation ([PSMOO](#page-73-0)) 2. Cyclic Tracking ([PSMCT\)](#page-73-1) 3. Super-Efficient Mode ([Super-E](#page-74-0)).

The following figure illustrates u-blox power management modes.



## **u-blox Power Management**



The majority of the Power Management section is detailing the Power Save Mode (Internally Controlled Power Management). However, some the concepts relevant to the Externally Controlled Power Management are detailed, such as the [EXTINT Control](#page-80-2), [Wake up](#page-78-1) and [Power](#page-80-1) [On/Off Command.](#page-80-1)

Externally controlled power management operations can be used on top of the Internally Controlled Power Management and they do override their operation.

## <span id="page-70-0"></span>**13.1 Continuous Mode**

u-blox receivers make use of dedicated signal processing engines optimized for signal acquisition and tracking. The acquisition engine delivers rapid signal searches during cold starts or when insufficient signals are available for navigation. The tracking engine delivers signal measurements for navigation and acquires new signals as they become available during navigation. The resources of both engines are deployed adaptively to minimize overall power consumption.

## <span id="page-70-1"></span>**13.2 Power Save Mode**

Power Save Mode (PSM) allows a reduction in system power consumption by selectively switching parts of the receiver on and off. It is selected using the message [UBX-CFG-RXM](#page-272-1) and configured using [UBX-CFG-PM2](#page-249-1). It is recommended to use [UBX-CFG-PMS](#page-256-1) instead if available (only supported in [protocol versions 18+](#page-15-2)) as it provides a simplified interface; see section [Power mode setup](#page-80-4) for details.

PSM is designed to only support the operation of GPS, GLONASS, BeiDou, Galileo and QZSS. Enabling SBAS or IMES is possible only if at least one of the other systems is enabled. The PSM state machine behavior will not be altered by enabling SBAS or IMES and it will not take them into account in operation. Therefore, it is recommended to disable them (i.e., SBAS or IMES) when operating in Power Save Mode. They can be disabled using [UBX-CFG-GNSS](#page-221-1).

The logic within Power Save Mode is designed so that [Time Pulse](#page-85-3) operation is not compromised. This means that entering all power saving states is delayed until the conditions necessary to produce a Time Pulse have been met. Therefore, in order to obtain good Power Save Mode operation, it is essential that any Time Pulse is correctly



configured with an appropriate time base, or that Time Pulses are turned off if not needed (by clearing the active flag in [UBX-CFG-TP5](#page-284-1)).

- For [protocol versions less than 18](#page-15-2): Power Save Mode can only be selected with GPS signals. Other GNSS are not supported.
- Note: Power Save Mode is not supported in conjunction with the ADR, UDR and FTS products.

## <span id="page-71-0"></span>**13.2.1 Operation**

## Power Save Mode has two modes of operation:

- Power Save Mode Cyclic Tracking (PSMCT) Operation is used when position fixes are required in short periods of 1 to 10s. In receivers that support Super-E Mode, Super-E replaces Cyclic Tracking.
- Power Save Mode ON/OFF (PSMOO) Operation is used for periods longer than 10s, and can be in the order of minutes, hours or days. (Not supported in [protocol versions 23 to 23.01\)](#page-15-2)

The mode of operation can be configured, and depending on the setting, the receiver demonstrates different behavior: In ON/OFF operation the receiver switches between phases of start-up/navigation and phases with low or almost no system activity (backup/sleep). In cyclic tracking the receiver does not shut down completely between fixes, but uses low power tracking instead.

Currently PSMCT is restricted to update period between 1 and 10 seconds and PSMOO is restricted to update period over 10 seconds. However, this may change in future firmware releases.

PSM is based on a state machine with five different states: (Inactive) Awaiting Next Fix and (Inactive) Awaiting Next Search states, Acquisition state, Tracking state and Power Optimized Tracking (POT) state.

- Inactive states: Most parts of the receiver are switched off.
- Acquisition state: The receiver actively searches for and acquires signals. Maximum power consumption.
- Tracking state: The receiver continuously tracks and downloads data. Less power consumption than in Acquisition state.
- POT state: The receiver repeatedly loops through a sequence of tracking (Track), calculating the position fix (Fix), and entering an idle period (Idle). No new signals are acquired and no data is downloaded. Much less power consumption than in Tracking state.

The following figure illustrates the PSM state machine:





## <span id="page-72-0"></span>**13.2.1.1 Acquisition Timeout Logic**

The receiver has internal, external and user-configurable mechanisms that determine the time to be spent in acquisition state. This logic is put in place to ensure good performance and low power consumption in different environments and scenarios. This collective logic is referred to as Acquisition Timeout.

Internal mechanisms:

- If the receiver is able to acquire weak signals but not of the quality needed to get a fix, it will transition to (Inactive) Awaiting Next Search state after the timeout configured in maxStartupStateDur or earlier if too few signals are acquired.
- If the receiver is unable to acquire any signals or it acquires a small number of extremely bad signals (e.g., no sky view), it will transition to (Inactive) Awaiting Next search state after 15 seconds or the timeout configured in maxStartupStateDur if shorter.

## User-configurable mechanisms:

- minAcqTime is the minimum time that the receiver will spend in Acquisition state (see [minAcqTime](#page-76-0) for details.)
- maxStartupStateDur is the maximum time that the receiver will spend in Acquisition state (see



[maxStartupStateDur](#page-76-1) for details).

• doNotEnterOff forces the receiver to stay awake and in Acquisition state even when a fix is not possible (see [doNotEnterOff](#page-77-0) for details).

External mechanisms:

• The receiver will be forced to stay awake if extintWake is enabled and the configured EXTINT pin is set to "high" and it will be forced to stay in (Inactive) Awaiting Next Search/Fix states if extintBackup is enabled and the configured EXTINT pin is set to "low" (see [EXTINT pin control](#page-77-1) for details).

## <span id="page-73-0"></span>**13.2.1.2 ON/OFF operation - long update period**

#### (Not supported in [protocol versions 23 to 23.01\)](#page-15-2).

When the receiver is switched on, it first enters Acquisition state. If it is able to obtain a valid position fix within the time given by the [Acquisition Timeout,](#page-72-0) it switches to Tracking state. Otherwise it enters (Inactive) Awaiting Next Search state and re-starts after the configured search period (minus a start-up margin). As soon as the receiver gets a valid position fix (one passing the [navigation output filters](#page-37-0)), it enters Tracking state. Upon entering Tracking state, the [onTime](#page-76-2) starts. Once the onTime is over, (Inactive) Awaiting Next Fix state is entered and the receiver re-starts according to the configured update grid (see section [Grid offset](#page-77-2) for an explanation). If the signal is lost while in Tracking state, Acquisition state is entered. If the signal is not found within the acquisition timeout, the receiver enters (Inactive) Awaiting Next Search state. Otherwise the receiver will re-enter Tracking state and stay there until the newly started onTime is over.

The diagram below illustrates how ON/OFF operation works:



## **Diagram of ON/OFF operation**

## <span id="page-73-1"></span>**13.2.1.3 Cyclic tracking operation - short update period**

When the receiver is switched on, it first enters Acquisition state. If it is able to obtain a position fix within the time given by the acquisition timeout, it switches to Tracking state. Otherwise, it will enter (Inactive) Awaiting Next Search state and re-start within the configured search grid. After a valid position fix, Tracking state is entered and the onTime starts. In other words the onTime starts with the first valid position fix. Once the onTime is over, POT state is entered. In POT state the receiver continues to output position fixes according to the updatePeriod. To have maximum power savings, set the onTime to zero. This causes the receiver to enter POT state as soon as possible. If the signal becomes weak or is lost during POT state, Tracking state is entered. Once the signal is good again and the newly started onTime is over, the receiver will re-enter POT state. If the receiver can't get a position fix in the Tracking state, it enters Acquisition state. Should the acquisition fail as well, (Inactive) Awaiting Next Search state is entered. If doNotEnterOff is



enabled and no fix is possible, the receiver will remain in Acquisition state until a fix is possible and it will never enter (Inactive) Awaiting Next Search state.

The diagram below illustrates how cyclic tracking operation works:

## **Diagram of cyclic tracking operation**



## <span id="page-74-0"></span>**13.2.1.4 Super-Efficient Mode**

## (Not supported in [protocol versions less than 23](#page-15-2)).

Super-Efficient (Super-E) Mode is a power efficient mode of operation that replaces and improves on [cyclic tracking Power Save Mode \(PSMCT\).](#page-73-1) It uses improved clocking techiques to reduce power consumption and more sophisticated decision making for switching between "Acquisition", "Tracking" and "Power Optimized Tracking" states. This mode was developed and optimized to provide a good compromise between power efficiency and positioning accuracy in wearable applications.

## **13.2.1.5 User controlled operation - update and search period of zero**

Setting the updatePeriod to zero causes the receiver to wait in the (Inactive) Awaiting Next Fix state until woken up by the user. Setting the search period to zero causes the receiver to wait in the (Inactive) Awaiting Next Search state indefinitely after an unsuccessful start-up. Any wake-up event will re-start the receiver. See section [Wake up](#page-78-1) for more information on wake-up events.

External wake-up is required when setting update or search period to zero.

## <span id="page-74-1"></span>**13.2.1.6 Satellite data download**

The receiver is not able to download satellite data (e.g. the ephemeris) while it is working in ON/OFF or cyclic tracking operation. Therefore it has to temporarily switch to continuous operation for the time the satellites transmit the desired data. To save power the receiver schedules the downloads according to an internal timetable and only switches to continuous operation while data of interest is being transmitted by the satellites.

Each SV transmits its own ephemeris data. Ephemeris data download is feasible when the corresponding satellite has been tracked with a sufficient C/No over a certain period of time. The download is scheduled in a 30 minute grid or immediately when fewer than a certain number of visible satellites have valid ephemeris data.

Almanac, ionosphere, UTC correction and SV health data are transmitted by all SVs simultaneously. Therefore these parameters can be downloaded when a single SV is tracked with a high enough C/No.

Allowing more ephemerides to be downloaded before going into POT or (Inactive) Awaiting Next Fix state can help improve the quality of the fixes and reduce the number of wake ups needed to



download ephemerides at the cost of extra time in Acquisition state (only when an inadequate number of ephemerides are downloaded from tracked satellites).

## <span id="page-75-0"></span>**13.2.2 Configuration**

Power Save Mode is enabled and disabled with the [UBX-CFG-RXM](#page-272-1) message and configured with the [UBX-CFG-PM2](#page-249-1) message.

When enabling Power Save Mode, the receiver will be unable to download or process any SBAS or IMES data. Therefore, there is no benefit in enabling them and it is recommended to disable both systems. SBAS support and IMES support can be disabled using [UBX-CFG-GNSS](#page-221-1).

A number of parameters can be used to customize PSM to any specific needs. These parameters are listed in the following table:

## **Power Save Mode configuration options on UBX-CFG-PM2**

| Parameter          | Description                                                                   |
|--------------------|-------------------------------------------------------------------------------|
| mode               | Receiver mode of operation                                                    |
| updatePeriod       | Time between two position fix attempts                                        |
| searchPeriod       | Time between two acquisition attempts if the receiver is unable to get a      |
|                    | position fix                                                                  |
| minAcqTime         | Minimum time the receiver spends in Acquisition state                         |
| onTime             | Time the receiver remains in Tracking state and produces position fixes       |
| waitTimeFix        | Wait for time fix before entering Tracking state                              |
| doNotEnterOff      | Receiver does not enter (Inactive) Awaiting Next Search state if it can't get |
|                    | a position fix but keeps indefinitely attempting a position fix instead       |
| updateRTC          | Enables periodic Real Time Clock (RTC) update                                 |
| updateEPH          | Enables periodic ephemeris update                                             |
| extintSelect       | Selects EXTINT pin used with pin control feature                              |
| extintWake         | Enables force-ON pin control feature                                          |
| extintBackup       | Enables force-OFF pin control feature                                         |
| gridOffset         | Time offset of update grid with respect to start of week                      |
| maxStartupStateDur | Maximum time in Acquisition state                                             |
| optTarget          | The PSM settings will be weighed towards a specific target (only              |
|                    | supported in protocol versions 23 to 23.01)                                   |

#### <span id="page-75-2"></span>**13.2.2.1 Mode of operation (mode)**

The mode of operation to use mainly depends on the update period: For short update periods (in the range of a few seconds), cyclic tracking should be configured. For long update periods (in the range of minutes or longer), only use ON/OFF operation.

See section [ON/OFF operation - long update period](#page-73-0) and [Cyclic tracking operation - short update](#page-73-1) [period](#page-73-1) for more information on the two modes of operation.

## <span id="page-75-1"></span>**13.2.2.2 Reference Time Standard**

In older versions ( in [protocol versions less than 18\)](#page-15-2), only GPS can be configured for PSM, therefore, GPS time standard is used for the operation of PSM. Whereas, in newer versions where multiple GNSS can operate simultaneously ( in [protocol versions 18+](#page-15-2)), UTC time standard is used.



## <span id="page-76-3"></span>**13.2.2.3 Update period (updatePeriod) and search period (searchPeriod)**

The update period specifies the time between successive position fixes. If no position fix can be obtained within the acquisition timeout, the receiver will retry after the time specified by the search period. Update and search periods are fixed with respect to an absolute time grid based on reference time standard (i.e., GPS Time or UTC. see [Reference Time Standard](#page-75-1)). They do not refer to the time of the last valid position fix or last position fix attempt.

New settings are ignored if the update period or the search period exceeds the maximum number of milliseconds in a week. In that case the previously stored values remain effective.

#### <span id="page-76-0"></span>**13.2.2.4 Minimum Acquisition Time (minAcqTime)**

The receiver tries to obtain a position fix for at least the time given in minAcqTime. If the receiver determines that it needs more time for the given starting conditions then it will automatically prolong this time. If minAcqTime is set to zero then the minimum acquisition time is exclusively determined by the receiver. Once the minAcqTime has expired, the receiver will terminate the acquisition state if either a fix is achieved or if the receiver estimates that any signals received are insufficient (too weak or too few) for a fix to be possible.

## <span id="page-76-2"></span>**13.2.2.5 On time (onTime)**

The onTime parameter specifies how long the receiver stays in Tracking state before switching to the POT state (in PSMCT) or (Inactive) Awaiting Next Fix state (in PSMOO).

#### <span id="page-76-4"></span>**13.2.2.6 Wait for time fix (waitTimeFix)**

A time fix is a fix type in which the receiver will ensure that the time is accurate and confirmed to within the limits set in [UBX-CFG-NAV5](#page-230-1). Enabling the waitTimeFix option will force the receiver to stay in Acquisition state until the time is known to within the configured limits then it will transition to Tracking state. Enabling waitTimeFix will delay the transition from Acquisition state to Tracking state by at least two extra seconds, thus, this should be taken into account (see [Acquisition Timeout](#page-72-0)). It is necessary to enable waitTimeFix in timing products.

The quality of the position fixes can also be configured by setting the limits in the message [UBX-](#page-230-1)[CFG-NAV5](#page-230-1). Setting harder limits in [UBX-CFG-NAV5](#page-230-1) will typically prolong the time in Acquisition state. Thus, ensuring sufficient time is given to the receiver at start-up (when externally controlled) is necessary (see [Acquisition Timeout Logic\)](#page-72-0). When internally controlled, the receiver can make good judgement on the time needed in Acquisition state and no further adjustments will be needed.

## <span id="page-76-1"></span>**13.2.2.7 Maximum Startup State Duration (maxStartupStateDur)**

#### (Only supported in [protocol versions 17+\)](#page-15-2).

The maxStartupStateDur is the maximum time that the receiver will spend in Startup state (i.e., Acquisition state). If the receiver is unable to acquire a valid position fix within this maximum time, it will transition to (Inactive) Awaiting Next Search state (if doNotEnterOff is disabled). Subsequently, the receiver will attempt to acquire another position fix according to the search period (see [Update period \(updatePeriod\) and search period \(searchPeriod\)\)](#page-76-3). If

maxStartupStateDur is set to zero, the receiver will autonomously determine the maximum time to spend in Acquisition state. Note that shorter settings (below about 45s) will degrade an unaided receiver's ability to collect new Ephemeris data at low signal levels (see section [Satellite](#page-74-1)



## [data download](#page-74-1)).

## <span id="page-77-0"></span>**13.2.2.8 Do not enter '(Inactive) Awaiting Next Search' state when no fix (doNotEnterOff)**

If this option is enabled, the receiver acts differently in case it cannot get a fix: instead of entering (Inactive) Awaiting Next Search state, it keeps attempting to acquire a position fix. In other words, the receiver will never be in (Inactive) Awaiting Next Search state and therefore searchPeriod and minAcqTime will be ignored.

## <span id="page-77-3"></span>**13.2.2.9 Update RTC (updateRTC) and Ephemeris (updateEPH)**

To maintain the ability of a fast start-up, the receiver needs to calibrate its RTC and update its ephemeris data on a regular basis. This can be ensured by activating the update RTC and update Ephemeris option. The RTC is calibrated every 5 minutes and the ephemeris data is updated approximately every 30 minutes. See section [Satellite data download](#page-74-1) for more information.

## <span id="page-77-1"></span>**13.2.2.10 EXTINT pin control**

The operation of PSM can be externally controlled using either EXTINT0 or EXTINT1 pin. This external control allows the user to decide when to wake up the receiver to obtain a fix and when to force the receiver into sleep/backup mode to save power. Operating the receiver externally through the EXTINT pins will override internal functions that coincide with that specific operation. The choice of which pin to use can be configured through the extintSelect feature in [UBX-CFG-PM2](#page-249-1). Only one pin can be selected at a time but it is sufficient to perform all the required tasks.

If the Force-ON (extintWake) feature in [UBX-CFG-PM2](#page-249-1) is enabled, the receiver will not enter Inactive states for as long as the configured EXTINT pin (EXTINT0 or EXTINT1) is at 'high' level. The receiver will therefore always be in Acquisition/Tracking state in PSMOO or in Acquisition/Tracking/POT state in PSMCT. When the pin level changes to 'low' the receiver will continue with its configured behavior.

If the Force-OFF (extintBackup) feature in [UBX-CFG-PM2](#page-249-1) is enabled, the receiver will enter Inactive states for as long as the configured EXTINT pin is set to 'low' until the next wake up event. Any wake-up event can wake up the receiver even while the EXTINT pin is set to 'low' (see [Wake up\)](#page-78-1). However, if the pin stays at 'low' state, the receiver will only wake up for the time needed to read the configuration pin settings then it will enter the Inactive state again.

If both Force-ON and Force-OFF features are enabled at the same time, the receiver PSM operation will be completely in user control. Setting 'high' on the configured EXTINT pin will wake up the receiver to get a position fix and setting 'low' will put the receiver into sleep/backup mode.

## <span id="page-77-2"></span>**13.2.2.11 Grid offset (gridOffset)**

Once the receiver has a valid time, the update grid is aligned to the start of the week of the [reference time standard](#page-75-1) (midnight between Saturday and Sunday). Before having a valid time, the update grid is unaligned. A grid offset shifts the update grid with respect to the start of the week of the [reference time standard.](#page-75-1) An example of usage can be found in section [Use grid offset](#page-79-1).

The grid offset is not used in cyclic tracking operation.



## **13.2.2.12 Optimization target**

In cyclic tracking operation, the behavior of the receiver can be tuned even more closely to the application's need by choosing an appropriate optimization target.

In protocol version 23.01 two optimization targets are available:

- Performance: The receiver achieves a good GNSS performance while keeping the power consumption low.
- Power save: The receiver might sacrifice GNSS performance in favor of a reduced power consumption.

## <span id="page-78-0"></span>**13.2.3 Features**

#### **13.2.3.1 Communication**

When PSM is enabled, communication with the receiver (e.g. UBX message to disable PSM) requires particular attention. This is because the receiver may be in Inactive state and therefore unable to receive any message through its interfaces. To ensure that the configuration messages are processed by the receiver, even while in Inactive state, the following steps need to be taken:

- Send a dummy sequence of 0xFF (one byte is sufficient) to the receiver's UART interface. This will wake up the receiver if it is in Inactive state. If the receiver is not in Inactive state, the sequence will be ignored.
- Send the configuration message about half a second after the dummy sequence. If the interval between the dummy sequence and the configuration message is too short, the receiver may not yet be ready. If the interval is too long, the receiver may return to Inactive state before the configuration message was received. It is therefore important to check for a [UBX-ACK-ACK](#page-193-0) reply from the receiver to confirm that the configuration message was received.
- Send the configuration save message immediately after the configuration message.

Similarly, when configuring the receiver for PSMOO (and PSMCT when doNotEnterOff is disabled), ensure that the configurations are saved. If they are not saved the receiver will enter backup mode and when it wakes up again, it would have lost the configurations and even forgets it was in power save mode. This can be avoided by using the [UBX-CFG-CFG](#page-207-1) message (see [Receiver Configuration](#page-23-1) for details). When operating PSM from u-center and setting the receiver to Power Save Mode in [UBX-CFG-RXM](#page-272-1), check the save configuration box. u-center will then send a [UBX-CFG-CFG](#page-207-1) message after the [UBX-CFG-RXM](#page-272-1) to save the configurations.

#### <span id="page-78-1"></span>**13.2.3.2 Wake up**

The receiver can be woken up by generating an edge on one of the following pins:

- rising or falling edge on one of the EXTINT pins
- rising or falling edge on the RXD1 pin
- rising or falling edge on the SPI CS pin
- rising edge on NRESET pin

All wake-up signals are interpreted as a position request, where the receiver wakes up and tries to obtain a position fix. Wake-up signals have no effect if the receiver is already in Acquisition, Tracking or POT state.



## **13.2.3.3 Behavior while USB host connected**

As long as the receiver is connected to a USB host, it will not enter the lowest possible power state. This is because it must retain a small level of CPU activity to avoid breaching requirements of the USB specification. The drawback, however, is that power consumption is higher.

Wake up by pin/UART is possible even if the receiver is connected to a USB host. In this case the state of the pin must be changed for a duration longer than one millisecond.

## **13.2.3.4 Cooperation with the AssistNow Autonomous feature**

If both PSM and [AssistNow Autonomous](#page-65-1) features are enabled, the receiver will not enter (Inactive) Awaiting Next Fix state as long as AssistNow Autonomous carries out calculations. This prevents losing data from unfinished calculations and, in the end, reduces the total extra power needed for AssistNow Autonomous. The delay before entering (Inactive) Awaiting Next Fix state, if any, will be in the range of several seconds, rarely more than 20 seconds.

Only entering (Inactive) Awaiting Next Fix state is affected by AssistNow Autonomous. In other words: in cyclic tracking operation, AssistNow Autonomous will not interfere with the PSM (apart from the increased power consumption).

Enabling the AssistNow Autonomous feature will lead to increased power consumption while prediction is calculated. The main goal of PSM is to reduce the overall power consumption. Therefore for each application special care must be taken to judge whether AssistNow Autonomous is beneficial to the overall power consumption or not.

## <span id="page-79-0"></span>**13.2.4 Examples**

#### <span id="page-79-1"></span>**13.2.4.1 Use Grid Offset**

Scenario: Get a position fix once a day at a fixed time. If the position fix cannot be obtained try again every two hours.

Solution: First set the update period to 24x3600s and the search period to 2x3600s. Now a position fix is obtained every 24 hours and if the position fix fails retrials are scheduled in two hour intervals. As the update grid is aligned to midnight Saturday/Sunday [reference time standard](#page-75-1), the position fixes happen at midnight [reference time standard.](#page-75-1) By setting the grid offset to 12x3600s the position fixes are shifted to once a day at noon [reference time standard.](#page-75-1) If the position fix at noon fails, retrials take place every two hours, the first at 14:00 [reference time standard.](#page-75-1) Upon successfully acquiring a position fix the next fix attempt is scheduled for noon the following day.

### **13.2.4.2 User controlled position fix**

Scenario: Get a position fix on request.

Solution: Set updatePeriod and searchPeriod to zero. Set extintSelect to the desired EXTINT pin to be used. Enable the extintWake and extintBackup features.

#### **13.2.4.3 Use update periods of 30 minutes**

Scenario: Get a position fix once every 30 minutes and acquire a fix needed for timing products. Solution: Set mode of operation to PSMOO. Set updatePeriod to 1800 seconds. Set the search period to 120 seconds. Enable waitTimeFix feature.



## <span id="page-80-0"></span>**13.3 Peak current settings**

The peak current during acquisition can be reduced by activating the corresponding option in [UBX-](#page-249-1)[CFG-PM2](#page-249-1). A peak current reduction will result in longer start-up times of the receiver.

This setting is independent of the activated mode (Continuous or Power Save Mode).

## <span id="page-80-1"></span>**13.4 Power On/Off command**

With message [UBX-RXM-PMREQ](#page-421-1) the receiver can be forced to enter Inactive state (in Continuous and Power Save Mode). It will stay in Inactive state for the time specified in the message or until it is woken up by an EXTINT or activity on the RXD1, SPI CS, or NRESET pin.

Sending the message [UBX-RXM-PMREQ](#page-421-1) while the receiver is in Power Save Mode will overrule PSM and force the receiver to enter Inactive state. It will stay in Inactive state until woken up. After wake-up the receiver continues working in Power Save Mode as configured.

## <span id="page-80-2"></span>**13.5 EXTINT pin control when Power Save Mode is not active**

The receiver can be forced OFF also when the Power Save Mode is not active. This works the same way as [EXTINT pin control in Power Save Mode.](#page-77-1) Just as in Power Save Mode, this feature has to be enabled and configured using [UBX-CFG-PM2](#page-249-1)

## <span id="page-80-3"></span>**13.6 Measurement and navigation rate with Power Save Mode**

In Continuous Mode, measurement and navigation rate is configured using [UBX-CFG-RATE](#page-268-1). In Power Save Mode however, measurement and navigation rate can differ from the configured rates as follows:

- **Cyclic Operation:** When in state Power Optimized Tracking, the measurement and navigation rate is determined by the updatePeriod configured in [UBX-CFG-PM2](#page-249-1). The receiver can however switch to Tracking state (e.g. to download data). When in Tracking state, the measurement and navigation rate is as configured with [UBX-CFG-RATE](#page-268-1). Note: When the receiver is no longer able to produce position fixes, it can switch from Cyclic Operation to ON/OFF Operation (if this is not disabled with the doNotEnterOff switch in [UBX-CFG-PM2](#page-249-1)). In that case the remarks below are relevant.
- **ON/OFF Operation:** ( in [protocol versions less than 18](#page-15-2)) when in state Acquisition, the measurement and navigation rate is **fixed to 2 Hz**. All NMEA (and UBX) messages that are output upon a navigation fix are also output with a rate of 2 Hz. This must be considered when choosing the baud rate of a receiver that uses Power Save Mode! Note that a receiver might stay in Acquisition state for quite some time (can be tens of seconds under weak signal conditions). When the receiver eventually switches to Tracking state, the measurement and navigation rate will be as configured with [UBX-CFG-RATE](#page-268-1). However, ( in [protocol versions 18+\)](#page-15-2) the measurement and navigation rate will be as configured with [UBX-CFG-RATE](#page-268-1) in all active states.

## <span id="page-80-4"></span>**13.7 Power mode setup**

## (Not supported in [protocol versions less than 18](#page-15-2)).

In order to simplify the power saving configuration of the receiver in typical circumstances, a set of predefined setups can be selected using the message [UBX-CFG-PMS](#page-256-1).



Selecting one of the available setups (listed below) is the equivalent of using a combination of the configuration messages with appropriate parameters that impact the power consumption of the receiver.

| Setup Name      | Description                                                           |
|-----------------|-----------------------------------------------------------------------|
| Full Power      | No compromises on power saves                                         |
| Balanced        | Power savings without performance degradation                         |
| Aggressive 1 Hz | Best power saving setup (1 Hz rate). This corresponds to Super-E mode |
|                 | performance setting.                                                  |
| Aggressive 2 Hz | Excellent power saving setup (2 Hz rate)                              |
| Aggressive 4 Hz | Good power saving setup (4 Hz rate)                                   |
| Interval        | ON OFF mode setup                                                     |

## **Valid power mode setup in UBX-CFG-PMS**

u-blox recommends using these predefined settings, except where users have very specific power saving requirements.

Note that polling UBX-CFG-PMS will return the setup only if the full configuration is consistent with one of the predefined power mode setups.

- In 4 Hz mode, when running a flash firmware, it is recommended to run with a subset of GNSS systems, to avoid system overload.
- Using UBX-CFG-PMS to set Super-E mode to 1, 2 or 4 Hz navigation rates sets minAcqTime to 180 s instead the default 300 s in [protocol version 23.01](#page-15-2). 300 s is recommended for the best performance.

## <span id="page-81-0"></span>**14 Forcing a Receiver Reset**

Typically, in GNSS receivers, one distinguishes between cold, warm, and hot starts, depending on the type of valid information the receiver has at the time of the restart.

- **Cold start** In cold start mode, the receiver has **no** information from the last position (e.g. time, velocity, frequency etc.) at startup. Therefore, the receiver must search the full time and frequency space, and all possible satellite numbers. If a satellite signal is found, it is tracked to decode the ephemeris (18-36 seconds under strong signal conditions), whereas the other channels continue to search satellites. Once there is a sufficient number of satellites with valid ephemeris, the receiver can calculate position and velocity data. Other GNSS receiver manufacturers call this startup mode Factory Startup.
- **Warm start** In warm start mode, the receiver has approximate information for time, position, and coarse satellite position data (Almanac). In this mode, after power-up, the receiver normally needs to download ephemeris before it can calculate position and velocity data. As the ephemeris data usually is outdated after 4 hours, the receiver will typically start with a Warm start if it has been powered down for more than 4 hours. In this scenario, several augmentations are possible. See section [Multi-GNSS assistance](#page-55-1).
- **Hot start** In hot start mode, the receiver was powered down only for a short time (4 hours or less), so that its ephemeris is still valid. Since the receiver does not need to download ephemeris again, this is the fastest startup method.

In the [UBX-CFG-RST](#page-270-1) message, one can force the receiver to reset and clear data, in order to see the effects of maintaining/losing such data between restarts. For this, the CFG-RST message offers the navBbrMask field, where hot, warm and cold starts can be initiated, and also other



## combinations thereof.

Data stored in flash memory is not cleared by any of the options provided by UBX-CFG-RST. So, for example, if valid AssistNow Offline data stored in the flash it is likely to have an impact on the cold start.

The Reset Type can also be specified. This is not related to GNSS, but to the way the software restarts the system.

- **Hardware Reset** uses the on-chip Watchdog to electrically reset the chip. This is an immediate, asynchronous reset. No Stop events are generated. This is equivalent to pulling the Reset signal of the receiver to ground. This reset reloads the receiver configuration.
- **Controlled Software Reset** terminates all running processes in an orderly manner and, once the system is idle, restarts operation, reloads its configuration and starts to acquire and track GNSS satellites.
- **Controlled Software Reset (GNSS only)** only restarts the GNSS tasks, without reinitializing the full system or reloading any stored configuration.
- **Controlled GNSS Stop** stops all GNSS tasks. The receiver will not be restarted, but will stop any GNSS related processing.
- **Controlled GNSS Start** starts all GNSS tasks.

A reset may reload the receiver configuration. Use [UBX-CFG-CFG](#page-207-1) to save runtime configuration changes to BBR before the reset.

## <span id="page-82-0"></span>**15 Receiver Status Monitoring**

Messages in the UBX class [UBX-MON](#page-352-0) are used to report the status of the parts of the embedded computer system that are not GNSS specific.

The main purposes are

- Hardware and Software Versions, using [UBX-MON-VER](#page-369-1). See also the chapter [decoding the output](#page-20-0) [of UBX-MON-VER](#page-20-0)
- Status of the Communications Input/Output system
- Status of various Hardware Sections with [UBX-MON-HW](#page-356-1)

## <span id="page-82-1"></span>**15.1 Input/Output system**

The I/O system is a GNSS-internal layer where all data input- and output capabilities (such as UART, DDC, SPI, USB) of the GNSS receiver are combined. Each communications task has buffers assigned, where data is queued. For data originating at the receiver, to be communicated over one or multiple communications queues, the message [UBX-MON-TXBUF](#page-368-1) can be used. This message shows the current and maximum buffer usage, as well as error conditions.

If the amount of data configured is too much for a certain port's bandwidth (e.g. all UBX messages output on a UART port with a baud rate of 9600), the buffer will fill up. Once the buffer space is exceeded, new messages to be sent will be dropped. For details see section [Serial Communication Ports Description](#page-49-0).

Inbound data to the GNSS receiver is placed in buffers. Usage of these buffers is shown with the message [UBX-MON-RXBUF](#page-360-2). Further, as data is then decoded within the receiver (e.g. to separate UBX and NMEA data), the [UBX-MON-MSGPP](#page-358-2) can be used. This message shows (for each port and protocol) how many messages were successfully received. It also shows (for each port) how many bytes were discarded because they were not in any of the supported protocol framings.



The following table shows the port numbers used. Note that any numbers not listed are reserved for future use.

## **Port Number assignment**

| Port # | Electrical Interface |
|--------|----------------------|
| 0      | DDC (I2C compatible) |
| 1      | UART 1               |
| 3      | USB                  |
| 4      | SPI                  |

Protocol numbers range from 0-7. All numbers not listed are reserved.

## **Protocol Number assignment**

| Protocol # | Protocol Name |
|------------|---------------|
| 0          | UBX Protocol  |
| 1          | NMEA Protocol |
| 2          | RTCM Protocol |

## <span id="page-83-0"></span>**15.2 Jamming/Interference Indicator**

The field jamInd of the [UBX-MON-HW](#page-356-1) message can be used as an indicator for continuous wave (narrowband) jammers/interference only. The interpretation of the value depends on the application. It is necessary to run the receiver in an unjammed environment to determine an appropriate value for the unjammed case. If the value rises significantly above this threshold, this indicates that a continuous wave jammer is present.

This indicator is always enabled.

The indicator is reporting any currently detected narrowband interference over all currently configured signal bands

## <span id="page-83-1"></span>**15.3 Jamming/Interference Monitor (ITFM)**

The field jammingState of the [UBX-MON-HW](#page-356-1) message can be used as an indicator for both broadband and continuous wave (CW) jammers/interference. It is independent of the (CW only) jamming indicator described in [Jamming/Interference Indicator](#page-83-0) above.

This monitor reports whether jamming has been detected or suspected by the receiver. The receiver monitors the background noise and looks for significant changes. Normally, with no interference detected, it will report 'OK'. If the receiver detects that the noise has risen above a preset threshold, the receiver reports 'Warning'. If in addition, there is no current valid fix, the receiver reports 'Critical'.

The monitor has four states as shown in the following table:

| Value | Reported | Description                                             |
|-------|----------|---------------------------------------------------------|
|       | state    |                                                         |
| 0     | Unknown  | Jamming/interference monitor not enabled, uninitialized |
|       |          | or antenna disconnected                                 |
| 1     | OK       | no interference detected                                |
| 2     | Warning  | position ok but interference is visible (above the      |
|       |          | thresholds)                                             |

## **Jamming/Interference monitor reported states**



Jamming/Interference monitor reported states continued

| Value | Reported | Description                                                 |
|-------|----------|-------------------------------------------------------------|
|       | state    |                                                             |
| 3     | Critical | no reliable position fix and interference is visible (above |
|       |          | the thresholds); interference is probable reason why        |
|       |          | there is no fix                                             |

The monitor is disabled by default. The monitor is enabled by sending an appropriate [UBX-CFG-](#page-226-1)[ITFM](#page-226-1) message with the enable bit set. In this message it is also possible to specify the thresholds at which broadband and CW jamming are reported. These thresholds should be interpreted as the dB level above 'normal'. It is also possible to specify whether the receiver expects an active or passive antenna.

- The monitor algorithm relies on comparing the currently measured spectrum with a reference from when a good fix was obtained. Thus the monitor will only function when the receiver has had at least one (good) first fix, and will report 'Unknown' before this time.
- Jamming/Interference monitor is not supported in power save mode (PSM) ON/OFF mode.

The monitor is reporting any currently detected interference over all currently configured signal bands.

## <span id="page-84-0"></span>**16 Spoofing Detection**

(Note: this feature is not supported in [protocol versions less than 18\)](#page-15-2).

## <span id="page-84-1"></span>**16.1 Introduction**

Spoofing is the process whereby someone tries to forge a GNSS signal with the intention of fooling the receiver into calculating a different user position than the true one.

The spoofing detection feature monitors the GNSS signals for suspicious patterns indicating that the receiver is being spoofed. A flag in [UBX-NAV-STATUS](#page-402-1) alerts the user to potential spoofing.

## <span id="page-84-2"></span>**16.2 Scope**

The spoofing detection feature monitors suspicious changes in the GNSS signal indicating external manipulation. Therefore the detection is only successful when the signal is genuine first and when the transition to the spoofed signal is being observed directly. When a receiver is started up to a spoofed signal the detection algorithms will be unable to recognize the spoofing. Also, the algorithms rely on availability of signals from multiple GNSS; the detection does not work in single GNSS mode.

## <span id="page-84-3"></span>**17 Signal Attenuation Compensation**

(not supported in [protocol versions less than 19\)](#page-15-2).

In normal operating conditions, low signal strength indicates likely contamination by multipath. The receiver trusts such signals less in order to preserve the quality of the position solution in poor signal environments. This feature can result in degraded performance in situations where the signals are attenuated for another reason, for example due to antenna placement. In this case, the signal attenuation compensation feature can be used to restore normal performance.



There are three possible modes:

- Disabled: no signal attenuation compensation is performed
- Automatic: the receiver automatically estimates and compensates for the signal attenuation
- Configured: the receiver compensates for the signal attenuation based on a configured value

These modes can be selected using [UBX-CFG-NAVX5](#page-233-1). In the case of the "configured" mode, the user should input the maximum C/N0 observed in a clear-sky environment, excluding any outliers or unusually high values. The configured value can have a large impact on the receiver performance, so should be chosen carefully.

## <span id="page-85-0"></span>**18 Remote Inventory**

## <span id="page-85-1"></span>**18.1 Description**

The Remote Inventory enables storing user-defined data in the non-volatile memory of the receiver. The data can be either binary or a string of ASCII characters. In the second case, it will be output at startup after the boot screen.

## <span id="page-85-2"></span>**18.2 Usage**

- The contents of the Remote Inventory can be set and polled with the message [UBX-CFG-RINV](#page-269-1). Refer to the message specification for a detailed description.
- If the contents of the Remote Inventory are polled without having been set before, the default configuration (see table below) is output.

#### **Default configuration**

| Parameter | Value                    |
|-----------|--------------------------|
| flags     | 0x00                     |
| data      | "Notice: no data saved!" |

As with all configuration changes, these must be saved in order to be made permanent. Make sure to save the section RINV before resetting or switching off the receiver. For more information about saving a configuration, see section [Configuration Concept](#page-23-2).

## <span id="page-85-3"></span>**19 Time pulse**

For protocol versions less than 18, functionality of the time pulse has not been characterized when only BeiDou is enabled.

The time pulse feature is not available for protocol versions 23-23.01.

## <span id="page-85-4"></span>**19.1 Introduction**

u-blox receivers include a time pulse function providing clock pulses with configurable duration and frequency. The time pulse function can be configured using the [UBX-CFG-TP5](#page-284-1) message. The [UBX-TIM-TP](#page-446-1) message provides time information for the next pulse, time source and the quantization error of the output pin.





## <span id="page-86-0"></span>**19.2 Recommendations**

- The time pulse can be aligned to a wide variety of GNSS times or to variants of UTC derived from them (see the section on [time bases\)](#page-87-0). However, it is strongly recommended that the choice of time base is aligned with the available GNSS signals (so to produce GPS time or UTC(USNO), ensure GPS signals are available, and for GLONASS time or UTC(SU) ensure the presence GLONASS signals). This will involve coordinating that the setting of [UBX-CFG-GNSS](#page-221-1) with the choice of time pulse time base.
- For best time pulse performance it is recommended to disable the SBAS subsystem.
- When using time pulse for precision timing applications it is recommended to calibrate the antenna cable delay against a reference-timing source.
- Care needs to be given to the cable delay settings in the receiver configuration.
- In order to get the best timing accuracy with the antenna, a fixed and accurate position is needed.
- If relative time accuracy between multiple receivers is required, do not mix receivers of different product families. If this is required, the receivers must be calibrated accordingly, by setting cable delay and user delay.
- The recommended configuration when using the [UBX-TIM-TP](#page-446-1) message is to set both the measurement rate ([UBX-CFG-RATE](#page-268-1)) and the time pulse frequency ([UBX-CFG-TP5](#page-284-1)) to 1 Hz.
- Since the rate of [UBX-TIM-TP](#page-446-1) is bound to the measurement rate, more than one [UBX-](#page-446-1)[TIM-TP](#page-446-1) message can appear between two pulses if the measurement rate is set larger than the time pulse frequency. In this case all [UBX-TIM-TP](#page-446-1) messages in between a time pulse T1 and T2 belong to T2 and the last [UBX-TIM-TP](#page-446-1) before T2 reports the most accurate quantization error. In general, if the navigation solution rate and time pulse rate are configured to different values, there will not be a single [UBX-TIM-TP](#page-446-1) message for each time pulse.

The sequential order of the signal present at the TIMEPULSE pin and the respective output message for the simple case of 1 pulse per second (1PPS) and a one second navigation update rate is shown in the following figure.





## <span id="page-87-0"></span>**19.3 GNSS time bases**

GNSS receivers must handle a variety of different time bases as each GNSS has its own reference system time. What is more, although each GNSS provides a model for converting their system time into UTC, they all support a slightly different variant of UTC. So, for example, GPS supports a variant of UTC as defined by the US National Observatory, while BeiDou uses UTC from the National Time Service Center, China (NTSC) and NavIC uses UTC from National Physics Laboratory, India (NPLI). While the different UTC variants are normally closely aligned, they can differ by as much as a few hundreds of nanoseconds.

Although u-blox receivers can combine a variety of different GNSS times internally, the user must choose a single type of GNSS time and, separately, a single type of UTC for input (on EXTINTs) and output (via the Time Pulse) and the parameters reported in corresponding messages.

For [protocol versions 16 or greater,](#page-14-0) the [UBX-CFG-TP5](#page-284-1) message allows the user to choose between any of the supported GNSS (GPS, GLONASS, BeiDou, etc.) times and UTC. Also, the [UBX-CFG-](#page-230-1)[NAV5](#page-230-1) message allows the user to select which variant of UTC the receiver should use. This includes an "automatic" option which causes the receiver to select an appropriate UTC version itself, based on the [GNSS configuration](#page-28-0), using, in order of preference, USNO if GPS is enabled, SU if GLONASS is enabled, NTSC if BeiDou is enabled, European if Galileo is enabled and, finally, NPLI if NavIC is enabled.

Note that for [protocol versions prior to 16,](#page-14-0) no choice of UTC variant is supported and the [UBX-CFG-](#page-284-1)[TP5](#page-284-1) message only allows the user to choose between GPS and UTC as the time system the generated time pulse will be aligned to.

The receiver will assume that the input time pulse uses the same GNSS time base as specified for the output using [UBX-CFG-TP5](#page-284-1). So if the user selects GLONASS time for time pulse output, any time pulse input must also be aligned to GLONASS time (or to the separately chosen variant of UTC). Where UTC is selected for time pulse output, any GNSS time pulse input will be assumed to be aligned to GPS time.

- u-blox receivers allow users to choose independently GNSS signals used in the receiver (using [UBX-CFG-GNSS](#page-221-1)) and the input/output time base (using [UBX-CFG-TP5](#page-284-1)). For example it is possible to instruct the receiver to use GPS and GLONASS satellite signals to generate BeiDou time. This practice will compromise time-pulse accuracy if the receiver cannot measure the timing difference between the constellations directly and is not recommended.

The information that allows GNSS times to be converted to the associated UTC times is



only transmitted by the GNSS at relatively infrequent periods. For example GPS transmits UTC(USNO) information only once every 12.5 minutes. Therefore, if a Time Pulse is configured to use a variant of UTC time, after a cold start, substantial delays before the receiver has sufficient information to start outputing the Time Pulse can be expected.

## <span id="page-88-0"></span>**19.4 Time pulse configuration**

u-blox receivers provide one or two TIMEPULSE pins (dependent on product variant) delivering a time pulse (TP) signal with a configurable pulse period, pulse length and polarity (rising or falling edge). Check the product data sheet for detailed specification of configurable values.

It is possible to define different signal behavior (i.e. output frequency and pulse length) depending on whether or not the receiver is locked to a reliable time source. Time pulse signals can be configured using the UBX proprietary message [UBX-CFG-TP5](#page-284-1).

## <span id="page-88-1"></span>**19.5 Configuring time pulse with UBX-CFG-TP5**

The UBX message [UBX-CFG-TP5](#page-284-1) can be used to change the time pulse settings, and includes the following parameters defining the pulse:

- **time pulse index** Index of time pulse output pin to be configured. If a product only has one time pulse output it is typically configurable with index 0. Exceptions to this include LEA-M8F, M8030-KT-FT and NEO-M8L. Refer to specific product documentation.
- **antenna cable delay** Signal delay due to the cable between antenna and receiver.
- **RF group delay** Signal delay in the RF module of the receiver (read-only).
- **pulse frequency/period** Frequency or period time of the pulse when locked mode is not configured or active.
- **pulse frequency/period lock** Frequency or period time of the pulse, as soon as receiver has calculated a valid time from a received signal. Only used if the corresponding flag is set to use another setting in locked mode.
- **pulse length/ratio** Length or duty cycle of the generated pulse, either specifies a time or ratio for the pulse to be on/off.
- **pulse length/ratio lock** Length or duty cycle of the generated pulse, as soon as receiver has calculated a valid time from a received signal. Only used if the corresponding flag is set to use another setting in locked mode.
- **user delay** The cable delay from the receiver to the user device plus signal delay of any user application.
- **active** time pulse will be active if this bit is set.
- **lock to gps freq** Use frequency gained from GPS signal information rather than local oscillator's frequency if flag is set.
- **lock to gnss freq** Use frequency gained from GNSS signal information rather than local oscillator's frequency if flag is set.
- **locked other setting** If this bit is set, as soon as the receiver can calculate a valid time, the alternative setting is used. This mode can be used for example to disable time pulse if time is not locked, or indicate lock with different duty cycles.
- **is frequency** Interpret the 'Frequency/Period' field as frequency rather than period if flag is set.
- **is length** Interpret the 'Length/Ratio' field as length rather than ratio if flag is set.



- **align to TOW** If this bit is set, pulses are aligned to the top of a second.
- **polarity** If set, the first edge of the pulse is a rising edge (Pulse Mode: Rising).
- **grid UTC/GPS** Selection between UTC (0) or GPS (1) timegrid. Also effects the time output by [UBX-TIM-TP](#page-446-1) message.
- **grid UTC/GNSS** Selection between UTC (0), GPS (1), GLONASS (2) and Beidou (3) timegrid. Also effects the time output by [UBX-TIM-TP](#page-446-1) message.



The maximum pulse length can't exceed the pulse period.

- Time pulse settings shall be chosen in such a way, that neither the high nor the low period of the output is less than 50 ns (except when disabling it completely), otherwise pulses can be lost.
- The maximum frequency of the second time pulse pin (TIMEPULSE2) is limited to 1 kHz for [protocol versions less than 18](#page-14-0) unless using a Timing product variant.

## <span id="page-89-0"></span>**19.5.1 Example 1**

The example below shows the 1PPS TP signal generated on the time pulse output according to the specific parameters of the [UBX-CFG-TP5](#page-284-1) message:

- **tpIdx** = 0
- **freqPeriod** = 1 s
- **pulseLenRatio** = 100 ms
- **active** = 1
- **lockGpsFreq = lockGnssFreq** = 1
- **isLength** = 1
- **alignToTow** = 1
- **polarity** = 1
- **gridUtcGps = gridUtcGnss** = 1

The 1 Hz output is maintained whether or not the receiver is locked to GPS time. The alignment to TOW can only be maintained when GPS time is locked.



## <span id="page-89-1"></span>**19.5.2 Example 2**

This example only works with a Timing product variant or for [protocol versions greater than 17](#page-14-0).

The following example shows a 10 MHz TP signal generated on the TIMEPULSE2 output when the receiver is locked to GPS time. Without the lock to GPS time no frequency is output.





- **freqPeriod** = 1 Hz
- **pulseLenRatio** = 0
- **freqPeriodLock** = 10 MHz
- **pulseLenRatioLock** = 50%
- **active** = 1
- **lockGpsFreq = lockGnssFreq** = 1
- **lockedOtherSet** = 1
- **isFreq** = 1
- **alignToTow** = 1
- **polarity** = 1
- **gridUtcGps = gridUtcGnss** = 1

## <span id="page-90-0"></span>**20 Timemark**

The receiver can be used to provide an accurate measurement of the time at which a pulse was detected on the external interrupt pin. The reference time can be chosen by setting the time source parameter to UTC, GPS, GLONASS, BeiDou, Galileo or local time in the [UBX-CFG-TP5](#page-284-1) configuration message. The UTC standard can be set in the [UBX-CFG-NAV5](#page-284-1) configuration message. The delay figures defined with [UBX-CFG-TP5](#page-284-1) are also applied to the results output in the [UBX-TIM-TM2](#page-443-1) message.

A [UBX-TIM-TM2](#page-443-1) message is output at the next epoch if

- the [UBX-TIM-TM2](#page-443-1) message is enabled
- a rising or falling edge was triggered since last epoch on one of the EXTINT channels

The [UBX-TIM-TM2](#page-443-1) messages include time of the last timemark, new rising/falling edge indicator, time source, validity, number of marks and a quantization error. The timemark is triggered continuously.

Only the last rising and falling edge detected between two epochs is reported since the output rate of the [UBX-TIM-TM2](#page-443-1) message corresponds to the measurement rate configured with [UBX-CFG-RATE](#page-268-1) (see Figure below).





## <span id="page-91-0"></span>**21 Odometer**

## <span id="page-91-1"></span>**21.1 Introduction**

The odometer provides information on travelled ground distance (in meter) using solely the position and Doppler-based velocity of the navigation solution. For each computed travelled distance since the last odometer reset, the odometer estimates a 1-sigma accuracy value. The total cumulative ground distance is maintained and saved in the BBR memory.

The odometer feature is disabled by default. It can be enabled using the [UBX-CFG-ODO](#page-248-1) message.

## <span id="page-91-2"></span>**21.2 Odometer Output**

The odometer output is published in the [UBX-NAV-ODO](#page-384-1) message. This message contains the following elements:

- Ground distance since last reset (distance field): this distance is defined as the total cumulated distance in meters since the last time the odometer was reset (see section [Resetting the](#page-92-1) [Odometer\)](#page-92-1);
- Ground distance accuracy (distanceStd field): this quantity is defined as the 1-sigma accuracy estimate (in meters) associated to the Ground distance since last reset value;
- Total cumulative ground distance (totalDistance field): this quantity is defined as the total cumulated distance in meters since the last time the receiver was cold started (see section [Resetting the Odometer\)](#page-92-1).

If logging is enabled, then the odometer's ground distance since last reset value will be included in



the logged position data (see section [Logging](#page-92-2)).

## <span id="page-92-0"></span>**21.3 Odometer Configuration**

The odometer can be enabled/disabled by setting the appropriate flag in [UBX-CFG-ODO](#page-248-1) (flags field). The algorithm behaviour can be optimized by setting up a profile (odoCfg field) representative of the context in which the receiver is operated. The implemented profiles together with their meanings are listed below:

- Running: the algorithm is optimized for typical dynamics encountered while running, i.e the Doppler-based velocity solution is assumed to be of lower quality;
- Cycling: the algorithm is optimized for typical dynamics encountered while cycling;
- Swimming: the algorithm is optimized for very slow and smooth trajectories typically encountered while swimming;
- Car: the algorithm assumes that good Doppler measurements are available (i.e. the antenna is subject to low vibrations) and is optimized for typical dynamics encountered by cars.
- The odometer can only be reliably operated in a swimming context if satellite signals are available and the antenna is not immersed.

## <span id="page-92-1"></span>**21.4 Resetting the Odometer**

The odometer outputs (see [UBX-NAV-ODO](#page-384-1) message) can be reset by the following means:

- Ground distance since last reset (distance field): by sending a [UBX-NAV-RESETODO](#page-395-2) message;
- Ground distance accuracy (distanceStd field): by sending a [UBX-NAV-RESETODO](#page-395-2) message;
- Total cumulative ground distance (totalDistance): by a cold start of the receiver (this erases the BBR memory);

## <span id="page-92-2"></span>**22 Logging**

## <span id="page-92-3"></span>**22.1 Introduction**

The logging feature allows position fixes and arbitrary byte strings from the host to be logged in flash memory attached to the receiver. Logging of position fixes happens independently of the host system, and can continue while the host is powered down.

The following tables list all the logging related messages:

## **Logging control and configuration messages**

| Message           | Description                                                        |
|-------------------|--------------------------------------------------------------------|
| UBX-LOG-CREATE    | Creates a log file and activates the logging subsystem             |
| UBX-LOG-ERASE     | Erases a log file and deactivates the logging subsystem            |
| UBX-CFG-LOGFILTER | Used to start/stop recording and set/get the logging configuration |
| UBX-LOG-INFO      | Provides information about the logging system                      |
| UBX-LOG-STRING    | Enables a host process to write a string of bytes to the log file  |

#### **Logging retrieval messages**

| Message             | Description                                   |
|---------------------|-----------------------------------------------|
| UBX-LOG-RETRIEVE    | Starts the log retrieval process              |
| UBX-LOG-RETRIEVEPOS | A position log entry returned by the receiver |



Logging retrieval messages continued

| Description                                      |
|--------------------------------------------------|
| Odometer position data                           |
|                                                  |
| A byte string log entry returned by the receiver |
| Finds the index of the first entry <= given time |
|                                                  |

## <span id="page-93-0"></span>**22.2 Setting the logging system up**

An empty log can be created using the [UBX-LOG-CREATE](#page-311-1) message and a log can be deleted with the [UBX-LOG-ERASE](#page-312-2) message. The logging system will only be running if a log is in existence, so most logging messages will be rejected with an [UBX-ACK-NAK](#page-193-0) message if there is no log present. Only one log can be created at any one time so an [UBX-ACK-NAK](#page-193-0) message will be returned if a log already exists. The message specifies the maximum size of the log in bytes (with some pre-set values provided). Both the logging subsystem and the receiver file-store have implementation overheads, so total space available for log entries will be somewhat smaller than the size specified.

[UBX-LOG-CREATE](#page-311-1) also allows the log to be specified as a circular log. If the log is circular, then when it fills up, a set of older log entries will be deleted and the space freed up used for new log entries. By contrast, if a non-circular log becomes full then new entries which do not fit will be rejected. [UBX-LOG-CREATE](#page-311-1) also causes the logging system to start up so that further logging messages can be processed. The logging system will start up automatically on power-up if there is a log in existence. The log will remain in the receiver until specifically erased using the [UBX-LOG-](#page-312-2)[ERASE](#page-312-2) message.

[UBX-CFG-LOGFILTER](#page-227-1) controls whether logging of entries is currently enabled and selects position fix messages for logging. These configuration settings will be saved if the configuration is saved to flash. If this is done, then entry logging will continue on power-up in the same manner that it did before power-down.

**The top level active/inactive states of the logging subsystem.**



## <span id="page-93-1"></span>**22.3 Information about the log**

The receiver can be polled for a [UBX-LOG-INFO](#page-314-1) message which will give information about the log. This will include the maximum size that the log can grow to (which, due to overheads, will be smaller than that requested in [UBX-LOG-CREATE](#page-311-1)) and the amount of log space currently occupied. It will also report the number of entries currently in the log together with the time and date of the newest and oldest messages which have a valid time stamp.

Log entries are compressed and have housekeeping information associated with them, so the actual space occupied by log messages may be difficult to predict. The minimum size for a



position fix entry is 9 bytes and the maximum 24 bytes, the typical size is 10 or 11 bytes. If the odometer is enabled then this will use at least another three bytes per fix.

Each log also has a fixed overhead which is dependent on the log type. The approximate size of this overhead is shown in the following table.

## **Log overhead size**

| Log type     | Overhead    |
|--------------|-------------|
| circular     | Up to 40 kB |
| non-circular | Up to 8 kB  |

The number of entries that can be logged in any given flash size can be estimated as follows:

Approx. number of entries = (flash size available for logging - log overhead)/typical entry size

For example, if 1500 kB of flash is available for logging (after other flash usage such as the firmware image is taken into account) a non-circular log would be able to contain approximately 139000 entries ((1500\*1024)-(8\*1024))/11 = 138891.

## <span id="page-94-0"></span>**22.4 Recording**

The [UBX-CFG-LOGFILTER](#page-227-1) message specifies the conditions under which entries are recorded. Nothing will be recorded if recording is disabled, otherwise position fix and [UBX-LOG-STRING](#page-320-1) entries can be recorded. When recording is enabled an entry will also be created from each [UBX-](#page-320-1)[LOG-STRING](#page-320-1) message. These will be timestamped if the receiver has current knowledge of time.

The [UBX-CFG-LOGFILTER](#page-227-1) message has several values which can be used to select position fix entries for logging. If all of these values are zero, then all position fixes will be logged (subject to a maximum rate of 1Hz). A position is logged if any of the thresholds are exceeded. If a threshold is set to zero it is ignored. In addition the position difference and current speed thresholds also have a minimum time threshold.

Position fixes are only recorded if a valid fix is obtained - failed and invalid fixes are not recorded.

Position fixes are compressed to economise on the amount of flash space used. In order to improve the compression, the fix values are rounded to improve their compression. This means that the values returned by the logging system may differ slightly from any which are gathered in real time.

In [On/Off power save mode](#page-73-0) it is possible to configure the logging system so that only one fix is recorded for each on period. This will be recorded immediately before the receiver powers off and will be the best fix seen during the on period (in this case, "best" is defined as being the fix with the lowest horizontal accuracy figure).

The recorded data for a fix comprises :

- The time and date of the fix recorded to a precision of one second.
- Latitude and longitude to a precision of one millionth of a degree. Depending on position on Earth this is a precision in the order of 0.1 m.
- Altitude (height above mean sea level) to a precision of 0.1 m. Entries with an altitude lower than -470 m (lower than the lowest point on earth) or higher than 20,000 m may not be recorded in the log.
- Ground speed to a precision of 1 cm/s
- The fix type (only successful fix types, since these are the only ones recorded).



- The number of satellites used in the fix is recorded, but there is a maximum count which can be recorded. If the actual count exceeds this maximum count then the maximum count will be recorded. If a log entry is retrieved with a satellite count equal to the maximum this means that value or more. The maximum count is 51. (The maximum count is 19 in [protocol versions less](#page-15-2) [than 24](#page-15-2)).
- A horizontal accuracy estimate is recorded to give an indication of fix quality. This is an approximate compressed representation of the accuracy as determined by the fix process. Any accuracy less than 0.7 m will be recorded as 0.7 m and any value above 1 km will be recorded as 1km. Within these limits, the recorded accuracy will always be greater than the fix accuracy number (by up to 40%).
- Heading to a precision of one degree.
- Odometer distance data (if odometer is enabled).

## **The states of the active logging subsystem**



## <span id="page-95-0"></span>**22.5 Retrieval**

[UBX-LOG-RETRIEVE](#page-319-1) starts the process which allows the receiver to output log entries. Log recording must be stopped using [UBX-CFG-LOGFILTER](#page-227-1) before this can be done. [UBX-LOG-INFO](#page-314-1) may be helpful to a host system in order to understand the current log status before retrieval is started.

Once retrieval has started, one message will be output from the receiver for each log entry requested. Sending any logging message to the receiver during retrieval will cause the retrieval to stop before the message is processed.

To maximise the speed of transfer it is recommended that a high communications data rate is used and GNSS processing is stopped during the transfer (see [UBX-CFG-RST](#page-270-1))

[UBX-LOG-RETRIEVE](#page-319-1) can specify a start-entry index and entry-count. The maximum number of entries that can be returned in response to a single [UBX-LOG-RETRIEVE](#page-319-1) message is 256. If more entries than this are required the message will need to be sent multiple times with different startEntry indices.



The receiver will send a [UBX-LOG-RETRIEVEPOS](#page-317-2) message for each position fix log entry and a [UBX-](#page-318-1)[LOG-RETRIEVESTRING](#page-318-1) message for each string log entry. If the odometer was enabled at the time a position was logged, then a [UBX-LOG-RETRIEVEPOSEXTRA](#page-317-2) will also be sent. Messages will be sent in the order in which they were logged, so [UBX-LOG-RETRIEVEPOS](#page-317-2) and [UBX-LOG-](#page-318-1)[RETRIEVESTRING](#page-318-1) messages may be interspersed in the message stream.

The [UBX-LOG-FINDTIME](#page-312-2) message can be used to search a log for the index of the first entry less than or equal to the given time. This index can then be used with the [UBX-LOG-RETRIEVE](#page-319-1) message to provide time-based retrieval of log entries.

## <span id="page-96-0"></span>**22.6 Command message acknowledgement**

Some log operations may take a long time to execute because of the time taken to write to flash memory. The time for some operations may be unpredictable since the number and timing of flash operations may vary. In order to allow host software to synchronise to these delays logging messages will always produce a response. This will be [UBX-ACK-NAK](#page-193-0) in case of error, otherwise [UBX-](#page-193-0)[ACK-ACK](#page-193-0) unless there is some other defined response to the message.

It is possible to send a small number of logging commands without waiting for acknowledgement, since there is a command queue, but this risks confusion between the acknowledgements for the commands. Also a command queue overflow would result in commands being lost.

## <span id="page-96-1"></span>**23 Data Batching**

(Note: this functionality is supported only in [protocol versions 23.01](#page-15-2)).

## <span id="page-96-2"></span>**23.1 Introduction**

The data batching feature allows position fixes to be stored in the RAM of the receiver to be retrieved later in one batch. Batching of position fixes happens independently of the host system, and can continue while the host is powered down.

The following tables list all the batching related messages:

| Message       | Description                                                           |
|---------------|-----------------------------------------------------------------------|
| UBX-CFG-BATCH | Used to enable and configure the batching feature                     |
| UBX-MON-BATCH | Provides information about the buffer fill level and dropped data due |
|               | to overrun                                                            |

## **Batching control and configuration messages**

## **Batch retrieval messages**

| Message               | Description                            |
|-----------------------|----------------------------------------|
| UBX-LOG-RETRIEVEBATCH | Starts the batch retrieval process     |
| UBX-LOG-BATCH         | A batch entry returned by the receiver |

## <span id="page-96-3"></span>**23.2 Setting up the data batching**

Data batching is disabled per default and it has to be configured before use via [UBX-CFG-BATCH](#page-206-1).

The feature must be enabled and the buffer size must be set to greater than 0. It is possible to set up a PIO as a flag that indicates when the buffer is close to filling up. The fill level when this PIO is asserted can be set by the user separately from the buffer size. The notification fill level must not be larger than the buffer size.

If the host does not retrieve the batched fixes before the buffer fills up the oldest fix will be



dropped and replaced with the newest.

The RAM available in the chip limits the size of the buffer. To make the best use of the available space users can select what data they want to batch. When batching is enabled a basic set of data is stored and the configuration flags extraPvt and extraOdo can be used to store more detailed information about the position fixes. Doing so reduces the number of fixes that can be batched.

The receiver will reject configuration if it cannot allocate the required buffer memory. To ensure robust operation of the receiver the following limits are enforced:

| extraPvt | extraOdo | Maximum number of epochs |
|----------|----------|--------------------------|
| 0        | 0        | 300                      |
| 0        | 1        | 221                      |
| 1        | 0        | 156                      |
| 1        | 1        | 132                      |

## **Maximum number of batched epochs**

It is recommended to disable all periodic output messages when using batching. This improves system robustness and also helps ensure that the output of batched data is not delayed by other messages.

The buffer size is set up in terms of navigation epochs. This means that the time that can be covered with a certain buffer depends on the navigation rate. This rate can be set separately for full power operation via [UBX-CFG-RATE](#page-268-1) and for power save mode via the updatePeriod in [UBX-CFG-PM2](#page-249-1).

Data batching settings should not be re-configured while retrieving data from the buffer.

## <span id="page-97-0"></span>**23.3 Retrieval**

[UBX-LOG-RETRIEVEBATCH](#page-316-1) starts the process which allows the receiver to output batch entries. Batching must not be stopped for readout; all batched data is lost when the feature is disabled. Batched fixes are always retrieved starting with the oldest fix in the buffer and progressing towards newer ones. There is no way to skip certain fixes during retrieval.

When a [UBX-LOG-RETRIEVEBATCH](#page-316-1) message is sent the receiver transmits all batched fixes. It is recommended to send a retrieval request with sendMonFirst set. This way the receiver will send a [UBX-MON-BATCH](#page-352-0) message first that contains the number of fixes in the batching buffer. This information can be used to detect when the u-blox receiver finished sending data.

Once retrieval has started, the receiver will first send [UBX-MON-BATCH](#page-352-0) if sendMonFirst option was selected in the [UBX-LOG-RETRIEVEBATCH](#page-316-1). After that, it will send [UBX-LOG-BATCH](#page-308-0) messages with the batched fixes.

To maximise the speed of transfer it is recommended that a high communications data rate is used.

- The receiver will discard retrieval request while processing a previous [UBX-LOG-](#page-316-1)[RETRIEVEBATCH](#page-316-1) message.
- The receiver does **not** acknowledge the reception of [UBX-LOG-RETRIEVEBATCH](#page-316-1); the response that the host should expect are the reply messages.



## <span id="page-98-0"></span>**24 Geofencing**

(Note: this feature is not supported in [protocol versions less than 18\)](#page-15-2).

## <span id="page-98-1"></span>**24.1 Introduction**



The geofencing feature allows for the configuration of up to four circular areas (geofences) on the Earth's surface. The receiver will then evaluate for each of these areas whether the current position lies within the area or not and signal the state via UBX messaging and PIO toggling.

## <span id="page-98-2"></span>**24.2 Interface**

Geofencing can be configured using the [UBX-CFG-GEOFENCE](#page-220-1) message. The geofence evaluation is active whenever there is at least one geofence configured.

The current state of each geofence plus the combined state is output in [UBX-NAV-GEOFENCE](#page-377-2) with every navigation epoch.

Additionally the user can configure the receiver to output the combined geofence state on a physical pin.

## <span id="page-98-3"></span>**24.3 Geofence state evaluation**

With every navigation epoch the receiver will evaluate the current solution's position versus the configured geofences. There are three possible outcomes for each geofence:

- Inside The position is inside the geofence with the configured confidence level
- Outside The position lies outside of the geofence with the configured confidence level
- Unknown There is no valid position solution or the position uncertainty does not allow for unambiguous state evaluation

The position solution uncertainty (standard deviation) is multiplied with the configured confidence sigma level number and taken into account when evaluating the geofence state (red circle in figure below).



The combined state for all geofences is evaluated as the combination (logical OR) of all geofences:

- Inside The position lies inside of at least one geofence
- Outside The position lies outside of all geofences
- Unknown All remaining states



## <span id="page-99-0"></span>**24.4 Using a PIO for Geofence State Output**

This feature can be used for example for waking up a sleeping host when a defined geofence condition is reached. The receiver will toggle the assigned pin according to the combined geofence state. Due to hardware restrictions the unknown state will always be represented as HIGH. If the receiver is in software backup or in a reset, the pin will go to HIGH accordingly. The meaning of the LOW state can be configured using [UBX-CFG-GEOFENCE](#page-220-1).

## <span id="page-99-1"></span>**25 Time Mode Configuration**

This feature is only available with Timing, FTS or High Precision GNSS (HPG) products

This section relates to the configuration message [UBX-CFG-TMODE2](#page-280-2) (for Timing or FTS products) and to the configuration message [UBX-CFG-TMODE3](#page-282-1) (for HPG products).

## <span id="page-99-2"></span>**25.1 Introduction**

Time Mode is a special receiver mode where the position of the receiver is known and fixed and only the time is calculated using all available satellites. This mode allows for maximum time accuracy, for single-SV solutions, and also for using the receiver as a stationary reference station.

## <span id="page-99-3"></span>**25.2 Fixed Position**

In order to use the Time Mode, the receiver's position must be known as exactly as possible. Either the user already knows and enters the position, or it is determined using [Survey-in](#page-99-4). Errors in the fixed position will translate into time errors depending on the satellite constellation.

For Timing products, as a rule of thumb the position should be known with an accuracy of better than 1 m for a timing accuracy in the order of nanoseconds. If an accuracy is required only in the order of microseconds, a position accuracy of roughly 300 m is sufficient.

For HPG products, errors in the reference station position will directly translate into rover position errors. The reference station position accuracy should therefore be at least as good as the desired rover absolute position accuracy.

## <span id="page-99-4"></span>**25.3 Survey-in**

Survey-in is the procedure that is carried out prior to using Time Mode. It determines a stationary receiver's position by building a weighted mean of all valid 3D position solutions.

Two requirements for stopping the procedure must be specified:

- The **minimum observation time** defines a minimum amount of observation time regardless of the actual number of valid fixes that were used for the position calculation. Reasonable values range from one day for high accuracy requirements to a few minutes for coarse position determination.
- The **required 3D position standard deviation** defines a limit on the spread of positions that contribute to the calculated mean. As the position error translates into a time error when using Time Mode (see [above](#page-99-3)), one should carefully evaluate the time accuracy requirements and choose an appropriate value.

Survey-in ends, when **both** requirements are met. After Survey-in has finished successfully, the receiver will automatically enter fixed position Time Mode.

The Survey-in status can queried using the [UBX-TIM-SVIN](#page-442-1) message for Timing or FTS products or



the [UBX-NAV-SVIN](#page-406-1) message for HPG products.

- The "Standard Deviation" parameter defines uncertainty of the manually provided "True Position" set of parameters. This uncertainty directly affects the accuracy of the timepulse. This is to prevent an error that would otherwise be present in the timepulse because of the initially inaccurate position (assumed to be correct by the receiver) without users being aware of it. The "3D accuracy" parameter in "Fixed Position" as well as the "Position accuracy limit" in "Survey-in" affect the produced time information and the timepulse in the same way. Note that the availability of the position accuracy does not mitigate the error in the timepulse but only accounts for it when calculating the resulting time accuracy.
- Once a survey-in has been started, its progress is saved in non-volatile memory, and hence continues over events such as a reset, receiver restart, or change of satellite constellation. If a survey-in position is required using data only for a particular receiver configuration, then any on-going survey-in should be stopped by either a [UBX-CFG-](#page-280-2)[TMODE2](#page-280-2) or a [UBX-CFG-TMODE3](#page-282-1) message with the timeMode field set to 0, then the receiver configured as required, and then a new [UBX-CFG-TMODE2](#page-280-2) or [UBX-CFG-TMODE3](#page-282-1) message sent with the new survey-in parameters.

## <span id="page-100-0"></span>**26 Time & Frequency Sync (FTS)**

The features described in this section are only available with the FTS products

## <span id="page-100-1"></span>**26.1 Introduction**

An FTS configured receiver provides an accurate, low phase-noise reference frequency as well as phase reference pulse (typically at one pulse per second). An FTS receiver also implements automatic hold-over capability based on a stable VCTCXO in modules and the customer's choice of reference oscillator in chip-based designs. It offers generic interfaces for external sources of synchronization (suitable for external OCXOs, IEEE1588 or Synchronous Ethernet). The receiver is optimized for stationary applications and delivers excellent GNSS sensitivity in conjunction with assistance data.

In the rest of this description the following terminology will be used:

- Disciplined oscillator: an oscillator whose frequency is corrected by a more stable frequency reference, such as a GNSS system.
- Internal oscillator: the mandatory disciplined oscillator which is used as the reference frequency for the GNSS receiver subsystem. The output from this oscillator is also available to the application as an output from the module.
- External oscillator: an optional oscillator, disciplined by the receiver, either via I2C DAC or via UBX messages handle by a host.
- Source: a source of frequency and/or phase synchronization either measured by the receiver based on direct hardware input or an offset estimated by an external timing sub-system with respect to the receiver output. Sources are handled according to related estimates of uncertainty delivered by the application or (for oscillators) configurable models provided by the receiver.
- Holdover: periods when GNSS measurements of sufficient quality to maintain time/frequency are not available.



In all FTS related messages the above sources are indexed as follows:

## **Synchronization source indexing**

| Source                              | Index |
|-------------------------------------|-------|
| Internal oscillator                 | 0     |
| GNSS                                | 1     |
| EXTINT0 (external input)            | 2     |
| EXTINT1 (external input)            | 3     |
| Internal oscillator measured by the | 4     |
| host                                |       |
| External oscillator measured by the | 5     |
| host                                |       |

The following table lists FTS related messages:

#### **FTS message summary**

| Message        | Description                                                      |  |
|----------------|------------------------------------------------------------------|--|
| UBX-CFG-SMGR   | Synchronization manager configuration                            |  |
| UBX-CFG-ESRC   | External source configuration                                    |  |
| UBX-CFG-DOSC   | Disciplined oscillator configuration                             |  |
| UBX-CFG-TP5    | Configures the output pulse parameters                           |  |
| UBX-CFG-NAV5   | Configures which variant of UTC is used by the receiver          |  |
| UBX-MON-SMGR   | SMGR monitoring message                                          |  |
| UBX-TIM-DOSC   | Message containing disciplining command for external oscillators |  |
|                | controlled through the host                                      |  |
| UBX-TIM-HOC    | Message allowing the host to directly control the module's       |  |
|                | oscillators                                                      |  |
| UBX-TIM-TOS    | Message containing information about the preceding time-pulse    |  |
|                | output by the receiver                                           |  |
| UBX-TIM-SMEAS  | Message containing measurements of phase/frequency inputs        |  |
| UBX-TIM-VCOCAL | Oscillator calibration command and result report                 |  |
| UBX-TIM-FCHG   | Information about latest frequency change to an oscillator       |  |

The remainder of this chapter describes some typical use cases, introduces the Synchronization Manager (SMGR) functionality unique to FTS products and describes the use of related messages.

## <span id="page-101-0"></span>**26.2 Example use cases**

In this section some typical use cases are described.

## <span id="page-101-1"></span>**26.2.1 Stand-alone synchronization system**





In this example, the FTS device provides a stand-alone synchronization sub-system in the context of, say, a small cell. The module's internal 30.72MHz VCTCXO is disciplined by the module and provides the frequency reference to the platform. The module provides a PPS signal to synchronize the platform's physical layer. A 1PPS (or frequency) input to the module provides frequency and/or phase information from host timing sub-systems such as PTP or Sync-E. In the absence of phase information from GNSS or any other source, the module relies on the VCTCXO for synchronization holdover, augmented by any reliable source of frequency control. In the absence of frequency control, the holdover performance is determined entirely by the VCTCXO. In some applications holdover performance will be enhanced by using an external stable (but not necessarily accurate) frequency reference.

<span id="page-102-0"></span>

## **26.2.2 Oscillator control via host**



The frequency offset of the external oscillator is measured by the FTS device and communicated to the host which can then make any corrections necessary. The FTS device also generates a PPS phase reference internally (with no guarantee of coherence with the external oscillator). During holdover, the phase of 1PPS signal is maintained using either the primary reference oscillator or the 1PPS\_In signal, according to their respective uncertainty.

<span id="page-103-0"></span>



In this use case, the FTS device disciplines an external oscillator via an external DAC. During holdover the input to the external DAC is frozen and the phase of the time pulse output is maintained by the primary reference oscillator, but only guaranteed to be fully coherent with the internal oscillator. The FTS receiver can also be commanded to perform a one-off calibration of the tuning slope of external oscillator if necessary.

## <span id="page-103-1"></span>**26.2.4 External (coherent) PPS**





In this use case, the system PPS is generated by an external device from the output of the primary reference oscillator. The FTS receiver measures the phase of this PPS input against GNSS time or the best available source. Any small phase corrections necessary can be made by the receiver via adjustments to the oscillator frequency or directly by the host to the PPS generator (e.g. to accelerate removal of large phase errors). During holdover the DAC input is frozen.

## <span id="page-104-0"></span>**26.3 Synchronization Manager Concept**

The Synchronization Manager (SMGR) assumes the frequency and phase control functions in FTS configured devices. The SMGR uses internal and external phase and frequency measurements to derive the disciplining values (necessary frequency changes) and to assess the quality (uncertainty) of the time pulse signal and the frequency outputs. The SMGR considers the following synchronization sources:

- The GNSS solutions
- Internal oscillator
- Up to two external signals: frequency or time pulse (e.g. 1PPS) reference signals on EXTINT0 and/or EXTINT1
- Externally conducted measurements, from which the results are sent to the receiver through one of the host interfaces

Each measurement provides frequency offset and/or phase information along with an estimate of the uncertainty of each. The SMGR functional block diagram is given below:





The user has the option to configure how the SMGR considers the external signals, e.g. time or frequency source, disciplined or not, etc... The user must also configure the uncertainty of the signals along with their nominal characteristics. One of the external signals may be configured as the feedback path of a disciplined external oscillator.

The SMGR can operate in frequency locked or in phase locked mode. In frequency locked mode the target of the SMGR is to eliminate frequency error. In phase locked mode the elimination of time error is the goal; this may lead to intentional deviation from the correct oscillator frequency. The correction rate in both of these modes is subject to configurable limits (see [UBX-CFG-SMGR](#page-277-1)). The SMGR runs periodically (typically once a second). Its operation consists of the following stages each time it is executed:

- Choose the best source to be the reference, given the characteristics (phase noise and stability) of each of the sources and the uncertainty of their measurements.
- Calculate the phase and/or frequency errors as well as their uncertainty for each of the disciplined oscillators with respect to the reference source.
- Calculate correction for disciplined oscillators; time and/or frequency corrections are limited to the configured limits.
- Map frequency adjustment to physical output.

The SMGR runs periodically and retrieves the most recent measurements for each source along with the estimates about their respective uncertainty. The relative phase and/or frequency errors of disciplined oscillators with respect to the reference are calculated from incoming measurements and used to discipline them. The decision-making process as such does not depend on decisions made previously, however it does rely on the estimated uncertainty for each source, which is determined by comparing predicted and measured values over some moderate period of time. The SMGR only uses a single reference source at any one time. It does not combine measurements from different sources in any way. If the selected reference provides a time error measurement then a phase locked loop is possible, otherwise the receiver automatically enters frequency lock even if configured to maintain a phase lock.

In some cases the host software might choose to drive an oscillator directly. This may be useful



where a large timing error has accumulated (e.g. after a long period of holdover) and normal operation would prevent the error being corrected swiftly. In this case, the host can deliberately steer the oscillator to correct timing in large steps as configured maximum phase and frequency change limits are not applied to adjustments commanded by the host. Another use of the direct host-driven steering may be the calibration of other parts of the system. Use [UBX-TIM-HOC](#page-439-1) message for this functionality.

If the time error is so large that its correction would take prohibitively long even with maximum frequency offset of the oscillator the receiver can be switched to non-coherent time pulse output mode. In this case the sync manager is temporarily reconfigured to allow time pulse intervals that are not coherent with the frequency output, i.e. there are more or less than the nominal number of cycles between two pulses. The user may optionally specify a limit on time adjustments. The output mode can be set to coherent again once the time error is sufficiently small.

A SMGR summary status is provided by [UBX-MON-SMGR](#page-361-1) message.

The SMGR runs at the navigation rate set by [UBX-CFG-RATE](#page-268-1). For FTS configured devices, it is not recommended to use navigation rates higher than 1Hz.

## <span id="page-106-0"></span>**26.4 Oscillator and source specification**

For correct operation, the frequency, phase and stability characteristics of all sources and disciplined oscillators must be described. External synchronization sources are configured with [UBX-CFG-ESRC](#page-218-1) and disciplined oscillators with [UBX-CFG-DOSC](#page-211-2). The models (short and long term stability behavior) specified by these messages provide the SMGR with the knowledge necessary to its decision making.

The user must also configure the method (coherent or non-coherent) used for frequency adjustment, the maximum frequency adjustment and other parameters contained in [UBX-CFG-](#page-211-2)[DOSC](#page-211-2).

It is assumed that an external voltage-controlled oscillator has a constant ratio of relative frequency change to control voltage change. The oscillator is therefore characterized by two metrics: an offset (control voltage for nominal frequency) and a gain (relative frequency change per control step). Each of these parameters are known along with their uncertainty. It is assumed that the oscillator control gain is stable over time but its offset may change significantly with aging. Because of the drift of the offset, its saved value is regularly updated in the model. The gain, on the other hand, is only updated on demand by the host application by re-configuration or calibration. For the measurement of the gain a special auto-calibration is available, described in the [calibration section](#page-107-0).

External oscillator stability (frequency changes) is described by four parameters (see [UBX-CFG-](#page-211-2)[DOSC](#page-211-2)):

- changes with temperature: withTemp is the maximum deviation limit from the nominal frequency at the reference temperature over the supported temperature range (in ppb) and timeToTemp (in s) which is a period after which the maximum deviation limit is reached.
- aging: maxDevLifeTime is the maximum deviation from the nominal frequency (in ppb) and withAge is the oscillator stability with age (in ppb/year).



## <span id="page-107-0"></span>**26.5 Calibration**

Prior to disciplining an oscillator, the SMGR must have an accurate knowledge of the controlled oscillator's frequency control gain and initial frequency offset (oscillator gains may differ significantly from unit to unit and batch to batch, largely as a result of different crystal Q). The receiver provides a slope measurement utility to aid the calibration process.

The calibration utility is a special mode where all disciplining operations are suspended and therefore all disciplined oscillators, internal or external, cease to produce usable outputs. It takes place in response to a specific request ([UBX-TIM-VCOCAL](#page-448-1) message) from the host to do so for a particular oscillator and only one oscillator can be calibrated at a time. During this phase, the SMGR forces large frequency variations by changing the input of the digital to analogue conversion device whose output is driving the oscillator. Several frequency measurements are performed and a gain is estimated.



Calibration parameters must be configured or the calibration utility called before disciplining operation is possible. Once calibrated, the calibStatus flag in [UBX-CFG-DOSC](#page-211-2) is set. The calibration utility can be re-triggered at any time by issuing the appropriate command through the [UBX-TIM-VCOCAL](#page-448-1) message (not recommended during normal operation). An ongoing calibration process can be aborted using the same message with the appropriate flags. It can also be bypassed if the calibStatus flag in the [UBX-CFG-DOSC](#page-211-2) message is set to 1 (oscillator is calibrated independently with results saved using the UBX-CFG-DOSC message).

In order to enter the calibration mode it is required that:

- A stable frequency source is available for the duration of the calibration. This source may be a GNSS solution or a frequency signal on an EXTINT pin.
- The oscillator subject to calibration is configured through the [UBX-CFG-DOSC](#page-211-2) message (including an initial estimate of gain) and available for the duration of the process.

For an external oscillator it is also assumed that the useful range of the input is covered by the output of the DAC and that the relation frequency versus DAC input is linear. Once the calibration operation is complete the receiver will issue a UBX message to indicate that the SMGR is reverting to normal operation and to report the results of the calibration. A default for the internal oscillator is available in the firmware.

Note that it is important that only the chosen frequency source is enabled during the calibration process and that it remains stable throughout the calibration period; otherwise incorrect oscillator measurements will be made and this will lead to miscalibration and poor subsequent operation of the receiver.



## <span id="page-108-0"></span>**26.6 FTS device Output and Top Of Second (TOS) message**

The outputs available from an FTS device can be one or all of the following:

- A disciplined frequency source at the same frequency as the internal oscillator.
- A 1PPS or an even second signal (other similar rates are possible) coherent with the internal oscillator, configured by [UBX-CFG-TP5](#page-284-1).
- Messages reporting measurement results (for example for a host disciplined external oscillator).
- A [UBX-TIM-TOS](#page-444-1) message which describes the current condition (accuracy, coherent or noncoherent, etc...) of the frequency and PPS outputs.
- DAC command for disciplined external oscillators.

The top of second (TOS) message is a summary of the FTS device's status. It is output shortly after each time pulse and so will normally be aligned to the second of the reference time (if available). To guarantee that this message is output as the first message after the time pulse a system of time slot reservation is provided for all communication interfaces towards the host. For more information on this mechanism refer to [the description of TX time slots](#page-109-0)

Users of the FTS variant are expected to use the [UBX-TIM-TOS](#page-444-1) message to obtain key parameters for each time pulse. The [UBX-TIM-TP](#page-446-1) message is only supported for compatibility with timing receivers and is not guaranteed to provide the most appropriate information in all FTS use cases.

## The time pulse of an FTS device is generated differently from that of other u-blox receivers.

FTS products support two modes of time pulse generation: "coherent" and "non-coherent" pulses. "Coherent" pulse generation means that the number of clock cycles between two pulses is always the same. When in "non-coherent" pulse mode the receiver may change the number of clock cycles between two pulses if it can thus reduce the phase error of the time pulse. The receiver can be configured (using [UBX-CFG-SMGR](#page-277-1)) to operate in either of these modes or to switch from "noncoherent" to coherent mode after initial frequency and phase error has been eliminated.

It can be useful to instruct the receiver to enter the "non-coherent" pulse mode during startup or while recovering from holdover; it reduces the time necessary for phase convergence. After the phase error is reduced the host can instruct the FTS receiver to switch back to "coherent" mode again.

The [UBX-TIM-TOS](#page-444-1) message, when enabled, indicates the actual mode of pulse generation.

Depending on the time pulse generation mode, the time pulse can be forced to be phase aligned to the oscillators. In coherent output mode the phase offset of the oscillator at the rising edge of the time pulse is defined by the phaseOffset field of [UBX-CFG-DOSC](#page-211-2). In "non-coherent" mode this constraint is ignored.

The phase offset is handled differently for both oscillators. Whereas phase lock between the internal oscillator and the time pulse is guaranteed by hardware, in the case of the external oscillator the lock is achieved by software and that lock is therefore the lock behavior is expected to be different.

The frequency, shape and offset of the time pulse can be configured with the [UBX-CFG-TP5](#page-286-0) message. Some of the fields are interpreted differently by FTS devices compared to other u-blox receivers. Among others the lockGnssFreq flag is ignored and the time pulse is always aligned to the best synchronization source. Furthermore, switching between the two time pulse frequency and length parameters is not governed by GNSS alone but by the condition selected in the



syncMode field.

- Two delay parameters can be configured using [UBX-CFG-TP5](#page-286-0), antCableDelay and userConfigDelay. In an FTS product care should be taken what delays are attributed to which of the delay terms. The antenna cable delay is only relevant when the receiver is following GNSS as reference; the user-configurable delay is applied regardless of the active reference signal.
- In current FTS products only TIMEPULSE 2 can be used for pulse generation. Additionally, just 0.5 Hz, 1 Hz and 2 Hz time pulse output is supported by current FTS products. Other output frequencies may be configured with [UBX-CFG-TP5](#page-286-0) but are not guaranteed to work properly.

## <span id="page-109-0"></span>**26.7 Message transmission time slot reservations on host interfaces**

The firmware provides three message transmission time slots that are aligned to the time pulse output of the receiver. No message is scheduled for transmission in the first slot after the leading edge of the time pulse. The second slot is reserved for the [UBX-TIM-TOS](#page-444-1) message and the third slot is used for outputting other messages. However, any message transmission that was started will be finished before a new message is started.

The time slots can be enabled and configured using [UBX-CFG-TXSLOT](#page-288-1).

When the reference time pulse is disabled or runs at a high frequency it may happen that many or all outgoing messages are lost. Therefore the time slot mechanism should be configured to match the time pulse behavior or disabled altogether.

This mechanism only controls when a message transmission may start and does not guarantee that the message transmission will finish before the end of the corresponding slot. Therefore the end of the last slot should be configured such that the longest enabled message can still be transmitted before the period starts when the receiver must not transmit messages.

The timing of the actual message output is also dependent on the communication interface and its clocking. On the slave interfaces (DDC and SPI) the host must provide clock in all time slots for this feature to work.

## <span id="page-109-1"></span>**26.7.1 Example setup**

Following is an example scenario. The receiver is set up to output a time pulse at a 1 Hz rate. Suppose that the following requirements are given for system integration:

- The TOS message should be output 10 to 50 ms after the time pulse.
- No other message should be output from the leading edge of the time pulse until 50 ms after the time pulse.
- The longest enabled message takes up to 100 ms to transmit through the chosen interface with the configured speed.

Then the time slots are enabled and the three slots are configured to end 10, 50 and 900 ms after the pulse respectively. The following figure indicates time pulses with upwards pointing arrows. Slot 0 (the first one active immediately after the time pulse) is active and thus blocks the transmission of new messages from 100 ms before the time pulse until 10 ms after it. Time slot 1, i.e. the time between 10 and 50 ms after the pulse, is reserved for the top-of-second message. All other messages are output in slot 2.





## <span id="page-110-0"></span>**27 RTK Mode Configuration**



u-blox RTK technology introduces the concept of a reference station and a rover. Using the RTCM3 protocol, the reference station sends corrections to the rover via a communication link enabling the rover to compute its position relative to the reference with high accuracy.

- In the high precision GNSS context, the terms reference station and base station can be used interchangeably.
- The distance between the reference station and the rover is called baseline length.
- The reference station can provide correction to several rovers but the rover cannot concurrently process corrections from several reference stations.

The remainder of this chapter describes how to configure the reference station and the rover. More details about the RTCM3 protocol can be found in the [RTCM3](#page-456-2) section.

## <span id="page-110-1"></span>**27.1 Reference Station Mode Configuration**

Reference Station Mode is a special receiver mode where the receiver uses measurements from all available satellites to broadcast corrections. Configuring a stationary reference station is done in two steps:

- The receiver must be set in Time Mode using the configuration steps described in the [Time](#page-99-1) [Mode Configuration](#page-99-1) section.
- The RTCM3 correction stream must be configured following the rules detailed in the [RTCM3](#page-458-1) [Configuration](#page-458-1) section. Each RTCM message must be individually enabled using [UBX-CFG-MSG](#page-229-1).
- By default the reference station will begin operation in standard GNSS mode without any RTCM output. Messages for observations will be streamed as soon as they are configured for output. However messages for the reference station position will only be output when both the reference station is in fixed position mode, and the message is configured for output. As explained in the [Time Mode Configuration](#page-99-1) section, this mode can be directly configured or reached at the end of a successful survey-in.
- The rover will need to have received both reference station observation messages and reference station position messages in order to attempt ambiguity fixes.
- When the reference station is in Time Mode, some error checking is performed on the entered, or surveyed-in, fixed position. If the result of these checks indicates that the fixed position may be incorrect, then a [UBX-INF-WARNING](#page-307-1) message will be sent, with the text "Reference Station position seems incorrect".



## <span id="page-111-0"></span>**27.2 Rover Mode Configuration**

The RTK rover can be configured to work in either of these two differential modes using [UBX-CFG-](#page-211-2)[DGNSS](#page-211-2):

- **RTK fixed:** In this mode, the rover will attempt to fix ambiguities whenever possible.
- **RTK float:** In this mode, the rover will estimate the ambiguities as float but will make no attempts at fixing them.

The time after which old RTCM data will be discarded can be specified using the dgnssTimeout field in [UBX-CFG-NAV5](#page-230-1).

- By default the rover will begin operation in RTK fixed mode. Upon receiving an RTCM3 correction stream on any of its communication interfaces, the rover will parse the data, apply the correction and, if possible, fix ambiguities. In absence of correction data or if the correction data times out, the rover will operate in standard GNSS mode.
- The time needed to resolve the ambiguity is affected by the baseline length as well as by multipath and satellite visibility at both rover and reference station.

## <span id="page-111-1"></span>**27.3 Moving Baseline RTK Configuration**

The moving baseline (MB) RTK mode differs from the standard RTK mode in that it does not require the reference to be stationary at a known location. In MB RTK mode, both the reference station and rover receivers can move while computing a centimeter-level accurate 3D vector between them. This is ideal for applications where the relative position offset between two moving vehicles is required such as, for example, the follow-me feature on a UAV.

For the sake of conciseness, in the moving baseline RTK context, the reference station and rover receivers are referred to as MB reference and MB rover, respectively.

## <span id="page-111-2"></span>**27.3.1 MB Reference Configuration**

Configuring a receiver to operate in MB reference mode is done in two steps:

- The receiver must be set in Time Mode disabled using the configuration message [UBX-CFG-](#page-282-1)[TMODE3](#page-282-1).
- The RTCM3 correction stream must be configured following the rules detailed in the [RTCM3](#page-458-1) [Configuration](#page-458-1) section. Each RTCM message must be individually enabled using [UBX-CFG-MSG](#page-229-1).

If the MB reference moves, then its position changes over time. To ensure that the baseline is as accurate as possible:

- The MB reference position must be sent for each epoch the MB reference observations are sent.
- The MB reference and rover must use the same navigation update rate.

## <span id="page-111-3"></span>**27.3.2 MB Rover Configuration**

As in the standard RTK mode, it is possible to configure the MB rover to operate in RTK fixed or RTK float using the [UBX-CFG-DGNSS](#page-211-2) message.



By default the MB rover will begin operation in RTK fixed mode.

As discussed in the [Moving Baseline Expected Performance](#page-112-0) section, RTCM corrections can only be extrapolated over a few seconds when both reference and rover receivers are moving. Therefore, any dgnssTimeout value configured using the [UBX-CFG-NAV5](#page-230-1) message will be ignored by the MB rover.



## <span id="page-112-0"></span>**27.3.3 Expected Performance**

While the MB RTK solution aims at estimating the relative position with centimeter-level accuracy, the absolute position of each receiver is expected to be known with a standard GNSS accuracy of a few meters. Additionally, the performance of the MB RTK solution is limited by the following:

- A moving reference receiver typically experiences worse GNSS tracking than a static reference receiver in an open-sky environment and therefore the MB RTK performance may be degraded.
- The MB rover can only compute an optimal MB RTK solution if the time-matched RTCM observation and position messages are received within a predefined time limit. The MB rover will wait up to **700 ms** for messages before falling back to an extrapolated MB RTK solution. The MB rover will extrapolate the MB reference observations and/or position for up to **3 s** before falling back to standard GNSS operation.
- The achievable update rate of the MB RTK solution is limited by the communication link latency. As a rule of thumb, the communication link latency should be about half the desired navigation update period. If it exceeds 700 ms, the MB rover will not be able to compute an MB RTK solution, even at 1 Hz.
- Since the MB rover must wait for time-matched RTCM corrections from the MB RTK reference to compute its position, the overall latency of the MB RTK solution will be the sum of the communication link latency plus the MB RTK computation time.
- When falling back to standard GNSS operation, the MB rover will automatically adjust the accuracy and status flag information contained in the messages listed in the [RTCM3 Output](#page-459-0) section.
- Upon recovering the RTCM correction stream, the MB rover will automatically try to revert to MB RTK operation.

## <span id="page-112-1"></span>**28 Automotive Dead Reckoning (ADR)**

This feature is only available with the [ADR](#page-112-1) products.

## <span id="page-112-2"></span>**28.1 Introduction**

u-blox solutions for Automotive Dead Reckoning (ADR) allow high-accuracy positioning in places with poor or no GNSS coverage. ADR is based on Sensor Fusion Dead Reckoning (SFDR) technology, which combines GNSS measurements with those from external sensors.

ADR solutions use the messages of the [External Sensor Fusion \(ESF\) class.](#page-291-0)

## <span id="page-112-3"></span>**28.2 Solution Types**

## <span id="page-112-4"></span>**28.2.1 GAWT: Gyroscope, Accelerometer and Wheel Tick Solution**

The GAWT solution combines data from wheel-tick sensors, accelerometers and gyroscopes to compute a fused navigation solution. There are several different possible GAWT variants, depending on which sensors are available. The minimum set of sensors required for computing GAWT solutions is:

- A speed/distance sensor providing a single wheel tick (sometimes called a speed tick) or speed measurement;
- A z-axis gyroscope measuring the vehicle yaw rate;



• An x-axis accelerometer measuring the vehicle forward-backward acceleration.

The solution may be further improved by using the following additional sensors:

- A 3-axis accelerometer can improve the height estimation accuracy;
- If the z-axis gyroscope is not aligned to the vehicle vertical axis then a 3-axis gyroscope with IMU-mount misalignment configuration ([UBX-CFG-ESFALG](#page-213-1)) will allow the receiver to re-create the output of a correctly aligned z-axis gyroscope. This will result in improved planimetric accuracy compared to a single mis-aligned z-axis gyroscope.
- A temperature sensor can be used to compensate for temperature-dependent gyroscope errors. Depending on the sensor specification and temperature variation, this can significantly improve performance during periods of dead reckoning (see [Gyroscope Configuration](#page-138-0) section for more details).

To operate ADR products in GAWT mode, the following tasks need to be completed:

- **Sensor configuration** (only for chipset products): the [Wheel-Tick/Speed Sensor](#page-118-0), the [Gyroscope](#page-138-0) and the [Accelerometers](#page-137-1) settings must be set up, and the [Sensor Time Tagging](#page-140-4) must be properly configured. If the sensors data are properly fed to the receiver and configuration is successful, the sensors should appear in the [UBX-ESF-STATUS](#page-296-1) message.
- In ADR module products (NEO-M8L), the receiver is ready to operate in ADR (GAWT) navigation mode (this note is only valid in [protocol versions 15.01+](#page-15-2)).
- **Installation configuration**: the [IMU-mount Misalignment](#page-133-4) should be accurately configured for the receiver to achieve fusion solution.

Once these steps are completed, the firmware is ready to be operated in ADR GAWT navigation mode.

## <span id="page-113-0"></span>**28.3 Installation Configuration**

If the GNSS antenna is placed at a significant distance from the receiver, position offsets can be introduced which might affect the accuracy of the navigation solution. In order to compensate for the position offset advanced configurations can be applied. Contact u-blox support for more information on advanced configurations.

## <span id="page-113-1"></span>**28.3.1 IMU-mount Alignment**

(This feature is not supported in [protocol versions less than 15.01\)](#page-15-2).

The default assumption is that the IMU-frame and the installation-frame have the same orientation (i.e. all axes are parallel). If this assumption is not valid, the positioning solution can be degraded if the IMU-mount misalignment angles are small (typically few degrees) or can even fail in case of large (tens of degrees) IMU-mount misalignments. Therefore, it is important to correctly configure the IMU-mount misalignment settings by using the [UBX-CFG-ESFALG](#page-213-1) configuration message.

This section describes how IMU-mount misalignment angles, i.e. the angles which rotate the installation-frame to the IMU-frame, can be configured using the [UBX-CFG-ESFALG](#page-213-1) configuration message (see [User-defined Configuration](#page-134-0) section below).

If the IMU-mount misalignment angles are unknown, they can be estimated during a dedicated initialization drive through an automatic alignment procedure. This is described in the [Automatic](#page-137-2) [IMU-Mount Alignment](#page-137-2) section below.

In u-blox module products containing an internal IMU (e.g. NEO-M8U modules), the IMU-



mount misalignment angles are estimated automatically by default (see [Automatic](#page-137-2) [IMU-Mount Alignment](#page-137-2) section below for further details).

## **28.3.1.1 Definitions**

The IMU-mount misalignment angles are defined as follows:

- The transformation from the installation-frame to the IMU-frame is described by three Euler angles about the installation-frame axes denoted as IMU-mount roll, IMU-mount pitch and IMUmount yaw angles. All three angles are referred as the IMU-mount misalignment angles.
- There is a single IMU-mount misalignment configuration that applies to both gyroscopes and accelerometers, so these sensors must be aligned with each other if both types are present.

## **28.3.1.2 User-defined IMU-mount Alignment**

The user can configure manually some IMU-mount roll, pitch and yaw angles using the [UBX-CFG-](#page-213-1)[ESFALG](#page-213-1) configuration message. The values that should be set in the configuration message are the Euler angles required to rotate the installation-frame to the IMU-frame. The IMU-mount yaw rotation should be performed first, then the IMU-mount pitch and finally the IMU-mount roll. At each stage, the rotation is around the appropriate axis of the transformed installation-frame, meaning that the order of the rotation sequence is important (see figure below).



If there is only a single IMU-mount misalignment angle then it may be measured as shown in the three examples below.





In order to prevent significant degradation of the positioning solution the IMU-mount misalignment angles should be configured with an accuracy of at least 5 degrees.

The list below describes in details how the fields in the [UBX-CFG-ESFALG](#page-213-1) message must be interpreted with respect to example illustrated in the figure above:

- **User-defined IMU-mount yaw angle**: The IMU-mount yaw angle (yaw) corresponds to the rotation around the installation-frame z-axis (vertical) required for aligning the installationframe to the IMU-frame (yaw = 344.0 deg if the IMU-mount misalignment is composed of a single rotation around the installation-frame z-axis, i.e. with no IMU-mount roll and IMU-mount pitch rotation).
- **User-defined IMU-mount pitch angle**: The IMU-mount pitch angle (pitch) corresponds to the rotation around the installation-frame y-axis required for aligning the installation-frame to the IMU-frame (pitch = 26.5 deg if the IMU-mount alignment is composed of a single rotation around the installation-frame y-axis, i.e. with no IMU-mount roll and IMU-mount yaw rotation).
- **User-defined IMU-mount roll angle**: The IMU-mount roll angle (roll) corresponds to the rotation around the installation-frame x-axis required for aligning the installation-frame to the IMU-frame (roll = -23.5 deg if the IMU-mount misalignment is composed of a single rotation around installation-frame x-axis, i.e. with no IMU-mount pitch and IMU-mount yaw rotation).



If automatic alignment is turned-on (see [Automatic IMU-mount Alignment](#page-137-2) section), the angles obtained by polling [UBX-CFG-ESFALG](#page-213-1) are still the user-defined angles which do not correspond to the result of the automatic IMU-mount alignment engine as output in [UBX-ESF-ALG](#page-291-0) (see [IMU-mount Misalignment Angles Output](#page-145-1) section for more details).

## **28.3.1.3 Automatic IMU-mount Alignment**

The automatic IMU-mount alignment engine estimates automatically the IMU-mount roll, pitch and yaw angles. It requires an initialization phase during which no INS/GNSS fusion can be achieved (see [Filter Modes](#page-141-0) section for further details). The progress of the automatic alignment initialization can be monitored with the [UBX-ESF-STATUS](#page-296-1) message, and/or with the [UBX-ESF-ALG](#page-291-0) message providing more details. When the vehicle is subject to sufficient dynamics (i.e. left and right turns during a normal drive), the automatic IMU-mount alignment engine will estimate the IMU-mount misalignment angles which have the same meaning as defined in the [Definitions](#page-134-1) section, regardless whether the user did or not enter manually some IMU-mount misalignment angles (see [User-defined Configuration](#page-134-0) section). Once the automatic IMU-mount alignment engine has sufficient confidence in the estimated initial IMU-mount misalignment angles, the IMU-mount misalignment angles initialization phase is completed. The raw accelerometer and gyroscope data (i.e. the IMU observations) are then compensated for IMU-mount misalignment and sensor fusion can be done. The resulting IMU-mount misalignment angles are output in the [UBX-ESF-ALG](#page-291-0) message.

For automatic IMU-mount alignemnt a 3-axis gyroscope and 3-axis accelerometer is required (only valid in [protocol versions 19.2+](#page-15-2)).

## **28.3.1.3.1 Enabling/Disabling Automatic IMU-mount Alignment**

The user can activate/deactivate the automatic IMU-mount alignment by setting the doAutoMntAlg bit in the [UBX-CFG-ESFALG](#page-213-1) configuration message.

If automatic IMU-mount alignment is deactivated while aligning, the estimated misalignment angles that were available at deactivation time are used (only if they were initialized, see next section). If automatic IMU-mount alignment is re-activated, alignment is pursued by starting from the state where deactivation happened (only valid in [protocol versions 19+](#page-15-2)).

## **28.3.1.4 Limitation with Single-Axis Gyroscope**

Gyroscope-mount misalignment is only supported when a three-axis gyroscope is available. In case of a single-axis gyroscope, the sensor should be physically aligned along the installationframe z-axis. This is needed to avoid a scale factor error which will affect the accuracy of the output due to the two missing gyroscopes.

## <span id="page-116-0"></span>**28.4 Sensor Configuration**

This section describes the external sensor configuration parameters.

## <span id="page-116-1"></span>**28.4.1 Accelerometer Configuration**

The accelerometer sensor senses specific forces, expressed in meters per seconds squared, along its input axis. In the full configuration, an IMU contains a three-axis accelerometer whose sensitive axes are assumed to be mutually orthogonal in a Cartesian frame.



## **28.4.1.1 Messages**

The accelerometer sensor can be configured in the following messages (only supported in [protocol](#page-15-2) [versions 15.01+\)](#page-15-2):

## **Configuration Messages for ADR Products**

| Product Type | Message      | Solution Type                   |  |
|--------------|--------------|---------------------------------|--|
| Chipset      | UBX-CFG-ESFA | UDR( only supported in protocol |  |
|              |              | versions 19.2+)                 |  |

## <span id="page-117-0"></span>**28.4.2 Gyroscope Configuration**

The gyroscope sensor senses angular rates, expressed in radians per seconds or degrees per second, along its input axis. In the full configuration, an IMU contains a three-axis gyroscope whose sensitive axes are assumed to be mutually orthogonal in a Cartesian frame.

## **28.4.2.1 Messages**

The gyroscope sensor can be configured in the following messages (only supported in [protocol](#page-15-2) [versions 15.01+\)](#page-15-2):

## **Configuration Messages for ADR Products**

| Product Type | Message      | Solution Type                   |  |
|--------------|--------------|---------------------------------|--|
| Chipset      | UBX-CFG-ESFG | UDR( only supported in protocol |  |
|              |              | versions 19.2+)                 |  |

### **28.4.2.2 Temperature Compensation**

Gyroscope sensors generally exhibit a temperature-dependent bias that varies from unit to unit. To help compensate for this variation the receiver builds up a table of gyroscope bias versus temperature measurements which are often available from the gyroscope sensor itself. This is particularly valuable to dead-reckoning-only navigation after the vehicle has been left for some time in parking garage.

The gyroscope temperature compensation engine has the following settings:

- **Gyroscope RMS threshold above which temperature table is not updated**: The gyroscope temperature-dependent bias is only updated if the measured gyroscope angular rate RMS is below the given threshold. This avoids artificially high estimates of the gyroscope temperaturedependent bias from transient events such as vehicle engine starts or nearby heavy construction. This threshold can be configured in the gyroRmsThdl field and is shared with the sensor accuracy estimation engine (see above);
- **Temperature-dependent bias table saving rate**: Gyroscope temperature compensation data are saved to non-volatile storage at intervals that can be configured by the tcTableSaveRate field.

The gyroscope temperature-dependent bias table is revised under the following conditions:

- The vehicle is stationary (without wheel-tick measurements or at zero speed);
- The RMS of the measured gyroscope angular rates and accelerometer specific forces is below a given threshold (see above);
- Turntable mode is not engaged (only for ADR products, see [Ferry and Turntable Modes](#page-14-0) section);
- Gyroscope temperature compensation is effective if the gyroscope(s) exhibits repeatable characteristics with temperature and is not unduly affected by external



factors (such as supply voltage or mechanical stress).

## <span id="page-118-0"></span>**28.4.3 Wheel-Tick/Speed Sensor Configuration**

## **28.4.3.1 Messages**

The wheel-tick sensor can be configured in the following messages:

## **Configuration Messages for ADR Products**

| Product Type          | Message       | Solution Type |
|-----------------------|---------------|---------------|
| Module (e.g. NEO-M8L) | UBX-CFG-ESFWT | GAWT          |

## **28.4.3.2 Sensor Types**

u-blox products support sensors delivering the following types of data:

- **Relative wheel-tick data**: If the wheel-tick sensor delivers relative wheel-tick counts (i.e. wheeltick count since the previous measurement), the wtCountMax value must be set to 0.
- **Absolute wheel-tick data**: If the wheel-tick sensor delivers absolute wheel-tick counts (i.e. wheel-tick count since startup at time tag 0) that always increase, regardless of driving forward or backward (driving direction is indicated separately, see the [ESF Measurement Data](#page-149-0) section), the wtCountMax value must be set to any non-zero value.
- By default, the maximum absolute wheel-tick counter value is automatically estimated by the receiver for a maximum counter value that can be represented as a 2^N value. Other maximum counter values must be manually configured. For example, a wtCountMax=1024 roll-over value would be automatically estimated, but a wtCountMax=1 000 must be configured. The maximum counter value is configured by setting the autoWtCountMaxOff bit and setting the wtCountMax value to the upper threshold of the absolute wheel-tick sensor count before starting again from zero (roll-over). (This note is only valid in [protocol versions 19+](#page-15-2)).
- If absolute wheel-tick data are used, the upper threshold towards which the absolute wheel-tick sensor counts ticks before starting again from zero (roll-over) must be configured in the wtCountMax field (This note is only valid in [protocol versions less than](#page-15-2) [19](#page-15-2)).
- **Speed data**: The sensor delivers speed data in meters per second (data type 11 in [ESF-MEAS](#page-149-0)). Data coming from this sensor type can only be delivered to the receiver via serial port (software interface).
- If speed data but no absolute or relative wheel-tick data are detected, the receiver automatically uses the speed data without the need of reconfiguring the useWtSpeed bit. This behaviour can be deactivated by setting the autoUseWtSpeedOff bit and by manually setting or clearing the useWtSpeed bit. If wheel-tick data (or both wheel-tick and speed data) are detected on the software interface, the receiver uses the data type (by default wheel-tick data) corresponding to the configured useWtSpeed bit value (This note is only valid in [protocol versions 19+](#page-15-2)).
- To make the receiver interpret incoming speed data (data type 11 in [ESF-MEAS](#page-149-0)) instead of the single wheel-tick data (data type 10 in [ESF-MEAS](#page-149-0)) on the software interface, the useWtSpeed bit must be set (This note is only valid in [protocol versions less than 19](#page-15-2)).
- It is strongly recommended to use absolute wheel-tick sensors in order to ensure robust measurement processing even after sensor failures or outages.



## **28.4.3.3 Interface**

Wheel-tick/speed data can be delivered to u-blox products via the following interfaces:

- **Hardware interface**: Some u-blox products (e.g. NEO-M8L modules) have a pin dedicated to analog wheel-tick signal input and a pin dedicated to the wheel-tick direction signal. The receiver checks for analog wheel-tick signal input and will use it if the pin is correctly connected, the useWtPin flag is set (this is the default configuration for products having a pin dedicated to analog wheel-tick signal input), and the analog direction pin polarity is configured.
- The analog direction signal polarity is automatically detected by the receiver. To manually configure the polarity, automatic detection must be turned-off by setting the autoDirPinPolOff bit and the polarity must be defined in the dirPinPol field (This note is only valid in [protocol versions 19+](#page-15-2)).
- The analog direction signal polarity must be configured in the dirPinPol field (This note is only valid in [protocol versions less than 19](#page-15-2)).

Double edge counting can be enabled via the cntBothEdges flag. It can increase performance with low resolution wheel ticks. It does not fit all kinds of wheel tick signals. It **must not** be used with signals that are not generated with approximately 50% duty signal as it would worsen performance.

- **Software interface**: The sensor data are delivered to the receiver on the serial port (software interface) in the form of [UBX-ESF-MEAS](#page-294-1) messages. Serial port can be configured for UART using the [UBX-CFG-PRT](#page-257-1) message. For products with a hardware interface for analog wheel-tick signal input (e.g. NEO-M8L modules), the useWtPin bit must not be set if sensor data delivered via serial port should be used (only in [protocol versions less than 19](#page-15-2)).
- By default, the receiver automatically switches-off the hardware interface (i.e. ignores the useWtPin flag) if wheel-tick/speed data are detected on the software interface. Therefore data coming from the software interface will be prioritized over data coming from the hardware interface. To disable the automatic use of data detected on the software interface, the autoSoftwareWtOff bit must be set (This note is only valid in [protocol versions 19+](#page-15-2)).

## **28.4.3.4 Settings**

The following sensor settings can be configured:

- **Sampling Frequency**: The wheel-tick/speed data sampling frequency (wtFrequency) should be provided with an accuracy of about 10%. If not provided, it is automatically determined during initialization phase: this requires a consistent data rate and can take several minutes. Once initialized, the sampling frequency will be stored in non-volatile storage. For optimal navigation performance, the standard wheel-tick/speed input at 10 [Hz] is recommended.
- **Accuracy**: The wheel-tick/speed data accuracy (wtAccuracy) is defined as the standard deviation under normal operating conditions. Wheel-tick/speed data are corrupted by noise from sources inherent to the sensor. The accuracy is automatically determined and will then be stored in non-volatile storage.
- **Latency**: For best positioning performance, the latency of the wheel-tick/speed data (wtLatenc y) should be given as accurately as possible (to within at least 10 ms). If not provided, the wheeltick/speed data latency is assumed zero. More details about latency can be found in the [Sensor](#page-140-4) [Time Tagging](#page-140-4) section.
- **Quantization error**: If absolute/relative wheel-tick data are used and the tick data do not contain



raw tick counts (e.g. if the tick data is a distance), the quantization error can be defined in the wtQuantError or quantError fields. The quantization error can be calculated as 2\*Pi\*R / T with R the wheel radius, T the number of ticks per wheel rotation. If the quantization error is not provided, it is automatically initialized by the receiver.

- **Sensor dead band**: Some wheel-tick or speed sensors have a dead band which is the value below which no speed is reported. If this is the case, the value needs to be configured in the speedDeadBand field. However, the performance will still be degraded compared to having no dead band. If not provided, the receiver assumes the sensor has no dead band.
- **Speed data accuracy**: If speed data are used, the speed data accuracy can be set in the wtQuantError or quantError field. If not provided, the speed data accuracy is automatically initialized by the receiver.
- **Scale factors**: If the coarse scale factors are not configured by the user (wtFactor, factorR, factorF), they are estimated automatically during initialization (see [Initialization Mode](#page-141-1) section for more details).
- **Combination of multiple rear wheel-ticks**: The receiver can be configured to use the combined rear wheel-ticks rather than the single-tick. It is recommended to use combined rear wheel-ticks if available, as they are often of higher quality than the single-ticks. If DWT, GWT and GAWT solutions are configured concurrently, combineTicks must be set to provide a consistent configuration. If combineTicks is set, the wheel-ticks basis settings (maximum value of the wheel-ticks counter, wheel-ticks sensor frequency, scale factors and quantization error) must reflect the properties of the rear wheel-ticks.

## <span id="page-120-0"></span>**28.4.4 Sensor Time Tagging**

In order to achieve optimal performance with the fusion solution it is essential to determine the epoch in the receiver time frame when the external sensor measurements were generated. This may be done in one of the following ways:

- First Byte Reception: reception time of first byte of [UBX-ESF-MEAS](#page-294-1) message
- Time Mark on External Input: reception time of time mark signal sent to external input

The latency of the sensor data is the time between when the sensor measurement was taken and the detection at the receiver of either the first byte of the [UBX-ESF-MEAS](#page-294-1) message or the preprocessor's time mark, depending on the timing approach chosen. Increased latency reduces the navigation performance.

In ADR, the latency can be set by using the latency, wtLatency, gyroLatency and accelLatency parameters in the appropriate configuration message, as discussed in the [Automotive Dead](#page-112-1) [Reckoning \(ADR\)](#page-112-1) chapter.

In UDR, the latency can be set by using the latency parameter in the appropriate sensor configuration message, as discussed in the [Untethered Dead Reckoning \(UDR\)](#page-133-1) chapter.

## **28.4.4.1 First Byte Reception**

The easiest way to determine the sensor measurement generation time is to have the GNSS receiver assume the time of reception of the first byte of the [UBX-ESF-MEAS](#page-294-1) message (minus a constant configured latency) to be the time of sensor measurement. This approach is the simplest to implement, but [Time Mark on External Input](#page-139-1) can yield better latency control and compensation.





## **28.4.4.2 Time Mark on External Input**

In this case, the preprocessor unit generating the measurements sends a signal to the EXTINT input of the GNSS receiver, marking the moment of measurement generation. The subsequent [UBX-ESF-MEAS](#page-294-1) message is then flagged accordingly, and the measurements in the message will be assumed to have been generated at the time of external signal reception (minus a constant configured latency). This approach is the preferred solution, but it can be difficult to realize an exact analog time signal for the preprocessor unit.



## **28.4.4.3 Sensor Time Tagging Configuration**

The receiver requires external sensor packets time tagged in seconds.

The external sensor time tagging for WT can be configured in the [UBX-CFG-ESFWT](#page-215-2) (not supported in [protocol versions less than 15.01](#page-15-2)).

The following sensor time tagging settings need to be specified:

- **Sensor time tag scale factor to seconds:** (timeTagFactor): This parameters converts the sensor time tags from their original time unit into the required seconds. For example if the IMU raw packets are time-tagged in milliseconds, the scale factor for converting one millisecond into one seconds is 0.001.
- **Sensor time tag maximum value:** (timeTagMax): External sensor time tags are encoded in different data types (signed/unsigned, varying number of bytes) which might vary across sensor types. For example if the IMU raw packet's time-tag field is encoded into an unsigned long integer (4 bytes), the maximum possible time-tag value is 4294967295 (0xFFFFFFFFin hexadecimal).



## <span id="page-122-0"></span>**28.5 ADR System Configuration**

## <span id="page-122-1"></span>**28.5.1 Enabling/Disabling Fusion Filter**

The ADR fusion filter can be turned off by means of the useAdr bit in the [UBX-CFG-NAVX5](#page-233-1) configuration message. If fusion is turned off, the receiver outputs a GNSS-only solution.

## <span id="page-122-2"></span>**28.5.2 Recommended Configuration**

For an optimum ADR navigation performance, the recommended general configuration is the following:

• **Navigation Rate**: the standard navigation solution update rate of 1 Hz (see [UBX-CFG-RATE](#page-268-1) message) is recommended. The wheel tick quantization error is a limiting factor when using high frequency updates. This means that navigation rates higher than 1 Hz may result in lower position accuracies.

Reconsider the enabled messages and features (e.g logging) at higher navigation rates to meet CPU load, memory and interface bandwidth constraints (Valid in [protocol](#page-15-2) [versions 19.2](#page-15-2)).

## <span id="page-122-3"></span>**28.6 Operation**

This section describes how the ADR receiver operates.

## <span id="page-122-4"></span>**28.6.1 Fusion Filter Modes**

The fusion filter operates in different modes which are output in the [UBX-ESF-STATUS](#page-296-1) message.

The table below summarizes the different fusion filter modes with the associated tasks the receiver is doing.

| Mode             | Performed Tasks / Possible Causes                              | Published Fix |  |
|------------------|----------------------------------------------------------------|---------------|--|
|                  |                                                                | Type          |  |
| Initialization   | Initialization of IMU                                          | 3D-Fix        |  |
|                  | Initialization of IMU-mount alignment                          | (GNSS)        |  |
|                  | Initialization of INS (position, velocity, attitude)           |               |  |
|                  | Initialization of wheel-tick sensor (ADR only)                 |               |  |
|                  | IMU sensor error (e.g. missing data) detected (only supported  |               |  |
|                  | in protocol versions 19.2+)                                    |               |  |
| Fusion           | Fine-calibration of IMU-mount misalignment angles (not         | GNSS/DR Fix   |  |
|                  | supported in protocol versions less than 19)                   |               |  |
|                  | Fine-calibration of IMU sensors                                |               |  |
|                  | Fine-calibrating of wheel-tick factors (ADR only)              |               |  |
|                  | UDR mode under ADR / WT sensor error (e.g. missing data)       |               |  |
|                  | detected (ADR only)(only supported in protocol versions 19.2+) |               |  |
| Suspended Fusion | Sensor error (e.g. missing data) detected (only supported in   | 3D-Fix        |  |
|                  | protocol versions less than 19.2)                              | (GNSS)        |  |
|                  | Ferry detected (ADR only)                                      |               |  |
| Disabled Fusion  | Fatal fusion filter error occurred                             | 3D-Fix        |  |
|                  | Fusion filter turned-off by user                               | (GNSS)        |  |

More details about each fusion mode are given in the following sections.



## **28.6.1.1 Initialization Mode**

The purpose of the initialization phase is to estimate all unknown parameters which are required for achieving fusion. The initialization phase is triggered after a receiver cold start or a filter reset in case of fusion failure. The receiver is in initialization mode if the fusionMode field in the [UBX-](#page-296-1)[ESF-STATUS](#page-296-1) message is 0:INITIALIZING. In this case the required sensor calibration status (cal ibStatus) is flagged as 0: NOT CALIBRATED and the navigation solution output during initialization is based on GNSS solely.

The initialization phase comprises the following internal steps whose status is published in the initStatus field of the [UBX-ESF-STATUS](#page-296-1) message:

- **IMU initialization:** Unknown crucial IMU parameters such as sensor sampling frequency are estimated during initialization. As long as all required IMU parameters are not initialized, the status of the IMU initialization (imuInitStatus) is flagged as 1:INITIALIZING in the [UBX-ESF-](#page-296-1)[STATUS](#page-296-1) message. Moreover, the required sensor calibration statuses (calibStatus) are flagged as 0:NOT CALIBRATED in the [UBX-ESF-STATUS](#page-296-1) message. Note that if the user configured all required sensor settings, this step is skipped and IMU initialization is flagged as 2: INITIALIZED (not supported in [protocol versions less than 19](#page-15-2)).
- **IMU-mount alignment initialization:** If automatic IMU-mount alignment is enabled (see the [Automatic IMU-mount Alignment Configuration](#page-137-2) section), initial IMU-mount roll, IMU-mount pitch and IMU-mount yaw angles need to be estimated. For that, good GNSS signal reception as well as sufficient vehicle dynamics (i.e. a series of left and right turns during a normal drive) need to be at hand. As long as the IMU-mount alignment is not initialized, the status of the IMUmount alignment (mntAlgStatus) is flagged as 1:INITIALIZING in the [UBX-ESF-STATUS](#page-296-1) message. Once initialized, the IMU-mount alignment status is flagged as 2:INITIALIZED. If no IMU-mount alignment is required, the IMU-mount alignment is flagged as 0:OFF. A detailed description of the automatic IMU-mount alignment operation can be found in the [Automatic](#page-145-0) [IMU-mount Alignment Operation](#page-145-0) section (not supported in [protocol versions less than 15.01](#page-15-2)).
- **INS initialization:** Before entering fusion mode, the initial vehicle position, velocity and especially attitude (vehicle roll, pitch heading angles) needs to be known with sufficient accuracy. This is achieved during INS initialization phase (which comprises an INS coarse alignment step) using GNSS. As long as the fusion filter isn't initialized, the status of the INS initialization (insInitSt atus) is flagged as 1:INITIALIZING in the [UBX-ESF-STATUS](#page-296-1) message. Once initialized, the INS initialization is flagged as 2:INITIALIZED (not supported in [protocol versions less than 15.01](#page-15-2)).

This section is valid only for [protocol versions less than 19.2](#page-15-2)

• **Wheel-tick sensor initialization (ADR products only):** Before entering fusion mode, some parameters like initial wheel-tick factors need to be estimated with sufficient accuracy. This is achieved during wheel-tick sensor initialization phase using GNSS. As long as the wheel-tick parameters are not initialized, the status of the wheel-tick initialization (wtInitStatus) is flagged as 1:INITIALIZING in the [UBX-ESF-STATUS](#page-296-1) message. Once initialized, the wheel-tick sensor initialization is flagged as 2:INITIALIZED and the parameters are stored in non-volatile storage. If no wheel-tick data are required (in UDR products), the wheel-tick initialization is flagged as 0:OFF (only valid in [protocol versions less than 19.2](#page-15-2)).

This section is valid only for [protocol versions 19.2+](#page-15-2)

• **Wheel-tick sensor initialization (ADR products only):** Solution enters fusion mode (fusionMode field in the [UBX-ESF-STATUS](#page-296-1) message is on 1:FUSION), even when wheel-tick is not yet initialized, following a [UDR](#page-133-1) mode approach. WT sensor parameters, like initial wheel-tick



factors, are estimated in parallel and are used once estimated with sufficient accuracy. As long as the wheel-tick parameters are not initialized, the status of the wheel-tick initialization (wtIni tStatus) is flagged as 1:INITIALIZING in the [UBX-ESF-STATUS](#page-296-1) message. Once initialized, the wheel-tick sensor initialization is flagged as 2:INITIALIZED, WT data are used by the filter and the parameters are stored in non-volatile storage. If no wheel-tick data are required (in UDR products), the wheel-tick initialization is flagged as 0:OFF (only valid in [protocol versions 19.2+](#page-15-2)).

- Beside the wheel-tick factors, other parameters like direction pin polarity are initialized if requested.
- **Sensor error (e.g. missing data) detected:** Sensor timeout of more than 500ms will trigger an INS re-initialization (not supported in [protocol versions less than 19.2\)](#page-15-2).

Note that initialization phase requires good GNSS signal conditions as well as periods during which vehicle is stationary and moving (including turns). Once all required initialization steps are achieved, fusion mode is triggered and the calibration phase begins.

## **28.6.1.2 Fusion Mode**

Once initialization phase is achieved, the receiver enters navigation mode. The receiver is in fusion mode if the fusionMode field in the [UBX-ESF-STATUS](#page-296-1) message is set on 1:FUSION. The fusion filter then starts to compute combined GNSS/dead-reckoning fixes (fused solutions) and to calibrate the sensors required for computing the fused navigation solution (used bit set). This is the case when the sensor calibration status (calibStatus) is flagged as 1:CALIBRATING. As soon as the calibration reaches a status where optimal fusion performance can be expected, the sensor calibration status is flagged as 2/3:CALIBRATED.

## **28.6.1.3 Suspended Fusion Mode**

Sensor fusion can be temporarily suspended in cases where no fused solution should/can be computed. The receiver is in the temporarily disabled fusion mode if the fusionMode field in the [UBX-ESF-STATUS](#page-296-1) message is set on 2:SUSPENDED. In this case, the receiver computes a GNSSonly solution.

Fusion is suspended if:

- One or several sensors deliver erroneous data or no data at all, the fusion is suspended during the sensor failure period. The receiver automatically recovers once the affected sensor(s) is/are back to normal operation (only supported in [protocol versions less than 19.2\)](#page-15-2).
- The vehicle is detected to be on a ferry where wheel-ticks do not detect any displacement (in ADR products only).

## **28.6.1.4 Disabled Fusion Mode**

Sensor fusion can be permanently switched off in cases where recurrent fusion failures happen or user turned off manually fusion. The receiver is in the permanently disabled fusion mode if the fusionMode field in the [UBX-ESF-STATUS](#page-296-1) message is set on 3:DISABLED. In such a case, the receiver computes a GNSS-only solution.

Fusion is permanently disabled in the following cases:

- If the fusion filter was manually turned off by the user (useAdr bit in the [UBX-CFG-NAVX5](#page-233-1) message is not set).
- If significantly wrong installation or filter parameters causing filter divergence are sent to the receiver.



• If the fusion filter encountered too many errors.

An IMU-mount alignment error is output in the error field in the [UBX-ESF-ALG](#page-291-0) message.

## <span id="page-125-0"></span>**28.6.2 Accelerated Initialization and Calibration Procedure**

This section describes how to perform fast initialization and calibration of the ADR receiver for the purpose of evaluation.

The duration of the initialization phase mostly depends on the quality of the GNSS signals and the dynamics encountered by the vehicle. Therefore the car should be driven to an open and flat area like an empty open-sky parking area for example. The initialization and calibration drive should contain phases where the car is stopped during a few minutes (with engine turned on), phases where the car is doing normal left and right turns and phases where speed is above 30 km/h under good GNSS reception conditions.

The initialization time required for reaching fused navigation mode can be shortened by following the procedure in the order described in the table below.

| Phase              | Procedure                              | Indicator of Success                      |
|--------------------|----------------------------------------|-------------------------------------------|
| IMU initialization | After receiver coldstart or first      | IMU initialization status (imuInitStat    |
|                    | receiver use, turn-on car engine and   | us) is flagged as 2:INITIALIZED in the    |
|                    | stay stationary under good GNSS        | UBX-ESF-STATUS message.                   |
|                    | signal reception conditions during at  |                                           |
|                    | least 3 minutes.                       |                                           |
|                    | This step can be skipped in DWT        |                                           |
|                    | navigation mode.                       |                                           |
| INS initialization | Once IMU is initialized, stay          | GNSS 3D fix achieved, good 3D position    |
| (position and      | stationary under good GNSS signal      | accuracy (at least 5 m), high number of   |
| velocity)          | reception conditions until a reliable  | used SVs (check UBX-NAV-PVT               |
|                    | GNSS fix could be achieved.            | message).                                 |
| IMU-mount          | Start driving with a minimum speed     | IMU-mount alignment status (mntAlgS       |
| alignment          | of 30 km/h and do a series of          | tatus) is flagged as 2:INITIALIZED in     |
| initialization     | approximately 10 left and right turns  | the UBX-ESF-STATUS message, the           |
|                    | (at least 90 degrees turns). Each      | IMU-mount alignment status (status)       |
|                    | turn should be completed as if the     | is flagged as 3:COARSE ALIGNED in the     |
|                    | vehicle would drive in a sharp         | UBX-ESF-ALG message.                      |
|                    | roundabout.                            |                                           |
|                    | This step can be skipped if            |                                           |
|                    | automatic IMU-mount alignment is       |                                           |
|                    | turned off.                            |                                           |
| Wheel-tick sensor  | Drive for at least 500 meters at a     | Wheel-tick sensor initialization status ( |
| initialization     | minimum speed of 20 km/h. To           | wtInitStatus) is flagged as 2:            |
|                    | shorten this calibration step, the car | INITIALIZED in the UBX-ESF-STATUS         |
|                    | should be driven at higher speed       | message.                                  |
|                    | (around 50 km/h) for at least 10       |                                           |
|                    | seconds under good GNSS visibility.    |                                           |
| INS initialization | Drive straight for at least 100        | INS initialization status (insInitStatu   |
| (attitude)         | meters at a minimum speed of 40        | s) is flagged as 2:INITIALIZED in the     |
|                    | km/h.                                  | UBX-ESF-STATUS message.                   |

## **Accelerated Initialization Procedure**



Once initialization is completed, the fusionMode field in the [UBX-ESF-STATUS](#page-296-1) message switches to 1:FUSION, combined GNSS/dead-reckoning fixes (fused solutions) are output and the sensors used in the navigation filter start to get calibrated. Calibration is a continuous process running in the background and directly impacting the navigation solution quality.

The calibration time required for reaching optimal ADR navigation performance can be shortened by following the procedure described in the table below.

| Phase           | Procedure                            | Indicator of Success                |  |
|-----------------|--------------------------------------|-------------------------------------|--|
| IMU-mount       | Keep driving with a minimum speed    | Once the IMU-mount alignment engine |  |
| alignment       | of 30 km/h and do a series of left   | has high confidence in its          |  |
| calibration     | and right turns (at least 90 degrees | misalignment angle estimates, the   |  |
|                 | with similar sharpness as when       | IMU-mount alignment status (status) |  |
|                 | driving in a sharp roundabout). At   | is flagged as 4:FINE ALIGNED in the |  |
|                 | each turn the estimated IMU-mount    | UBX-ESF-ALG message.                |  |
|                 | misalignment angles are refined and  |                                     |  |
|                 | their accuracy increased.            |                                     |  |
|                 | This step can be skipped if          |                                     |  |
|                 | automatic IMU-mount alignment is     |                                     |  |
|                 | turned-off.                          |                                     |  |
| IMU calibration | Drive curves and straight segments   | The calibration status of the used  |  |
| (gyroscope and  | during a few minutes by including a  | sensors (calibStatus) is flagged as |  |
| accelerometer)  | few stops lasting at least 30        | 2/3:CALIBRATED in the UBX-ESF       |  |
|                 | seconds each. This drive should also | STATUS message.                     |  |
|                 | include some periods with higher     |                                     |  |
|                 | speed (at least 50 km/h) and can     |                                     |  |
|                 | typically be carried out on normal   |                                     |  |
|                 | open-sky roads with good GNSS        |                                     |  |
|                 | signal reception conditions.         |                                     |  |

## **Accelerated Calibration Procedure**

Note that the calibration status (calibStatus in [UBX-ESF-STATUS](#page-296-1) message) of some used sensors might fall back to 1:CALIBRATING if the receiver is operated in challenging conditions. In such a case, fused navigation solution uncertainty increases until optimal conditions are observed again for re-calibrating the sensors.

The fused navigation performance quality might also depend on how well the gyroscope temperature compensation table is populated. The table gradually fills in while the vehicle is stationary and by observing gyroscope biases at different temperatures. Therefore the quality of the gyroscope temperature compensation depends on how many temperature bins could be observed while the vehicle was stationary and on the duration of observation for each bin.

## <span id="page-126-0"></span>**28.6.3 Automatic IMU-mount Alignment**

(This feature is not supported in [protocol versions less than 15.01\)](#page-15-2).

## **28.6.3.1 Alignment Solution Output**

The IMU-mount misalignment angles are output in the [UBX-ESF-ALG](#page-291-0) message. They have the following meaning:

• **IMU-mount yaw angle**: During IMU-mount yaw angle initialization (status field is equal to 2),



the published angle (yaw) corresponds to the current estimated value but is not yet applied for rotating the IMU observations. After initialization (status field is equal or higher than 3), the published angle corresponds to the estimated value and is applied for rotating the IMU observations. If automatic IMU-mount alignment is disabled, the published angle corresponds to the IMU-mount yaw angle configured by the user (see [User-defined Configuration](#page-134-0) section) and is applied for rotating the IMU observations.

- **IMU-mount pitch angle**: During IMU-mount pitch angle initialization (status field is equal to 1), the published angle (pitch) corresponds to the current estimated value but is not yet applied for rotating the IMU observations. After initialization (status field is equal or higher than 3), the published angle corresponds to the estimated value and is applied for rotating the IMU observations. If automatic IMU-mount alignment is disabled, the published angle corresponds to the IMU-mount pitch angle configured by the user (see [User-defined Configuration](#page-134-0) section) and is applied for rotating the IMU observations.
- **IMU-mount roll angle**: During IMU-mount roll angle initialization (status field is equal to 1), the published angle (roll) corresponds to the current estimated value but is not yet applied for rotating the IMU observations. After initialization (status field is equal or higher than 3), the published angle corresponds to the estimated value and is applied for rotating the IMU observations. If automatic IMU-mount alignment is disabled, the published angle corresponds to the IMU-mount roll angle configured by the user (see [User-defined Configuration](#page-134-0) section) and is applied for rotating the IMU observations.
- If user-defined IMU-mount misalignment angles were configured by the user using [UBX-](#page-213-1)[CFG-ESFALG](#page-213-1) (see [User-defined Configuration](#page-134-0) section) and automatic IMU-mount alignment is active, the angles output in the [UBX-ESF-ALG](#page-291-0) message still correspond to the definition given above: they represent the full rotation required for transforming IMU data from installation-frame to IMU-frame. This means that the output misalignment angles are computed from the composed rotation of the user-defined rotation and the internally-estimated rotation.

## **28.6.3.2 Alignment Progress**

The progress of the automatic IMU-mount alignment can be monitored by checking the status field in the [UBX-ESF-ALG](#page-291-0) message (see the [UBX-ESF-ALG](#page-291-0) message description for the meaning of the values output in the status field).

- **IMU-mount roll/pitch angle initialization ongoing**: The alignment engine is initializing the IMUmount roll and pitch angles (status is 1). Both angles can only be initialized if vehicle encounters left and right turns (as occurring during a normal drive).
- **IMU-mount yaw angle initialization ongoing**: The alignment engine is initializing the IMU-mount yaw angle (status is 2). IMU-mount yaw angle can only be initialized once IMU-mount roll and pitch angles are initialized and if vehicle encounters left and right turns (as occurring during a normal drive).
- **IMU-mount misalignment angles are initialized** (only supported in [protocol versions 15.01 to 17\)](#page-15-2): The alignment engine has sufficient confidence in all IMU-mount misalignment angles and validates their use for compensating the accelerometer and gyroscope data, i.e. fused navigation solutions can be computed (status is 3).
- **IMU-mount alignment coarse calibration ongoing** (only supported in [protocol versions 19+\)](#page-15-2): Once initialized (status is 3), the automatic IMU-mount alignment engine has sufficient confidence in all IMU-mount misalignment angles and validates their use for compensating the



accelerometer and gyroscope data (fused navigation solutions can be computed). The engine keeps filtering the IMU-mount misalignment angles every time the observed vehicle dynamics allows for it.

• **IMU-mount alignment fine calibration ongoing** (only supported in [protocol versions 19+](#page-15-2)): Once the IMU-mount misalignment angles are estimated with a good accuracy, the automatic IMUmount alignment engine becomes more conservative in updating the IMU-mount misalignment angles (status is 4).

## **28.6.3.3 Alignment Errors**

The following errors might be output in the error bitfield of the [UBX-ESF-ALG](#page-291-0) message:

- **IMU-mount misalignment angle error** (only supported in [protocol versions 15.01 to 17\)](#page-15-2): If the automatic IMU-mount alignment engine suspects wrong IMU-mount misalignment angles (either due to a wrong initialization or a change in the physical mounting of the device), the error bit 0 in the [UBX-ESF-ALG](#page-291-0) message is set.
- **IMU-mount roll/pitch angle error** (only supported in [protocol versions 19+](#page-15-2)): If the automatic IMU-mount alignment engine suspects wrong IMU-mount roll and/or IMU-mount pitch misalignment angles (either due to a wrong initialization or a change in the physical mounting of the device), the error bit 0 in the [UBX-ESF-ALG](#page-291-0) message is set.
- **IMU-mount yaw angle error** (only supported in [protocol versions 19+\)](#page-15-2): If the automatic IMUmount alignment engine suspects wrong IMU-mount yaw misalignment angle (either due to a wrong initialization or a change in the physical mounting of the device), the error bit 1 in the [UBX-ESF-ALG](#page-291-0) message is set.
- **Euler Angle singularity ('gimbal-lock') error** (only supported in [protocol versions 19+](#page-15-2)): The Euler angle singularity error bit 2 is set when the automatic IMU-mount alignment engine detects an installation where the IMU-frame is misaligned in such a way that a degree of freedom is lost when two IMU-mount misalignment (Euler) angles begin to describe the same rotations (or axes). This happens for example with an IMU-mount misalignment of +/- 90 degrees around the IMU-mount pitch axis, where IMU-mount roll and IMU-mount yaw cannot be distinguished from each other. In such a case, these IMU-mount misalignment angles start to heavily fluctuate with time due to the mathematical singularity occurring at these points, meaning that the IMUmount misalignment angles output in the [UBX-ESF-ALG](#page-291-0) are not stable in time. Note however that each individual set of IMU-mount misalignment angles output in such a case still describes the correct rotation. Moreover, the internal rotation applied for aligning the IMU readings doesn't suffer from this singularity issue and optimal fusion can still be achieved.

## <span id="page-128-0"></span>**28.6.4 Navigation Output**

## <span id="page-128-1"></span>**28.6.4.1 Local-level North-East-Down (NED) Frame**

The local-level frame is a geodetic frame with following features:

- The origin (O) is a point on the Earth surface;
- The x-axis points to North;
- the y-axis points to East;
- the z-axis completes the right-handed reference system by pointing down.

The frame is referred to as North-East-Down (NED) since its axes are aligned with the North, East and Down directions.



## <span id="page-129-0"></span>**28.6.4.2 Vehicle-Frame**

The vehicle-frame is a right-handed 3D Cartesian frame rigidly connected with the vehicle and is used to determine the attitude of the vehicle with respect to the local-level frame. It has the following features:

- The origin (O) is the [VRP](#page-14-0) in [protocol versions less than 19.2,](#page-15-2) otherwise, is the origin of the IMU instrumental frame;
- The x-axis points towards the front of the vehicle;
- the y-axis points towards the right of the vehicle;
- the z-axis completes the right-handed reference system by pointing down.

## **28.6.4.3 Vehicle Position and Velocity Output**

The position and velocity information is output in several messages like [UBX-NAV-PVT](#page-389-1) for example. In [protocol versions less than 19.2,](#page-15-2) position and velocity computed by the ADR navigation filter are referenced to the [VRP](#page-14-0). For [protocol versions 19.2+](#page-15-2), position and velocity are referenced to the origin of the IMU instrumental frame.

## <span id="page-129-1"></span>**28.6.4.4 Vehicle Attitude Output**

#### (Only supported in [protocol versions 19+\)](#page-15-2).

The transformation between the [vehicle-frame](#page-129-0) and the [local-level frame](#page-128-1) is described by three attitude angles about the local-level axes denoted as vehicle roll, vehicle pitch and vehicle heading. All three angles are referred as vehicle attitude and are illustrated in the figure below:





The order of the sequence of rotations around the navigation axes defining the vehicle attitude matrix in terms of vehicle attitude angles is illustrated below:



$$
\mathbf{C}_X = \begin{bmatrix} 1 & 0 & 0 \\ 0 & \cos(\phi) & \sin(\phi) \\ 0 & -\sin(\phi) & \cos(\phi) \end{bmatrix} \quad \mathbf{C}_Y = \begin{bmatrix} \cos(\theta) & 0 & -\sin(\theta) \\ 0 & 1 & 0 \\ \sin(\theta) & 0 & \cos(\theta) \end{bmatrix} \quad \mathbf{C}_Z = \begin{bmatrix} \cos(\psi) & \sin(\psi) & 0 \\ -\sin(\psi) & \cos(\psi) & 0 \\ 0 & 0 & 1 \end{bmatrix}
$$

$$
\mathbf{C}_{b}^{n} = \mathbf{C}_{Z}^{T} \cdot \mathbf{C}_{Y}^{T} \cdot \mathbf{C}_{X}^{T}
$$
\n
$$
= \begin{bmatrix}\n\cos(\theta) \cos(\psi) & \sin(\phi) \sin(\theta) \cos(\psi) - \cos(\phi) \sin(\psi) & \cos(\phi) \sin(\theta) \cos(\psi) + \sin(\phi) \sin(\psi) \\
\cos(\theta) \sin(\psi) & \sin(\phi) \sin(\theta) \sin(\psi) + \cos(\phi) \cos(\psi) & \cos(\phi) \sin(\theta) \sin(\psi) - \sin(\phi) \cos(\psi) \\
-\sin(\theta) & \sin(\phi) \cos(\theta) & \cos(\theta)\n\end{bmatrix}
$$

Note that in this figure the body-frame corresponds to the [vehicle-frame](#page-129-0).

The vehicle attitude is output in the [UBX-NAV-ATT](#page-372-1) message. The message provides all three angles together with their accuracy estimates.

Roll angle estimation only supported in [protocol versions 19.2+](#page-15-2).

## **28.6.4.5 Vehicle Dynamics Output**

## (Only supported in [protocol versions 19+\)](#page-15-2).

The [UBX-ESF-INS](#page-292-1) message outputs information about vehicle dynamics provided by the INS: compensated vehicle angular rates and compensated vehicle accelerations. The acceleration data is free of any gravitational acceleration. Its accuracy is directly dependent on the filter attitude estimation accuracy.

Compensated vehicle dynamics information is output with respect to the [vehicle-frame](#page-129-0).

The message outputs only dynamics information that is directly compensated by the fusion filter. This implies that depending on the solution type and the sensor availability, dynamics along some axes of the [vehicle-frame](#page-129-0) might not be available.

## <span id="page-131-0"></span>**28.6.5 Sensor Data Types**

The supported sensor data types are:

## **Definition of Data Types**

| Type | Description                       | Unit         | Format of the 24 data bits |
|------|-----------------------------------|--------------|----------------------------|
| 0    | none, data field contains no data |              |                            |
| 14   | reserved                          |              |                            |
| 5    | z-axis gyroscope angular rate     | deg/s *2^-12 | signed                     |



| Type | Description                         |                  | Unit Format of the 24 data bits |
|------|-------------------------------------|------------------|---------------------------------|
| 6    | front-left wheel ticks              |                  | Bits 0-22: unsigned             |
|      |                                     |                  | tick value. Bit 23:             |
|      |                                     |                  | direction indicator             |
|      |                                     |                  | (0=forward,                     |
|      |                                     |                  | 1=backward)                     |
| 7    | front-right wheel ticks             |                  | Bits 0-22: unsigned             |
|      |                                     |                  | tick value. Bit 23:             |
|      |                                     |                  | direction indicator             |
|      |                                     |                  | (0=forward,                     |
|      |                                     |                  | 1=backward)                     |
| 8    | rear-left wheel ticks               |                  | Bits 0-22: unsigned             |
|      |                                     |                  | tick value. Bit 23:             |
|      |                                     |                  | direction indicator             |
|      |                                     |                  | (0=forward,                     |
|      |                                     |                  | 1=backward)                     |
| 9    | rear-right wheel ticks              |                  | Bits 0-22: unsigned             |
|      |                                     |                  | tick value. Bit 23:             |
|      |                                     |                  | direction indicator             |
|      |                                     |                  | (0=forward,                     |
|      |                                     |                  | 1=backward)                     |
| 10   | single tick (speed tick)            |                  | Bits 0-22: unsigned             |
|      |                                     |                  | tick value. Bit 23:             |
|      |                                     |                  | direction indicator             |
|      |                                     |                  | (0=forward,                     |
|      |                                     |                  | 1=backward)                     |
| 11   | speed                               | m/s * 1e-3       | signed                          |
| 12   | gyroscope temperature               | deg Celsius * 1e | signed                          |
|      |                                     | 2                |                                 |
| 13   | y-axis gyroscope angular rate       | deg/s *2^-12     | signed                          |
| 14   | x-axis gyroscope angular rate       | deg/s *2^-12     | signed                          |
| 16   | x-axis accelerometer specific force | m/s^2 *2^-10     | signed                          |
| 17   | y-axis accelerometer specific force | m/s^2 *2^-10     | signed                          |
| 18   | z-axis accelerometer specific force | m/s^2 *2^-10     | signed                          |

#### <span id="page-132-0"></span>**28.6.6 Raw Sensor Data Output**

(This feature is not supported in [protocol versions less than 15.01\)](#page-15-2).

Some u-blox module products contain inertial sensors (IMU) that are directly connected to the GNSS and cannot be directly accessed from outside the module. The [UBX-ESF-RAW](#page-295-1) message can be used to access raw measurements of these sensors. A variable number of data fields may be used in a single message and these can contain different types of measurements. The type of each measurement is specified in the dataType field. The possible data types are x, y and z-axis measurements on gyroscope or accelerometer and gyroscope temperature measurements as described in the [ESF Measurement Data](#page-149-0) section. One [UBX-ESF-RAW](#page-295-1) message can contain multiple samples from the same sensor. The user can separate and order these using the time tags attached to each of the measurements.





The measurements are made at a fixed rate. The sampling rate or other sensor configuration options can not be changed.

To turn on this feature the [UBX-ESF-RAW](#page-295-1) message must be enabled using [UBX-CFG-MSG](#page-229-1). If nonzero rate is selected the message will be output but the selected rate does not otherwise have an influence at the rate of the messages.

Turning on this feature does not disable sensor fusion in the receiver. To use an external fusion algorithm consider disabling the automotive dead reckoning mode using [UBX-](#page-233-1)[CFG-NAVX5](#page-233-1).

## <span id="page-133-0"></span>**28.6.7 Receiver Startup and Shutdown**

Continuous dead reckoning is possible over receiver restarts if the following conditions are true:

- Non-volatile storage is available, or the [save-on-shutdown feature \(SOS\)](#page-25-2) is used
- The vehicle is not moved while the receiver is off

During periods of external sensor data unavailability the receiver switches to GNSS-only navigation if the last sensor information indicated the vehicle was moving.

## <span id="page-133-1"></span>**29 Untethered Dead Reckoning (UDR)**

This feature is only available with the [UDR](#page-133-1) products.

## <span id="page-133-2"></span>**29.1 Introduction**

u-blox solution for Untethered Dead Reckoning (UDR) allows improved navigation performance in places with GNSS-denied conditions as well as during short GNSS outages. UDR is based on Sensor Fusion Dead Reckoning (SFDR) technology, which integrates an Inertial Navigation System (INS) with GNSS measurements. The INS integrates angular rates and specific forces sensed by an Inertial Measurement Unit (IMU). The INS computes position, velocity and attitude changes and can, once initialized, provide accurate navigation information. However, an inertialonly navigation solution would degrade quickly with time due to the errors corrupting the IMU observations. The integration of the INS with GNSS measurements bounds these time-growing errors by calibrating the INS. The resulting integrated INS/GNSS filter, called fusion filter below, has the following advantages compared to standalone GNSS positioning:

- Improved navigation performance in GNSS-denied conditions: errors caused by multipath or weak signal conditions are mitigated though the aid brought by the IMU.
- Navigation solution during short GNSS-outages: the INS bridges short GNSS gaps which might be caused by tunnels or parking garages.

UDR solution uses the messages of the [External Sensor Fusion \(ESF\)](#page-291-0) class.

## <span id="page-133-3"></span>**29.2 Installation Configuration**

(The features in this section are not supported in [protocol versions less than 19](#page-15-2)).

## <span id="page-133-4"></span>**29.2.1 IMU-mount Alignment**

(This feature is not supported in [protocol versions less than 15.01\)](#page-15-2).

The default assumption is that the IMU-frame and the installation-frame have the same orientation (i.e. all axes are parallel). If this assumption is not valid, the positioning solution can be degraded if the IMU-mount misalignment angles are small (typically few degrees) or can even fail



in case of large (tens of degrees) IMU-mount misalignments. Therefore, it is important to correctly configure the IMU-mount misalignment settings by using the [UBX-CFG-ESFALG](#page-213-1) configuration message.

This section describes how IMU-mount misalignment angles, i.e. the angles which rotate the installation-frame to the IMU-frame, can be configured using the [UBX-CFG-ESFALG](#page-213-1) configuration message (see [User-defined Configuration](#page-134-0) section below).

If the IMU-mount misalignment angles are unknown, they can be estimated during a dedicated initialization drive through an automatic alignment procedure. This is described in the [Automatic](#page-137-2) [IMU-Mount Alignment](#page-137-2) section below.

In u-blox module products containing an internal IMU (e.g. NEO-M8U modules), the IMUmount misalignment angles are estimated automatically by default (see [Automatic](#page-137-2) [IMU-Mount Alignment](#page-137-2) section below for further details).

## <span id="page-134-1"></span>**29.2.1.1 Definitions**

The IMU-mount misalignment angles are defined as follows:

- The transformation from the installation-frame to the IMU-frame is described by three Euler angles about the installation-frame axes denoted as IMU-mount roll, IMU-mount pitch and IMUmount yaw angles. All three angles are referred as the IMU-mount misalignment angles.
- There is a single IMU-mount misalignment configuration that applies to both gyroscopes and accelerometers, so these sensors must be aligned with each other if both types are present.

## <span id="page-134-0"></span>**29.2.1.2 User-defined IMU-mount Alignment**

The user can configure manually some IMU-mount roll, pitch and yaw angles using the [UBX-CFG-](#page-213-1)[ESFALG](#page-213-1) configuration message. The values that should be set in the configuration message are the Euler angles required to rotate the installation-frame to the IMU-frame. The IMU-mount yaw rotation should be performed first, then the IMU-mount pitch and finally the IMU-mount roll. At each stage, the rotation is around the appropriate axis of the transformed installation-frame, meaning that the order of the rotation sequence is important (see figure below).





If there is only a single IMU-mount misalignment angle then it may be measured as shown in the three examples below.





In order to prevent significant degradation of the positioning solution the IMU-mount misalignment angles should be configured with an accuracy of at least 5 degrees.

The list below describes in details how the fields in the [UBX-CFG-ESFALG](#page-213-1) message must be interpreted with respect to example illustrated in the figure above:

- **User-defined IMU-mount yaw angle**: The IMU-mount yaw angle (yaw) corresponds to the rotation around the installation-frame z-axis (vertical) required for aligning the installationframe to the IMU-frame (yaw = 344.0 deg if the IMU-mount misalignment is composed of a single rotation around the installation-frame z-axis, i.e. with no IMU-mount roll and IMU-mount pitch rotation).
- **User-defined IMU-mount pitch angle**: The IMU-mount pitch angle (pitch) corresponds to the rotation around the installation-frame y-axis required for aligning the installation-frame to the IMU-frame (pitch = 26.5 deg if the IMU-mount alignment is composed of a single rotation around the installation-frame y-axis, i.e. with no IMU-mount roll and IMU-mount yaw rotation).
- **User-defined IMU-mount roll angle**: The IMU-mount roll angle (roll) corresponds to the rotation around the installation-frame x-axis required for aligning the installation-frame to the IMU-frame (roll = -23.5 deg if the IMU-mount misalignment is composed of a single rotation around installation-frame x-axis, i.e. with no IMU-mount pitch and IMU-mount yaw rotation).



If automatic alignment is turned-on (see [Automatic IMU-mount Alignment](#page-137-2) section), the angles obtained by polling [UBX-CFG-ESFALG](#page-213-1) are still the user-defined angles which do not correspond to the result of the automatic IMU-mount alignment engine as output in [UBX-ESF-ALG](#page-291-0) (see [IMU-mount Misalignment Angles Output](#page-145-1) section for more details).

## <span id="page-137-2"></span>**29.2.1.3 Automatic IMU-mount Alignment**

The automatic IMU-mount alignment engine estimates automatically the IMU-mount roll, pitch and yaw angles. It requires an initialization phase during which no INS/GNSS fusion can be achieved (see [Filter Modes](#page-141-0) section for further details). The progress of the automatic alignment initialization can be monitored with the [UBX-ESF-STATUS](#page-296-1) message, and/or with the [UBX-ESF-ALG](#page-291-0) message providing more details. When the vehicle is subject to sufficient dynamics (i.e. left and right turns during a normal drive), the automatic IMU-mount alignment engine will estimate the IMU-mount misalignment angles which have the same meaning as defined in the [Definitions](#page-134-1) section, regardless whether the user did or not enter manually some IMU-mount misalignment angles (see [User-defined Configuration](#page-134-0) section). Once the automatic IMU-mount alignment engine has sufficient confidence in the estimated initial IMU-mount misalignment angles, the IMU-mount misalignment angles initialization phase is completed. The raw accelerometer and gyroscope data (i.e. the IMU observations) are then compensated for IMU-mount misalignment and sensor fusion can be done. The resulting IMU-mount misalignment angles are output in the [UBX-ESF-ALG](#page-291-0) message.

For automatic IMU-mount alignemnt a 3-axis gyroscope and 3-axis accelerometer is required (only valid in [protocol versions 19.2+](#page-15-2)).

## **29.2.1.3.1 Enabling/Disabling Automatic IMU-mount Alignment**

The user can activate/deactivate the automatic IMU-mount alignment by setting the doAutoMntAlg bit in the [UBX-CFG-ESFALG](#page-213-1) configuration message.

If automatic IMU-mount alignment is deactivated while aligning, the estimated misalignment angles that were available at deactivation time are used (only if they were initialized, see next section). If automatic IMU-mount alignment is re-activated, alignment is pursued by starting from the state where deactivation happened (only valid in [protocol versions 19+](#page-15-2)).

## **29.2.1.4 Limitation with Single-Axis Gyroscope**

Gyroscope-mount misalignment is only supported when a three-axis gyroscope is available. In case of a single-axis gyroscope, the sensor should be physically aligned along the installationframe z-axis. This is needed to avoid a scale factor error which will affect the accuracy of the output due to the two missing gyroscopes.

## <span id="page-137-0"></span>**29.3 Sensor Configuration**

This section describes the external sensor configuration parameters.

## <span id="page-137-1"></span>**29.3.1 Accelerometer Configuration**

The accelerometer sensor senses specific forces, expressed in meters per seconds squared, along its input axis. In the full configuration, an IMU contains a three-axis accelerometer whose sensitive axes are assumed to be mutually orthogonal in a Cartesian frame.



#### **29.3.1.1 Messages**

The accelerometer sensor can be configured in the following message:

## **Configuration Messages for UDR Products**

| Product Type | Message      |
|--------------|--------------|
| Chipset      | UBX-CFG-ESFA |

## <span id="page-138-0"></span>**29.3.2 Gyroscope Configuration**

The gyroscope sensor senses angular rates, expressed in radians per seconds or degrees per second, along its input axis. In the full configuration, an IMU contains a three-axis gyroscope whose sensitive axes are assumed to be mutually orthogonal in a Cartesian frame.

### **29.3.2.1 Messages**

The gyroscope sensor can be configured in the following message:

#### **Configuration Messages for UDR Products**

| Product Type | Message      |
|--------------|--------------|
| Chipset      | UBX-CFG-ESFG |

### **29.3.2.2 Temperature Compensation**

Gyroscope sensors generally exhibit a temperature-dependent bias that varies from unit to unit. To help compensate for this variation the receiver builds up a table of gyroscope bias versus temperature measurements which are often available from the gyroscope sensor itself. This is particularly valuable to dead-reckoning-only navigation after the vehicle has been left for some time in parking garage.

The gyroscope temperature compensation engine has the following settings:

- **Gyroscope RMS threshold above which temperature table is not updated**: The gyroscope temperature-dependent bias is only updated if the measured gyroscope angular rate RMS is below the given threshold. This avoids artificially high estimates of the gyroscope temperaturedependent bias from transient events such as vehicle engine starts or nearby heavy construction. This threshold can be configured in the gyroRmsThdl field and is shared with the sensor accuracy estimation engine (see above);
- **Temperature-dependent bias table saving rate**: Gyroscope temperature compensation data are saved to non-volatile storage at intervals that can be configured by the tcTableSaveRate field.

The gyroscope temperature-dependent bias table is revised under the following conditions:

- The vehicle is stationary (without wheel-tick measurements or at zero speed);
- The RMS of the measured gyroscope angular rates and accelerometer specific forces is below a given threshold (see above);
- Turntable mode is not engaged (only for ADR products, see [Ferry and Turntable Modes](#page-14-0) section);
- Gyroscope temperature compensation is effective if the gyroscope(s) exhibits repeatable characteristics with temperature and is not unduly affected by external factors (such as supply voltage or mechanical stress).



## <span id="page-139-0"></span>**29.3.3 Sensor Time Tagging**

In order to achieve optimal performance with the fusion solution it is essential to determine the epoch in the receiver time frame when the external sensor measurements were generated. This may be done in one of the following ways:

- First Byte Reception: reception time of first byte of [UBX-ESF-MEAS](#page-294-1) message
- Time Mark on External Input: reception time of time mark signal sent to external input

The latency of the sensor data is the time between when the sensor measurement was taken and the detection at the receiver of either the first byte of the [UBX-ESF-MEAS](#page-294-1) message or the preprocessor's time mark, depending on the timing approach chosen. Increased latency reduces the navigation performance.

In ADR, the latency can be set by using the latency, wtLatency, gyroLatency and accelLatency parameters in the appropriate configuration message, as discussed in the [Automotive Dead](#page-112-1) [Reckoning \(ADR\)](#page-112-1) chapter.

In UDR, the latency can be set by using the latency parameter in the appropriate sensor configuration message, as discussed in the [Untethered Dead Reckoning \(UDR\)](#page-133-1) chapter.

## **29.3.3.1 First Byte Reception**

The easiest way to determine the sensor measurement generation time is to have the GNSS receiver assume the time of reception of the first byte of the [UBX-ESF-MEAS](#page-294-1) message (minus a constant configured latency) to be the time of sensor measurement. This approach is the simplest to implement, but [Time Mark on External Input](#page-139-1) can yield better latency control and compensation.



## <span id="page-139-1"></span>**29.3.3.2 Time Mark on External Input**

In this case, the preprocessor unit generating the measurements sends a signal to the EXTINT input of the GNSS receiver, marking the moment of measurement generation. The subsequent [UBX-ESF-MEAS](#page-294-1) message is then flagged accordingly, and the measurements in the message will be assumed to have been generated at the time of external signal reception (minus a constant configured latency). This approach is the preferred solution, but it can be difficult to realize an exact analog time signal for the preprocessor unit.





## <span id="page-140-4"></span>**29.3.3.3 Sensor Time Tagging Configuration**

The receiver requires external sensor packets time tagged in seconds.

The external sensor time tagging for WT can be configured in the [UBX-CFG-ESFWT](#page-215-2) (not supported in [protocol versions less than 15.01](#page-15-2)).

The following sensor time tagging settings need to be specified:

- **Sensor time tag scale factor to seconds:** (timeTagFactor): This parameters converts the sensor time tags from their original time unit into the required seconds. For example if the IMU raw packets are time-tagged in milliseconds, the scale factor for converting one millisecond into one seconds is 0.001.
- **Sensor time tag maximum value:** (timeTagMax): External sensor time tags are encoded in different data types (signed/unsigned, varying number of bytes) which might vary across sensor types. For example if the IMU raw packet's time-tag field is encoded into an unsigned long integer (4 bytes), the maximum possible time-tag value is 4294967295 (0xFFFFFFFFin hexadecimal).

## <span id="page-140-0"></span>**29.4 UDR System Configuration**

(These features are not supported in [protocol versions less than 19\)](#page-15-2).

## <span id="page-140-1"></span>**29.4.1 Enabling/Disabling Fusion Filter**

The UDR fusion filter can be turned off by means of the useAdr bit in the [UBX-CFG-NAVX5](#page-233-1) configuration message. If fusion is turned off, the receiver outputs a GNSS-only solution.

## <span id="page-140-2"></span>**29.4.2 Recommended Configuration**

For an optimum navigation performance, the recommended general configuration is the following:

- **Navigation Rate**: the standard navigation solution update rate of 1 Hz (see [UBX-CFG-RATE](#page-268-1) message) is recommended.
- Reconsider the enabled messages and features (e.g logging) at higher navigation rates to meet CPU load, memory and interface bandwidth constraints (Valid in [protocol](#page-15-2) [versions 19.2](#page-15-2)).

## <span id="page-140-3"></span>**29.5 Operation**

This section describes how the UDR receiver operates.



## <span id="page-141-0"></span>**29.5.1 Fusion Filter Modes**

The fusion filter operates in different modes which are output in the [UBX-ESF-STATUS](#page-296-1) message.

The table below summarizes the different fusion filter modes with the associated tasks the receiver is doing.

## **Fusion Modes**

| Mode             | Performed Tasks / Possible Causes                              | Published Fix |
|------------------|----------------------------------------------------------------|---------------|
|                  |                                                                | Type          |
| Initialization   | Initialization of IMU                                          | 3D-Fix        |
|                  | Initialization of IMU-mount alignment                          | (GNSS)        |
|                  | Initialization of INS (position, velocity, attitude)           |               |
|                  | Initialization of wheel-tick sensor (ADR only)                 |               |
|                  | IMU sensor error (e.g. missing data) detected (only supported  |               |
|                  | in protocol versions 19.2+)                                    |               |
| Fusion           | Fine-calibration of IMU-mount misalignment angles (not         | GNSS/DR Fix   |
|                  | supported in protocol versions less than 19)                   |               |
|                  | Fine-calibration of IMU sensors                                |               |
|                  | Fine-calibrating of wheel-tick factors (ADR only)              |               |
|                  | UDR mode under ADR / WT sensor error (e.g. missing data)       |               |
|                  | detected (ADR only)(only supported in protocol versions 19.2+) |               |
| Suspended Fusion | Sensor error (e.g. missing data) detected (only supported in   | 3D-Fix        |
|                  | protocol versions less than 19.2)                              | (GNSS)        |
|                  | Ferry detected (ADR only)                                      |               |
| Disabled Fusion  | Fatal fusion filter error occurred                             | 3D-Fix        |
|                  | Fusion filter turned-off by user                               | (GNSS)        |

More details about each fusion mode are given in the following sections.

## <span id="page-141-1"></span>**29.5.1.1 Initialization Mode**

The purpose of the initialization phase is to estimate all unknown parameters which are required for achieving fusion. The initialization phase is triggered after a receiver cold start or a filter reset in case of fusion failure. The receiver is in initialization mode if the fusionMode field in the [UBX-](#page-296-1)[ESF-STATUS](#page-296-1) message is 0:INITIALIZING. In this case the required sensor calibration status (cal ibStatus) is flagged as 0: NOT CALIBRATED and the navigation solution output during initialization is based on GNSS solely.

The initialization phase comprises the following internal steps whose status is published in the initStatus field of the [UBX-ESF-STATUS](#page-296-1) message:

- **IMU initialization:** Unknown crucial IMU parameters such as sensor sampling frequency are estimated during initialization. As long as all required IMU parameters are not initialized, the status of the IMU initialization (imuInitStatus) is flagged as 1:INITIALIZING in the [UBX-ESF-](#page-296-1)[STATUS](#page-296-1) message. Moreover, the required sensor calibration statuses (calibStatus) are flagged as 0:NOT CALIBRATED in the [UBX-ESF-STATUS](#page-296-1) message. Note that if the user configured all required sensor settings, this step is skipped and IMU initialization is flagged as 2: INITIALIZED (not supported in [protocol versions less than 19](#page-15-2)).
- **IMU-mount alignment initialization:** If automatic IMU-mount alignment is enabled (see the [Automatic IMU-mount Alignment Configuration](#page-137-2) section), initial IMU-mount roll, IMU-mount pitch and IMU-mount yaw angles need to be estimated. For that, good GNSS signal reception as



well as sufficient vehicle dynamics (i.e. a series of left and right turns during a normal drive) need to be at hand. As long as the IMU-mount alignment is not initialized, the status of the IMUmount alignment (mntAlgStatus) is flagged as 1:INITIALIZING in the [UBX-ESF-STATUS](#page-296-1) message. Once initialized, the IMU-mount alignment status is flagged as 2:INITIALIZED. If no IMU-mount alignment is required, the IMU-mount alignment is flagged as 0:OFF. A detailed description of the automatic IMU-mount alignment operation can be found in the [Automatic](#page-145-0) [IMU-mount Alignment Operation](#page-145-0) section (not supported in [protocol versions less than 15.01](#page-15-2)).

• **INS initialization:** Before entering fusion mode, the initial vehicle position, velocity and especially attitude (vehicle roll, pitch heading angles) needs to be known with sufficient accuracy. This is achieved during INS initialization phase (which comprises an INS coarse alignment step) using GNSS. As long as the fusion filter isn't initialized, the status of the INS initialization (insInitSt atus) is flagged as 1:INITIALIZING in the [UBX-ESF-STATUS](#page-296-1) message. Once initialized, the INS initialization is flagged as 2:INITIALIZED (not supported in [protocol versions less than 15.01](#page-15-2)).

This section is valid only for [protocol versions less than 19.2](#page-15-2)

• **Wheel-tick sensor initialization (ADR products only):** Before entering fusion mode, some parameters like initial wheel-tick factors need to be estimated with sufficient accuracy. This is achieved during wheel-tick sensor initialization phase using GNSS. As long as the wheel-tick parameters are not initialized, the status of the wheel-tick initialization (wtInitStatus) is flagged as 1:INITIALIZING in the [UBX-ESF-STATUS](#page-296-1) message. Once initialized, the wheel-tick sensor initialization is flagged as 2:INITIALIZED and the parameters are stored in non-volatile storage. If no wheel-tick data are required (in UDR products), the wheel-tick initialization is flagged as 0:OFF (only valid in [protocol versions less than 19.2](#page-15-2)).

This section is valid only for [protocol versions 19.2+](#page-15-2)

- **Wheel-tick sensor initialization (ADR products only):** Solution enters fusion mode (fusionMode field in the [UBX-ESF-STATUS](#page-296-1) message is on 1:FUSION), even when wheel-tick is not yet initialized, following a [UDR](#page-133-1) mode approach. WT sensor parameters, like initial wheel-tick factors, are estimated in parallel and are used once estimated with sufficient accuracy. As long as the wheel-tick parameters are not initialized, the status of the wheel-tick initialization (wtIni tStatus) is flagged as 1:INITIALIZING in the [UBX-ESF-STATUS](#page-296-1) message. Once initialized, the wheel-tick sensor initialization is flagged as 2:INITIALIZED, WT data are used by the filter and the parameters are stored in non-volatile storage. If no wheel-tick data are required (in UDR products), the wheel-tick initialization is flagged as 0:OFF (only valid in [protocol versions 19.2+](#page-15-2)).
- Beside the wheel-tick factors, other parameters like direction pin polarity are initialized if requested.
- **Sensor error (e.g. missing data) detected:** Sensor timeout of more than 500ms will trigger an INS re-initialization (not supported in [protocol versions less than 19.2\)](#page-15-2).

Note that initialization phase requires good GNSS signal conditions as well as periods during which vehicle is stationary and moving (including turns). Once all required initialization steps are achieved, fusion mode is triggered and the calibration phase begins.

#### <span id="page-142-0"></span>**29.5.1.2 Fusion Mode**

Once initialization phase is achieved, the receiver enters navigation mode. The receiver is in fusion mode if the fusionMode field in the [UBX-ESF-STATUS](#page-296-1) message is set on 1:FUSION. The fusion filter then starts to compute combined GNSS/dead-reckoning fixes (fused solutions) and to calibrate the sensors required for computing the fused navigation solution (used bit set). This is



the case when the sensor calibration status (calibStatus) is flagged as 1:CALIBRATING. As soon as the calibration reaches a status where optimal fusion performance can be expected, the sensor calibration status is flagged as 2/3:CALIBRATED.

## <span id="page-143-1"></span>**29.5.1.3 Suspended Fusion Mode**

Sensor fusion can be temporarily suspended in cases where no fused solution should/can be computed. The receiver is in the temporarily disabled fusion mode if the fusionMode field in the [UBX-ESF-STATUS](#page-296-1) message is set on 2:SUSPENDED. In this case, the receiver computes a GNSSonly solution.

Fusion is suspended if:

- One or several sensors deliver erroneous data or no data at all, the fusion is suspended during the sensor failure period. The receiver automatically recovers once the affected sensor(s) is/are back to normal operation (only supported in [protocol versions less than 19.2\)](#page-15-2).
- The vehicle is detected to be on a ferry where wheel-ticks do not detect any displacement (in ADR products only).

## <span id="page-143-2"></span>**29.5.1.4 Disabled Fusion Mode**

Sensor fusion can be permanently switched off in cases where recurrent fusion failures happen or user turned off manually fusion. The receiver is in the permanently disabled fusion mode if the fusionMode field in the [UBX-ESF-STATUS](#page-296-1) message is set on 3:DISABLED. In such a case, the receiver computes a GNSS-only solution.

Fusion is permanently disabled in the following cases:

- If the fusion filter was manually turned off by the user (useAdr bit in the [UBX-CFG-NAVX5](#page-233-1) message is not set).
- If significantly wrong installation or filter parameters causing filter divergence are sent to the receiver.
- If the fusion filter encountered too many errors.

An IMU-mount alignment error is output in the error field in the [UBX-ESF-ALG](#page-291-0) message.

## <span id="page-143-0"></span>**29.5.2 Accelerated Initialization and Calibration Procedure**

This section describes how to perform fast initialization and calibration of the UDR receiver for the purpose of evaluation.

The duration of the initialization phase mostly depends on the quality of the GNSS signals and the dynamics encountered by the vehicle. Therefore the car should be driven to an open and flat area like an empty open-sky parking area for example. The initialization and calibration drive should contain phases where the car is stopped during a few minutes (with engine turned-on), phases where the car is doing normal left and right turns and phases where speed is above 30 km/h under good GNSS reception conditions.

The initialization time required for reaching fused navigation mode can be shortened by following the procedure in the order described in the table below.

#### **Accelerated Initialization Procedure**



#### Accelerated Initialization Procedure continued

| Phase              | Procedure                             | Indicator of Success                    |  |  |
|--------------------|---------------------------------------|-----------------------------------------|--|--|
| IMU initialization | After receiver coldstart or first     | IMU initialization status (imuInitStat  |  |  |
|                    | receiver use, turn-on car engine and  | us) is flagged as 2:INITIALIZED in the  |  |  |
|                    | stay stationary under good GNSS       | UBX-ESF-STATUS message.                 |  |  |
|                    | signal reception conditions during at |                                         |  |  |
|                    | least 3 minutes.                      |                                         |  |  |
| INS initialization | Once IMU is initialized, stay         | GNSS 3D fix achieved, good 3D position  |  |  |
| (position and      | stationary under good GNSS signal     | accuracy (at least 5 m), high number of |  |  |
| velocity)          | reception conditions until a reliable | used SVs (check UBX-NAV-PVT             |  |  |
|                    | GNSS fix could be achieved.           | message).                               |  |  |
| IMU-mount          | Start driving with a minimum speed    | IMU-mount alignment status (mntAlgS     |  |  |
| alignment          | of 12 km/h and do a series of         | tatus) is flagged as 2:INITIALIZED in   |  |  |
| initialization     | approximately 10 left and right turns | the UBX-ESF-STATUS message, the         |  |  |
|                    | (at least 90 degrees turns). Each     | IMU-mount alignment status (status)     |  |  |
|                    | turn should be completed as if the    | is flagged as 3:COARSE ALIGNED in the   |  |  |
|                    | vehicle would drive in a sharp        | UBX-ESF-ALG message.                    |  |  |
|                    | roundabout.                           |                                         |  |  |
|                    | This step can be skipped if           |                                         |  |  |
|                    | automatic IMU-mount alignment is      |                                         |  |  |
|                    | turned-off.                           |                                         |  |  |
| INS initialization | Drive straight for at least 100       | INS initialization status (insInitStatu |  |  |
| (attitude)         | meters at a minimum speed of 40       | s) is flagged as 2:INITIALIZED in the   |  |  |
|                    | km/h.                                 | UBX-ESF-STATUS message.                 |  |  |

Once initialization is completed, the fusionMode field in the [UBX-ESF-STATUS](#page-296-1) message switches to 1:FUSION, combined GNSS/Dead-reckoning fixes (fused solutions) are output and the sensors used in the navigation filter start to get calibrated. Calibration is a continuous process running in the background and improving the navigation solution quality.

The calibration time required for reaching optimal UDR navigation performance can be shortened by following the procedure described in the table below.

## **Accelerated Calibration Procedure**

| Phase       | Procedure                            | Indicator of Success                |
|-------------|--------------------------------------|-------------------------------------|
| IMU-mount   | Keep driving with a minimum speed    | Once the IMU-mount alignment engine |
| alignment   | of 30 km/h and do a series of left   | has high confidence in its          |
| calibration | and right turns (at least 90 degrees | misalignment angle estimates, the   |
|             | with similar sharpness as when       | IMU-mount alignment status (status) |
|             | driving in a sharp roundabout). At   | is flagged as 4:FINE ALIGNED in the |
|             | each turn the estimated IMU-mount    | UBX-ESF-ALG message.                |
|             | misalignment angles are refined and  |                                     |
|             | their accuracy increased.            |                                     |
|             | This step can be skipped if          |                                     |
|             | automatic IMU-mount alignment is     |                                     |
|             | turned-off.                          |                                     |



Accelerated Calibration Procedure continued

| Phase           | Procedure                            | Indicator of Success                |
|-----------------|--------------------------------------|-------------------------------------|
| IMU calibration | Drive curves and straight segments   | The calibration status of the used  |
| (gyroscope and  | during a few minutes by including a  | sensors (calibStatus) is flagged as |
| accelerometer)  | few stops lasting at least 30        | 2/3:CALIBRATED in the UBX-ESF       |
|                 | seconds each. This drive should also | STATUS message.                     |
|                 | include some periods with higher     |                                     |
|                 | speed (at least 50 km/h) and can     |                                     |
|                 | typically be carried out on normal   |                                     |
|                 | open-sky roads with good GNSS        |                                     |
|                 | signal reception conditions.         |                                     |

Note that the calibration status (calibStatus in [UBX-ESF-STATUS](#page-296-1) message) of some used sensors might fall back to 1:CALIBRATING if the receiver is operated in challenging conditions. In such a case, fused navigation solution uncertainty increases until optimal conditions are observed again for re-calibrating the sensors.

The fused navigation performance quality might also depend on how well the gyroscope temperature compensation table is populated. The table gradually fills in while the vehicle is stationary and by observing gyroscope biases at different temperatures. Therefore the quality of the gyroscope temperature compensation depends on how many temperature bins could be observed while the vehicle was stationary and on the duration of observation for each bin.

## <span id="page-145-0"></span>**29.5.3 Automatic IMU-mount Alignment**

(This feature is not supported in [protocol versions less than 15.01\)](#page-15-2).

## <span id="page-145-1"></span>**29.5.3.1 Alignment Solution Output**

The IMU-mount misalignment angles are output in the [UBX-ESF-ALG](#page-291-0) message. They have the following meaning:

- **IMU-mount yaw angle**: During IMU-mount yaw angle initialization (status field is equal to 2), the published angle (yaw) corresponds to the current estimated value but is not yet applied for rotating the IMU observations. After initialization (status field is equal or higher than 3), the published angle corresponds to the estimated value and is applied for rotating the IMU observations. If automatic IMU-mount alignment is disabled, the published angle corresponds to the IMU-mount yaw angle configured by the user (see [User-defined Configuration](#page-134-0) section) and is applied for rotating the IMU observations.
- **IMU-mount pitch angle**: During IMU-mount pitch angle initialization (status field is equal to 1), the published angle (pitch) corresponds to the current estimated value but is not yet applied for rotating the IMU observations. After initialization (status field is equal or higher than 3), the published angle corresponds to the estimated value and is applied for rotating the IMU observations. If automatic IMU-mount alignment is disabled, the published angle corresponds to the IMU-mount pitch angle configured by the user (see [User-defined Configuration](#page-134-0) section) and is applied for rotating the IMU observations.
- **IMU-mount roll angle**: During IMU-mount roll angle initialization (status field is equal to 1), the published angle (roll) corresponds to the current estimated value but is not yet applied for rotating the IMU observations. After initialization (status field is equal or higher than 3), the published angle corresponds to the estimated value and is applied for rotating the IMU



observations. If automatic IMU-mount alignment is disabled, the published angle corresponds to the IMU-mount roll angle configured by the user (see [User-defined Configuration](#page-134-0) section) and is applied for rotating the IMU observations.

If user-defined IMU-mount misalignment angles were configured by the user using [UBX-](#page-213-1)[CFG-ESFALG](#page-213-1) (see [User-defined Configuration](#page-134-0) section) and automatic IMU-mount alignment is active, the angles output in the [UBX-ESF-ALG](#page-291-0) message still correspond to the definition given above: they represent the full rotation required for transforming IMU data from installation-frame to IMU-frame. This means that the output misalignment angles are computed from the composed rotation of the user-defined rotation and the internally-estimated rotation.

## **29.5.3.2 Alignment Progress**

The progress of the automatic IMU-mount alignment can be monitored by checking the status field in the [UBX-ESF-ALG](#page-291-0) message (see the [UBX-ESF-ALG](#page-291-0) message description for the meaning of the values output in the status field).

- **IMU-mount roll/pitch angle initialization ongoing**: The alignment engine is initializing the IMUmount roll and pitch angles (status is 1). Both angles can only be initialized if vehicle encounters left and right turns (as occurring during a normal drive).
- **IMU-mount yaw angle initialization ongoing**: The alignment engine is initializing the IMU-mount yaw angle (status is 2). IMU-mount yaw angle can only be initialized once IMU-mount roll and pitch angles are initialized and if vehicle encounters left and right turns (as occurring during a normal drive).
- **IMU-mount misalignment angles are initialized** (only supported in [protocol versions 15.01 to 17\)](#page-15-2): The alignment engine has sufficient confidence in all IMU-mount misalignment angles and validates their use for compensating the accelerometer and gyroscope data, i.e. fused navigation solutions can be computed (status is 3).
- **IMU-mount alignment coarse calibration ongoing** (only supported in [protocol versions 19+\)](#page-15-2): Once initialized (status is 3), the automatic IMU-mount alignment engine has sufficient confidence in all IMU-mount misalignment angles and validates their use for compensating the accelerometer and gyroscope data (fused navigation solutions can be computed). The engine keeps filtering the IMU-mount misalignment angles every time the observed vehicle dynamics allows for it.
- **IMU-mount alignment fine calibration ongoing** (only supported in [protocol versions 19+](#page-15-2)): Once the IMU-mount misalignment angles are estimated with a good accuracy, the automatic IMUmount alignment engine becomes more conservative in updating the IMU-mount misalignment angles (status is 4).

## **29.5.3.3 Alignment Errors**

The following errors might be output in the error bitfield of the [UBX-ESF-ALG](#page-291-0) message:

- **IMU-mount misalignment angle error** (only supported in [protocol versions 15.01 to 17\)](#page-15-2): If the automatic IMU-mount alignment engine suspects wrong IMU-mount misalignment angles (either due to a wrong initialization or a change in the physical mounting of the device), the error bit 0 in the [UBX-ESF-ALG](#page-291-0) message is set.
- **IMU-mount roll/pitch angle error** (only supported in [protocol versions 19+](#page-15-2)): If the automatic IMU-mount alignment engine suspects wrong IMU-mount roll and/or IMU-mount pitch misalignment angles (either due to a wrong initialization or a change in the physical mounting of



the device), the error bit 0 in the [UBX-ESF-ALG](#page-291-0) message is set.

- **IMU-mount yaw angle error** (only supported in [protocol versions 19+\)](#page-15-2): If the automatic IMUmount alignment engine suspects wrong IMU-mount yaw misalignment angle (either due to a wrong initialization or a change in the physical mounting of the device), the error bit 1 in the [UBX-ESF-ALG](#page-291-0) message is set.
- **Euler Angle singularity ('gimbal-lock') error** (only supported in [protocol versions 19+](#page-15-2)): The Euler angle singularity error bit 2 is set when the automatic IMU-mount alignment engine detects an installation where the IMU-frame is misaligned in such a way that a degree of freedom is lost when two IMU-mount misalignment (Euler) angles begin to describe the same rotations (or axes). This happens for example with an IMU-mount misalignment of +/- 90 degrees around the IMU-mount pitch axis, where IMU-mount roll and IMU-mount yaw cannot be distinguished from each other. In such a case, these IMU-mount misalignment angles start to heavily fluctuate with time due to the mathematical singularity occurring at these points, meaning that the IMUmount misalignment angles output in the [UBX-ESF-ALG](#page-291-0) are not stable in time. Note however that each individual set of IMU-mount misalignment angles output in such a case still describes the correct rotation. Moreover, the internal rotation applied for aligning the IMU readings doesn't suffer from this singularity issue and optimal fusion can still be achieved.

## <span id="page-147-0"></span>**29.5.4 Navigation Output**

(Only supported in [protocol versions 19+\)](#page-15-2).

## <span id="page-147-2"></span>**29.5.4.1 Local-level North-East-Down (NED) Frame**

The local-level frame is a geodetic frame with following features:

- The origin (O) is a point on the Earth surface;
- The x-axis points to North;
- the y-axis points to East;
- the z-axis completes the right-handed reference system by pointing down.

The frame is referred to as North-East-Down (NED) since its axes are aligned with the North, East and Down directions.

## <span id="page-147-1"></span>**29.5.4.2 Body-Frame**

The body-frame is a right-handed 3D Cartesian frame rigidly connected with the vehicle and is used to determine the attitude of the vehicle with respect to the local-level frame. It has the following features:

- The origin (O) is the origin of the IMU instrumental frame;
- The x-axis points towards the front of the vehicle;
- the y-axis points towards the right of the vehicle;
- the z-axis completes the right-handed reference system by pointing down.

## **29.5.4.3 Vehicle Position and Velocity Output**

The position and velocity information is output in several messages like [UBX-NAV-PVT](#page-389-1) for example. The position computed by the UDR navigation filter is referenced to the origin (O) of the [body-frame](#page-147-1).



## <span id="page-148-0"></span>**29.5.4.4 Vehicle Attitude Output**

The transformation between the [body-frame](#page-147-1) and the [local-level frame](#page-147-2) is described by three attitude angles about the local-level axes denoted as vehicle roll, vehicle pitch and vehicle heading. All three angles are referred as vehicle attitude and are illustrated in the figure below:



The order of the sequence of rotations around the navigation axes defining the vehicle attitude matrix in terms of vehicle attitude angles is illustrated below:



$$
\mathbf{C}_X = \begin{bmatrix} 1 & 0 & 0 \\ 0 & \cos(\phi) & \sin(\phi) \\ 0 & -\sin(\phi) & \cos(\phi) \end{bmatrix} \quad \mathbf{C}_Y = \begin{bmatrix} \cos(\theta) & 0 & -\sin(\theta) \\ 0 & 1 & 0 \\ \sin(\theta) & 0 & \cos(\theta) \end{bmatrix} \quad \mathbf{C}_Z = \begin{bmatrix} \cos(\psi) & \sin(\psi) & 0 \\ -\sin(\psi) & \cos(\psi) & 0 \\ 0 & 0 & 1 \end{bmatrix}
$$

$$
C_b^n = C_Z^T \cdot C_Y^T \cdot C_X^T
$$
  
= 
$$
\begin{bmatrix} \cos (\theta) \cos (\psi) & \sin (\phi) \sin (\theta) \cos (\psi) - \cos (\phi) \sin (\psi) & \cos (\phi) \sin (\theta) \cos (\psi) + \sin (\phi) \sin (\psi) \\ \cos (\theta) \sin (\psi) & \sin (\phi) \sin (\theta) \sin (\psi) + \cos (\phi) \cos (\psi) & \cos (\phi) \sin (\theta) \sin (\psi) - \sin (\phi) \cos (\psi) \\ - \sin (\theta) & \sin (\phi) \cos (\theta) & \cos (\theta) \end{bmatrix}
$$

The vehicle attitude is output in the [UBX-NAV-ATT](#page-372-1) message. The message provides all three angles together with their accuracy estimates. Note that since no backwards motion information is measured, no heading of motion information is output in the [UBX-NAV-PVT](#page-389-1) message (heading of vehicle is provided in a separate field within the same message).

## **29.5.4.5 Vehicle Dynamics Output**

The [UBX-ESF-INS](#page-292-1) message outputs information about vehicle dynamics provided by the INS: compensated vehicle angular rates and compensated vehicle accelerations. The acceleration data is free of any gravitational acceleration. It's accuracy is directly dependent on the filter attitude estimation accuracy.

Compensated vehicle dynamics information is output with respect to the [body-frame.](#page-147-1)

## <span id="page-149-0"></span>**29.5.5 Sensor Data Types**

The supported sensor data types are:

| Type | Description                       | Unit         | Format of the 24 data bits |
|------|-----------------------------------|--------------|----------------------------|
| 0    | none, data field contains no data |              |                            |
| 14   | reserved                          |              |                            |
| 5    | z-axis gyroscope angular rate     | deg/s *2^-12 | signed                     |
| 6    | front-left wheel ticks            |              | Bits 0-22: unsigned        |
|      |                                   |              | tick value. Bit 23:        |
|      |                                   |              | direction indicator        |
|      |                                   |              | (0=forward,                |
|      |                                   |              | 1=backward)                |

## **Definition of Data Types**



| Description                         |                  | Unit Format of the 24 data bits |
|-------------------------------------|------------------|---------------------------------|
| front-right wheel ticks             |                  | Bits 0-22: unsigned             |
|                                     |                  | tick value. Bit 23:             |
|                                     |                  | direction indicator             |
|                                     |                  | (0=forward,                     |
|                                     |                  | 1=backward)                     |
| rear-left wheel ticks               |                  | Bits 0-22: unsigned             |
|                                     |                  | tick value. Bit 23:             |
|                                     |                  | direction indicator             |
|                                     |                  | (0=forward,                     |
|                                     |                  | 1=backward)                     |
| rear-right wheel ticks              |                  | Bits 0-22: unsigned             |
|                                     |                  | tick value. Bit 23:             |
|                                     |                  | direction indicator             |
|                                     |                  | (0=forward,                     |
|                                     |                  | 1=backward)                     |
| single tick (speed tick)            |                  | Bits 0-22: unsigned             |
|                                     |                  | tick value. Bit 23:             |
|                                     |                  | direction indicator             |
|                                     |                  | (0=forward,                     |
|                                     |                  | 1=backward)                     |
| speed                               | m/s * 1e-3       | signed                          |
| gyroscope temperature               | deg Celsius * 1e | signed                          |
|                                     | 2                |                                 |
| y-axis gyroscope angular rate       | deg/s *2^-12     | signed                          |
| x-axis gyroscope angular rate       | deg/s *2^-12     | signed                          |
| x-axis accelerometer specific force | m/s^2 *2^-10     | signed                          |
| y-axis accelerometer specific force | m/s^2 *2^-10     | signed                          |
| z-axis accelerometer specific force | m/s^2 *2^-10     | signed                          |
|                                     |                  |                                 |

## <span id="page-150-0"></span>**29.5.6 Raw Sensor Data Output**

(This feature is not supported in [protocol versions less than 15.01\)](#page-15-2).

Some u-blox module products contain inertial sensors (IMU) that are directly connected to the GNSS and cannot be directly accessed from outside the module. The [UBX-ESF-RAW](#page-295-1) message can be used to access raw measurements of these sensors. A variable number of data fields may be used in a single message and these can contain different types of measurements. The type of each measurement is specified in the dataType field. The possible data types are x, y and z-axis measurements on gyroscope or accelerometer and gyroscope temperature measurements as described in the [ESF Measurement Data](#page-149-0) section. One [UBX-ESF-RAW](#page-295-1) message can contain multiple samples from the same sensor. The user can separate and order these using the time tags attached to each of the measurements.

The measurements are made at a fixed rate. The sampling rate or other sensor configuration options can not be changed.

To turn on this feature the [UBX-ESF-RAW](#page-295-1) message must be enabled using [UBX-CFG-MSG](#page-229-1). If nonzero rate is selected the message will be output but the selected rate does not otherwise have an



### influence at the rate of the messages.

Turning on this feature does not disable sensor fusion in the receiver. To use an external fusion algorithm consider disabling the automotive dead reckoning mode using [UBX-](#page-233-1)[CFG-NAVX5](#page-233-1).

#### <span id="page-151-0"></span>**29.5.7 Receiver Startup and Shutdown**

Continuous dead reckoning is possible over receiver restarts if the following conditions are true:

- Non-volatile storage is available, or the [save-on-shutdown feature \(SOS\)](#page-25-2) is used
- The vehicle is not moved while the receiver is off

During periods of external sensor data unavailability the receiver switches to GNSS-only navigation if the last sensor information indicated the vehicle was moving.

## <span id="page-151-1"></span>**30 High Navigation Rate (HNR)**

This feature is only available with the [ADR](#page-112-1) products.

This feature is only available with the [UDR](#page-133-1) products.

## <span id="page-151-2"></span>**30.1 Introduction**

u-blox DR solutions allow a low latency position and velocity to be output at up to 30 Hz. The maximum GNSS rate is 2 Hz. Sensors measurements are used to propagate the solution at the higher rate between GNSS epochs.

The high navigation rate solution is output using the [UBX-HNR-PVT](#page-302-1) message for firmwares using [protocol version 19+](#page-15-2).

## <span id="page-151-3"></span>**30.2 Configuration**

The high navigation rate output can be configured using the [UBX-CFG-HNR](#page-224-2) message.

If a high navigation rate has been configured with [UBX-CFG-HNR](#page-224-2) then the number of enabled output messages must be adjusted to keep within the maximum throughput of the interface used.

<span id="page-152-0"></span>

# **Interface Description**

## <span id="page-152-1"></span>**31 NMEA Protocol**

## <span id="page-152-2"></span>**31.1 Protocol overview**

## <span id="page-152-3"></span>**31.1.1 Message format**

NMEA messages sent by the GNSS receiver are based on NMEA 0183 Version 4.10. The following figure shows the structure of a NMEA protocol message.

| <b>NMEA Protocol Frame</b>       |                                                                                     |                                                                    |                                                                   |                                                                                                                                             |                           |
|----------------------------------|-------------------------------------------------------------------------------------|--------------------------------------------------------------------|-------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|                                  |                                                                                     |                                                                    | Checksum range                                                    |                                                                                                                                             |                           |
|                                  |                                                                                     |                                                                    |                                                                   |                                                                                                                                             |                           |
| \$                               |                                                                                     | <address></address>                                                | $\{$ , <value><math>\}</math></value>                             | * <checksum></checksum>                                                                                                                     | <cr><lf></lf></cr>        |
| Start character Address field.   |                                                                                     |                                                                    | Data field $(s)$                                                  | Checksum field                                                                                                                              | End sequence              |
| Always '\$'                      | Only digits and<br>uppercase letters,<br>cannot be null. This<br>$2$ fields:<br>≪X≻ | field is subdivided into<br>$<\!\!\times\!\!\times\!\!\times\!\!>$ | Delimited by a ','. Length can vary,<br>even for a certain field. | Starts with a '*' and<br>consists of 2 characters<br>representing a hex<br>number. The checksum<br>is the exclusive OR of<br>all characters | Always <cr><lf></lf></cr> |
| proprietary Messages<br>Example: | Talker Identifier,<br>always GP for a<br>GPS receiver, P for                        | Sentence Formatter<br>Defines the message<br>content               |                                                                   | between '\$' and '*'.                                                                                                                       |                           |
| \$                               | GP                                                                                  | ZDA.                                                               | ,141644.00,22,03,2002,00,00                                       | *67                                                                                                                                         | <cr><lf></lf></cr>        |

For further information on the NMEA Standard, refer to NMEA 0183 Standard For Interfacing Marine Electronic Devices, Version 4.10, June, 2012. See <http://www.nmea.org/>for ordering instructions.

The NMEA standard allows for proprietary, manufacturer-specific messages to be added. These shall be marked with a manufacturer mnemonic. The mnemonic assigned to u-blox is UBX and is used for all non-standard messages. These proprietary NMEA messages therefore have the address field set to PUBX. The first data field in a PUBX message identifies the message number with two digits.

## <span id="page-152-4"></span>**31.1.2 Talker ID**

One of the ways the NMEA standard differentiates between GNSS is by using a two-letter message identifier, the 'Talker ID'. The specific Talker ID used by a u-blox receiver will depend on the device model and system configuration. The table below shows the Talker ID that will be used for various GNSS configurations.



### **NMEA Talker IDs**

| Configured GNSS         | Talker ID |
|-------------------------|-----------|
| GPS, SBAS, QZSS         | GP        |
| GLONASS                 | GL        |
| Galileo                 | GA        |
| BeiDou                  | GB*       |
| Any combination of GNSS | GN        |

\*This is a u-blox extension to the NMEA 4.10 standard. Only NMEA 4.11 defines the GB talker ID. See also Extended Configuration in [Protocol Configuration](#page-153-0).

## <span id="page-153-0"></span>**31.1.3 Protocol configuration**

The NMEA protocol on u-blox receivers can be configured to the need of customer applications using [UBX-CFG-NMEA](#page-240-1). For backwards compatibility various versions of this message are supported, however, any new users should use the version that is not marked as deprecated.

There are four NMEA standards supported. The default NMEA version is 4.10. Alternatively versions 4.00, 2.3, and 2.1 can be enabled (for details on how this affects the output refer to section [Position Fix Flags in NMEA Mode\)](#page-155-1).

- Customers using BeiDou and/or Galileo are recommended to select NMEA version 4.10, as earlier versions have no support for these two GNSS.
- Customers using High Precision GNSS (HPG) products are recommended to select NMEA version 4.10, as earlier versions do no support the Float RTK (F) and Real Time Kinematic (R) mode indicator flags in all messages.

NMEA defines satellite numbering systems for some, but not all GNSS (this is partly dependent on the NMEA version). Satellite numbers for unsupported GNSS can be configured using [UBX-](#page-240-1)[CFG-NMEA](#page-240-1). Unknown satellite numbers are always reported as a null NMEA field (i.e. an empty string).

The NMEA specification indicates that the GGA message is GPS-specific. However, u-blox receivers support the output of a GGA message for each of the Talker IDs.

| Parameter          | Description                                                                       |
|--------------------|-----------------------------------------------------------------------------------|
| Position filtering | Enable positions from failed or invalid fixes to be reported (with the "V" status |
|                    | flag to indicate that the data is not valid).                                     |
| Valid position     | Enable positions from invalid fixes to be reported (with the "V" status flag to   |
| filtering          | indicate that the data is not valid).                                             |
| Time filtering     | Enable the receiver's best knowledge of time to be output, even though it         |
|                    | might be wrong.                                                                   |
| Date filtering     | Enable the receiver's best knowledge of date to be output, even though it         |
|                    | might be wrong.                                                                   |
| GPS-only filtering | Restrict output to GPS satellites only.                                           |
| Track filtering    | Permit course over ground (COG) to be reported even when it would otherwise       |
|                    | be frozen.                                                                        |

#### **NMEA filtering flags**

#### **NMEA flags**

| Parameter | Description |
|-----------|-------------|
|           |             |



#### NMEA flags continued

| Parameter      | Description                                                                       |
|----------------|-----------------------------------------------------------------------------------|
| Compatibility  | Some older NMEA applications expect the NMEA output to be formatted in a          |
| Mode           | specific way, for example, they will only work if the latitude and longitude have |
|                | exactly four digits behind the decimal point. u-blox receivers offer a            |
|                | compatibility mode to support these legacy applications.                          |
| Consideration  | u-blox receivers use a sophisticated signal quality detection scheme, in order    |
| Mode           | to produce the best possible position output. This algorithm considers all SV     |
|                | measurements, and may eventually decide to only use a subset thereof, if it       |
|                | improves the overall position accuracy. If Consideration Mode is enabled, all     |
|                | satellites, which were considered for navigation, are communicated as being       |
|                | used for the position determination. If Consideration Mode is disabled, only      |
|                | those satellites which after the consideration step remained in the position      |
|                | output are marked as being used.                                                  |
| Limit82 Mode   | Enabling this mode will limit the NMEA sentence length to a maximum of 82         |
|                | characters.                                                                       |
| High Precision | Enabling this mode increases precision of the position output. Latitude and       |
| Mode           | longitude then have seven digits after the decimal point, and altitude has        |
|                | three digits after the decimal point. Note: The High Precision Mode cannot be     |
|                | set in conjunction with either Compatibility Mode or Limit82 Mode.                |

#### **Extended configuration**

| Option         | Description                                                                       |
|----------------|-----------------------------------------------------------------------------------|
| GNSS to filter | Filters satellites based on their GNSS                                            |
| Satellite      | This field configures the display of satellites that do not have an NMEA          |
| numbering      | defined value. Note: this does not apply to satellites with an unknown ID.        |
| Main Talker ID | By default the main Talker ID (i.e. the Talker ID used for all messages other     |
|                | than GSV) is determined by the GNSS assignment of the receiver's channels         |
|                | (see UBX-CFG-GNSS). This field enables the main Talker ID to be overridden.       |
| GSV Talker ID  | By default the Talker ID for GSV messages is GNSS-specific (as defined by         |
|                | NMEA). This field enables the GSV Talker ID to be overridden.                     |
| BDS Talker ID  | By default the Talker ID for BeiDou is 'GB'. This field enables the BeiDou Talker |
|                | ID to be overridden.                                                              |

#### **Extra fields in NMEA 4.10 and above**

| Message | Extra fields       |
|---------|--------------------|
| GBS     | systemId, signalId |
| GNS     | navStatus          |
| GRS     | systemId, signalId |
| GSA     | systemId           |
| GSV     | signalId           |
| RMC     | navStatus          |

## <span id="page-154-0"></span>**31.1.4 Satellite numbering**

The NMEA protocol (V4.10) identifies GNSS satellites with a one digit system ID and a two digit satellite number. u-blox receivers support this method in their NMEA output when "strict" SV numbering is selected.



In most cases this is the default setting, but can be checked or set using [UBX-CFG-NMEA](#page-240-1).

In order to support QZSS within current receivers and prepare for support of other systems (e.g. Galileo) in future receivers, an "extended" SV numbering scheme can be enabled (using [UBX-CFG-](#page-240-1)[NMEA](#page-240-1)).

This uses the NMEA-defined numbers where possible, but adds other number ranges to support other GNSS. Note however that these non-standard extensions require 3 digit numbers, which may not be supported by some NMEA parsing software. For example QZSS satellites are reported using numbers in the range 193 to 197.

See [Satellite Numbering](#page-460-1) for a complete list of satellite numbers.

GLONASS satellites can be tracked before they have been identified. In NMEA output, such unknown satellite numbers are always reported as a null field (i.e. an empty string).

## <span id="page-155-0"></span>**31.1.5 Latitude and longitude format**

According to the NMEA Standard, Latitude and Longitude are output in the format of Degrees, Minutes and (Decimal) Fractions of Minutes. To convert to Degrees and Fractions of Degrees, or Degrees, Minutes, Seconds and Fractions of seconds, the 'Minutes' and 'Fractional Minutes' parts need to be converted. In other words: If the GPS Receiver reports a Latitude of 4717.112671 North and Longitude of 00833.914843 East, this is

Latitude 47 Degrees, 17.112671 Minutes

Longitude 8 Degrees, 33.914843 Minutes

#### **or**

Latitude 47 Degrees, 17 Minutes, 6.76026 Seconds

Longitude 8 Degrees, 33 Minutes, 54.89058 Seconds

## **or**

Latitude 47.28521118 Degrees Longitude 8.56524738 Degrees

## <span id="page-155-1"></span>**31.1.6 Position fix flags**

This section shows how u-blox implements the NMEA protocol and the conditions determining how flags are set.

## **Flags in NMEA 4.10 and above**

| NMEA Message                                               | GLL, RMC      | GGA       | GLL, VTG  | RMC, GNS  |
|------------------------------------------------------------|---------------|-----------|-----------|-----------|
| Field                                                      | status        | quality   | posMode   | posMode   |
| No position fix (at power-up, after losing satellite lock) | V             | 0         | N         | N         |
| GNSS fix, but user limits exceeded                         | V             | 0         | N         | N         |
| Dead reckoning fix, but user limits exceeded               | V             | 6         | E         | E         |
| Dead reckoning fix                                         | A             | 6         | E         | E         |
| RTK float                                                  | A             | 5         | D         | F         |
| RTK fixed                                                  | A             | 4         | D         | R         |
| 2D GNSS fix                                                | A             | 1 / 2     | A / D     | A / D     |
| 3D GNSS fix                                                | A             | 1 / 2     | A / D     | A / D     |
| Combined GNSS/dead reckoning fix                           | A             | 1 / 2     | A / D     | A / D     |
|                                                            | See below (1) | See below | See below | See below |
|                                                            |               | (2)       | (3)       | (3)       |



(1) Possible values for status: V = Data invalid, A = Data valid

(2) Possible values for quality: 0 = No fix, 1 = Autonomous GNSS fix, 2 = Differential GNSS fix, 4 = RTK fixed, 5 = RTK float, 6 = Estimated/Dead reckoning fix

(3) Possible values for posMode: N = No fix, E = Estimated/Dead reckoning fix, A = Autonomous GNSS fix, D = Differential GNSS fix, F = RTK float, R = RTK fixed

## **Flags in NMEA 2.3 and above**

| NMEA Message                                               | GLL, RMC      | GGA       | GSA       | GLL, VTG, |
|------------------------------------------------------------|---------------|-----------|-----------|-----------|
|                                                            |               |           |           | RMC, GNS  |
| Field                                                      | status        | quality   | navMode   | posMode   |
| No position fix (at power-up, after losing satellite lock) | V             | 0         | 1         | N         |
| GNSS fix, but user limits exceeded                         | V             | 0         | 1         | N         |
| Dead reckoning fix, but user limits exceeded               | V             | 6         | 2         | E         |
| Dead reckoning fix                                         | A             | 6         | 2         | E         |
| 2D GNSS fix                                                | A             | 1 / 2     | 2         | A / D     |
| 3D GNSS fix                                                | A             | 1 / 2     | 3         | A / D     |
| Combined GNSS/dead reckoning fix                           | A             | 1 / 2     | 3         | A / D     |
|                                                            | See below (1) | See below | See below | See below |
|                                                            |               | (2)       | (3)       | (4)       |

(1) Possible values for status: V = Data invalid, A = Data valid

(2) Possible values for quality: 0 = No fix, 1 = Autonomous GNSS fix, 2 = Differential GNSS fix, 4 = RTK fixed, 5 = RTK float, 6 = Estimated/Dead reckoning fix

(3) Possible values for navMode: 1 = No fix, 2 = 2D fix, 3 = 3D fix

(4) Possible values for posMode: N = No fix, E = Estimated/Dead reckoning fix, A = Autonomous GNSS fix, D = Differential GNSS fix, F = RTK float, R = RTK fixed

## **Flags in NMEA 2.1 and below**

The flags in NMEA 2.1 and below are the same as NMEA 2.3 and above but with the following differences:

- The posMode field is not output for GLL, RMC and VTG messages (each message has one field less).
- The GGA quality field is set to 1 (instead of 6) for both types of dead reckoning fix.

## <span id="page-156-0"></span>**31.1.7 Multi-GNSS considerations**

Many applications which process NMEA messages assume that only a single GNSS is active. However, when multiple GNSS are configured, the NMEA specification requires the output to change in the following ways:

| Change         | Description                                                               |
|----------------|---------------------------------------------------------------------------|
| Main Talker ID | The main Talker ID will be 'GN' (e.g. instead of 'GP' for a GPS receiver) |
| GSV Talker IDs | The GSV message reports the signal strength of the visible                |
|                | satellites. However, the Talker ID it uses is specific to the GNSS it is  |
|                | reporting information for, so for a multi-GNSS receiver it will not be    |
|                | the same as the main Talker ID (e.g. other messages will be using the     |
|                | 'GN' Talker ID but the GSV message will use GNSS-specific Talker          |
|                | IDs).                                                                     |

## **NMEA output for Multi-GNSS**



NMEA output for Multi-GNSS continued

| Change               | Description                                                                                                                           |
|----------------------|---------------------------------------------------------------------------------------------------------------------------------------|
| Multiple GSA and GRS | Multiple GSA and GRS messages are output for each fix, one for                                                                        |
| Messages             | each GNSS. This may confuse applications which assume they are<br>output only once per position fix (as is the case for a single GNSS |
|                      | receiver).                                                                                                                            |

## <span id="page-157-0"></span>**31.1.8 Output of invalid/unknown data**

By default the receiver will not output invalid data. In such cases, it will output empty fields.

A valid position fix is reported as follows:

\$GPGLL,4717.11634,N,00833.91297,E,124923.00,A,A\*6E

An invalid position fix (but time valid) is reported as follows:

\$GPGLL,,,,,124924.00,V,N\*42

If Time is unknown (e.g. during a cold start):

\$GPGLL,,,,,,V,N\*64

Note:

- An exception from the above default are dead reckoning fixes, which are also output when invalid (user limits exceeded).
- Differing from the NMEA standard, u-blox reports valid dead reckoning fixes with user limits met (not exceeded) as valid (A) instead of invalid (V).
- Output of invalid data marked with the 'Invalid/Valid' Flags can be enabled using the UBX protocol message [UBX-CFG-NMEA](#page-240-1).

## <span id="page-157-1"></span>**31.1.9 Messages overview**

When configuring NMEA messages using the UBX protocol message [UBX-CFG-MSG](#page-229-1), the Class/Ids shown in the table shall be used.

| Page | Mnemonic               | Cls/ID    | Description                                                  |
|------|------------------------|-----------|--------------------------------------------------------------|
|      | NMEA Standard Messages |           | Standard messages                                            |
| 145  | DTM                    | 0xF0 0x0A | Datum reference                                              |
| 146  | GBQ                    | 0xF0 0x44 | Poll a standard message (Talker ID GB)                       |
| 146  | GBS                    | 0xF0 0x09 | GNSS satellite fault detection                               |
| 147  | GGA                    | 0xF0 0x00 | Global positioning system fix data                           |
| 149  | GLL                    | 0xF0 0x01 | Latitude and longitude, with time of position fix and status |
| 150  | GLQ                    | 0xF0 0x43 | Poll a standard message (Talker ID GL)                       |
| 150  | GNQ                    | 0xF0 0x42 | Poll a standard message (Talker ID GN)                       |
| 151  | GNS                    | 0xF0 0x0D | GNSS fix data                                                |
| 152  | GPQ                    | 0xF0 0x40 | Poll a standard message (Talker ID GP)                       |
| 153  | GRS                    | 0xF0 0x06 | GNSS range residuals                                         |
| 154  | GSA                    | 0xF0 0x02 | GNSS DOP and active satellites                               |
| 155  | GST                    | 0xF0 0x07 | GNSS pseudorange error statistics                            |
| 156  | GSV                    | 0xF0 0x03 | GNSS satellites in view                                      |
| 157  | RMC                    | 0xF0 0x04 | Recommended minimum data                                     |



#### NMEA Messages Overview continued

| Page               | Mnemonic | Cls/ID    | Description                         |
|--------------------|----------|-----------|-------------------------------------|
| 158                | THS      | 0xF0 0x0E | True heading and status             |
| 159                | TXT      | 0xF0 0x41 | Text transmission                   |
| 160                | VLW      | 0xF0 0x0F | Dual ground/water distance          |
| 161                | VTG      | 0xF0 0x05 | Course over ground and ground speed |
| 162                | ZDA      | 0xF0 0x08 | Time and date                       |
| NMEA PUBX Messages |          |           |                                     |
|                    |          |           | Proprietary messages                |
| 163                | CONFIG   | 0xF1 0x41 | Set protocols and baud rate         |
| 164                | POSITION | 0xF1 0x00 | Lat/Long position data              |
| 165                | RATE     | 0xF1 0x40 | Set NMEA message output rate        |
| 166                | SVSTATUS | 0xF1 0x03 | Satellite status                    |

<span id="page-159-0"></span>

## **31.2 Standard Messages**

Standard messages: i.e. Messages as defined in the NMEA standard.

## <span id="page-159-1"></span>**31.2.1 DTM**

#### **31.2.1.1 Datum reference**

| Message      | DTM             |                                           |                                                                                            |  |  |  |  |  |
|--------------|-----------------|-------------------------------------------|--------------------------------------------------------------------------------------------|--|--|--|--|--|
| Description  | Datum reference |                                           |                                                                                            |  |  |  |  |  |
| Firmware     | Supported on:   |                                           |                                                                                            |  |  |  |  |  |
|              |                 |                                           | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |  |  |  |
|              |                 | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |                                                                                            |  |  |  |  |  |
| Type         | Output          |                                           |                                                                                            |  |  |  |  |  |
| Comment      |                 |                                           | This message gives the difference between the current datum and the reference              |  |  |  |  |  |
|              | datum.          |                                           |                                                                                            |  |  |  |  |  |
|              |                 |                                           | The current datum is set to WGS84 by default.                                              |  |  |  |  |  |
|              |                 |                                           | The reference datum cannot be changed and is always set to WGS84.                          |  |  |  |  |  |
|              | ID for CFG-MSG  | Number of fields                          |                                                                                            |  |  |  |  |  |
| Message Info | 0xF0 0x0A       | 11                                        |                                                                                            |  |  |  |  |  |

#### Message Structure:

\$xxDTM,datum,subDatum,lat,NS,lon,EW,alt,refDatum\*cs<CR><LF>

#### Example:

\$GPDTM,W84,,0.0,N,0.0,E,0.0,W84\*6F

\$GPDTM,999,,0.08,N,0.07,E,-47.7,W84\*1C

| Field | Name               | Unit | Format      | Example | Description                                  |
|-------|--------------------|------|-------------|---------|----------------------------------------------|
| No.   |                    |      |             |         |                                              |
| 0     | xxDTM              | -    | string      | \$GPDTM | DTM Message ID (xx = current Talker ID, see  |
|       |                    |      |             |         | NMEA Talker IDs table)                       |
| 1     | datum              | -    | string      | W84     | Local datum code: W84 = WGS84, P90 =         |
|       |                    |      |             |         | PZ90 (supported in protocol versions greater |
|       |                    |      |             |         | than 19.1), 999 = user-defined               |
| 2     | subDatum           | -    | string      | -       | A null field                                 |
| 3     | lat                | min  | numeric     | 0.08    | Offset in Latitude                           |
| 4     | NS                 | -    | character   | S       | North/South indicator                        |
| 5     | lon                | min  | numeric     | 0.07    | Offset in Longitude                          |
| 6     | EW                 | -    | character   | E       | East/West indicator                          |
| 7     | alt                | m    | numeric     | -2.8    | Offset in altitude                           |
| 8     | refDatum           | -    | string      | W84     | Reference datum code: W84 (WGS 84, fixed     |
|       |                    |      |             |         | field)                                       |
| 9     | cs                 | -    | hexadecimal | *67     | Checksum                                     |
| 10    | <cr><lf></lf></cr> | -    | character   | -       | Carriage return and line feed                |

<span id="page-160-2"></span>

## <span id="page-160-0"></span>**31.2.2 GBQ**

### **31.2.2.1 Poll a standard message (Talker ID GB)**

| Message      | GBQ                                |                                           |                                                                                            |  |  |  |  |
|--------------|------------------------------------|-------------------------------------------|--------------------------------------------------------------------------------------------|--|--|--|--|
| Description  |                                    | Poll a standard message (Talker ID GB)    |                                                                                            |  |  |  |  |
| Firmware     | Supported on:                      |                                           |                                                                                            |  |  |  |  |
|              |                                    |                                           | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |  |  |
|              |                                    | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |                                                                                            |  |  |  |  |
| Type         | Poll Request                       |                                           |                                                                                            |  |  |  |  |
| Comment      |                                    |                                           | Polls a standard NMEA message if the current Talker ID is GB                               |  |  |  |  |
|              | ID for CFG-MSG<br>Number of fields |                                           |                                                                                            |  |  |  |  |
| Message Info | 0xF0 0x44                          | 4                                         |                                                                                            |  |  |  |  |

#### Message Structure:

\$xxGBQ,msgId\*cs<CR><LF>

### Example:

\$EIGBQ,RMC\*28

| Field | Name               | Unit | Format      | Example | Description                                  |
|-------|--------------------|------|-------------|---------|----------------------------------------------|
| No.   |                    |      |             |         |                                              |
| 0     | xxGBQ              | -    | string      | \$EIGBQ | GBQ Message ID (xx = Talker ID of the device |
|       |                    |      |             |         | requesting the poll)                         |
| 1     | msgId              | -    | string      | RMC     | Message ID of the message to be polled       |
| 2     | cs                 | -    | hexadecimal | *28     | Checksum                                     |
| 3     | <cr><lf></lf></cr> | -    | character   | -       | Carriage return and line feed                |

## <span id="page-160-1"></span>**31.2.3 GBS**

## **31.2.3.1 GNSS satellite fault detection**

| Message     | GBS                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |  |  |  |  |  |  |  |
|-------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--|--|--|--|--|--|--|
| Description | GNSS satellite fault detection                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |  |  |  |  |  |  |  |
| Firmware    | Supported on:<br>• u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |  |
| Type        | Output                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |  |  |  |  |  |  |  |
| Comment     | This message outputs the results of the Receiver Autonomous Integrity<br>Monitoring Algorithm (RAIM).<br>• The fields errLat, errLon and errAlt output the standard deviation of the<br>position calculation, using all satellites that pass the RAIM test successfully.<br>• The fields errLat, errLon and errAlt are only output if the RAIM process<br>passed successfully (i.e. no or successful edits happened). These fields are<br>never output if 4 or fewer satellites are used for the navigation calculation<br>(because, in such cases, integrity cannot be determined by the receiver<br>autonomously).<br>• The fields prob, bias and stdev are only output if at least one satellite failed in<br>the RAIM test. |  |  |  |  |  |  |  |
|             | If more than one satellites fail the RAIM test, only the information for the worst<br>satellite is output in this message.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |  |  |  |  |  |  |  |
|             | ID for CFG-MSG<br>Number of fields                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |  |  |  |  |  |  |  |

<span id="page-161-1"></span>

|       | Message Info                                                                                    |      | 0xF0 0x09<br>13                                    |           |  |                                                   |  |  |
|-------|-------------------------------------------------------------------------------------------------|------|----------------------------------------------------|-----------|--|---------------------------------------------------|--|--|
|       | Message Structure:                                                                              |      |                                                    |           |  |                                                   |  |  |
|       | \$xxGBS,time,errLat,errLon,errAlt,svid,prob,bias,stddev,systemId,signalId*cs <cr><lf></lf></cr> |      |                                                    |           |  |                                                   |  |  |
|       | Example:                                                                                        |      |                                                    |           |  |                                                   |  |  |
|       |                                                                                                 |      | \$GPGBS,235503.00,1.6,1.4,3.2,,,,,,*40             |           |  |                                                   |  |  |
|       |                                                                                                 |      | \$GPGBS,235458.00,1.4,1.3,3.1,03,,-21.4,3.8,1,0*5B |           |  |                                                   |  |  |
| Field | Name                                                                                            | Unit | Format                                             | Example   |  | Description                                       |  |  |
| No.   |                                                                                                 |      |                                                    |           |  |                                                   |  |  |
| 0     | xxGBS                                                                                           | -    | string                                             | \$GPGBS   |  | GBS Message ID (xx = current Talker ID, see       |  |  |
|       |                                                                                                 |      |                                                    |           |  | NMEA Talker IDs table)                            |  |  |
| 1     | time                                                                                            | -    | hhmmss.ss                                          | 235503.00 |  | UTC time to which this RAIM sentence              |  |  |
|       |                                                                                                 |      |                                                    |           |  | belongs. See section UTC representation in        |  |  |
|       |                                                                                                 |      |                                                    |           |  | the integration manual for details.               |  |  |
| 2     | errLat                                                                                          | m    | numeric                                            | 1.6       |  | Expected error in latitude                        |  |  |
| 3     | errLon                                                                                          | m    | numeric                                            | 1.4       |  | Expected error in longitude                       |  |  |
| 4     | errAlt                                                                                          | m    | numeric                                            | 3.2       |  | Expected error in altitude                        |  |  |
| 5     | svid                                                                                            | -    | numeric                                            | 03        |  | Satellite ID of most likely failed satellite      |  |  |
| 6     | prob                                                                                            | -    | numeric                                            | -         |  | Probability of missed detection: null (not        |  |  |
|       |                                                                                                 |      |                                                    |           |  | supported, fixed field)                           |  |  |
| 7     | bias                                                                                            | m    | numeric                                            | -21.4     |  | Estimated bias of most likely failed satellite (a |  |  |
|       |                                                                                                 |      |                                                    |           |  | priori residual)                                  |  |  |
| 8     | stddev                                                                                          | m    | numeric                                            | 3.8       |  | Standard deviation of estimated bias              |  |  |
| 9     | systemId                                                                                        | -    | hexadecimal                                        | 1         |  | NMEA-defined GNSS system ID, see Signal           |  |  |
|       |                                                                                                 |      |                                                    |           |  | Identifiers table (only available in NMEA 4.10    |  |  |
|       |                                                                                                 |      |                                                    |           |  | and later)                                        |  |  |
| 10    | signalId                                                                                        | -    | hexadecimal                                        | 0         |  | NMEA-defined GNSS signal ID, see Signal           |  |  |
|       |                                                                                                 |      |                                                    |           |  | Identifiers table (only available in NMEA 4.10    |  |  |
|       |                                                                                                 |      |                                                    |           |  | and later)                                        |  |  |
| 11    | cs                                                                                              | -    | hexadecimal                                        | *5B       |  | Checksum                                          |  |  |
| 12    | <cr><lf></lf></cr>                                                                              | -    | character                                          | -         |  | Carriage return and line feed                     |  |  |

## <span id="page-161-0"></span>**31.2.4 GGA**

#### **31.2.4.1 Global positioning system fix data**

| Message     | GGA                                                                                                                                                                                                                                                                                                                                                                                                |
|-------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Description | Global positioning system fix data                                                                                                                                                                                                                                                                                                                                                                 |
| Firmware    | Supported on:<br>• u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                                                                                                                                                                                                           |
| Type        | Output                                                                                                                                                                                                                                                                                                                                                                                             |
| Comment     | The output of this message is dependent on the currently selected datum<br>(default: WGS84). The NMEA specification indicates that the GGA message is<br>GPS-specific. However, when the receiver is configured for multi-GNSS, the<br>GGA message contents will be generated from the multi-GNSS solution. For<br>multi-GNSS use, it is recommended that the NMEA-GNS message is used<br>instead. |



|              | Time and position, together with GPS fixing-related data (number of satellites in<br>use, and the resulting HDOP, age of differential data if in use, etc.). |                  |  |  |  |  |  |
|--------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------|--|--|--|--|--|
|              |                                                                                                                                                              |                  |  |  |  |  |  |
|              | ID for CFG-MSG                                                                                                                                               | Number of fields |  |  |  |  |  |
| Message Info | 0xF0 0x00                                                                                                                                                    | 17               |  |  |  |  |  |

#### Message Structure:

\$xxGGA,time,lat,NS,lon,EW,quality,numSV,HDOP,alt,altUnit,sep,sepUnit,diffAge,diffStation\*cs<CR><LF>

| \$GPGGA,092725.00,4717.11399,N,00833.91590,E,1,08,1.01,499.6,M,48.0,M,,*5B |  |  |  |  |  |  |  |  |
|----------------------------------------------------------------------------|--|--|--|--|--|--|--|--|
|                                                                            |  |  |  |  |  |  |  |  |

| Field | Name               | Unit | Format      | Example     | Description                                      |
|-------|--------------------|------|-------------|-------------|--------------------------------------------------|
| No.   |                    |      |             |             |                                                  |
| 0     | xxGGA              | -    | string      | \$GPGGA     | GGA Message ID (xx = current Talker ID, see      |
|       |                    |      |             |             | NMEA Talker IDs table)                           |
| 1     | time               | -    | hhmmss.ss   | 092725.00   | UTC time. See section UTC representation in      |
|       |                    |      |             |             | the integration manual for details.              |
| 2     | lat                | -    | ddmm.       | 4717.11399  | Latitude (degrees and minutes), see format       |
|       |                    |      | mmmmm       |             | description                                      |
| 3     | NS                 | -    | character   | N           | North/South indicator                            |
| 4     | lon                | -    | dddmm.      | 00833.91590 | Longitude (degrees and minutes), see format      |
|       |                    |      | mmmmm       |             | description                                      |
| 5     | EW                 | -    | character   | E           | East/West indicator                              |
| 6     | quality            | -    | digit       | 1           | Quality indicator for position fix, see position |
|       |                    |      |             |             | fix flags description                            |
| 7     | numSV              | -    | numeric     | 08          | Number of satellites used (range: 0-12)          |
| 8     | HDOP               | -    | numeric     | 1.01        | Horizontal Dilution of Precision                 |
| 9     | alt                | m    | numeric     | 499.6       | Altitude above mean sea level                    |
| 10    | altUnit            | -    | character   | M           | Altitude units: M (meters, fixed field)          |
| 11    | sep                | m    | numeric     | 48.0        | Geoid separation: difference between ellipsoid   |
|       |                    |      |             |             | and mean sea level                               |
| 12    | sepUnit            | -    | character   | M           | Geoid separation units: M (meters, fixed field)  |
| 13    | diffAge            | s    | numeric     | -           | Age of differential corrections (null when       |
|       |                    |      |             |             | DGPS is not used)                                |
| 14    | diffStat           | -    | numeric     | -           | ID of station providing differential corrections |
|       | ion                |      |             |             | (null when DGPS is not used)                     |
| 15    | cs                 | -    | hexadecimal | *5B         | Checksum                                         |
| 16    | <cr><lf></lf></cr> | -    | character   | -           | Carriage return and line feed                    |

<span id="page-163-1"></span>

## <span id="page-163-0"></span>**31.2.5 GLL**

## **31.2.5.1 Latitude and longitude, with time of position fix and status**

| Message      | GLL                                |                                                              |                                                                                            |  |  |  |  |  |
|--------------|------------------------------------|--------------------------------------------------------------|--------------------------------------------------------------------------------------------|--|--|--|--|--|
| Description  |                                    | Latitude and longitude, with time of position fix and status |                                                                                            |  |  |  |  |  |
| Firmware     |                                    | Supported on:                                                |                                                                                            |  |  |  |  |  |
|              |                                    |                                                              | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |  |  |  |
|              |                                    | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                    |                                                                                            |  |  |  |  |  |
| Type         | Output                             |                                                              |                                                                                            |  |  |  |  |  |
| Comment      |                                    |                                                              | The output of this message is dependent on the currently selected datum                    |  |  |  |  |  |
|              | (default: WGS84)                   |                                                              |                                                                                            |  |  |  |  |  |
|              | -                                  |                                                              |                                                                                            |  |  |  |  |  |
|              | ID for CFG-MSG<br>Number of fields |                                                              |                                                                                            |  |  |  |  |  |
| Message Info | 0xF0 0x01                          | 10                                                           |                                                                                            |  |  |  |  |  |

Message Structure:

\$xxGLL,lat,NS,lon,EW,time,status,posMode\*cs<CR><LF>

#### Example:

\$GPGLL,4717.11364,N,00833.91565,E,092321.00,A,A\*60

| Field | Name               | Unit | Format      | Example     | Description                                  |
|-------|--------------------|------|-------------|-------------|----------------------------------------------|
| No.   |                    |      |             |             |                                              |
| 0     | xxGLL              | -    | string      | \$GPGLL     | GLL Message ID (xx = current Talker ID, see  |
|       |                    |      |             |             | NMEA Talker IDs table)                       |
| 1     | lat                | -    | ddmm.       | 4717.11364  | Latitude (degrees and minutes), see format   |
|       |                    |      | mmmmm       |             | description                                  |
| 2     | NS                 | -    | character   | N           | North/South indicator                        |
| 3     | lon                | -    | dddmm.      | 00833.91565 | Longitude (degrees and minutes), see format  |
|       |                    |      | mmmmm       |             | description                                  |
| 4     | EW                 | -    | character   | E           | East/West indicator                          |
| 5     | time               | -    | hhmmss.ss   | 092321.00   | UTC time. See section UTC representation in  |
|       |                    |      |             |             | the integration manual for details.          |
| 6     | status             | -    | character   | A           | Data validity status, see position fix flags |
|       |                    |      |             |             | description                                  |
| 7     | posMode            | -    | character   | A           | Positioning mode, see position fix flags     |
|       |                    |      |             |             | description (only available in NMEA 2.3 and  |
|       |                    |      |             |             | later)                                       |
| 8     | cs                 | -    | hexadecimal | *60         | Checksum                                     |
| 9     | <cr><lf></lf></cr> | -    | character   | -           | Carriage return and line feed                |

<span id="page-164-2"></span>

## <span id="page-164-0"></span>**31.2.6 GLQ**

#### **31.2.6.1 Poll a standard message (Talker ID GL)**

| Message      | GLQ                                |                                           |                                                                                            |  |  |  |  |
|--------------|------------------------------------|-------------------------------------------|--------------------------------------------------------------------------------------------|--|--|--|--|
| Description  |                                    | Poll a standard message (Talker ID GL)    |                                                                                            |  |  |  |  |
| Firmware     | Supported on:                      |                                           |                                                                                            |  |  |  |  |
|              |                                    |                                           | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |  |  |
|              |                                    | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |                                                                                            |  |  |  |  |
| Type         | Poll Request                       |                                           |                                                                                            |  |  |  |  |
| Comment      |                                    |                                           | Polls a standard NMEA message if the current Talker ID is GL                               |  |  |  |  |
|              | ID for CFG-MSG<br>Number of fields |                                           |                                                                                            |  |  |  |  |
| Message Info | 0xF0 0x43                          | 4                                         |                                                                                            |  |  |  |  |

#### Message Structure:

\$xxGLQ,msgId\*cs<CR><LF>

#### Example:

\$EIGLQ,RMC\*3A

| Field | Name               | Unit | Format      | Example | Description                                  |
|-------|--------------------|------|-------------|---------|----------------------------------------------|
| No.   |                    |      |             |         |                                              |
| 0     | xxGLQ              | -    | string      | \$EIGLQ | GLQ Message ID (xx = Talker ID of the device |
|       |                    |      |             |         | requesting the poll)                         |
| 1     | msgId              | -    | string      | RMC     | Message ID of the message to be polled       |
| 2     | cs                 | -    | hexadecimal | *3A     | Checksum                                     |
| 3     | <cr><lf></lf></cr> | -    | character   | -       | Carriage return and line feed                |

## <span id="page-164-1"></span>**31.2.7 GNQ**

#### **31.2.7.1 Poll a standard message (Talker ID GN)**

| Message      | GNQ                                |                                                                                            |                                                              |  |  |  |  |
|--------------|------------------------------------|--------------------------------------------------------------------------------------------|--------------------------------------------------------------|--|--|--|--|
| Description  |                                    | Poll a standard message (Talker ID GN)                                                     |                                                              |  |  |  |  |
| Firmware     |                                    | Supported on:                                                                              |                                                              |  |  |  |  |
|              |                                    | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                                                              |  |  |  |  |
|              |                                    | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |                                                              |  |  |  |  |
| Type         | Poll Request                       |                                                                                            |                                                              |  |  |  |  |
| Comment      |                                    |                                                                                            | Polls a standard NMEA message if the current Talker ID is GN |  |  |  |  |
|              | ID for CFG-MSG<br>Number of fields |                                                                                            |                                                              |  |  |  |  |
| Message Info | 0xF0 0x42                          | 4                                                                                          |                                                              |  |  |  |  |

#### Message Structure:

\$xxGNQ,msgId\*cs<CR><LF>

#### Example:

\$EIGNQ,RMC\*3A

| Field | Name  | Unit | Format      | Example | Description                                                          |
|-------|-------|------|-------------|---------|----------------------------------------------------------------------|
| No.   |       |      |             |         |                                                                      |
| 0     | xxGNQ | -    | string      | \$EIGNQ | GNQ Message ID (xx = Talker ID of the device<br>requesting the poll) |
| 1     | msgId | -    | string      | RMC     | Message ID of the message to be polled                               |
| 2     | cs    | -    | hexadecimal | *3A     | Checksum                                                             |

<span id="page-165-1"></span>

GNQ continued

| Field | Name               | Unit | Format    | Example | Description                   |
|-------|--------------------|------|-----------|---------|-------------------------------|
| No.   |                    |      |           |         |                               |
| 3     | <cr><lf></lf></cr> | -    | character | -       | Carriage return and line feed |

## <span id="page-165-0"></span>**31.2.8 GNS**

## **31.2.8.1 GNSS fix data**

| Message      | GNS              |                                           |                                                                                            |  |  |  |
|--------------|------------------|-------------------------------------------|--------------------------------------------------------------------------------------------|--|--|--|
| Description  | GNSS fix data    |                                           |                                                                                            |  |  |  |
| Firmware     | Supported on:    |                                           |                                                                                            |  |  |  |
|              |                  |                                           | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |  |
|              |                  | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |                                                                                            |  |  |  |
| Type         | Output           |                                           |                                                                                            |  |  |  |
| Comment      |                  |                                           | The output of this message is dependent on the currently selected datum                    |  |  |  |
|              | (default: WGS84) |                                           |                                                                                            |  |  |  |
|              |                  |                                           | Time and position, together with GNSS fixing-related data (number of satellites            |  |  |  |
|              |                  |                                           | in use, and the resulting HDOP, age of differential data if in use, etc.).                 |  |  |  |
|              | ID for CFG-MSG   | Number of fields                          |                                                                                            |  |  |  |
| Message Info | 0xF0 0x0D        | 16                                        |                                                                                            |  |  |  |

## Message Structure:

\$xxGNS,time,lat,NS,lon,EW,posMode,numSV,HDOP,alt,sep,diffAge,diffStation,navStatus\*cs<CR><LF>

#### Example:

\$GNGNS,103600.01,5114.51176,N,00012.29380,W,ANNN,07,1.18,111.5,45.6,,,V\*00

\$GNGNS,122310.2,3722.425671,N,12258.856215,W,DAAA,14,0.9,1005.543,6.5,,,V\*0E

\$GPGNS,122310.2,,,,,,07,,,,5.2,23,V\*02

| Field | Name    | Unit | Format    | Example     | Description                                   |
|-------|---------|------|-----------|-------------|-----------------------------------------------|
| No.   |         |      |           |             |                                               |
| 0     | xxGNS   | -    | string    | \$GPGNS     | GNS Message ID (xx = current Talker ID, see   |
|       |         |      |           |             | NMEA Talker IDs table)                        |
| 1     | time    | -    | hhmmss.ss | 091547.00   | UTC time. See section UTC representation in   |
|       |         |      |           |             | the integration manual for details.           |
| 2     | lat     | -    | ddmm.     | 5114.50897  | Latitude (degrees and minutes), see format    |
|       |         |      | mmmmm     |             | description                                   |
| 3     | NS      | -    | character | N           | North/South indicator                         |
| 4     | lon     | -    | dddmm.    | 00012.28663 | Longitude (degrees and minutes), see format   |
|       |         |      | mmmmm     |             | description                                   |
| 5     | EW      | -    | character | E           | East/West indicator                           |
| 6     | posMode | -    | character | AAAA        | Positioning mode, see position fix flags      |
|       |         |      |           |             | description. Four first characters are in the |
|       |         |      |           |             | following order for GPS, GLONASS, Galileo     |
|       |         |      |           |             | and BeiDou. In NMEA GNS, u-blox uses a non    |
|       |         |      |           |             | standard implementation where same single     |
|       |         |      |           |             | status is reported for all enabled and not    |
|       |         |      |           |             | filtered out constellations.                  |
| 7     | numSV   | -    | numeric   | 10          | Number of satellites used (range: 0-99)       |

<span id="page-166-1"></span>

GNS continued

| Field | Name               | Unit | Format      | Example | Description                                      |
|-------|--------------------|------|-------------|---------|--------------------------------------------------|
| No.   |                    |      |             |         |                                                  |
| 8     | HDOP               | -    | numeric     | 0.83    | Horizontal Dilution of Precision                 |
| 9     | alt                | m    | numeric     | 111.1   | Altitude above mean sea level                    |
| 10    | sep                | m    | numeric     | 45.6    | Geoid separation: difference between ellipsoid   |
|       |                    |      |             |         | and mean sea level                               |
| 11    | diffAge            | s    | numeric     | -       | Age of differential corrections (null when       |
|       |                    |      |             |         | DGPS is not used)                                |
| 12    | diffStat           | -    | numeric     | -       | ID of station providing differential corrections |
|       | ion                |      |             |         | (null when DGPS is not used)                     |
| 13    | navStatu           | -    | character   | V       | Navigational status indicator: V (Equipment is   |
|       | s                  |      |             |         | not providing navigational status information,   |
|       |                    |      |             |         | fixed field, only available in NMEA 4.10 and     |
|       |                    |      |             |         | later)                                           |
| 14    | cs                 | -    | hexadecimal | *71     | Checksum                                         |
| 15    | <cr><lf></lf></cr> | -    | character   | -       | Carriage return and line feed                    |

## <span id="page-166-0"></span>**31.2.9 GPQ**

#### **31.2.9.1 Poll a standard message (Talker ID GP)**

| Message      | GPQ                                |                                                                                            |                                                              |  |  |  |
|--------------|------------------------------------|--------------------------------------------------------------------------------------------|--------------------------------------------------------------|--|--|--|
| Description  |                                    | Poll a standard message (Talker ID GP)                                                     |                                                              |  |  |  |
| Firmware     |                                    | Supported on:                                                                              |                                                              |  |  |  |
|              |                                    | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                                                              |  |  |  |
|              |                                    | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |                                                              |  |  |  |
| Type         | Poll Request                       |                                                                                            |                                                              |  |  |  |
| Comment      |                                    |                                                                                            | Polls a standard NMEA message if the current Talker ID is GP |  |  |  |
|              | ID for CFG-MSG<br>Number of fields |                                                                                            |                                                              |  |  |  |
| Message Info | 0xF0 0x40                          | 4                                                                                          |                                                              |  |  |  |

#### Message Structure:

\$xxGPQ,msgId\*cs<CR><LF>

## Example:

## \$EIGPQ,RMC\*3A

| Field | Name               | Unit | Format      | Example | Description                                  |
|-------|--------------------|------|-------------|---------|----------------------------------------------|
| No.   |                    |      |             |         |                                              |
| 0     | xxGPQ              | -    | string      | \$EIGPQ | GPQ Message ID (xx = Talker ID of the device |
|       |                    |      |             |         | requesting the poll)                         |
| 1     | msgId              | -    | string      | RMC     | Message ID of the message to be polled       |
| 2     | cs                 | -    | hexadecimal | *3A     | Checksum                                     |
| 3     | <cr><lf></lf></cr> | -    | character   | -       | Carriage return and line feed                |

<span id="page-167-1"></span>

## <span id="page-167-0"></span>**31.2.10 GRS**

#### **31.2.10.1 GNSS range residuals**

| Message      | GRS                  |                                                          |                                                                                            |  |  |  |
|--------------|----------------------|----------------------------------------------------------|--------------------------------------------------------------------------------------------|--|--|--|
| Description  | GNSS range residuals |                                                          |                                                                                            |  |  |  |
| Firmware     |                      | Supported on:                                            |                                                                                            |  |  |  |
|              |                      |                                                          | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |  |
|              |                      | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                |                                                                                            |  |  |  |
| Type         | Output               |                                                          |                                                                                            |  |  |  |
| Comment      |                      | This message relates to associated GGA and GSA messages. |                                                                                            |  |  |  |
|              |                      |                                                          | If less than 12 SVs are available, the remaining fields are output empty. If more          |  |  |  |
|              |                      |                                                          | than 12 SVs are used, only the residuals of the first 12 SVs are output, in order to       |  |  |  |
|              |                      |                                                          | remain consistent with the NMEA standard.                                                  |  |  |  |
|              |                      |                                                          | In a multi-GNSS system this message will be output multiple times, once for                |  |  |  |
|              | each GNSS.           |                                                          |                                                                                            |  |  |  |
|              | ID for CFG-MSG       | Number of fields                                         |                                                                                            |  |  |  |
| Message Info | 0xF0 0x06            | 19                                                       |                                                                                            |  |  |  |

## Message Structure:

\$xxGRS,time,mode{,residual},systemId,signalId\*cs<CR><LF>

### Example:

\$GNGRS,104148.00,1,2.6,2.2,-1.6,-1.1,-1.7,-1.5,5.8,1.7,,,,,1,1\*52

\$GNGRS,104148.00,1,,0.0,2.5,0.0,,2.8,,,,,,,1,5\*52

| Field                              | Name                  | Unit | Format      | Example   | Description                                    |
|------------------------------------|-----------------------|------|-------------|-----------|------------------------------------------------|
| No.                                |                       |      |             |           |                                                |
| 0                                  | xxGRS                 | -    | string      | \$GPGRS   | GRS Message ID (xx = current Talker ID, see    |
|                                    |                       |      |             |           | NMEA Talker IDs table)                         |
| 1                                  | time                  | -    | hhmmss.ss   | 082632.00 | UTC time of associated position fix. See       |
|                                    |                       |      |             |           | section UTC representation in the integration  |
|                                    |                       |      |             |           | manual for details.                            |
| 2                                  | mode                  | -    | digit       | 1         | Computation method used:                       |
|                                    |                       |      |             |           | 1 = Residuals were recomputed after the GGA    |
|                                    |                       |      |             |           | position was computed (fixed)                  |
| Start of repeated block (12 times) |                       |      |             |           |                                                |
| 3 +                                | residual              | m    | numeric     | 0.54      | Range residuals for SVs used in navigation.    |
| 1*N                                |                       |      |             |           | The SV order matches the order from the        |
|                                    |                       |      |             |           | GSA sentence                                   |
|                                    | End of repeated block |      |             |           |                                                |
| 15                                 | systemId              | -    | hexadecimal | 1         | NMEA-defined GNSS system ID, see Signal        |
|                                    |                       |      |             |           | Identifiers table (only available in NMEA 4.10 |
|                                    |                       |      |             |           | and later)                                     |
| 16                                 | signalId              | -    | hexadecimal | 0         | NMEA-defined GNSS signal ID, see Signal        |
|                                    |                       |      |             |           | Identifiers table (only available in NMEA 4.10 |
|                                    |                       |      |             |           | and later)                                     |
| 17                                 | cs                    | -    | hexadecimal | *70       | Checksum                                       |
| 18                                 | <cr><lf></lf></cr>    | -    | character   | -         | Carriage return and line feed                  |

<span id="page-168-1"></span>

## <span id="page-168-0"></span>**31.2.11 GSA**

## **31.2.11.1 GNSS DOP and active satellites**

| Message      | GSA                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                  |  |  |  |  |
|--------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------|--|--|--|--|
| Description  | GNSS DOP and active satellites                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                  |  |  |  |  |
| Firmware     | Supported on:<br>• u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                                                                                                                                                                                                                                                                                                                                            |                  |  |  |  |  |
| Type         | Output                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                  |  |  |  |  |
| Comment      | The GNSS receiver operating mode, satellites used for navigation, and DOP<br>values.<br>• If less than 12 SVs are used for navigation, the remaining fields are left empty.<br>If more than 12 SVs are used for navigation, only the IDs of the first 12 are<br>output.<br>• The SV numbers (fields 'svid') are in the range of 1 to 32 for GPS satellites, and<br>33 to 64 for SBAS satellites (33 = SBAS PRN 120, 34 = SBAS PRN 121, and so<br>on)<br>In a multi-GNSS system this message will be output multiple times, once for |                  |  |  |  |  |
|              | each GNSS.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |                  |  |  |  |  |
|              | ID for CFG-MSG                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Number of fields |  |  |  |  |
| Message Info | 0xF0 0x02                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 21               |  |  |  |  |

#### Message Structure:

\$xxGSA,opMode,navMode{,svid},PDOP,HDOP,VDOP,systemId\*cs<CR><LF>

|  | \$GPGSA,A,3,23,29,07,08,09,18,26,28,,,,,1.94,1.18,1.54,1*0D |
|--|-------------------------------------------------------------|

| Field<br>No. | Name                               | Unit | Format      | Example | Description                                                                                                             |  |
|--------------|------------------------------------|------|-------------|---------|-------------------------------------------------------------------------------------------------------------------------|--|
| 0            | xxGSA                              | -    | string      | \$GPGSA | GSA Message ID (xx = current Talker ID, see<br>NMEA Talker IDs table)                                                   |  |
| 1            | opMode                             | -    | character   | A       | Operation mode:<br>M = Manually set to operate in 2D or 3D mode<br>A = Automatically switching between 2D or<br>3D mode |  |
| 2            | navMode                            | -    | digit       | 3       | Navigation mode, see position fix flags<br>description                                                                  |  |
|              | Start of repeated block (12 times) |      |             |         |                                                                                                                         |  |
| 3 +<br>1*N   | svid                               | -    | numeric     | 29      | Satellite number                                                                                                        |  |
|              | End of repeated block              |      |             |         |                                                                                                                         |  |
| 15           | PDOP                               | -    | numeric     | 1.94    | Position dilution of precision                                                                                          |  |
| 16           | HDOP                               | -    | numeric     | 1.18    | Horizontal dilution of precision                                                                                        |  |
| 17           | VDOP                               | -    | numeric     | 1.54    | Vertical dilution of precision                                                                                          |  |
| 18           | systemId                           | -    | hexadecimal | 1       | NMEA-defined GNSS system ID, see Signal<br>Identifiers table (only available in NMEA 4.10<br>and later)                 |  |
| 19           | cs                                 | -    | hexadecimal | *0D     | Checksum                                                                                                                |  |

<span id="page-169-1"></span>

GSA continued

| Field | Name               | Unit | Format    | Example | Description                   |
|-------|--------------------|------|-----------|---------|-------------------------------|
| No.   |                    |      |           |         |                               |
| 20    | <cr><lf></lf></cr> | -    | character | -       | Carriage return and line feed |

## <span id="page-169-0"></span>**31.2.12 GST**

#### **31.2.12.1 GNSS pseudorange error statistics**

| Message      | GST            |                                           |                                                                                            |  |  |
|--------------|----------------|-------------------------------------------|--------------------------------------------------------------------------------------------|--|--|
| Description  |                | GNSS pseudorange error statistics         |                                                                                            |  |  |
| Firmware     | Supported on:  |                                           |                                                                                            |  |  |
|              |                |                                           | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |
|              |                | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |                                                                                            |  |  |
| Type         | Output         |                                           |                                                                                            |  |  |
| Comment      |                |                                           | This message reports statistical information on the quality of the position                |  |  |
|              | solution.      |                                           |                                                                                            |  |  |
|              | ID for CFG-MSG | Number of fields                          |                                                                                            |  |  |
| Message Info | 0xF0 0x07      | 11                                        |                                                                                            |  |  |

#### Message Structure:

\$xxGST,time,rangeRms,stdMajor,stdMinor,orient,stdLat,stdLong,stdAlt\*cs<CR><LF>

#### Example:

\$GPGST,082356.00,1.8,,,,1.7,1.3,2.2\*7E

| Field | Name               | Unit | Format      | Example   | Description                                   |
|-------|--------------------|------|-------------|-----------|-----------------------------------------------|
| No.   |                    |      |             |           |                                               |
| 0     | xxGST              | -    | string      | \$GPGST   | GST Message ID (xx = current Talker ID, see   |
|       |                    |      |             |           | NMEA Talker IDs table)                        |
| 1     | time               | -    | hhmmss.ss   | 082356.00 | UTC time of associated position fix. See      |
|       |                    |      |             |           | section UTC representation in the integration |
|       |                    |      |             |           | manual for details.                           |
| 2     | rangeRms           | m    | numeric     | 1.8       | RMS value of the standard deviation of the    |
|       |                    |      |             |           | ranges                                        |
| 3     | stdMajor           | m    | numeric     | -         | Standard deviation of semi-major axis (only   |
|       |                    |      |             |           | supported in ADR 4.10 and later)              |
| 4     | stdMinor           | m    | numeric     | -         | Standard deviation of semi-minor axis (only   |
|       |                    |      |             |           | supported in ADR 4.10 and later)              |
| 5     | orient             | deg  | numeric     | -         | Orientation of semi-major axis (only          |
|       |                    |      |             |           | supported in ADR 4.10 and later)              |
| 6     | stdLat             | m    | numeric     | 1.7       | Standard deviation of latitude error          |
| 7     | stdLong            | m    | numeric     | 1.3       | Standard deviation of longitude error         |
| 8     | stdAlt             | m    | numeric     | 2.2       | Standard deviation of altitude error          |
| 9     | cs                 | -    | hexadecimal | *7E       | Checksum                                      |
| 10    | <cr><lf></lf></cr> | -    | character   | -         | Carriage return and line feed                 |

<span id="page-170-1"></span>

## <span id="page-170-0"></span>**31.2.13 GSV**

#### **31.2.13.1 GNSS satellites in view**

| Message      | GSV                     |                                           |                                                                                            |  |
|--------------|-------------------------|-------------------------------------------|--------------------------------------------------------------------------------------------|--|
| Description  | GNSS satellites in view |                                           |                                                                                            |  |
| Firmware     | Supported on:           |                                           |                                                                                            |  |
|              |                         |                                           | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |
|              |                         | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |                                                                                            |  |
| Type         | Output                  |                                           |                                                                                            |  |
| Comment      |                         |                                           | The number of satellites in view, together with each SV ID, elevation azimuth,             |  |
|              |                         |                                           | and signal strength (C/No) value. Only four satellite details are transmitted in           |  |
|              | one message.            |                                           |                                                                                            |  |
|              |                         |                                           | In a multi-GNSS system sets of GSV messages will be output multiple times,                 |  |
|              | one set for each GNSS.  |                                           |                                                                                            |  |
|              | ID for CFG-MSG          | Number of fields                          |                                                                                            |  |
| Message Info | 0xF0 0x03               | 816                                       |                                                                                            |  |

Message Structure:

\$xxGSV,numMsg,msgNum,numSV{,svid,elv,az,cno},signalId\*cs<CR><LF>

#### Example:

\$GPGSV,3,1,09,09,,,17,10,,,40,12,,,49,13,,,35,1\*6F

```
$GPGSV,3,2,09,15,,,44,17,,,45,19,,,44,24,,,50,1*64
```

\$GPGSV,3,3,09,25,,,40,1\*6E

\$GPGSV,1,1,03,12,,,42,24,,,47,32,,,37,5\*66

\$GAGSV,1,1,00,2\*76

| Field | Name                               | Unit | Format  | Example | Description                                    |
|-------|------------------------------------|------|---------|---------|------------------------------------------------|
| No.   |                                    |      |         |         |                                                |
| 0     | xxGSV                              | -    | string  | \$GPGSV | GSV Message ID (xx = GSV Talker ID, see        |
|       |                                    |      |         |         | NMEA Talker IDs table). Talker ID GN shall not |
|       |                                    |      |         |         | be used.                                       |
| 1     | numMsg                             | -    | digit   | 3       | Number of messages, total number of GSV        |
|       |                                    |      |         |         | messages being output (range: 1-9)             |
| 2     | msgNum                             | -    | digit   | 1       | Number of this message (range: 1-numMsg)       |
| 3     | numSV                              | -    | numeric | 10      | Number of known satellites in view regarding   |
|       |                                    |      |         |         | both the talker ID and the signalId            |
|       | Start of repeated block (14 times) |      |         |         |                                                |
| 4 +   | svid                               | -    | numeric | 23      | Satellite ID                                   |
| 4*N   |                                    |      |         |         |                                                |
| 5 +   | elv                                | deg  | numeric | 38      | Elevation (<= 90)                              |
| 4*N   |                                    |      |         |         |                                                |
| 6 +   | az                                 | deg  | numeric | 230     | Azimuth (range: 0-359)                         |
| 4*N   |                                    |      |         |         |                                                |
| 7 +   | cno                                | dB   | numeric | 44      | Signal strength (C/N0, range: 0-99), null when |
| 4*N   |                                    | Hz   |         |         | not tracking                                   |
|       | End of repeated block              |      |         |         |                                                |

<span id="page-171-1"></span>

GSV continued

| Field | Name               | Unit | Format      | Example | Description                                    |
|-------|--------------------|------|-------------|---------|------------------------------------------------|
| No.   |                    |      |             |         |                                                |
| 5     | signalId           | -    | hexadecimal | 0       | NMEA-defined GNSS signal ID, see Signal        |
| 16    |                    |      |             |         | Identifiers table (only available in NMEA 4.10 |
|       |                    |      |             |         | and later)                                     |
| 6     | cs                 | -    | hexadecimal | *7F     | Checksum                                       |
| 16    |                    |      |             |         |                                                |
| 7     | <cr><lf></lf></cr> | -    | character   | -       | Carriage return and line feed                  |
| 16    |                    |      |             |         |                                                |

## <span id="page-171-0"></span>**31.2.14 RMC**

## **31.2.14.1 Recommended minimum data**

| Message      | RMC              |                                           |                                                                                            |
|--------------|------------------|-------------------------------------------|--------------------------------------------------------------------------------------------|
| Description  |                  | Recommended minimum data                  |                                                                                            |
| Firmware     | Supported on:    |                                           |                                                                                            |
|              |                  |                                           | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |
|              |                  | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |                                                                                            |
| Type         | Output           |                                           |                                                                                            |
| Comment      |                  |                                           | The output of this message is dependent on the currently selected datum                    |
|              | (default: WGS84) |                                           |                                                                                            |
|              |                  |                                           | The recommended minimum sentence defined by NMEA for GNSS system data.                     |
|              | ID for CFG-MSG   | Number of fields                          |                                                                                            |
| Message Info | 0xF0 0x04        | 16                                        |                                                                                            |

## Message Structure:

\$xxRMC,time,status,lat,NS,lon,EW,spd,cog,date,mv,mvEW,posMode,navStatus\*cs<CR><LF>

#### Example:

\$GPRMC,083559.00,A,4717.11437,N,00833.91522,E,0.004,77.52,091202,,,A,V\*57

| Field | Name   | Unit | Format    | Example     | Description                                  |
|-------|--------|------|-----------|-------------|----------------------------------------------|
| No.   |        |      |           |             |                                              |
| 0     | xxRMC  | -    | string    | \$GPRMC     | RMC Message ID (xx = current Talker ID, see  |
|       |        |      |           |             | NMEA Talker IDs table)                       |
| 1     | time   | -    | hhmmss.ss | 083559.00   | UTC time. See section UTC representation in  |
|       |        |      |           |             | the integration manual for details.          |
| 2     | status | -    | character | A           | Data validity status, see position fix flags |
|       |        |      |           |             | description                                  |
| 3     | lat    | -    | ddmm.     | 4717.11437  | Latitude (degrees and minutes), see format   |
|       |        |      | mmmmm     |             | description                                  |
| 4     | NS     | -    | character | N           | North/South indicator                        |
| 5     | lon    | -    | dddmm.    | 00833.91522 | Longitude (degrees and minutes), see format  |
|       |        |      | mmmmm     |             | description                                  |
| 6     | EW     | -    | character | E           | East/West indicator                          |
| 7     | spd    | kno  | numeric   | 0.004       | Speed over ground                            |
|       |        | ts   |           |             |                                              |
| 8     | cog    | deg  | numeric   | 77.52       | Course over ground                           |

<span id="page-172-1"></span>

RMC continued

| Field | Name               | Unit | Format      | Example | Description                                    |
|-------|--------------------|------|-------------|---------|------------------------------------------------|
| No.   |                    |      |             |         |                                                |
| 9     | date               | -    | ddmmyy      | 091202  | Date in day, month, year format. See section   |
|       |                    |      |             |         | UTC representation in the integration manual   |
|       |                    |      |             |         | for details.                                   |
| 10    | mv                 | deg  | numeric     | -       | Magnetic variation value. Only supported in    |
|       |                    |      |             |         | ADR 4.10 and later                             |
| 11    | mvEW               | -    | character   | -       | Magnetic variation E/W indicator. Only         |
|       |                    |      |             |         | supported in ADR 4.10 and later                |
| 12    | posMode            | -    | character   | A       | Mode Indicator, see position fix flags         |
|       |                    |      |             |         | description (only available in NMEA 2.3 and    |
|       |                    |      |             |         | later)                                         |
| 13    | navStatu           | -    | character   | V       | Navigational status indicator: V (Equipment is |
|       | s                  |      |             |         | not providing navigational status information, |
|       |                    |      |             |         | fixed field, only available in NMEA 4.10 and   |
|       |                    |      |             |         | later)                                         |
| 14    | cs                 | -    | hexadecimal | *57     | Checksum                                       |
| 15    | <cr><lf></lf></cr> | -    | character   | -       | Carriage return and line feed                  |

## <span id="page-172-0"></span>**31.2.15 THS**

## **31.2.15.1 True heading and status**

| Message      | THS                     |                  |                                                                                            |  |  |
|--------------|-------------------------|------------------|--------------------------------------------------------------------------------------------|--|--|
| Description  | True heading and status |                  |                                                                                            |  |  |
| Firmware     | Supported on:           |                  |                                                                                            |  |  |
|              |                         |                  | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |
|              |                         |                  | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 (only with ADR products)                         |  |  |
| Type         | Output                  |                  |                                                                                            |  |  |
| Comment      |                         |                  | Actual vehicle heading in degrees produced by any device or system producing               |  |  |
|              |                         |                  | true heading. This sentence includes a Mode indicator field providing critical             |  |  |
|              |                         |                  | safety-related information about the heading data, and replaces the HDT                    |  |  |
|              | sentence.               |                  |                                                                                            |  |  |
|              | ID for CFG-MSG          | Number of fields |                                                                                            |  |  |
| Message Info | 0xF0 0x0E               | 5                |                                                                                            |  |  |

#### Message Structure:

\$xxTHS,headt,mi\*cs<CR><LF>

|       | \$GPTHS,77.52,E*32 |      |         |         |                                             |  |  |
|-------|--------------------|------|---------|---------|---------------------------------------------|--|--|
| Field | Name               | Unit | Format  | Example | Description                                 |  |  |
| No.   |                    |      |         |         |                                             |  |  |
| 0     | xxTHS              | -    | string  | \$GPTHS | THS Message ID (xx = current Talker ID, see |  |  |
|       |                    |      |         |         | NMEA Talker IDs table)                      |  |  |
| 1     | headt              | deg  | numeric | 77.52   | Heading of vehicle (true)                   |  |  |
|       |                    | ree  |         |         |                                             |  |  |
|       |                    | s    |         |         |                                             |  |  |

<span id="page-173-1"></span>

THS continued

| Field | Name               | Unit | Format      | Example | Description                    |
|-------|--------------------|------|-------------|---------|--------------------------------|
| No.   |                    |      |             |         |                                |
| 2     | mi                 | -    | character   | E       | Mode indicator:                |
|       |                    |      |             |         | A = Autonomous                 |
|       |                    |      |             |         | E = Estimated (dead reckoning) |
|       |                    |      |             |         | M = Manual input               |
|       |                    |      |             |         | S = Simulator                  |
|       |                    |      |             |         | V = Data not valid             |
| 3     | cs                 | -    | hexadecimal | *32     | Checksum                       |
| 4     | <cr><lf></lf></cr> | -    | character   | -       | Carriage return and line feed  |

## <span id="page-173-0"></span>**31.2.16 TXT**

#### **31.2.16.1 Text transmission**

| Message      | TXT               |                                           |                                                                                            |
|--------------|-------------------|-------------------------------------------|--------------------------------------------------------------------------------------------|
| Description  | Text transmission |                                           |                                                                                            |
| Firmware     | Supported on:     |                                           |                                                                                            |
|              |                   |                                           | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |
|              |                   | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |                                                                                            |
| Type         | Output            |                                           |                                                                                            |
| Comment      | -                 |                                           |                                                                                            |
|              | ID for CFG-MSG    | Number of fields                          |                                                                                            |
| Message Info | 0xF0 0x41         | 7                                         |                                                                                            |

#### Message Structure:

\$xxTXT,numMsg,msgNum,msgType,text\*cs<CR><LF>

#### Example:

\$GPTXT,01,01,02,u-blox ag - www.u-blox.com\*50

| \$GPTXT,01,01,02,ANTARIS ATR0620 HW 00000040*67 |  |  |
|-------------------------------------------------|--|--|

| Field | Name    | Unit | Format      | Example     | Description                                   |
|-------|---------|------|-------------|-------------|-----------------------------------------------|
| No.   |         |      |             |             |                                               |
| 0     | xxTXT   | -    | string      | \$GPTXT     | TXT Message ID (xx = current Talker ID, see   |
|       |         |      |             |             | NMEA Talker IDs table)                        |
| 1     | numMsg  | -    | numeric     | 01          | Total number of messages in this              |
|       |         |      |             |             | transmission (range: 1-99)                    |
| 2     | msgNum  | -    | numeric     | 01          | Message number in this transmission (range:   |
|       |         |      |             |             | 1-numMsg)                                     |
| 3     | msgType | -    | numeric     | 02          | Text identifier (u-blox receivers specify the |
|       |         |      |             |             | type of the message with this number):        |
|       |         |      |             |             | 00: Error                                     |
|       |         |      |             |             | 01: Warning                                   |
|       |         |      |             |             | 02: Notice                                    |
|       |         |      |             |             | 07: User                                      |
| 4     | text    | -    | string      | www.u-blox. | Any ASCII text                                |
|       |         |      |             | com         |                                               |
| 5     | cs      | -    | hexadecimal | *67         | Checksum                                      |

<span id="page-174-1"></span>

TXT continued

| Field | Name               | Unit | Format    | Example | Description                   |
|-------|--------------------|------|-----------|---------|-------------------------------|
| No.   |                    |      |           |         |                               |
| 6     | <cr><lf></lf></cr> | -    | character | -       | Carriage return and line feed |

## <span id="page-174-0"></span>**31.2.17 VLW**

### **31.2.17.1 Dual ground/water distance**

| Message      | VLW            |                                           |                                                                                            |  |  |  |
|--------------|----------------|-------------------------------------------|--------------------------------------------------------------------------------------------|--|--|--|
| Description  |                | Dual ground/water distance                |                                                                                            |  |  |  |
| Firmware     | Supported on:  |                                           |                                                                                            |  |  |  |
|              |                |                                           | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |  |
|              |                | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |                                                                                            |  |  |  |
| Type         | Output         |                                           |                                                                                            |  |  |  |
| Comment      |                |                                           | The distance traveled, relative to the water and over the ground. This message             |  |  |  |
|              |                |                                           | relates to the odometer feature detailed in the integration manual.                        |  |  |  |
|              |                |                                           | Contrarily to the NMEA standard, if NMEA 2.1 or 2.3 are configured, the                    |  |  |  |
|              |                |                                           | sentence will additionally contain tgd, tgdUnit, gd and gdUnit fields.                     |  |  |  |
|              | ID for CFG-MSG | Number of fields                          |                                                                                            |  |  |  |
| Message Info | 0xF0 0x0F      | 11                                        |                                                                                            |  |  |  |

## Message Structure:

\$xxVLW,twd,twdUnit,wd,wdUnit,tgd,tgdUnit,gd,gdUnit\*cs<CR><LF>

|       | \$GPVLW,,N,,N,15.8,N,1.2,N*06 |      |             |         |                                                 |  |  |
|-------|-------------------------------|------|-------------|---------|-------------------------------------------------|--|--|
| Field | Name                          | Unit | Format      | Example | Description                                     |  |  |
| No.   |                               |      |             |         |                                                 |  |  |
| 0     | xxVLW                         | -    | string      | \$GPVLW | VLW Message ID (xx = current Talker ID, see     |  |  |
|       |                               |      |             |         | NMEA Talker IDs table)                          |  |  |
| 1     | twd                           | nmi  | numeric     | -       | Total cumulative water distance: null (fixed    |  |  |
|       |                               |      |             |         | field)                                          |  |  |
| 2     | twdUnit                       | -    | character   | N       | Total cumulative water distance units: N        |  |  |
|       |                               |      |             |         | (nautical miles, fixed field)                   |  |  |
| 3     | wd                            | nmi  | numeric     | -       | Water distance since reset: null (fixed field)  |  |  |
| 4     | wdUnit                        | -    | character   | N       | Water distance since reset units: N (nautical   |  |  |
|       |                               |      |             |         | miles, fixed field)                             |  |  |
| 5     | tgd                           | nmi  | numeric     | 15.8    | Total cumulative ground distance (only          |  |  |
|       |                               |      |             |         | available in NMEA 4.00 and later)               |  |  |
| 6     | tgdUnit                       | -    | character   | N       | Total cumulative ground distance units: N       |  |  |
|       |                               |      |             |         | (nautical miles, fixed field, only available in |  |  |
|       |                               |      |             |         | NMEA 4.00 and later)                            |  |  |
| 7     | gd                            | nmi  | numeric     | 1.2     | Ground distance since reset (only available in  |  |  |
|       |                               |      |             |         | NMEA 4.00 and later)                            |  |  |
| 8     | gdUnit                        | -    | character   | N       | Ground distance since reset units: N (nautical  |  |  |
|       |                               |      |             |         | miles, fixed field, only available in NMEA 4.00 |  |  |
|       |                               |      |             |         | and later)                                      |  |  |
| 9     | cs                            | -    | hexadecimal | *06     | Checksum                                        |  |  |
| 10    | <cr><lf></lf></cr>            | -    | character   | -       | Carriage return and line feed                   |  |  |

<span id="page-175-1"></span>

## <span id="page-175-0"></span>**31.2.18 VTG**

#### **31.2.18.1 Course over ground and ground speed**

| Message      | VTG            |                                                                                            |                                                                            |  |  |  |
|--------------|----------------|--------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|--|--|--|
| Description  |                | Course over ground and ground speed                                                        |                                                                            |  |  |  |
| Firmware     | Supported on:  |                                                                                            |                                                                            |  |  |  |
|              |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                                                                            |  |  |  |
|              |                | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |                                                                            |  |  |  |
| Type         | Output         |                                                                                            |                                                                            |  |  |  |
| Comment      |                |                                                                                            | Velocity is given as course over ground (COG) and speed over ground (SOG). |  |  |  |
|              | ID for CFG-MSG | Number of fields                                                                           |                                                                            |  |  |  |
| Message Info | 0xF0 0x05      | 12                                                                                         |                                                                            |  |  |  |

#### Message Structure:

\$xxVTG,cogt,cogtUnit,cogm,cogmUnit,sogn,sognUnit,sogk,sogkUnit,posMode\*cs<CR><LF>

#### Example:

\$GPVTG,77.52,T,,M,0.004,N,0.008,K,A\*06

| Field | Name               | Unit | Format      | Example | Description                                     |
|-------|--------------------|------|-------------|---------|-------------------------------------------------|
| No.   |                    |      |             |         |                                                 |
| 0     | xxVTG              | -    | string      | \$GPVTG | VTG Message ID (xx = current Talker ID, see     |
|       |                    |      |             |         | NMEA Talker IDs table)                          |
| 1     | cogt               | deg  | numeric     | 77.52   | Course over ground (true)                       |
|       |                    | ree  |             |         |                                                 |
|       |                    | s    |             |         |                                                 |
| 2     | cogtUnit           | -    | character   | T       | Course over ground units: T (degrees true,      |
|       |                    |      |             |         | fixed field)                                    |
| 3     | cogm               | deg  | numeric     | -       | Course over ground (magnetic). Only             |
|       |                    | ree  |             |         | supported in ADR 4.10 and above                 |
|       |                    | s    |             |         |                                                 |
| 4     | cogmUnit           | -    | character   | M       | Course over ground units: M (degrees            |
|       |                    |      |             |         | magnetic, fixed field)                          |
| 5     | sogn               | kno  | numeric     | 0.004   | Speed over ground                               |
|       |                    | ts   |             |         |                                                 |
| 6     | sognUnit           | -    | character   | N       | Speed over ground units: N (knots, fixed field) |
| 7     | sogk               | km/  | numeric     | 0.008   | Speed over ground                               |
|       |                    | h    |             |         |                                                 |
| 8     | sogkUnit           | -    | character   | K       | Speed over ground units: K (kilometers per      |
|       |                    |      |             |         | hour, fixed field)                              |
| 9     | posMode            | -    | character   | A       | Mode indicator, see position fix flags          |
|       |                    |      |             |         | description (only available in NMEA 2.3 and     |
|       |                    |      |             |         | later)                                          |
| 10    | cs                 | -    | hexadecimal | *06     | Checksum                                        |
| 11    | <cr><lf></lf></cr> | -    | character   | -       | Carriage return and line feed                   |

<span id="page-176-1"></span>

## <span id="page-176-0"></span>**31.2.19 ZDA**

### **31.2.19.1 Time and date**

| Message      | ZDA            |                                                                                            |  |  |  |
|--------------|----------------|--------------------------------------------------------------------------------------------|--|--|--|
| Description  |                | Time and date                                                                              |  |  |  |
| Firmware     |                | Supported on:                                                                              |  |  |  |
|              |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |  |
|              |                | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |  |  |  |
| Type         | Output         |                                                                                            |  |  |  |
| Comment      |                | UTC, day, month, year and local time zone.                                                 |  |  |  |
|              | ID for CFG-MSG | Number of fields                                                                           |  |  |  |
| Message Info | 0xF0 0x08      | 9                                                                                          |  |  |  |

#### Message Structure:

\$xxZDA,time,day,month,year,ltzh,ltzn\*cs<CR><LF>

#### Example:

\$GPZDA,082710.00,16,09,2002,00,00\*64

| Field | Name               | Unit | Format      | Example   | Description                                    |
|-------|--------------------|------|-------------|-----------|------------------------------------------------|
| No.   |                    |      |             |           |                                                |
| 0     | xxZDA              | -    | string      | \$GPZDA   | ZDA Message ID (xx = current Talker ID, see    |
|       |                    |      |             |           | NMEA Talker IDs table)                         |
| 1     | time               | -    | hhmmss.ss   | 082710.00 | UTC Time. See section UTC representation in    |
|       |                    |      |             |           | the integration manual for details.            |
| 2     | day                | day  | dd          | 16        | UTC day (range: 1-31)                          |
| 3     | month              | mo   | mm          | 09        | UTC month (range: 1-12)                        |
|       |                    | nth  |             |           |                                                |
| 4     | year               | yea  | yyyy        | 2002      | UTC year                                       |
|       |                    | r    |             |           |                                                |
| 5     | ltzh               | -    | xx          | 00        | Local time zone hours (fixed field, always 00) |
| 6     | ltzn               | -    | zz          | 00        | Local time zone minutes (fixed field, always   |
|       |                    |      |             |           | 00)                                            |
| 7     | cs                 | -    | hexadecimal | *64       | Checksum                                       |
| 8     | <cr><lf></lf></cr> | -    | character   | -         | Carriage return and line feed                  |

<span id="page-177-0"></span>

## **31.3 PUBX Messages**

Proprietary messages: i.e. Messages defined by u-blox.

## <span id="page-177-1"></span>**31.3.1 CONFIG (PUBX,41)**

#### **31.3.1.1 Set protocols and baud rate**

| Message      | CONFIG                                                                                                                                                   |                             |  |  |  |
|--------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|--|--|--|
| Description  |                                                                                                                                                          | Set protocols and baud rate |  |  |  |
| Firmware     | Supported on:<br>• u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |                             |  |  |  |
| Type         | Set                                                                                                                                                      |                             |  |  |  |
| Comment      | -                                                                                                                                                        |                             |  |  |  |
|              | ID for CFG-MSG                                                                                                                                           | Number of fields            |  |  |  |
| Message Info | 0xF1 0x41                                                                                                                                                | 9                           |  |  |  |

#### Message Structure:

\$PUBX,41,portId,inProto,outProto,baudrate,autobauding\*cs<CR><LF>

## Example:

\$PUBX,41,1,0007,0003,19200,0\*25

| Field<br>No. | Name               | Unit       | Format      | Example                                                                                                                                                                     | Description                                                                                                                                                        |  |  |  |
|--------------|--------------------|------------|-------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------|--|--|--|
| 0            | \$PUBX             | -          | string      | \$PUBX<br>Message ID, UBX protocol header, proprietary<br>sentence                                                                                                          |                                                                                                                                                                    |  |  |  |
| 1            | msgId              | -          | numeric     | 41                                                                                                                                                                          | Proprietary message identifier                                                                                                                                     |  |  |  |
| 2            | portId             | -          | numeric     | 1                                                                                                                                                                           | ID of communication port. See section<br>Communication ports in the integration<br>manual for details.                                                             |  |  |  |
| 3            | inProto            | -          | hexadecimal | 0007                                                                                                                                                                        | Input protocol mask. Bitmask, specifying<br>which protocols(s) are allowed for input. See<br>section Communication ports in the<br>integration manual for details. |  |  |  |
| 4            | outProto           | -          | hexadecimal | 0003<br>Output protocol mask. Bitmask, specifying<br>which protocols(s) are allowed for input. See<br>section Communication ports in the<br>integration manual for details. |                                                                                                                                                                    |  |  |  |
| 5            | baudrate           | bits<br>/s | numeric     | 19200                                                                                                                                                                       | Baud rate                                                                                                                                                          |  |  |  |
| 6            | autobaud<br>ing    | -          | numeric     | 0                                                                                                                                                                           | Autobauding: 1=enable, 0=disable (not<br>supported on u-blox 5, set to 0)                                                                                          |  |  |  |
| 7            | cs                 | -          | hexadecimal | *25                                                                                                                                                                         | Checksum                                                                                                                                                           |  |  |  |
| 8            | <cr><lf></lf></cr> | -          | character   | -                                                                                                                                                                           | Carriage return and line feed                                                                                                                                      |  |  |  |

<span id="page-178-1"></span>

## <span id="page-178-0"></span>**31.3.2 POSITION (PUBX,00)**

## **31.3.2.1 Lat/Long position data**

| Message      | POSITION               |                                           |                                                                                            |  |  |
|--------------|------------------------|-------------------------------------------|--------------------------------------------------------------------------------------------|--|--|
| Description  | Lat/Long position data |                                           |                                                                                            |  |  |
| Firmware     | Supported on:          |                                           |                                                                                            |  |  |
|              |                        |                                           | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |
|              |                        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |                                                                                            |  |  |
| Type         | Output                 |                                           |                                                                                            |  |  |
| Comment      |                        |                                           | The output of this message is dependent on the currently selected datum                    |  |  |
|              | (default: WGS84).      |                                           |                                                                                            |  |  |
|              |                        |                                           | This message contains position solution data. The datum selection may be                   |  |  |
|              |                        | changed using the message UBX-CFG-DAT.    |                                                                                            |  |  |
|              | ID for CFG-MSG         | Number of fields                          |                                                                                            |  |  |
| Message Info | 0xF1 0x00              | 23                                        |                                                                                            |  |  |

#### Message Structure:

\$PUBX,00,time,lat,NS,long,EW,altRef,navStat,hAcc,vAcc,SOG,COG,vVel,diffAge,HDOP,VDOP,TDOP,numSvs,re

served,DR,\*cs<CR><LF>

#### Example:

\$PUBX,00,081350.00,4717.113210,N,00833.915187,E,546.589,G3,2.1,2.0,0.007,77.52,0.007,,0.92,1.19,0.7

|  |  |  |  | 7,9,0,0*5F |
|--|--|--|--|------------|
|--|--|--|--|------------|

| Field | Name    | Unit | Format    | Example     | Description                                  |
|-------|---------|------|-----------|-------------|----------------------------------------------|
| No.   |         |      |           |             |                                              |
| 0     | \$PUBX  | -    | string    | \$PUBX      | Message ID, UBX protocol header, proprietary |
|       |         |      |           |             | sentence                                     |
| 1     | msgId   | -    | numeric   | 00          | Proprietary message identifier: 00           |
| 2     | time    | -    | hhmmss.ss | 081350.00   | UTC time. See section UTC representation in  |
|       |         |      |           |             | the integration manual for details.          |
| 3     | lat     | -    | ddmm.     | 4717.113210 | Latitude (degrees and minutes), see format   |
|       |         |      | mmmmm     |             | description                                  |
| 4     | NS      | -    | character | N           | North/South Indicator                        |
| 5     | long    | -    | dddmm.    | 00833.      | Longitude (degrees and minutes), see format  |
|       |         |      | mmmmm     | 915187      | description                                  |
| 6     | EW      | -    | character | E           | East/West indicator                          |
| 7     | altRef  | m    | numeric   | 546.589     | Altitude above user datum ellipsoid          |
| 8     | navStat | -    | string    | G3          | Navigation Status:                           |
|       |         |      |           |             | NF = No Fix                                  |
|       |         |      |           |             | DR = Dead reckoning only solution            |
|       |         |      |           |             | G2 = Stand alone 2D solution                 |
|       |         |      |           |             | G3 = Stand alone 3D solution                 |
|       |         |      |           |             | D2 = Differential 2D solution                |
|       |         |      |           |             | D3 = Differential 3D solution                |
|       |         |      |           |             | RK = Combined GPS + dead reckoning           |
|       |         |      |           |             | solution                                     |
|       |         |      |           |             | TT = Time only solution                      |
| 9     | hAcc    | m    | numeric   | 2.1         | Horizontal accuracy estimate                 |

<span id="page-179-1"></span>

| Field | Name               | Unit | Format      | Example      | Description                                 |
|-------|--------------------|------|-------------|--------------|---------------------------------------------|
| No.   |                    |      |             |              |                                             |
| 10    | vAcc               | m    | numeric     | 2.0          | Vertical accuracy estimate                  |
| 11    | SOG                | km/  | numeric     | 0.007        | Speed over ground                           |
|       |                    | h    |             |              |                                             |
| 12    | COG                | deg  | numeric     | 77.52        | Course over ground                          |
| 13    | vVel               | m/s  | numeric     | 0.007        | Vertical velocity (positive downwards)      |
| 14    | diffAge            | s    | numeric     | -            | Age of differential corrections (blank when |
|       |                    |      |             |              | DGPS is not used)                           |
| 15    | HDOP               | -    | numeric     | 0.92         | HDOP, Horizontal Dilution of Precision      |
| 16    | VDOP               | -    | numeric     | 1.19         | VDOP, Vertical Dilution of Precision        |
| 17    | TDOP               | -    | numeric     | 0.77         | TDOP, Time Dilution of Precision            |
| 18    | numSvs             | -    | numeric     | 9            | Number of satellites used in the navigation |
|       |                    |      |             |              | solution                                    |
| 19    | reserved           | -    | numeric     | 0            | Reserved, always set to 0                   |
| 20    | DR                 | -    | numeric     | 0<br>DR used |                                             |
| 21    | cs                 | -    | hexadecimal | *5B          | Checksum                                    |
| 22    | <cr><lf></lf></cr> | -    | character   | -            | Carriage return and line feed               |

#### POSITION continued

## <span id="page-179-0"></span>**31.3.3 RATE (PUBX,40)**

#### **31.3.3.1 Set NMEA message output rate**

| Message      | RATE                                      |                              |                                                                                            |  |  |
|--------------|-------------------------------------------|------------------------------|--------------------------------------------------------------------------------------------|--|--|
| Description  |                                           | Set NMEA message output rate |                                                                                            |  |  |
| Firmware     | Supported on:                             |                              |                                                                                            |  |  |
|              |                                           |                              | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |
|              | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |                              |                                                                                            |  |  |
| Type         | Set                                       |                              |                                                                                            |  |  |
| Comment      |                                           |                              | Set/Get message rate configuration (s) to/from the receiver.                               |  |  |
|              |                                           |                              | • Send rate is relative to the event a message is registered on. For example, if           |  |  |
|              |                                           |                              | the rate of a navigation message is set to 2, the message is sent every second             |  |  |
|              | navigation solution.                      |                              |                                                                                            |  |  |
|              | ID for CFG-MSG                            | Number of fields             |                                                                                            |  |  |
| Message Info | 0xF1 0x40                                 | 11                           |                                                                                            |  |  |

Message Structure:

\$PUBX,40,msgId,rddc,rus1,rus2,rusb,rspi,reserved\*cs<CR><LF>

| \$PUBX,40,GLL,1,0,0,0,0,0*5D |  |  |  |  |  |
|------------------------------|--|--|--|--|--|

| Field | Name   | Unit | Format  | Example | Description                                  |  |  |  |
|-------|--------|------|---------|---------|----------------------------------------------|--|--|--|
| No.   |        |      |         |         |                                              |  |  |  |
| 0     | \$PUBX | -    | string  | \$PUBX  | Message ID, UBX protocol header, proprietary |  |  |  |
|       |        |      |         |         | sentence                                     |  |  |  |
| 1     | ID     | -    | numeric | 40      | Proprietary message identifier               |  |  |  |
| 2     | msgId  | -    | string  | GLL     | NMEA message identifier                      |  |  |  |

<span id="page-180-1"></span>

#### RATE continued

| Field | Name               | Unit | Format      | Example | Description                               |
|-------|--------------------|------|-------------|---------|-------------------------------------------|
| No.   |                    |      |             |         |                                           |
| 3     | rddc               | cycl | numeric     | 1       | output rate on DDC                        |
|       |                    | es   |             |         | 0 disables that message from being output |
|       |                    |      |             |         | on this port                              |
|       |                    |      |             |         | 1 means that this message is output every |
|       |                    |      |             |         | epoch                                     |
| 4     | rus1               | cycl | numeric     | 1       | output rate on USART 1                    |
|       |                    | es   |             |         | 0 disables that message from being output |
|       |                    |      |             |         | on this port                              |
|       |                    |      |             |         | 1 means that this message is output every |
|       |                    |      |             |         | epoch                                     |
| 5     | rus2               | cycl | numeric     | 1       | output rate on USART 2                    |
|       |                    | es   |             |         | 0 disables that message from being output |
|       |                    |      |             |         | on this port                              |
|       |                    |      |             |         | 1 means that this message is output every |
|       |                    |      |             |         | epoch                                     |
| 6     | rusb               | cycl | numeric     | 1       | output rate on USB                        |
|       |                    | es   |             |         | 0 disables that message from being output |
|       |                    |      |             |         | on this port                              |
|       |                    |      |             |         | 1 means that this message is output every |
|       |                    |      |             |         | epoch                                     |
| 7     | rspi               | cycl | numeric     | 1       | output rate on SPI                        |
|       |                    | es   |             |         | 0 disables that message from being output |
|       |                    |      |             |         | on this port                              |
|       |                    |      |             |         | 1 means that this message is output every |
|       |                    |      |             |         | epoch                                     |
| 8     | reserved           | -    | numeric     | 0       | Reserved: always fill with 0              |
| 9     | cs                 | -    | hexadecimal | *5D     | Checksum                                  |
| 10    | <cr><lf></lf></cr> | -    | character   | -       | Carriage return and line feed             |

## <span id="page-180-0"></span>**31.3.4 SVSTATUS (PUBX,03)**

## **31.3.4.1 Satellite status**

| Message      | SVSTATUS             |                                                                                            |                                                            |  |  |  |
|--------------|----------------------|--------------------------------------------------------------------------------------------|------------------------------------------------------------|--|--|--|
| Description  |                      | Satellite status                                                                           |                                                            |  |  |  |
| Firmware     | Supported on:        |                                                                                            |                                                            |  |  |  |
|              |                      | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                                                            |  |  |  |
|              |                      | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |                                                            |  |  |  |
| Type         | Output               |                                                                                            |                                                            |  |  |  |
| Comment      |                      |                                                                                            | The PUBX,03 message contains satellite status information. |  |  |  |
|              | ID for CFG-MSG       | Number of fields                                                                           |                                                            |  |  |  |
| Message Info | 0xF1 0x03<br>5 + 6*n |                                                                                            |                                                            |  |  |  |

#### Message Structure:

\$PUBX,03,GT{,sv,s,az,el,cno,lck},\*cs<CR><LF>

<span id="page-181-1"></span>

|       | 6,08,39,026,17,-,,,32,015,26,U,306,66,48,025,27,U,073,10,36,026,28,U,089,61,46,024,15,-,,,39,014*0D |      |             |         |                                              |  |  |  |
|-------|-----------------------------------------------------------------------------------------------------|------|-------------|---------|----------------------------------------------|--|--|--|
| Field | Name                                                                                                | Unit | Format      | Example | Description                                  |  |  |  |
| No.   |                                                                                                     |      |             |         |                                              |  |  |  |
| 0     | \$PUBX                                                                                              | -    | string      | \$PUBX  | Message ID, UBX protocol header, proprietary |  |  |  |
|       |                                                                                                     |      |             |         | sentence                                     |  |  |  |
| 1     | msgId                                                                                               | -    | numeric     | 03      | Proprietary message identifier: 03           |  |  |  |
| 2     | n                                                                                                   | -    | numeric     | 11      | Number of GNSS satellites tracked            |  |  |  |
|       | Start of repeated block (n times)                                                                   |      |             |         |                                              |  |  |  |
| 3 +   | sv                                                                                                  | -    | numeric     | 23      | Satellite ID according to UBX svId mapping   |  |  |  |
| 6*N   |                                                                                                     |      |             |         | (see Satellite Numbering)                    |  |  |  |
| 4 +   | s                                                                                                   | -    | character   | -       | Satellite status:                            |  |  |  |
| 6*N   |                                                                                                     |      |             |         | - = Not used                                 |  |  |  |
|       |                                                                                                     |      |             |         | U = Used in solution                         |  |  |  |
|       |                                                                                                     |      |             |         | e = Ephemeris available, but not used for    |  |  |  |
|       |                                                                                                     |      |             |         | navigation                                   |  |  |  |
| 5 +   | az                                                                                                  | deg  | numeric     | -       | Satellite azimuth (range: 0-359)             |  |  |  |
| 6*N   |                                                                                                     |      |             |         |                                              |  |  |  |
| 6 +   | el                                                                                                  | deg  | numeric     | -       | Satellite elevation (<= 90)                  |  |  |  |
| 6*N   |                                                                                                     |      |             |         |                                              |  |  |  |
| 7 +   | cno                                                                                                 | dB   | numeric     | 45      | Signal strength (C/N0, range 0-99), blank    |  |  |  |
| 6*N   |                                                                                                     | Hz   |             |         | when not tracking                            |  |  |  |
| 8 +   | lck                                                                                                 | s    | numeric     | 010     | Satellite carrier lock time (range: 0-64)    |  |  |  |
| 6*N   |                                                                                                     |      |             |         | 0: code lock only                            |  |  |  |
|       |                                                                                                     |      |             |         | 64: lock for 64 seconds or more              |  |  |  |
|       | End of repeated block                                                                               |      |             |         |                                              |  |  |  |
| 3 +   | cs                                                                                                  | -    | hexadecimal | *0D     | Checksum                                     |  |  |  |
| 6*n   |                                                                                                     |      |             |         |                                              |  |  |  |
| 4 +   | <cr><lf></lf></cr>                                                                                  | -    | character   | -       | Carriage return and line feed                |  |  |  |
| 6*n   |                                                                                                     |      |             |         |                                              |  |  |  |

#### \$PUBX,03,11,23,-,,,45,010,29,-,,,46,013,07,-,,,42,015,08,U,067,31,42,025,10,U,195,33,46,026,18,U,32

#### <span id="page-181-0"></span>**31.3.5 TIME (PUBX,04)**

## **31.3.5.1 Time of day and clock information**

| Message      | TIME           |                                                                                                                                         |  |  |  |  |
|--------------|----------------|-----------------------------------------------------------------------------------------------------------------------------------------|--|--|--|--|
| Description  |                | Time of day and clock information                                                                                                       |  |  |  |  |
| Firmware     | Supported on:  |                                                                                                                                         |  |  |  |  |
|              |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |  |  |  |  |
| Type         | Output         |                                                                                                                                         |  |  |  |  |
| Comment      | -              |                                                                                                                                         |  |  |  |  |
|              | ID for CFG-MSG | Number of fields                                                                                                                        |  |  |  |  |
| Message Info | 0xF1 0x04      | 12                                                                                                                                      |  |  |  |  |

#### Message Structure:

\$PUBX,04,time,date,utcTow,utcWk,leapSec,clkBias,clkDrift,tpGran,\*cs<CR><LF>



| Field<br>No. | Name               | Unit | Format       | Example   | Description                                              |
|--------------|--------------------|------|--------------|-----------|----------------------------------------------------------|
| 0            | \$PUBX             | -    | string       | \$PUBX    | Message ID, UBX protocol header, proprietary<br>sentence |
| 1            | msgId              | -    | numeric      | 04        | Proprietary message identifier: 04                       |
| 2            | time               | -    | hhmmss.ss    | 073731.00 | UTC time. See section UTC representation in              |
|              |                    |      |              |           | the integration manual for details.                      |
| 3            | date               | -    | ddmmyy       | 091202    | UTC date, day, month, year. See section UTC              |
|              |                    |      |              |           | representation in the integration manual for             |
|              |                    |      |              |           | details.                                                 |
| 4            | utcTow             | s    | numeric      | 113851.00 | UTC time of week                                         |
| 5            | utcWk              | -    | numeric      | 1196      | UTC week number, continues beyond 1023                   |
| 6            | leapSec            | s    | numeric/text | 15D       | Leap seconds                                             |
|              |                    |      |              |           | The number is marked with a D if the value is            |
|              |                    |      |              |           | the firmware default value. If the value is not          |
|              |                    |      |              |           | marked it has been received from a satellite.            |
| 7            | clkBias            | ns   | numeric      | 1930035   | Receiver clock bias                                      |
| 8            | clkDrift           | ns/  | numeric      | -2660.664 | Receiver clock drift                                     |
|              |                    | s    |              |           |                                                          |
| 9            | tpGran             | ns   | numeric      | 43        | Time pulse granularity, the quantization error           |
|              |                    |      |              |           | of the TIMEPULSE pin                                     |
| 10           | cs                 | -    | hexadecimal  | *3C       | Checksum                                                 |
| 11           | <cr><lf></lf></cr> | -    | character    | -         | Carriage return and line feed                            |

\$PUBX,04,073731.00,091202,113851.00,1196,15D,1930035,-2660.664,43,\*3C

## <span id="page-182-0"></span>**32 UBX Protocol**

## <span id="page-182-1"></span>**32.1 UBX Protocol Key Features**

u-blox receivers support a u-blox proprietary protocol to communicate with a host. This protocol has the following key features:

- Compact uses 8-bit binary data.
- Checksum protected uses a low-overhead checksum algorithm
- Modular uses a 2-stage message identifier (Class and Message ID)

## <span id="page-182-2"></span>**32.2 UBX Frame Structure**

The structure of a basic UBX Frame is shown in the following diagram.





- Every **Frame** starts with a 2-byte Preamble consisting of two synchronization characters: 0xB5 0x62.
- A 1-byte Message **Class** field follows. A Class is a group of messages that are related to each other.
- A 1-byte Message **ID** field defines the message that is to follow.
- A 2-byte **Length** field follows. The length is defined as being that of the payload only. It does not include the Preamble, Message Class, Message ID, Length, or Cyclic Redundancy Check (CRC) fields. The number format of the length field is a Little-Endian unsigned 16-bit integer.
- The **Payload** field contains a variable number of bytes.
- The two 1-byte **CK\_A** and **CK\_B** fields hold a 16-bit checksum whose calculation is defined below. This concludes the Frame.

## <span id="page-183-0"></span>**32.3 UBX Payload Definition Rules**

## <span id="page-183-1"></span>**32.3.1 Structure Packing**

Values are placed in such an order that structure packing is not a problem. This means that 2 byte values shall start on offsets which are a multiple of 2; 4-byte values shall start at a multiple of 4; and so on.

## <span id="page-183-2"></span>**32.3.2 Reserved Elements**

Some messages contain reserved fields or bits to allow for future expansion. The contents of these elements should be ignored in output messages and must be set to zero in input messages. Where a message is output and subsequently returned to the receiver as an input message, reserved elements can either be explicitly set to zero or left with whatever value they were output with.



## <span id="page-184-0"></span>**32.3.3 Undefined Values**

The description of some fields provides specific meanings for specific values. For example, the field gnssId appears in many UBX messages and uses 0 to indicate GPS, 1 for SBAS and so on (see [Satellite Numbering](#page-460-1) for details); however it is usually stored in a byte with far more possible values than the handful currently defined. All such undefined values are reserved for future expansion and therefore should not be used.

## <span id="page-184-1"></span>**32.3.4 Message Naming**

Referring to messages is done by adding the class name and a dash in front of the message name. For example, the version information message is referred to as UBX-MON-VER. Referring to message fields or their values is done by adding a dot and the name, e.g. UBX-MON-VER. swVersion.

## <span id="page-184-2"></span>**32.3.5 Number Formats**

All multi-byte values are ordered in Little Endian format, unless otherwise indicated. All floating point values are transmitted in IEEE754 single or double precision.

| Short | Type           | Size    | Comment           | Min/Max        | Resolution        |
|-------|----------------|---------|-------------------|----------------|-------------------|
|       |                | (Bytes) |                   |                |                   |
| U1    | Unsigned Char  | 1       |                   | 0255           | 1                 |
| RU1_3 | Unsigned Char  | 1       | Binary floating   | 0(31*2^7) non  | ~ 2^(value >> 5)  |
|       |                |         | point with 3 bits | continuous     |                   |
|       |                |         | exponent, eeeb    |                |                   |
|       |                |         | bbbb with b the   |                |                   |
|       |                |         | base and e the    |                |                   |
|       |                |         | exponent,         |                |                   |
|       |                |         | (value & 0x1F)    |                |                   |
|       |                |         | << (value >> 5)   |                |                   |
| I1    | Signed Char    | 1       | 2's complement    | -128  127      | 1                 |
| X1    | Bitfield       | 1       |                   | n/a            | n/a               |
| U2    | Unsigned Short | 2       |                   | 0  65535       | 1                 |
| RU2_5 | Unsigned Short | 2       | Binary floating   | 0  (2047*2^31) | ~ 2^(value >> 11) |
|       |                |         | point with 5 bits | non-continuous |                   |
|       |                |         | exponent, eeee    |                |                   |
|       |                |         | ebbb bbbb         |                |                   |
|       |                |         | bbbb with b the   |                |                   |
|       |                |         | base and e the    |                |                   |
|       |                |         | exponent,         |                |                   |
|       |                |         | (value & 0x7FF)   |                |                   |
|       |                |         | << (value >> 11)  |                |                   |
| I2    | Signed Short   | 2       | 2's complement    | -32768  32767  | 1                 |
| X2    | Bitfield       | 2       |                   | n/a            | n/a               |
| U4    | Unsigned Long  | 4       |                   | 0              | 1                 |
|       |                |         |                   | 4'294'967'295  |                   |
| I4    | Signed Long    | 4       | 2's complement    | -2'147'483'648 | 1                 |
|       |                |         |                   | 2'147'483'647  |                   |

## **Variable Type Definitions**



Variable Type Definitions continued

| Short | Type                      | Size    | Comment Min/Max |            | Resolution      |
|-------|---------------------------|---------|-----------------|------------|-----------------|
|       |                           | (Bytes) |                 |            |                 |
| X4    | Bitfield                  | 4       |                 | n/a        | n/a             |
| R4    | IEEE 754 Single Precision | 4       |                 | -1*2^+127  | ~ Value * 2^-24 |
|       |                           |         |                 | 2^+127     |                 |
| I8    | Signed Long Long          | 8       | 2's complement  | -1*2^+63   | 1               |
|       |                           |         |                 | 2^+63 - 1  |                 |
| R8    | IEEE 754 Double Precision | 8       |                 | -1*2^+1023 | ~ Value * 2^-53 |
|       |                           |         |                 | 2^+1023    |                 |
| CH    | ASCII / ISO 8859.1        | 1       |                 |            |                 |
|       | Encoding                  |         |                 |            |                 |

The description of some integer values (e.g. U2, I4 or I8) indicates a fixed-point format (e.g. [UU.FF], [IIIII.FFF] or [IIIIIII.FFFFFFFF]). The fixed-point value can be retrieved from the integer value by first casting it to appropriate type (e.g. as a floatingpoint number) and then scaling it with the indicated scaling factor.

## <span id="page-185-0"></span>**32.4 UBX Checksum**

The checksum is calculated over the Message, starting and including the CLASS field up until, but excluding, the Checksum Field:



The checksum algorithm used is the 8-Bit Fletcher Algorithm, which is used in the TCP standard ( [RFC 1145](http://www.ietf.org/rfc/rfc1145.txt)). This algorithm works as follows:

- Buffer[N] contains the data over which the checksum is to be calculated.
- The two CK\_ values are 8-Bit unsigned integers only! If implementing with larger-sized integer values, make sure to mask both CK\_A and CK\_B with 0xFF after both operations in the loop.

```
 CK_A = 0, CK_B = 0
 For(I=0;I<N;I++)
 {
```



}

 CK\_A = CK\_A + Buffer[I] CK\_B = CK\_B + CK\_A

• After the loop, the two U1 values contain the checksum, transmitted after the Message, which conclude the Frame.

## <span id="page-186-0"></span>**32.5 UBX Message Flow**

There are certain features associated with the messages being sent back and forth:

## <span id="page-186-1"></span>**32.5.1 Acknowledgement**

When messages from the class CFG are sent to the receiver, the receiver will send an "acknowledge" ([UBX-ACK-ACK](#page-193-0)) or a "not acknowledge" ([UBX-ACK-NAK](#page-193-0)) message back to the sender, depending on whether or not the message was processed correctly.

Some messages from other classes (e.g. LOG) also use the same acknowledgement mechanism.

## <span id="page-186-2"></span>**32.5.2 Polling Mechanism**

All messages that are output by the receiver in a periodic manner (i.e. messages in classes MON, NAV and RXM) and Get/Set type messages, such as the messages in the CFG class, can also be polled.

The UBX protocol is designed so that messages can be polled by sending the message required to the receiver but without a payload (or with just a single parameter that identifies the poll request). The receiver then responds with the same message with the payload populated.

## <span id="page-186-3"></span>**32.6 UBX Class IDs**

A class is a grouping of messages which are related to each other. The following table lists all the current message classes.

| Name | Class | Description                                                                         |  |  |  |  |  |  |  |  |
|------|-------|-------------------------------------------------------------------------------------|--|--|--|--|--|--|--|--|
| NAV  | 0x01  | Navigation Results Messages: Position, Speed, Time, Acceleration, Heading, DOP,     |  |  |  |  |  |  |  |  |
|      |       | SVs used                                                                            |  |  |  |  |  |  |  |  |
| RXM  | 0x02  | Receiver Manager Messages: Satellite Status, RTC Status                             |  |  |  |  |  |  |  |  |
| INF  | 0x04  | Information Messages: Printf-Style Messages, with IDs such as Error, Warning,       |  |  |  |  |  |  |  |  |
|      |       | Notice                                                                              |  |  |  |  |  |  |  |  |
| ACK  | 0x05  | Ack/Nak Messages: Acknowledge or Reject messages to UBX-CFG input messages          |  |  |  |  |  |  |  |  |
| CFG  | 0x06  | Configuration Input Messages: Configure the receiver                                |  |  |  |  |  |  |  |  |
| UPD  | 0x09  | Firmware<br>Update<br>Messages:<br>Memory/Flash<br>erase/write,<br>Reboot,<br>Flash |  |  |  |  |  |  |  |  |
|      |       | identification, etc                                                                 |  |  |  |  |  |  |  |  |
| MON  | 0x0A  | Monitoring Messages: Communication Status, Stack Usage, Task Status                 |  |  |  |  |  |  |  |  |
| AID  | 0x0B  | AssistNow Aiding Messages: Ephemeris, Almanac, other A-GPS data input               |  |  |  |  |  |  |  |  |
| TIM  | 0x0D  | Timing Messages: Time Pulse Output, Time Mark Results                               |  |  |  |  |  |  |  |  |
| ESF  | 0x10  | External Sensor Fusion Messages: External Sensor Measurements and Status            |  |  |  |  |  |  |  |  |
|      |       | Information                                                                         |  |  |  |  |  |  |  |  |
| MGA  | 0x13  | Multiple GNSS Assistance Messages: Assistance data for various GNSS                 |  |  |  |  |  |  |  |  |
| LOG  | 0x21  | Logging Messages: Log creation, deletion, info and retrieval                        |  |  |  |  |  |  |  |  |
| SEC  | 0x27  | Security Feature Messages                                                           |  |  |  |  |  |  |  |  |
| HNR  | 0x28  | High Rate Navigation Results Messages: High rate time, position, speed, heading     |  |  |  |  |  |  |  |  |

**All remaining class IDs are reserved.**



## **32.7 UBX Messages Overview**

<span id="page-187-0"></span>

| Page | Mnemonic      | Cls/ID        | Length              | Type                         | Description                             |  |
|------|---------------|---------------|---------------------|------------------------------|-----------------------------------------|--|
|      |               | UBX Class ACK |                     | Ack/Nak Messages             |                                         |  |
| 179  | ACK-ACK       | 0x05 0x01     | 2                   | Output                       | Message acknowledged                    |  |
| 179  | ACK-NAK       | 0x05 0x00     | 2                   | Output                       | Message not acknowledged                |  |
|      |               | UBX Class AID |                     | AssistNow Aiding Messages    |                                         |  |
| 180  | AID-ALM       | 0x0B 0x30     | 0                   | Poll Request                 | Poll GPS aiding almanac data            |  |
| 180  | AID-ALM       | 0x0B 0x30     | 1                   | Poll Request                 | Poll GPS aiding almanac data for a SV   |  |
| 181  | AID-ALM       | 0x0B 0x30     | (8) or (40)         | Input/Output                 | GPS aiding almanac input/output         |  |
| 182  | AID-AOP       | 0x0B 0x33     | 0                   | Poll Request                 | Poll AssistNow Autonomous data, all     |  |
| 182  | AID-AOP       | 0x0B 0x33     | 1                   | Poll Request                 | Poll AssistNow Autonomous data, one     |  |
| 183  | AID-AOP       | 0x0B 0x33     | 68                  | Input/Output                 | AssistNow Autonomous data               |  |
| 184  | AID-EPH       | 0x0B 0x31     | 0                   | Poll Request                 | Poll GPS aiding ephemeris data          |  |
| 184  | AID-EPH       | 0x0B 0x31     | 1                   | Poll Request                 | Poll GPS aiding ephemeris data for a SV |  |
| 185  | AID-EPH       | 0x0B 0x31     | (8) or (104)        | Input/Output                 | GPS aiding ephemeris input/output       |  |
| 186  | AID-HUI       | 0x0B 0x02     | 0                   | Poll Request                 | Poll GPS health, UTC, ionosphere        |  |
| 186  | AID-HUI       | 0x0B 0x02     | 72                  | Input/Output                 | GPS health, UTC and ionosphere          |  |
| 188  | AID-INI       | 0x0B 0x01     | 0                   | Poll Request                 | Poll GPS initial aiding data            |  |
| 188  | AID-INI       | 0x0B 0x01     | 48                  | Input/Output                 | Aiding position, time, frequency, clock |  |
|      |               | UBX Class CFG |                     | Configuration Input Messages |                                         |  |
| 191  | CFG-ANT       | 0x06 0x13     | 4                   | Get/set                      | Antenna control settings                |  |
| 192  | CFG-BATCH     | 0x06 0x93     | 8                   | Get/set                      | Get/set data batching configuration     |  |
| 193  | CFG-CFG       | 0x06 0x09     | (12) or (13)        | Command                      | Clear, save and load configurations     |  |
| 195  | CFG-DAT       | 0x06 0x06     | 44                  | Set                          | Set user-defined datum                  |  |
| 196  | CFG-DAT       | 0x06 0x06     | 52                  | Get                          | Get currently defined datum             |  |
| 197  | CFG-DGNSS     | 0x06 0x70     | 4                   | Get/set                      | DGNSS configuration                     |  |
| 197  | CFG-DOSC      | 0x06 0x61     | 4 + 32*numO Get/set |                              | Disciplined oscillator configuration    |  |
| 199  | CFG-ESFALG    | 0x06 0x56     | 12                  | Get/set                      | Get/set IMU-mount misalignment          |  |
| 200  | CFG-ESFA      | 0x06 0x4C     | 20                  | Get/set                      | Get/set the Accelerometer (A) sensor    |  |
| 201  | CFG-ESFG      | 0x06 0x4D     | 20                  | Get/set                      | Get/set the Gyroscope (G) sensor        |  |
| 201  | CFG-ESFWT     | 0x06 0x82     | 32                  | Get/set                      | Get/set wheel-tick configuration        |  |
| 204  | CFG-ESRC      | 0x06 0x60     | 4 + 36*numS Get/set |                              | External synchronization source         |  |
| 206  | CFG-GEOFENCE  | 0x06 0x69     | 8 + 12*numF Get/set |                              | Geofencing configuration                |  |
| 207  | CFG-GNSS      | 0x06 0x3E     | 4 + 8*numCo Get/set |                              | GNSS system configuration               |  |
| 210  | CFG-HNR       | 0x06 0x5C     | 4                   | Get/set                      | High navigation rate settings           |  |
| 210  | CFG-INF       | 0x06 0x02     | 1                   | Poll Request                 | Poll configuration for one protocol     |  |
| 211  | CFG-INF       | 0x06 0x02     | 0 + 10*N            | Get/set                      | Information message configuration       |  |
| 212  | CFG-ITFM      | 0x06 0x39     | 8                   | Get/set                      | Jamming/interference monitor            |  |
| 213  | CFG-LOGFILTER | 0x06 0x47     | 12                  | Get/set                      | Data logger configuration               |  |



| Page | Mnemonic   | Cls/ID    | Length  | Type         | Description                              |
|------|------------|-----------|---------|--------------|------------------------------------------|
| 215  | CFG-MSG    | 0x06 0x01 | 2       | Poll Request | Poll a message configuration             |
| 215  | CFG-MSG    | 0x06 0x01 | 8       | Get/set      | Set message rate(s)                      |
| 216  | CFG-MSG    | 0x06 0x01 | 3       | Get/set      | Set message rate                         |
| 216  | CFG-NAV5   | 0x06 0x24 | 36      | Get/set      | Navigation engine settings               |
| 219  | CFG-NAVX5  | 0x06 0x23 | 40      | Get/set      | Navigation engine expert settings        |
| 221  | CFG-NAVX5  | 0x06 0x23 | 40      | Get/set      | Navigation engine expert settings        |
| 224  | CFG-NAVX5  | 0x06 0x23 | 44      | Get/set      | Navigation engine expert settings        |
| 226  | CFG-NMEA   | 0x06 0x17 | 4       | Get/set      | NMEA protocol configuration              |
| 228  | CFG-NMEA   | 0x06 0x17 | 12      | Get/set      | NMEA protocol configuration V0           |
| 231  | CFG-NMEA   | 0x06 0x17 | 20      | Get/set      | Extended NMEA protocol configuration V1  |
| 234  | CFG-ODO    | 0x06 0x1E | 20      | Get/set      | Odometer, low-speed COG engine           |
| 235  | CFG-PM2    | 0x06 0x3B | 44      | Get/set      | Extended power management                |
| 237  | CFG-PM2    | 0x06 0x3B | 48      | Get/set      | Extended power management                |
| 239  | CFG-PM2    | 0x06 0x3B | 48      | Get/set      | Extended power management                |
| 242  | CFG-PMS    | 0x06 0x86 | 8       | Get/set      | Power mode setup                         |
| 243  | CFG-PRT    | 0x06 0x00 | 1       | Poll Request | Polls the configuration for one I/O port |
| 243  | CFG-PRT    | 0x06 0x00 | 20      | Get/set      | Port configuration for UART ports        |
| 246  | CFG-PRT    | 0x06 0x00 | 20      | Get/set      | Port configuration for USB port          |
| 248  | CFG-PRT    | 0x06 0x00 | 20      | Get/set      | Port configuration for SPI port          |
| 251  | CFG-PRT    | 0x06 0x00 | 20      | Get/set      | Port configuration for I2C (DDC) port    |
| 253  | CFG-PWR    | 0x06 0x57 | 8       | Set          | Put receiver in a defined power state    |
| 254  | CFG-RATE   | 0x06 0x08 | 6       | Get/set      | Navigation/measurement rate settings     |
| 255  | CFG-RINV   | 0x06 0x34 | 1 + 1*N | Get/set      | Contents of remote inventory             |
| 256  | CFG-RST    | 0x06 0x04 | 4       | Command      | Reset receiver / Clear backup data       |
| 258  | CFG-RXM    | 0x06 0x11 | 2       | Get/set      | RXM configuration                        |
| 258  | CFG-RXM    | 0x06 0x11 | 2       | Get/set      | RXM configuration                        |
| 259  | CFG-SBAS   | 0x06 0x16 | 8       | Get/set      | SBAS configuration                       |
| 261  | CFG-SENIF  | 0x06 0x88 | 6       | Get/set      | I2C sensor interface configuration       |
| 262  | CFG-SLAS   | 0x06 0x8D | 4       | Get/set      | SLAS configuration                       |
| 263  | CFG-SMGR   | 0x06 0x62 | 20      | Get/set      | Synchronization manager configuration    |
| 266  | CFG-SPT    | 0x06 0x64 | 12      | Get/set      | Configure and start a sensor             |
| 266  | CFG-TMODE2 | 0x06 0x3D | 28      | Get/set      | Time mode settings 2                     |
| 268  | CFG-TMODE3 | 0x06 0x71 | 40      | Get/set      | Time mode settings 3                     |
| 270  | CFG-TP5    | 0x06 0x31 | 0       | Poll Request | Poll time pulse parameters for time      |
| 270  | CFG-TP5    | 0x06 0x31 | 1       | Poll Request | Poll time pulse parameters               |
| 271  | CFG-TP5    | 0x06 0x31 | 32      | Get/set      | Time pulse parameters                    |
| 272  | CFG-TP5    | 0x06 0x31 | 32      | Get/set      | Time pulse parameters                    |
| 274  | CFG-TXSLOT | 0x06 0x53 | 16      | Set          | TX buffer time slots configuration       |



| Page          | Mnemonic                  | Cls/ID        | Length                   | Type                                  | Description                              |  |
|---------------|---------------------------|---------------|--------------------------|---------------------------------------|------------------------------------------|--|
| 275           | CFG-USB                   | 0x06 0x1B     | 108                      | Get/set                               | USB configuration                        |  |
|               |                           | UBX Class ESF |                          | External Sensor Fusion Messages       |                                          |  |
| 277           | ESF-ALG                   | 0x10 0x14     | 16                       | Periodic/Polled                       | IMU alignment information                |  |
| 278           | ESF-INS                   | 0x10 0x15     | 36                       | Periodic/Polled                       | Vehicle dynamics information             |  |
| 280           | ESF-MEAS                  | 0x10 0x02     | (8 + 4*numM Input/Output |                                       | External sensor fusion measurements      |  |
| 281           | ESF-RAW                   | 0x10 0x03     | 4 + 8*N                  | Output                                | Raw sensor measurements                  |  |
| 282           | ESF-STATUS                | 0x10 0x10     |                          | 16 + 4*numS Periodic/Polled           | External sensor fusion status            |  |
| UBX Class HNR |                           |               |                          | High Rate Navigation Results Messages |                                          |  |
| 286           | HNR-ATT                   | 0x28 0x01     | 32                       | Periodic/Polled                       | Attitude solution                        |  |
| 287           | HNR-INS                   | 0x28 0x02     | 36                       | Periodic/Polled                       | Vehicle dynamics information             |  |
| 288           | HNR-PVT                   | 0x28 0x00     | 72                       | Periodic/Polled                       | High rate output of PVT solution         |  |
|               |                           | UBX Class INF |                          | Information Messages                  |                                          |  |
| 291           | INF-DEBUG                 | 0x04 0x04     | 0 + 1*N                  | Output                                | ASCII output with debug contents         |  |
| 291           | INF-ERROR                 | 0x04 0x00     | 0 + 1*N                  | Output                                | ASCII output with error contents         |  |
| 292           | INF-NOTICE                | 0x04 0x02     | 0 + 1*N                  | Output                                | ASCII output with informational contents |  |
| 292           | INF-TEST                  | 0x04 0x03     | 0 + 1*N                  | Output                                | ASCII output with test contents          |  |
| 293           | INF-WARNING               | 0x04 0x01     | 0 + 1*N                  | Output                                | ASCII output with warning contents       |  |
|               |                           | UBX Class LOG |                          | Logging Messages                      |                                          |  |
| 294           | LOG-BATCH                 | 0x21 0x11     | 100                      | Polled                                | Batched data                             |  |
| 297           | LOG-CREATE                | 0x21 0x07     | 8                        | Command                               | Create log file                          |  |
| 298           | LOG-ERASE                 | 0x21 0x03     | 0                        | Command                               | Erase logged data                        |  |
| 298           | LOG-FINDTIME              | 0x21 0x0E     | 10                       | Input                                 | Find index of a log entry based on a     |  |
| 299           | LOG-FINDTIME              | 0x21 0x0E     | 8                        | Output                                | Response to FINDTIME request             |  |
| 300           | LOG-INFO                  | 0x21 0x08     | 0                        | Poll Request                          | Poll for log information                 |  |
| 300           | LOG-INFO                  | 0x21 0x08     | 48                       | Output                                | Log information                          |  |
| 302           | LOG-RETRIEVEBA 0x21 0x10  |               | 4                        | Command                               | Request batch data                       |  |
| 303           | LOG-RETRIEVEPO 0x21 0x0f  |               | 32                       | Output                                | Odometer log entry                       |  |
| 303           | LOG-RETRIEVEPOS 0x21 0x0b |               | 40                       | Output                                | Position fix log entry                   |  |
| 304           | LOG-RETRIEVEST 0x21 0x0d  |               | 16 + 1*byteCo Output     |                                       | Byte string log entry                    |  |
| 305           | LOG-RETRIEVE              | 0x21 0x09     | 12                       | Command                               | Request log data                         |  |
| 306           | LOG-STRING                | 0x21 0x04     | 0 + 1*N                  | Command                               | Store arbitrary string in on-board flash |  |
|               |                           | UBX Class MGA |                          | Multiple GNSS Assistance Messages     |                                          |  |
| 307           | MGA-ACK-DATA0             | 0x13 0x60     | 8                        | Output                                | Multiple GNSS acknowledge message        |  |
| 308           | MGA-ANO                   | 0x13 0x20     | 76                       | Input                                 | Multiple GNSS AssistNow Offline          |  |
| 309           | MGA-BDS-EPH               | 0x13 0x03     | 88                       | Input                                 | BeiDou ephemeris assistance              |  |
| 310           | MGA-BDS-ALM               | 0x13 0x03     | 40                       | Input                                 | BeiDou almanac assistance                |  |
| 311           | MGA-BDS-HEALTH            | 0x13 0x03     | 68                       | Input                                 | BeiDou health assistance                 |  |
| 312           | MGA-BDS-UTC               | 0x13 0x03     | 20                       | Input                                 | BeiDou UTC assistance                    |  |



| Page | Mnemonic                   | Cls/ID        | Length                | Type                | Description                              |
|------|----------------------------|---------------|-----------------------|---------------------|------------------------------------------|
| 312  | MGA-BDS-IONO               | 0x13 0x03     | 16                    | Input               | BeiDou ionosphere assistance             |
| 313  | MGA-DBD                    | 0x13 0x80     | 0                     | Poll Request        | Poll the navigation database             |
| 313  | MGA-DBD                    | 0x13 0x80     | 12 + 1*N              | Input/Output        | Navigation database dump entry           |
| 314  | MGA-FLASH-DATA             | 0x13 0x21     | 6 + 1*size            | Input               | Transfer MGA-ANO data block to flash     |
| 315  | MGA-FLASH-STOP             | 0x13 0x21     | 2                     | Input               | Finish flashing MGA-ANO data             |
| 315  | MGA-FLASH-ACK              | 0x13 0x21     | 6                     | Output              | Acknowledge last FLASH-DATA or -STOP     |
| 316  | MGA-GAL-EPH                | 0x13 0x02     | 76                    | Input               | Galileo ephemeris assistance             |
| 318  | MGA-GAL-ALM                | 0x13 0x02     | 32                    | Input               | Galileo almanac assistance               |
| 319  | MGA-GAL-TIMEO              | 0x13 0x02     | 12                    | Input               | Galileo GPS time offset assistance       |
| 319  | MGA-GAL-UTC                | 0x13 0x02     | 20                    | Input               | Galileo UTC assistance                   |
| 320  | MGA-GLO-EPH                | 0x13 0x06     | 48                    | Input               | GLONASS ephemeris assistance             |
| 321  | MGA-GLO-ALM                | 0x13 0x06     | 36                    | Input               | GLONASS almanac assistance               |
| 322  | MGA-GLO-TIMEO              | 0x13 0x06     | 20                    | Input               | GLONASS auxiliary time offset assistance |
| 323  | MGA-GPS-EPH                | 0x13 0x00     | 68                    | Input               | GPS ephemeris assistance                 |
| 325  | MGA-GPS-ALM                | 0x13 0x00     | 36                    | Input               | GPS almanac assistance                   |
| 326  | MGA-GPS-HEALTH             | 0x13 0x00     | 40                    | Input               | GPS health assistance                    |
| 326  | MGA-GPS-UTC                | 0x13 0x00     | 20                    | Input               | GPS UTC assistance                       |
| 327  | MGA-GPS-IONO               | 0x13 0x00     | 16                    | Input               | GPS ionosphere assistance                |
| 328  | MGA-INI-POS_XYZ            | 0x13 0x40     | 20                    | Input               | Initial position assistance              |
| 329  | MGA-INI-POS_LLH            | 0x13 0x40     | 20                    | Input               | Initial position assistance              |
| 329  | MGA-INI-TIME_UTC 0x13 0x40 |               | 24                    | Input               | Initial time assistance                  |
| 331  | MGA-INI-TIME_GN 0x13 0x40  |               | 24                    | Input               | Initial time assistance                  |
| 332  | MGA-INI-CLKD               | 0x13 0x40     | 12                    | Input               | Initial clock drift assistance           |
| 333  | MGA-INI-FREQ               | 0x13 0x40     | 12                    | Input               | Initial frequency assistance             |
| 334  | MGA-INI-EOP                | 0x13 0x40     | 72                    | Input               | Earth orientation parameters assistance  |
| 334  | MGA-QZSS-EPH               | 0x13 0x05     | 68                    | Input               | QZSS ephemeris assistance                |
| 336  | MGA-QZSS-ALM               | 0x13 0x05     | 36                    | Input               | QZSS almanac assistance                  |
| 337  | MGA-QZSS-HEAL              | 0x13 0x05     | 12                    | Input               | QZSS health assistance                   |
|      |                            | UBX Class MON |                       | Monitoring Messages |                                          |
| 338  | MON-BATCH                  | 0x0A 0x32     | 12                    | Polled              | Data batching buffer status              |
| 339  | MON-GNSS                   | 0x0A 0x28     | 8                     | Polled              | Information message major GNSS           |
| 341  | MON-HW2                    | 0x0A 0x0B     | 28                    | Periodic/Polled     | Extended hardware status                 |
| 342  | MON-HW                     | 0x0A 0x09     | 60                    | Periodic/polled     | Hardware status                          |
| 343  | MON-IO                     | 0x0A 0x02     | 0 + 20*N              | Periodic/Polled     | I/O system status                        |
| 344  | MON-MSGPP                  | 0x0A 0x06     | 120                   | Periodic/Polled     | Message parse and process status         |
| 344  | MON-PATCH                  | 0x0A 0x27     | 0                     | Poll Request        | Poll request for installed patches       |
| 345  | MON-PATCH                  | 0x0A 0x27     | 4 + 16*nEntriesPolled |                     | Installed patches                        |
| 346  | MON-RXBUF                  | 0x0A 0x07     | 24                    | Periodic/Polled     | Receiver buffer status                   |



| Page | Mnemonic      | Cls/ID        | Length             | Type                          | Description                                |
|------|---------------|---------------|--------------------|-------------------------------|--------------------------------------------|
| 346  | MON-RXR       | 0x0A 0x21     | 1                  | Output                        | Receiver status information                |
| 347  | MON-SMGR      | 0x0A 0x2E     | 16                 | Periodic/Polled               | Synchronization manager status             |
| 350  | MON-SPT       | 0x0A 0x2F     | 4 + 12*numR Polled |                               | Sensor production test                     |
| 354  | MON-TXBUF     | 0x0A 0x08     | 28                 | Periodic/Polled               | Transmitter buffer status                  |
| 355  | MON-VER       | 0x0A 0x04     | 0                  | Poll Request                  | Poll receiver and software version         |
| 355  | MON-VER       | 0x0A 0x04     | 40 + 30*N          | Polled                        | Receiver and software version              |
|      |               | UBX Class NAV |                    | Navigation Results Messages   |                                            |
| 357  | NAV-AOPSTATUS | 0x01 0x60     | 16                 | Periodic/Polled               | AssistNow Autonomous status                |
| 358  | NAV-ATT       | 0x01 0x05     | 32                 | Periodic/Polled               | Attitude solution                          |
| 359  | NAV-CLOCK     | 0x01 0x22     | 20                 | Periodic/Polled               | Clock solution                             |
| 359  | NAV-COV       | 0x01 0x36     | 64                 | Periodic/Polled               | Covariance matrices                        |
| 360  | NAV-DGPS      | 0x01 0x31     |                    | 16 + 12*numCh Periodic/Polled | DGPS data used for NAV                     |
| 361  | NAV-DOP       | 0x01 0x04     | 18                 | Periodic/Polled               | Dilution of precision                      |
| 362  | NAV-EELL      | 0x01 0x3d     | 16                 | Periodic/Polled               | Position error ellipse parameters          |
| 363  | NAV-EOE       | 0x01 0x61     | 4                  | Periodic                      | End of epoch                               |
| 363  | NAV-GEOFENCE  | 0x01 0x39     |                    | 8 + 2*numFe Periodic/Polled   | Geofencing status                          |
| 364  | NAV-HPPOSECEF | 0x01 0x13     | 28                 | Periodic/Polled               | High precision position solution in ECEF   |
| 365  | NAV-HPPOSLLH  | 0x01 0x14     | 36                 | Periodic/Polled               | High precision geodetic position solution  |
| 367  | NAV-NMI       | 0x01 0x28     | 16                 | Periodic/Polled               | Navigation message cross-check             |
| 370  | NAV-ODO       | 0x01 0x09     | 20                 | Periodic/Polled               | Odometer solution                          |
| 371  | NAV-ORB       | 0x01 0x34     | 8 + 6*numSv        | Periodic/Polled               | GNSS orbit database info                   |
| 374  | NAV-POSECEF   | 0x01 0x01     | 20                 | Periodic/Polled               | Position solution in ECEF                  |
| 374  | NAV-POSLLH    | 0x01 0x02     | 28                 | Periodic/Polled               | Geodetic position solution                 |
| 375  | NAV-PVT       | 0x01 0x07     | 92                 | Periodic/Polled               | Navigation position velocity time solution |
| 379  | NAV-RELPOSNED | 0x01 0x3C     | 40                 | Periodic/Polled               | Relative positioning information in        |
| 381  | NAV-RESETODO  | 0x01 0x10     | 0                  | Command                       | Reset odometer                             |
| 381  | NAV-SAT       | 0x01 0x35     |                    | 8 + 12*numSvs Periodic/Polled | Satellite information                      |
| 383  | NAV-SBAS      | 0x01 0x32     | 12 + 12*cnt        | Periodic/Polled               | SBAS status data                           |
| 385  | NAV-SLAS      | 0x01 0x42     | 20 + 8*cnt         | Periodic/Polled               | QZSS L1S SLAS status data                  |
| 386  | NAV-SOL       | 0x01 0x06     | 52                 | Periodic/Polled               | Navigation solution information            |
| 388  | NAV-STATUS    | 0x01 0x03     | 16                 | Periodic/Polled               | Receiver navigation status                 |
| 390  | NAV-SVINFO    | 0x01 0x30     |                    | 8 + 12*numCh Periodic/Polled  | Space vehicle information                  |
| 392  | NAV-SVIN      | 0x01 0x3B     | 40                 | Periodic/Polled               | Survey-in data                             |
| 393  | NAV-TIMEBDS   | 0x01 0x24     | 20                 | Periodic/Polled               | BeiDou time solution                       |
| 394  | NAV-TIMEGAL   | 0x01 0x25     | 20                 | Periodic/Polled               | Galileo time solution                      |
| 395  | NAV-TIMEGLO   | 0x01 0x23     | 20                 | Periodic/Polled               | GLONASS time solution                      |
| 397  | NAV-TIMEGPS   | 0x01 0x20     | 16                 | Periodic/Polled               | GPS time solution                          |
| 398  | NAV-TIMELS    | 0x01 0x26     | 24                 | Periodic/Polled               | Leap second event information              |



| Page | Mnemonic    | Cls/ID        | Length                   | Type                         | Description                               |
|------|-------------|---------------|--------------------------|------------------------------|-------------------------------------------|
| 400  | NAV-TIMEUTC | 0x01 0x21     | 20                       | Periodic/Polled              | UTC time solution                         |
| 401  | NAV-VELECEF | 0x01 0x11     | 20                       | Periodic/Polled              | Velocity solution in ECEF                 |
| 402  | NAV-VELNED  | 0x01 0x12     | 36                       | Periodic/Polled              | Velocity solution in NED frame            |
|      |             | UBX Class RXM |                          | Receiver Manager Messages    |                                           |
| 403  | RXM-IMES    | 0x02 0x61     |                          | 4 + 44*numTx Periodic/Polled | Indoor Messaging System information       |
| 406  | RXM-MEASX   | 0x02 0x14     |                          | 44 + 24*num Periodic/Polled  | Satellite measurements for RRLP           |
| 407  | RXM-PMREQ   | 0x02 0x41     | 8                        | Command                      | Power management request                  |
| 408  | RXM-PMREQ   | 0x02 0x41     | 16                       | Command                      | Power management request                  |
| 409  | RXM-RAWX    | 0x02 0x15     |                          | 16 + 32*num Periodic/Polled  | Multi-GNSS raw measurement data           |
| 413  | RXM-RAWX    | 0x02 0x15     |                          | 16 + 32*num Periodic/Polled  | Multi-GNSS raw measurements               |
| 416  | RXM-RLM     | 0x02 0x59     | 16                       | Output                       | Galileo SAR short-RLM report              |
| 417  | RXM-RLM     | 0x02 0x59     | 28                       | Output                       | Galileo SAR long-RLM report               |
| 418  | RXM-RTCM    | 0x02 0x32     | 8                        | Output                       | RTCM input status                         |
| 419  | RXM-SFRBX   | 0x02 0x13     | 8 + 4*numW Output        |                              | Broadcast navigation data subframe        |
| 420  | RXM-SFRBX   | 0x02 0x13     | 8 + 4*numW Output        |                              | Broadcast navigation data subframe        |
| 421  | RXM-SVSI    | 0x02 0x20     | 8 + 6*numSV              | Periodic/Polled              | SV status info                            |
|      |             | UBX Class SEC |                          | Security Feature Messages    |                                           |
| 423  | SEC-UNIQID  | 0x27 0x03     | 9                        | Output                       | Unique chip ID                            |
|      |             |               |                          |                              |                                           |
|      |             | UBX Class TIM |                          | Timing Messages              |                                           |
| 424  | TIM-DOSC    | 0x0D 0x11     | 8                        | Output                       | Disciplined oscillator control            |
| 424  | TIM-FCHG    | 0x0D 0x16     | 32                       | Periodic/Polled              | Oscillator frequency changed notification |
| 425  | TIM-HOC     | 0x0D 0x17     | 8                        | Input                        | Host oscillator control                   |
| 426  | TIM-SMEAS   | 0x0D 0x13     | 12 + 24*num Input/Output |                              | Source measurement                        |
| 428  | TIM-SVIN    | 0x0D 0x04     | 28                       | Periodic/Polled              | Survey-in data                            |
| 429  | TIM-TM2     | 0x0D 0x03     | 28                       | Periodic/Polled              | Time mark data                            |
| 430  | TIM-TOS     | 0x0D 0x12     | 56                       | Periodic                     | Time pulse time and frequency data        |
| 432  | TIM-TP      | 0x0D 0x01     | 16                       | Periodic/Polled              | Time pulse time data                      |
| 434  | TIM-VCOCAL  | 0x0D 0x15     | 1                        | Command                      | Stop calibration                          |
| 435  | TIM-VCOCAL  | 0x0D 0x15     | 12                       | Command                      | VCO calibration extended command          |
| 436  | TIM-VCOCAL  | 0x0D 0x15     | 12                       | Periodic/Polled              | Results of the calibration                |
| 437  | TIM-VRFY    | 0x0D 0x06     | 20                       | Periodic/Polled              | Sourced time verification                 |
|      |             | UBX Class UPD |                          | Firmware Update Messages     |                                           |
| 438  | UPD-SOS     | 0x09 0x14     | 0                        | Poll Request                 | Poll backup restore status                |
| 438  | UPD-SOS     | 0x09 0x14     | 4                        | Command                      | Create backup in flash                    |
| 439  | UPD-SOS     | 0x09 0x14     | 4                        | Command                      | Clear backup in flash                     |
| 439  | UPD-SOS     | 0x09 0x14     | 8                        | Output                       | Backup creation acknowledge               |

<span id="page-193-0"></span>

## **32.8 UBX-ACK (0x05)**

Ack/Nak Messages: i.e. Acknowledge or Reject messages to UBX-CFG input messages. Messages in the UBX-ACK class output the processing results to UBX-CFG and some other messages.

## <span id="page-193-1"></span>**32.8.1 UBX-ACK-ACK (0x05 0x01)**

#### **32.8.1.1 Message acknowledged**

| UBX-ACK-ACK<br>Message |        |        |                                             |       |    |  |                |                                                                                            |         |                     |  |
|------------------------|--------|--------|---------------------------------------------|-------|----|--|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|
| Description            |        |        | Message acknowledged                        |       |    |  |                |                                                                                            |         |                     |  |
| Firmware               |        |        | Supported on:                               |       |    |  |                |                                                                                            |         |                     |  |
|                        |        |        |                                             |       |    |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |
|                        |        |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01   |       |    |  |                |                                                                                            |         |                     |  |
| Type                   |        | Output |                                             |       |    |  |                |                                                                                            |         |                     |  |
| Comment                |        |        |                                             |       |    |  |                | Output upon processing of an input message. A UBX-ACK-ACK is sent as soon                  |         |                     |  |
|                        |        |        | as possible but at least within one second. |       |    |  |                |                                                                                            |         |                     |  |
|                        |        | Header |                                             | Class | ID |  | Length (Bytes) |                                                                                            | Payload | Checksum            |  |
| Message Structure      |        |        | 0xB5 0x62 0x05 0x01 2                       |       |    |  |                |                                                                                            |         | see below CK_A CK_B |  |
| Payload Contents:      |        |        |                                             |       |    |  |                |                                                                                            |         |                     |  |
| Byte Offset            | Number |        | Scaling                                     | Name  |    |  | Unit           | Description                                                                                |         |                     |  |
|                        | Format |        |                                             |       |    |  |                |                                                                                            |         |                     |  |
| 0                      | U1     |        | -                                           | clsID |    |  | -              | Class ID of the Acknowledged Message                                                       |         |                     |  |
| 1                      | U1     |        | -                                           | msgID |    |  | -              | Message ID of the Acknowledged                                                             |         |                     |  |
| Message                |        |        |                                             |       |    |  |                |                                                                                            |         |                     |  |

## <span id="page-193-2"></span>**32.8.2 UBX-ACK-NAK (0x05 0x00)**

#### **32.8.2.1 Message not acknowledged**

| UBX-ACK-NAK<br>Message                                                                     |        |        |                                             |                                                      |                                              |  |      |                                                                           |  |  |  |  |  |  |
|--------------------------------------------------------------------------------------------|--------|--------|---------------------------------------------|------------------------------------------------------|----------------------------------------------|--|------|---------------------------------------------------------------------------|--|--|--|--|--|--|
| Description                                                                                |        |        | Message not acknowledged                    |                                                      |                                              |  |      |                                                                           |  |  |  |  |  |  |
| Firmware                                                                                   |        |        | Supported on:                               |                                                      |                                              |  |      |                                                                           |  |  |  |  |  |  |
| • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |        |        |                                             |                                                      |                                              |  |      |                                                                           |  |  |  |  |  |  |
| 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |        |        |                                             |                                                      |                                              |  |      |                                                                           |  |  |  |  |  |  |
| Output<br>Type                                                                             |        |        |                                             |                                                      |                                              |  |      |                                                                           |  |  |  |  |  |  |
| Comment                                                                                    |        |        |                                             |                                                      |                                              |  |      | Output upon processing of an input message. A UBX-ACK-NAK is sent as soon |  |  |  |  |  |  |
|                                                                                            |        |        | as possible but at least within one second. |                                                      |                                              |  |      |                                                                           |  |  |  |  |  |  |
|                                                                                            |        | Header |                                             | Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum |                                              |  |      |                                                                           |  |  |  |  |  |  |
| Message Structure                                                                          |        |        |                                             |                                                      | 0xB5 0x62 0x05 0x00 2<br>see below CK_A CK_B |  |      |                                                                           |  |  |  |  |  |  |
| Payload Contents:                                                                          |        |        |                                             |                                                      |                                              |  |      |                                                                           |  |  |  |  |  |  |
| Byte Offset                                                                                | Number |        | Scaling                                     | Name                                                 |                                              |  | Unit | Description                                                               |  |  |  |  |  |  |
|                                                                                            | Format |        |                                             |                                                      |                                              |  |      |                                                                           |  |  |  |  |  |  |
| 0                                                                                          | U1     |        | -                                           | clsID                                                |                                              |  | -    | Class ID of the Not-Acknowledged                                          |  |  |  |  |  |  |
|                                                                                            |        |        |                                             |                                                      |                                              |  |      | Message                                                                   |  |  |  |  |  |  |
| 1                                                                                          | U1     |        | -                                           | msgID                                                |                                              |  | -    | Message ID of the Not-Acknowledged                                        |  |  |  |  |  |  |
| Message                                                                                    |        |        |                                             |                                                      |                                              |  |      |                                                                           |  |  |  |  |  |  |

<span id="page-194-0"></span>

## **32.9 UBX-AID (0x0B)**

AssistNow Aiding Messages: i.e. Ephemeris, Almanac, other A-GPS data input. Messages in the AID class are used to send GPS aiding data to the receiver.

## <span id="page-194-1"></span>**32.9.1 UBX-AID-ALM (0x0B 0x30)**

#### **32.9.1.1 Poll GPS aiding almanac data**

| Message           |                                              | UBX-AID-ALM                  |    |                                                                                            |         |          |  |  |  |  |  |
|-------------------|----------------------------------------------|------------------------------|----|--------------------------------------------------------------------------------------------|---------|----------|--|--|--|--|--|
| Description       |                                              | Poll GPS aiding almanac data |    |                                                                                            |         |          |  |  |  |  |  |
| Firmware          | Supported on:                                |                              |    |                                                                                            |         |          |  |  |  |  |  |
|                   |                                              |                              |    | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |          |  |  |  |  |  |
|                   |                                              |                              |    | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |         |          |  |  |  |  |  |
| Type              | Poll Request                                 |                              |    |                                                                                            |         |          |  |  |  |  |  |
| Comment           |                                              |                              |    | All UBX-AID messages are deprecated; use UBX-MGA messages instead                          |         |          |  |  |  |  |  |
|                   |                                              |                              |    | Poll GPS aiding data (Almanac) for all 32 SVs by sending this message to the               |         |          |  |  |  |  |  |
|                   |                                              |                              |    | receiver without any payload. The receiver will return 32 messages of type AID             |         |          |  |  |  |  |  |
|                   | ALM as defined below.                        |                              |    |                                                                                            |         |          |  |  |  |  |  |
|                   | Header                                       | Class                        | ID | Length (Bytes)                                                                             | Payload | Checksum |  |  |  |  |  |
| Message Structure | 0xB5 0x62 0x0B 0x30 0<br>see below CK_A CK_B |                              |    |                                                                                            |         |          |  |  |  |  |  |
| No payload        |                                              |                              |    |                                                                                            |         |          |  |  |  |  |  |

#### **32.9.1.2 Poll GPS aiding almanac data for a SV**

| Message                                                                                    |                                                                   |        | UBX-AID-ALM                           |       |    |                                       |      |                                                                                  |  |                     |  |
|--------------------------------------------------------------------------------------------|-------------------------------------------------------------------|--------|---------------------------------------|-------|----|---------------------------------------|------|----------------------------------------------------------------------------------|--|---------------------|--|
| Description                                                                                |                                                                   |        | Poll GPS aiding almanac data for a SV |       |    |                                       |      |                                                                                  |  |                     |  |
| Firmware                                                                                   |                                                                   |        | Supported on:                         |       |    |                                       |      |                                                                                  |  |                     |  |
| • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                                                                   |        |                                       |       |    |                                       |      |                                                                                  |  |                     |  |
|                                                                                            | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                         |        |                                       |       |    |                                       |      |                                                                                  |  |                     |  |
| Poll Request<br>Type                                                                       |                                                                   |        |                                       |       |    |                                       |      |                                                                                  |  |                     |  |
| Comment                                                                                    | All UBX-AID messages are deprecated; use UBX-MGA messages instead |        |                                       |       |    |                                       |      |                                                                                  |  |                     |  |
|                                                                                            |                                                                   |        |                                       |       |    |                                       |      | Poll GPS aiding data (Almanac) for an SV by sending this message to the          |  |                     |  |
|                                                                                            |                                                                   |        |                                       |       |    |                                       |      | receiver. The receiver will return one message of type AID-ALM as defined below. |  |                     |  |
|                                                                                            |                                                                   | Header |                                       | Class | ID | Length (Bytes)<br>Payload<br>Checksum |      |                                                                                  |  |                     |  |
| Message Structure                                                                          |                                                                   |        | 0xB5 0x62 0x0B 0x30 1                 |       |    |                                       |      |                                                                                  |  | see below CK_A CK_B |  |
| Payload Contents:                                                                          |                                                                   |        |                                       |       |    |                                       |      |                                                                                  |  |                     |  |
| Byte Offset                                                                                | Number                                                            |        | Scaling                               | Name  |    |                                       | Unit | Description                                                                      |  |                     |  |
| Format                                                                                     |                                                                   |        |                                       |       |    |                                       |      |                                                                                  |  |                     |  |
| 0                                                                                          | U1                                                                |        | -                                     | svid  |    |                                       | -    | SV ID for which the receiver shall return its                                    |  |                     |  |
|                                                                                            |                                                                   |        |                                       |       |    |                                       |      | Almanac Data (Valid Range: 1  32 or 51,                                          |  |                     |  |
|                                                                                            |                                                                   |        |                                       |       |    |                                       |      | 56, 63).                                                                         |  |                     |  |

<span id="page-195-0"></span>

### **32.9.1.3 GPS aiding almanac input/output message**

| Message                 |                                                                                                        | UBX-AID-ALM                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |                                                            |       |    |  |                |                                                                                            |         |                     |  |
|-------------------------|--------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|-------|----|--|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|
| Description             |                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | GPS aiding almanac input/output message                    |       |    |  |                |                                                                                            |         |                     |  |
| Firmware                |                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Supported on:<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |       |    |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |
| Type                    |                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                                                            |       |    |  |                |                                                                                            |         |                     |  |
| Comment                 |                                                                                                        | Input/Output<br>All UBX-AID messages are deprecated; use UBX-MGA messages instead<br>• If the WEEK Value is 0, DWRD0 to DWRD7 are not sent as the Almanac is not<br>available for the given SV. This may happen even if NAV-SVINFO and RXM<br>SVSI are indicating almanac availability as the internal data may not represent<br>the content of an original broadcast almanac (or only parts thereof).<br>• DWORD0 to DWORD7 contain the 8 words following the Hand-Over Word (<br>HOW ) from the GPS navigation message, either pages 1 to 24 of sub-frame 5<br>or pages 2 to 10 of subframe 4. See IS-GPS-200 for a full description of the<br>contents of the Almanac pages.<br>• In DWORD0 to DWORD7, the parity bits have been removed, and the 24 bits of<br>data are located in Bits 0 to 23. Bits 24 to 31 shall be ignored.<br>• Example: Parameter e (Eccentricity) from Almanac Subframe 4/5, Word 3, Bits<br>69-84 within the subframe can be found in DWRD0, Bits 15-0 whereas Bit 0 is |                                                            |       |    |  |                |                                                                                            |         |                     |  |
|                         |                                                                                                        | Header                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | the LSB.                                                   | Class | ID |  | Length (Bytes) |                                                                                            | Payload | Checksum            |  |
| Message Structure       |                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 0xB5 0x62 0x0B 0x30 (8) or (40)                            |       |    |  |                |                                                                                            |         | see below CK_A CK_B |  |
| Payload Contents:       |                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                                                            |       |    |  |                |                                                                                            |         |                     |  |
| Byte Offset             | Number<br>Format                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Scaling                                                    | Name  |    |  | Unit           | Description                                                                                |         |                     |  |
| 0                       | svid<br>U4<br>-<br>-<br>SV ID for which this<br>Almanac Data is (Valid Range: 1  32 or 51,<br>56, 63). |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                                                            |       |    |  |                |                                                                                            |         |                     |  |
| 4                       | U4                                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | -                                                          | week  |    |  | -              | Issue Date of Almanac (GPS week number)                                                    |         |                     |  |
| Start of optional block |                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                                                            |       |    |  |                |                                                                                            |         |                     |  |
| 8                       | U4[8]                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | -                                                          | dwrd  |    |  | -              | Almanac Words                                                                              |         |                     |  |
| End of optional block   |                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                                                            |       |    |  |                |                                                                                            |         |                     |  |

<span id="page-196-1"></span>

## <span id="page-196-0"></span>**32.9.2 UBX-AID-AOP (0x0B 0x33)**

#### **32.9.2.1 Poll AssistNow Autonomous data, all satellites**

| Message           |                                              | UBX-AID-AOP                                    |    |                                                                                            |         |          |  |  |  |  |  |  |
|-------------------|----------------------------------------------|------------------------------------------------|----|--------------------------------------------------------------------------------------------|---------|----------|--|--|--|--|--|--|
| Description       |                                              | Poll AssistNow Autonomous data, all satellites |    |                                                                                            |         |          |  |  |  |  |  |  |
| Firmware          |                                              | Supported on:                                  |    |                                                                                            |         |          |  |  |  |  |  |  |
|                   |                                              |                                                |    | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |          |  |  |  |  |  |  |
|                   |                                              |                                                |    | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |         |          |  |  |  |  |  |  |
| Type              | Poll Request                                 |                                                |    |                                                                                            |         |          |  |  |  |  |  |  |
| Comment           |                                              |                                                |    | All UBX-AID messages are deprecated; use UBX-MGA messages instead                          |         |          |  |  |  |  |  |  |
|                   |                                              |                                                |    | Poll AssistNow Autonomous aiding data for all GPS satellites by sending this               |         |          |  |  |  |  |  |  |
|                   |                                              |                                                |    | empty message. The receiver will return an AID-AOP message (see definition                 |         |          |  |  |  |  |  |  |
|                   |                                              |                                                |    | below) for each GPS satellite for which data is available.                                 |         |          |  |  |  |  |  |  |
|                   | Header                                       | Class                                          | ID | Length (Bytes)                                                                             | Payload | Checksum |  |  |  |  |  |  |
| Message Structure | 0xB5 0x62 0x0B 0x33 0<br>see below CK_A CK_B |                                                |    |                                                                                            |         |          |  |  |  |  |  |  |
| No payload        |                                              |                                                |    |                                                                                            |         |          |  |  |  |  |  |  |

## **32.9.2.2 Poll AssistNow Autonomous data, one GPS satellite**

| Message           |        |        | UBX-AID-AOP                                                       |                                           |    |  |                |                                                                                            |         |                     |  |
|-------------------|--------|--------|-------------------------------------------------------------------|-------------------------------------------|----|--|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|
| Description       |        |        |                                                                   |                                           |    |  |                | Poll AssistNow Autonomous data, one GPS satellite                                          |         |                     |  |
| Firmware          |        |        | Supported on:                                                     |                                           |    |  |                |                                                                                            |         |                     |  |
|                   |        |        |                                                                   |                                           |    |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |
|                   |        |        |                                                                   | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |    |  |                |                                                                                            |         |                     |  |
| Type              |        |        | Poll Request                                                      |                                           |    |  |                |                                                                                            |         |                     |  |
| Comment           |        |        | All UBX-AID messages are deprecated; use UBX-MGA messages instead |                                           |    |  |                |                                                                                            |         |                     |  |
|                   |        |        |                                                                   |                                           |    |  |                | Poll the AssistNow Autonomous data for the specified GPS satellite. The                    |         |                     |  |
|                   |        |        |                                                                   |                                           |    |  |                | receiver will return an AID-AOP message (see definition below) if data is available        |         |                     |  |
|                   |        |        | for the requested satellite.                                      |                                           |    |  |                |                                                                                            |         |                     |  |
|                   |        | Header |                                                                   | Class                                     | ID |  | Length (Bytes) |                                                                                            | Payload | Checksum            |  |
| Message Structure |        |        | 0xB5 0x62 0x0B 0x33 1                                             |                                           |    |  |                |                                                                                            |         | see below CK_A CK_B |  |
| Payload Contents: |        |        |                                                                   |                                           |    |  |                |                                                                                            |         |                     |  |
| Byte Offset       | Number |        | Scaling<br>Name<br>Unit<br>Description                            |                                           |    |  |                |                                                                                            |         |                     |  |
|                   | Format |        |                                                                   |                                           |    |  |                |                                                                                            |         |                     |  |
| 0                 | U1     |        | -                                                                 | svid                                      |    |  | -              | GPS SV ID for which the data is requested                                                  |         |                     |  |
|                   |        |        |                                                                   |                                           |    |  |                | (valid range: 132).                                                                        |         |                     |  |

<span id="page-197-0"></span>

| Message           |        | UBX-AID-AOP                                                                |                                                                             |                                                                   |           |  |                |                                                                                            |         |                     |  |  |  |
|-------------------|--------|----------------------------------------------------------------------------|-----------------------------------------------------------------------------|-------------------------------------------------------------------|-----------|--|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|--|
| Description       |        |                                                                            | AssistNow Autonomous data                                                   |                                                                   |           |  |                |                                                                                            |         |                     |  |  |  |
| Firmware          |        |                                                                            | Supported on:                                                               |                                                                   |           |  |                |                                                                                            |         |                     |  |  |  |
|                   |        |                                                                            |                                                                             |                                                                   |           |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |  |
|                   |        |                                                                            | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                   |                                                                   |           |  |                |                                                                                            |         |                     |  |  |  |
| Type              |        |                                                                            | Input/Output                                                                |                                                                   |           |  |                |                                                                                            |         |                     |  |  |  |
| Comment           |        |                                                                            |                                                                             | All UBX-AID messages are deprecated; use UBX-MGA messages instead |           |  |                |                                                                                            |         |                     |  |  |  |
|                   |        |                                                                            |                                                                             |                                                                   |           |  |                | If enabled, this message is output at irregular intervals. It is output whenever           |         |                     |  |  |  |
|                   |        |                                                                            |                                                                             |                                                                   |           |  |                | AssistNow Autonomous has produced new data for a satellite. Depending on the               |         |                     |  |  |  |
|                   |        |                                                                            |                                                                             |                                                                   |           |  |                | availability of the optional data the receiver will output either version of the           |         |                     |  |  |  |
|                   |        |                                                                            |                                                                             |                                                                   |           |  |                | message. If this message is polled using one of the two poll requests described            |         |                     |  |  |  |
|                   |        | above, the receiver will send this message if AssistNow Autonomous data is |                                                                             |                                                                   |           |  |                |                                                                                            |         |                     |  |  |  |
|                   |        |                                                                            |                                                                             |                                                                   |           |  |                | available, or it will send the corresponding poll request message if no AssistNow          |         |                     |  |  |  |
|                   |        |                                                                            |                                                                             |                                                                   |           |  |                | Autonomous data is available for each satellite (i.e. svid 132). At the user's             |         |                     |  |  |  |
|                   |        |                                                                            |                                                                             |                                                                   |           |  |                | choice the optional data may be chopped from the payload of a previously polled            |         |                     |  |  |  |
|                   |        |                                                                            |                                                                             |                                                                   |           |  |                | message when sending the message back to the receiver. Sending a valid AID                 |         |                     |  |  |  |
|                   |        |                                                                            | AOP message to the receiver will automatically enable the AssistNow         |                                                                   |           |  |                |                                                                                            |         |                     |  |  |  |
|                   |        |                                                                            | Autonomous feature on the receiver. See section AssistNow Autonomous in the |                                                                   |           |  |                |                                                                                            |         |                     |  |  |  |
|                   |        |                                                                            |                                                                             |                                                                   |           |  |                | receiver description for details on this feature.                                          |         |                     |  |  |  |
|                   |        |                                                                            | Header                                                                      | Class                                                             | ID        |  | Length (Bytes) |                                                                                            | Payload | Checksum            |  |  |  |
| Message Structure |        |                                                                            | 0xB5 0x62 0x0B 0x33 68                                                      |                                                                   |           |  |                |                                                                                            |         | see below CK_A CK_B |  |  |  |
| Payload Contents: |        |                                                                            |                                                                             |                                                                   |           |  |                |                                                                                            |         |                     |  |  |  |
| Byte Offset       | Number |                                                                            | Scaling                                                                     | Name                                                              |           |  | Unit           | Description                                                                                |         |                     |  |  |  |
| Format            |        |                                                                            |                                                                             |                                                                   |           |  |                |                                                                                            |         |                     |  |  |  |
| 0                 | U1     |                                                                            | -                                                                           | gnssId                                                            |           |  | -              | GNSS identifier (see Satellite Numbering)                                                  |         |                     |  |  |  |
| 1                 | U1     |                                                                            | -                                                                           | svId                                                              |           |  | -              | Satellite identifier (see Satellite                                                        |         |                     |  |  |  |
|                   |        |                                                                            |                                                                             |                                                                   |           |  |                | Numbering)                                                                                 |         |                     |  |  |  |
| 2                 | U1[2]  |                                                                            | -                                                                           |                                                                   | reserved1 |  | -              | Reserved                                                                                   |         |                     |  |  |  |
| 4                 | U1[64] |                                                                            | data<br>-<br>-<br>assistance data                                           |                                                                   |           |  |                |                                                                                            |         |                     |  |  |  |

<span id="page-198-1"></span>

## <span id="page-198-0"></span>**32.9.3 UBX-AID-EPH (0x0B 0x31)**

#### **32.9.3.1 Poll GPS aiding ephemeris data**

| Message           |                                                 | UBX-AID-EPH                    |    |                                                                                            |         |          |  |  |  |  |  |
|-------------------|-------------------------------------------------|--------------------------------|----|--------------------------------------------------------------------------------------------|---------|----------|--|--|--|--|--|
| Description       |                                                 | Poll GPS aiding ephemeris data |    |                                                                                            |         |          |  |  |  |  |  |
| Firmware          |                                                 | Supported on:                  |    |                                                                                            |         |          |  |  |  |  |  |
|                   |                                                 |                                |    | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |          |  |  |  |  |  |
|                   |                                                 |                                |    | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |         |          |  |  |  |  |  |
| Type              | Poll Request                                    |                                |    |                                                                                            |         |          |  |  |  |  |  |
| Comment           |                                                 |                                |    | All UBX-AID messages are deprecated; use UBX-MGA messages instead                          |         |          |  |  |  |  |  |
|                   |                                                 |                                |    | Poll GPS Aiding Data (Ephemeris) for all 32 SVs by sending this message to the             |         |          |  |  |  |  |  |
|                   |                                                 |                                |    | receiver without any payload. The receiver will return 32 messages of type AID             |         |          |  |  |  |  |  |
|                   | EPH as defined below.                           |                                |    |                                                                                            |         |          |  |  |  |  |  |
|                   | Header                                          | Class                          | ID | Length (Bytes)                                                                             | Payload | Checksum |  |  |  |  |  |
| Message Structure | 0xB5 0x62 0x0B 0x31<br>0<br>see below CK_A CK_B |                                |    |                                                                                            |         |          |  |  |  |  |  |
| No payload        |                                                 |                                |    |                                                                                            |         |          |  |  |  |  |  |

#### **32.9.3.2 Poll GPS aiding ephemeris data for a SV**

| Message           |        |                                                                              | UBX-AID-EPH                                                       |       |    |   |                |                                                                                            |         |                     |  |  |
|-------------------|--------|------------------------------------------------------------------------------|-------------------------------------------------------------------|-------|----|---|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|
| Description       |        |                                                                              | Poll GPS aiding ephemeris data for a SV                           |       |    |   |                |                                                                                            |         |                     |  |  |
| Firmware          |        |                                                                              | Supported on:                                                     |       |    |   |                |                                                                                            |         |                     |  |  |
|                   |        |                                                                              |                                                                   |       |    |   |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |
|                   |        |                                                                              | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                         |       |    |   |                |                                                                                            |         |                     |  |  |
| Type              |        |                                                                              | Poll Request                                                      |       |    |   |                |                                                                                            |         |                     |  |  |
| Comment           |        |                                                                              | All UBX-AID messages are deprecated; use UBX-MGA messages instead |       |    |   |                |                                                                                            |         |                     |  |  |
|                   |        | Poll GPS Constellation Data (Ephemeris) for an SV by sending this message to |                                                                   |       |    |   |                |                                                                                            |         |                     |  |  |
|                   |        |                                                                              |                                                                   |       |    |   |                | the receiver. The receiver will return one message of type AID-EPH as defined              |         |                     |  |  |
|                   |        |                                                                              | below.                                                            |       |    |   |                |                                                                                            |         |                     |  |  |
|                   |        | Header                                                                       |                                                                   | Class | ID |   | Length (Bytes) |                                                                                            | Payload | Checksum            |  |  |
| Message Structure |        |                                                                              | 0xB5 0x62 0x0B 0x31                                               |       |    | 1 |                |                                                                                            |         | see below CK_A CK_B |  |  |
| Payload Contents: |        |                                                                              |                                                                   |       |    |   |                |                                                                                            |         |                     |  |  |
| Byte Offset       | Number |                                                                              | Scaling<br>Name<br>Unit<br>Description                            |       |    |   |                |                                                                                            |         |                     |  |  |
|                   | Format |                                                                              |                                                                   |       |    |   |                |                                                                                            |         |                     |  |  |
| 0                 | U1     |                                                                              | -                                                                 | svid  |    |   | -              | SV ID for which the receiver shall return its                                              |         |                     |  |  |
|                   |        |                                                                              | Ephemeris Data (Valid Range: 1  32).                              |       |    |   |                |                                                                                            |         |                     |  |  |

<span id="page-199-0"></span>

| Message                 |                  | UBX-AID-EPH                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                           |       |    |              |                |                                                                                            |         |                     |  |  |
|-------------------------|------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|-------|----|--------------|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|
| Description             |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                           |       |    |              |                | GPS aiding ephemeris input/output message                                                  |         |                     |  |  |
| Firmware                |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Supported on:                             |       |    |              |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |
|                         |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |       |    |              |                |                                                                                            |         |                     |  |  |
| Type                    |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                           |       |    |              |                |                                                                                            |         |                     |  |  |
| Comment                 |                  | Input/Output<br>All UBX-AID messages are deprecated; use UBX-MGA messages instead<br>• SF1D0 to SF3D7 is only sent if ephemeris is available for this SV. If not, the<br>payload may be reduced to 8 Bytes, or all bytes are set to zero, indicating that<br>this SV Number does not have valid ephemeris for the moment. This may<br>happen even if NAV-SVINFO and RXM-SVSI are indicating ephemeris<br>availability as the internal data may not represent the content of an original<br>broadcast ephemeris (or only parts thereof).<br>• SF1D0 to SF3D7 contain the 24 words following the Hand-Over Word ( HOW )<br>from the GPS navigation message, subframes 1 to 3. The Truncated TOW<br>Count is not valid and cannot be used. See IS-GPS-200 for a full description of<br>the contents of the Subframes.<br>• In SF1D0 to SF3D7, the parity bits have been removed, and the 24 bits of data<br>are located in Bits 0 to 23. Bits 24 to 31 shall be ignored.<br>• When polled, the data contained in this message does not represent the full<br>original ephemeris broadcast. Some fields that are irrelevant to u-blox<br>receivers may be missing. The week number in Subframe 1 has already been |                                           |       |    |              |                |                                                                                            |         |                     |  |  |
|                         |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Header                                    | Class | ID |              | Length (Bytes) | modified to match the Time Of Ephemeris (TOE).                                             | Payload | Checksum            |  |  |
| Message Structure       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 0xB5 0x62 0x0B 0x31                       |       |    | (8) or (104) |                |                                                                                            |         | see below CK_A CK_B |  |  |
| Payload Contents:       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                           |       |    |              |                |                                                                                            |         |                     |  |  |
| Byte Offset             | Number<br>Format |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Scaling                                   | Name  |    |              | Unit           | Description                                                                                |         |                     |  |  |
| 0                       | U4               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | -                                         | svid  |    |              | -              | SV ID for which this ephemeris data is<br>(Valid Range: 1  32).                            |         |                     |  |  |
| 4                       | U4               | how<br>-<br>-<br>Hand-Over Word of first Subframe. This is<br>required if data is sent to the receiver.<br>0 indicates that no Ephemeris Data is<br>following.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                                           |       |    |              |                |                                                                                            |         |                     |  |  |
| Start of optional block |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                           |       |    |              |                |                                                                                            |         |                     |  |  |
| 8                       | U4[8]            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | -                                         | sf1d  |    |              | -              | Subframe 1 Words 310 (SF1D0SF1D7)                                                          |         |                     |  |  |
| 40                      | U4[8]            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | -                                         | sf2d  |    |              | -              | Subframe 2 Words 310 (SF2D0SF2D7)                                                          |         |                     |  |  |
| 72                      | U4[8]            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | -                                         | sf3d  |    |              | -              | Subframe 3 Words 310 (SF3D0SF3D7)                                                          |         |                     |  |  |
| End of optional block   |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                           |       |    |              |                |                                                                                            |         |                     |  |  |

## **32.9.3.3 GPS aiding ephemeris input/output message**

<span id="page-200-1"></span>

## <span id="page-200-0"></span>**32.9.4 UBX-AID-HUI (0x0B 0x02)**

### **32.9.4.1 Poll GPS health, UTC, ionosphere parameters**

| Message           |                       | UBX-AID-HUI                                                                                |    |                                                                   |         |                     |  |  |  |  |  |  |
|-------------------|-----------------------|--------------------------------------------------------------------------------------------|----|-------------------------------------------------------------------|---------|---------------------|--|--|--|--|--|--|
| Description       |                       | Poll GPS health, UTC, ionosphere parameters                                                |    |                                                                   |         |                     |  |  |  |  |  |  |
| Firmware          |                       | Supported on:                                                                              |    |                                                                   |         |                     |  |  |  |  |  |  |
|                   |                       | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |    |                                                                   |         |                     |  |  |  |  |  |  |
|                   |                       | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |    |                                                                   |         |                     |  |  |  |  |  |  |
| Type              |                       | Poll Request                                                                               |    |                                                                   |         |                     |  |  |  |  |  |  |
| Comment           |                       |                                                                                            |    | All UBX-AID messages are deprecated; use UBX-MGA messages instead |         |                     |  |  |  |  |  |  |
|                   | -                     |                                                                                            |    |                                                                   |         |                     |  |  |  |  |  |  |
|                   | Header                | Class                                                                                      | ID | Length (Bytes)                                                    | Payload | Checksum            |  |  |  |  |  |  |
| Message Structure | 0xB5 0x62 0x0B 0x02 0 |                                                                                            |    |                                                                   |         | see below CK_A CK_B |  |  |  |  |  |  |
| No payload        |                       |                                                                                            |    |                                                                   |         |                     |  |  |  |  |  |  |

## **32.9.4.2 GPS health, UTC and ionosphere parameters**

| Message           |         |  | UBX-AID-HUI                                                   |        |    |              |                                           |                                                                                            |         |          |  |  |  |  |
|-------------------|---------|--|---------------------------------------------------------------|--------|----|--------------|-------------------------------------------|--------------------------------------------------------------------------------------------|---------|----------|--|--|--|--|
| Description       |         |  | GPS health, UTC and ionosphere parameters                     |        |    |              |                                           |                                                                                            |         |          |  |  |  |  |
| Firmware          |         |  | Supported on:                                                 |        |    |              |                                           |                                                                                            |         |          |  |  |  |  |
|                   |         |  |                                                               |        |    |              |                                           | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |          |  |  |  |  |
|                   |         |  | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                     |        |    |              |                                           |                                                                                            |         |          |  |  |  |  |
| Type              |         |  | Input/Output                                                  |        |    |              |                                           |                                                                                            |         |          |  |  |  |  |
| Comment           |         |  |                                                               |        |    |              |                                           | All UBX-AID messages are deprecated; use UBX-MGA messages instead                          |         |          |  |  |  |  |
|                   |         |  |                                                               |        |    |              |                                           | This message contains a health bit mask, UTC time and Klobuchar parameters.                |         |          |  |  |  |  |
|                   |         |  | For more information on these parameters, see the ICD-GPS-200 |        |    |              |                                           |                                                                                            |         |          |  |  |  |  |
|                   |         |  | documentation.                                                |        |    |              |                                           |                                                                                            |         |          |  |  |  |  |
|                   |         |  | Header                                                        | Class  | ID |              | Length (Bytes)                            |                                                                                            | Payload | Checksum |  |  |  |  |
| Message Structure |         |  | 0xB5 0x62 0x0B 0x02 72                                        |        |    |              | see below CK_A CK_B                       |                                                                                            |         |          |  |  |  |  |
| Payload Contents: |         |  |                                                               |        |    |              |                                           |                                                                                            |         |          |  |  |  |  |
| Byte Offset       | Number  |  | Scaling                                                       | Name   |    |              | Unit                                      | Description                                                                                |         |          |  |  |  |  |
|                   | Format  |  |                                                               |        |    |              |                                           |                                                                                            |         |          |  |  |  |  |
| 0                 | X4      |  | -                                                             | health |    |              | -                                         | Bitmask, every bit represenst a GPS SV (1-                                                 |         |          |  |  |  |  |
|                   |         |  |                                                               |        |    |              |                                           | 32). If the bit is set the SV is healthy.                                                  |         |          |  |  |  |  |
| 4                 | R8      |  | -                                                             | utcA0  |    |              | -                                         | UTC - parameter A0                                                                         |         |          |  |  |  |  |
| 12                | R8      |  | -                                                             | utcA1  |    |              | -                                         | UTC - parameter A1                                                                         |         |          |  |  |  |  |
| 20                | I4      |  | -                                                             | utcTOW |    |              | -                                         | UTC - reference time of week                                                               |         |          |  |  |  |  |
| 24                | I2      |  | -                                                             | utcWNT |    |              | -                                         | UTC - reference week number                                                                |         |          |  |  |  |  |
| 26                | I2      |  | -                                                             | utcLS  |    |              | -                                         | UTC - time difference due to leap seconds                                                  |         |          |  |  |  |  |
|                   |         |  |                                                               |        |    |              |                                           | before event                                                                               |         |          |  |  |  |  |
| 28                | I2<br>- |  |                                                               | utcWNF |    |              | -                                         | UTC - week number when next leap                                                           |         |          |  |  |  |  |
|                   |         |  |                                                               |        |    |              |                                           | second event occurs                                                                        |         |          |  |  |  |  |
| 30<br>I2<br>-     |         |  | utcDN                                                         |        |    | -            | UTC - day of week when next leap second   |                                                                                            |         |          |  |  |  |  |
|                   |         |  |                                                               |        |    | event occurs |                                           |                                                                                            |         |          |  |  |  |  |
| 32<br>I2<br>-     |         |  | utcLSF                                                        |        |    | -            | UTC - time difference due to leap seconds |                                                                                            |         |          |  |  |  |  |
|                   |         |  |                                                               |        |    |              |                                           | after event                                                                                |         |          |  |  |  |  |



#### UBX-AID-HUI continued

| Byte Offset | Number | Scaling | Name     | Unit<br>Description |                                      |  |  |  |
|-------------|--------|---------|----------|---------------------|--------------------------------------|--|--|--|
|             | Format |         |          |                     |                                      |  |  |  |
| 34          | I2     | -       | utcSpare | -                   | UTC - Spare to ensure structure is a |  |  |  |
|             |        |         |          |                     | multiple of 4 bytes                  |  |  |  |
| 36          | R4     | -       | klobA0   | s                   | Klobuchar - alpha 0                  |  |  |  |
| 40          | R4     | -       | klobA1   | s/semi              | Klobuchar - alpha 1                  |  |  |  |
|             |        |         |          | circle              |                                      |  |  |  |
| 44          | R4     | -       | klobA2   | s/semi              | Klobuchar - alpha 2                  |  |  |  |
|             |        |         |          | circle^             |                                      |  |  |  |
|             |        |         |          | 2                   |                                      |  |  |  |
| 48          | R4     | -       | klobA3   | s/semi              | Klobuchar - alpha 3                  |  |  |  |
|             |        |         |          | circle^             |                                      |  |  |  |
|             |        |         |          | 3                   |                                      |  |  |  |
| 52          | R4     | -       | klobB0   | s                   | Klobuchar - beta 0                   |  |  |  |
| 56          | R4     | -       | klobB1   | s/semi              | Klobuchar - beta 1                   |  |  |  |
|             |        |         |          | circle              |                                      |  |  |  |
| 60          | R4     | -       | klobB2   | s/semi              | Klobuchar - beta 2                   |  |  |  |
|             |        |         |          | circle^             |                                      |  |  |  |
|             |        |         |          | 2                   |                                      |  |  |  |
| 64          | R4     | -       | klobB3   | s/semi              | Klobuchar - beta 3                   |  |  |  |
|             |        |         |          | circle^             |                                      |  |  |  |
|             |        |         |          | 3                   |                                      |  |  |  |
| 68          | X4     | -       | flags    | -                   | flags (see graphic below)            |  |  |  |

## <span id="page-201-0"></span>**Bitfield flags**

|  |  |  |  |  |  |  |  |  |  |  |  |  |  | ਠ<br>$-$<br>$\overline{\phantom{0}}$<br>Æ,<br>÷.<br>ò<br>ㅎ<br>$\overline{\phantom{0}}$<br>$\overline{\phantom{a}}$ | ਨ<br>$\dot{}$<br>$\overline{\phantom{0}}$<br>ඟ | ಾ<br>$\cdot$ $\overline{ }$<br>$\overline{\phantom{0}}$<br>S<br>$\overline{a}$<br>喜<br>呕<br>л. |
|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--------------------------------------------------------------------------------------------------------------------|------------------------------------------------|------------------------------------------------------------------------------------------------|

| Name        | Description                                          |
|-------------|------------------------------------------------------|
| healthValid | Healthmask field in this message is valid            |
| utcValid    | UTC parameter fields in this message are valid       |
| klobValid   | Klobuchar parameter fields in this message are valid |

<span id="page-202-1"></span>

## <span id="page-202-0"></span>**32.9.5 UBX-AID-INI (0x0B 0x01)**

## **32.9.5.1 Poll GPS initial aiding data**

| Message           |                       | UBX-AID-INI                                                                                |    |                                                                   |         |                     |  |  |  |  |  |
|-------------------|-----------------------|--------------------------------------------------------------------------------------------|----|-------------------------------------------------------------------|---------|---------------------|--|--|--|--|--|
| Description       |                       | Poll GPS initial aiding data                                                               |    |                                                                   |         |                     |  |  |  |  |  |
| Firmware          |                       | Supported on:                                                                              |    |                                                                   |         |                     |  |  |  |  |  |
|                   |                       | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |    |                                                                   |         |                     |  |  |  |  |  |
|                   |                       | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |    |                                                                   |         |                     |  |  |  |  |  |
| Type              |                       | Poll Request                                                                               |    |                                                                   |         |                     |  |  |  |  |  |
| Comment           |                       |                                                                                            |    | All UBX-AID messages are deprecated; use UBX-MGA messages instead |         |                     |  |  |  |  |  |
|                   | -                     |                                                                                            |    |                                                                   |         |                     |  |  |  |  |  |
|                   | Header                | Class                                                                                      | ID | Length (Bytes)                                                    | Payload | Checksum            |  |  |  |  |  |
| Message Structure | 0xB5 0x62 0x0B 0x01 0 |                                                                                            |    |                                                                   |         | see below CK_A CK_B |  |  |  |  |  |
| No payload        |                       |                                                                                            |    |                                                                   |         |                     |  |  |  |  |  |

## **32.9.5.2 Aiding position, time, frequency, clock drift**

| Message           |                  |             | UBX-AID-INI                                                |            |            |                          |                                      |                                                                                            |         |                     |  |  |
|-------------------|------------------|-------------|------------------------------------------------------------|------------|------------|--------------------------|--------------------------------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|
| Description       |                  |             | Aiding position, time, frequency, clock drift              |            |            |                          |                                      |                                                                                            |         |                     |  |  |
| Firmware          |                  |             | Supported on:<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |            |            |                          |                                      | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |
| Type              |                  |             | Input/Output                                               |            |            |                          |                                      |                                                                                            |         |                     |  |  |
| Comment           |                  |             |                                                            |            |            |                          |                                      | All UBX-AID messages are deprecated; use UBX-MGA messages instead                          |         |                     |  |  |
|                   |                  |             |                                                            |            |            |                          |                                      | This message contains position, time and clock drift information. The position             |         |                     |  |  |
|                   |                  |             |                                                            |            |            |                          |                                      | can be input in either the ECEF X/Y/Z coordinate system or as lat/lon/height. The          |         |                     |  |  |
|                   |                  |             |                                                            |            |            |                          |                                      | time can either be input as inexact value via the standard communication                   |         |                     |  |  |
|                   |                  |             |                                                            |            |            |                          |                                      | interface, suffering from latency depending on the baud rate, or using hardware            |         |                     |  |  |
|                   |                  |             |                                                            |            |            |                          |                                      | time synchronization where an accurate time pulse is input on the external                 |         |                     |  |  |
|                   |                  |             |                                                            |            |            |                          |                                      | interrupts. It is also possible to supply hardware frequency aiding by connecting          |         |                     |  |  |
|                   |                  |             | a continuous signal to an external interrupt.              |            |            |                          |                                      |                                                                                            |         |                     |  |  |
|                   |                  |             | Header                                                     | Class      | ID         |                          | Length (Bytes)                       |                                                                                            | Payload | Checksum            |  |  |
| Message Structure |                  |             | 0xB5 0x62 0x0B 0x01 48                                     |            |            |                          |                                      |                                                                                            |         | see below CK_A CK_B |  |  |
| Payload Contents: |                  |             |                                                            |            |            |                          |                                      |                                                                                            |         |                     |  |  |
| Byte Offset       | Number<br>Format |             | Scaling                                                    | Name       |            |                          | Unit                                 | Description                                                                                |         |                     |  |  |
| 0                 | I4               |             | -                                                          |            | ecefXOrLat |                          | cm_                                  | WGS84 ECEF X coordinate or latitude,                                                       |         |                     |  |  |
|                   |                  |             |                                                            |            |            |                          | or_                                  | depending on flags below                                                                   |         |                     |  |  |
|                   |                  |             |                                                            |            |            |                          | deg*1e                               |                                                                                            |         |                     |  |  |
|                   |                  |             |                                                            |            |            |                          | 7                                    |                                                                                            |         |                     |  |  |
| 4                 | I4               |             | -                                                          |            | ecefYOrLon |                          | cm_                                  | WGS84 ECEF Y coordinate or longitude,                                                      |         |                     |  |  |
|                   |                  |             |                                                            |            | or_        |                          |                                      | depending on flags below                                                                   |         |                     |  |  |
|                   |                  |             |                                                            |            |            |                          | deg*1e                               |                                                                                            |         |                     |  |  |
|                   |                  |             |                                                            |            | 7          |                          |                                      |                                                                                            |         |                     |  |  |
| 8                 | I4               |             | -                                                          | ecefZOrAlt |            | cm                       | WGS84 ECEF Z coordinate or altitude, |                                                                                            |         |                     |  |  |
|                   |                  |             |                                                            |            |            | depending on flags below |                                      |                                                                                            |         |                     |  |  |
| 12                | U4               | posAcc<br>- |                                                            |            |            | cm                       | Position accuracy (stddev)           |                                                                                            |         |                     |  |  |



#### UBX-AID-INI continued

| Byte Offset | Number | Scaling | Name          | Unit   | Description                            |
|-------------|--------|---------|---------------|--------|----------------------------------------|
|             | Format |         |               |        |                                        |
| 16          | X2     | -       | tmCfg         | -      | Time mark configuration (see graphic   |
|             |        |         |               |        | below)                                 |
| 18          | U2     | -       | wnoOrDate     | week_  | Actual week number or                  |
|             |        |         |               | or_    | yearSince2000/Month (YYMM),            |
|             |        |         |               | yearM  | depending on flags below               |
|             |        |         |               | onth   |                                        |
| 20          | U4     | -       | towOrTime     | ms_    | Actual time of week or                 |
|             |        |         |               | or_    | DayOfMonth/Hour/Minute/Second          |
|             |        |         |               | dayHo  | (DDHHMMSS), depending on flags below   |
|             |        |         |               | urMin  |                                        |
|             |        |         |               | uteSe  |                                        |
|             |        |         |               | c      |                                        |
| 24          | I4     | -       | towNs         | ns     | Fractional part of time of week        |
| 28          | U4     | -       | tAccMs        | ms     | Milliseconds part of time accuracy     |
| 32          | U4     | -       | tAccNs        | ns     | Nanoseconds part of time accuracy      |
| 36          | I4     | -       | clkDOrFreq    | ns/s_  | Clock drift or frequency, depending on |
|             |        |         |               | or_    | flags below                            |
|             |        |         |               | Hz*1e  |                                        |
|             |        |         |               | 2      |                                        |
| 40          | U4     | -       | clkDAccOrFreq | ns/s_  | Accuracy of clock drift or frequency,  |
|             |        |         | Acc           | or_ppb | depending on flags below               |
| 44          | X4     | -       | flags         | -      | Bitmask with the following flags (see  |
|             |        |         |               |        | graphic below)                         |

## <span id="page-203-0"></span>**Bitfield tmCfg**



| Name  | Description                              |
|-------|------------------------------------------|
| fEdge | use falling edge (default rising)        |
| tm1   | time mark on extint 1 (default extint 0) |
| f1    | frequency on extint 1 (default extint 0) |



## <span id="page-204-0"></span>**Bitfield flags**

| Name   | Description                                                                              |  |  |  |  |  |  |  |  |  |
|--------|------------------------------------------------------------------------------------------|--|--|--|--|--|--|--|--|--|
| pos    | Position is valid                                                                        |  |  |  |  |  |  |  |  |  |
| time   | Time is valid                                                                            |  |  |  |  |  |  |  |  |  |
| clockD | Clock drift data contains valid clock drift, must not be set together with clockF        |  |  |  |  |  |  |  |  |  |
| tp     | Use time pulse                                                                           |  |  |  |  |  |  |  |  |  |
| clockF | Clock drift data contains valid frequency, must not be set together with clockD          |  |  |  |  |  |  |  |  |  |
| lla    | Position is given in lat/long/alt (default is ECEF)                                      |  |  |  |  |  |  |  |  |  |
| altInv | Altitude is not valid, if lla was set                                                    |  |  |  |  |  |  |  |  |  |
| prevTm | Use time mark received before AID-INI message (default uses mark received after message) |  |  |  |  |  |  |  |  |  |
| utc    | Time is given as UTC date/time (default is GPS wno/tow)                                  |  |  |  |  |  |  |  |  |  |

<span id="page-205-0"></span>

## **32.10 UBX-CFG (0x06)**

Configuration Input Messages: i.e. Configure the receiver.

Messages in the CFG class can be used to configure the receiver and poll current configuration values. Any messages in the CFG class sent to the receiver are either acknowledged (with message [UBX-ACK-ACK](#page-193-0)) if processed successfully or rejected (with message [UBX-ACK-NAK](#page-193-0)) if processing unsuccessfully.

## <span id="page-205-1"></span>**32.10.1 UBX-CFG-ANT (0x06 0x13)**

#### **32.10.1.1 Antenna control settings**

| Message           |        |                                                                              | UBX-CFG-ANT                                          |       |    |   |                                       |                                                                                            |         |                     |  |  |
|-------------------|--------|------------------------------------------------------------------------------|------------------------------------------------------|-------|----|---|---------------------------------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|
| Description       |        |                                                                              | Antenna control settings                             |       |    |   |                                       |                                                                                            |         |                     |  |  |
| Firmware          |        |                                                                              | Supported on:                                        |       |    |   |                                       |                                                                                            |         |                     |  |  |
|                   |        |                                                                              |                                                      |       |    |   |                                       | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |
| Type              |        |                                                                              | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01<br>Get/set |       |    |   |                                       |                                                                                            |         |                     |  |  |
| Comment           |        |                                                                              |                                                      |       |    |   |                                       | This message allows the user to configure the antenna supervisor.                          |         |                     |  |  |
|                   |        |                                                                              |                                                      |       |    |   |                                       | The antenna supervisor can be used to detect the status of an active antenna               |         |                     |  |  |
|                   |        |                                                                              |                                                      |       |    |   |                                       | and control it. It can be used to turn off the supply to the antenna in the event of       |         |                     |  |  |
|                   |        |                                                                              |                                                      |       |    |   |                                       | a short cirquit (for example) or to manage power consumption in power save                 |         |                     |  |  |
|                   |        |                                                                              | mode.                                                |       |    |   |                                       |                                                                                            |         |                     |  |  |
|                   |        | Refer to antenna supervisor configuration in the integration manual for more |                                                      |       |    |   |                                       |                                                                                            |         |                     |  |  |
|                   |        |                                                                              |                                                      |       |    |   |                                       | information regarding the behavior of the antenna supervisor.                              |         |                     |  |  |
|                   |        |                                                                              |                                                      |       |    |   |                                       | Refer to UBX-MON-HW for a description of the fields in the message used to                 |         |                     |  |  |
|                   |        |                                                                              | obtain the status of the antenna.                    |       |    |   |                                       |                                                                                            |         |                     |  |  |
|                   |        |                                                                              |                                                      |       |    |   |                                       | Note that not all pins can be used for antenna supervisor operation, the default           |         |                     |  |  |
|                   |        |                                                                              |                                                      |       |    |   |                                       | pins are recommended. Consult the integration manual if you need to use the                |         |                     |  |  |
|                   |        |                                                                              | other pins.                                          |       |    |   |                                       |                                                                                            |         |                     |  |  |
|                   |        | Header                                                                       |                                                      | Class | ID |   | Length (Bytes)                        |                                                                                            | Payload | Checksum            |  |  |
| Message Structure |        |                                                                              | 0xB5 0x62 0x06 0x13                                  |       |    | 4 |                                       |                                                                                            |         | see below CK_A CK_B |  |  |
| Payload Contents: |        |                                                                              |                                                      |       |    |   |                                       |                                                                                            |         |                     |  |  |
| Byte Offset       | Number |                                                                              | Scaling                                              | Name  |    |   | Unit                                  | Description                                                                                |         |                     |  |  |
|                   | Format |                                                                              |                                                      |       |    |   |                                       |                                                                                            |         |                     |  |  |
| 0                 | X2     | flags<br>-                                                                   |                                                      |       |    | - | Antenna flag mask (see graphic below) |                                                                                            |         |                     |  |  |
| 2                 | X2     |                                                                              | -                                                    | pins  |    |   | -                                     | Antenna pin configuration (see graphic                                                     |         |                     |  |  |
|                   |        |                                                                              |                                                      |       |    |   |                                       | below)                                                                                     |         |                     |  |  |

## <span id="page-205-2"></span>**Bitfield flags**



<span id="page-206-1"></span>

| Name      | Description                                                                              |
|-----------|------------------------------------------------------------------------------------------|
| svcs      | Enable antenna supply voltage control signal                                             |
| scd       | Enable short circuit detection                                                           |
| ocd       | Enable open circuit detection                                                            |
| pdwnOnSCD | Power down antenna supply if short circuit is detected. (only in combination with bit 1) |
| recovery  | Enable automatic recovery from short state                                               |

## <span id="page-206-2"></span>**Bitfield pins**

This graphic explains the bits of pins

| 15 <sup>1</sup> | 14 | 13 12 11 | 10 | 9      | 8 | 6 | 5 |             |  |  |
|-----------------|----|----------|----|--------|---|---|---|-------------|--|--|
| econfig         | 불  |          |    | ⊶<br>Ω |   |   |   | в<br>ø<br>⊶ |  |  |

| Name      | Description                                                                                        |
|-----------|----------------------------------------------------------------------------------------------------|
| pinSwitch | PIO-pin used for switching antenna supply                                                          |
| pinSCD    | PIO-pin used for detecting a short in the antenna supply                                           |
| pinOCD    | PIO-pin used for detecting open/not connected antenna                                              |
| reconfig  | if set to one, and this command is sent to the receiver, the receiver will reconfigure the pins as |
|           | specified.                                                                                         |

## <span id="page-206-0"></span>**32.10.2 UBX-CFG-BATCH (0x06 0x93)**

## **32.10.2.1 Get/set data batching configuration**

| Message           |        |                                              | UBX-CFG-BATCH                                                  |         |           |  |   |                                                    |  |  |  |  |  |
|-------------------|--------|----------------------------------------------|----------------------------------------------------------------|---------|-----------|--|---|----------------------------------------------------|--|--|--|--|--|
| Description       |        |                                              | Get/set data batching configuration                            |         |           |  |   |                                                    |  |  |  |  |  |
| Firmware          |        |                                              | Supported on:                                                  |         |           |  |   |                                                    |  |  |  |  |  |
|                   |        |                                              |                                                                |         |           |  |   | • u-blox 8 / u-blox M8 with protocol version 23.01 |  |  |  |  |  |
| Type              |        |                                              | Get/set                                                        |         |           |  |   |                                                    |  |  |  |  |  |
| Comment           |        |                                              | Gets or sets the configuration for data batching.              |         |           |  |   |                                                    |  |  |  |  |  |
|                   |        |                                              | See Data Batching for more information.                        |         |           |  |   |                                                    |  |  |  |  |  |
|                   |        |                                              | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum |         |           |  |   |                                                    |  |  |  |  |  |
| Message Structure |        | 0xB5 0x62 0x06 0x93 8<br>see below CK_A CK_B |                                                                |         |           |  |   |                                                    |  |  |  |  |  |
| Payload Contents: |        |                                              |                                                                |         |           |  |   |                                                    |  |  |  |  |  |
| Byte Offset       | Number |                                              | Scaling                                                        |         | Name      |  |   | Description                                        |  |  |  |  |  |
|                   | Format |                                              |                                                                |         |           |  |   |                                                    |  |  |  |  |  |
| 0                 | U1     |                                              | -                                                              | version |           |  | - | Message version (0x00 for this version)            |  |  |  |  |  |
| 1                 | X1     |                                              | -                                                              | flags   |           |  | - | Flags (see graphic below)                          |  |  |  |  |  |
| 2                 | U2     |                                              | -                                                              | bufSize |           |  | - | Size of buffer in number of epochs to store        |  |  |  |  |  |
| 4                 | U2     |                                              | -                                                              |         | notifThrs |  | - | Buffer fill level that triggers PIO                |  |  |  |  |  |
|                   |        |                                              |                                                                |         |           |  |   | notification, in number of epochs stored           |  |  |  |  |  |
| 6                 | U1     |                                              | -                                                              | pioId   |           |  | - | PIO ID to use for buffer level notification        |  |  |  |  |  |
| 7                 | U1     | -                                            |                                                                |         | reserved1 |  | - | Reserved                                           |  |  |  |  |  |

<span id="page-207-1"></span>

## <span id="page-207-2"></span>**Bitfield flags**

This graphic explains the bits of flags



| Name         | Description                                                                                        |
|--------------|----------------------------------------------------------------------------------------------------|
| enable       | Enable data batching                                                                               |
| extraPvt     | Store extra PVT information                                                                        |
|              | The fields iTOW, tAcc, numSV, hMSL, vAcc, velN, velE, velD, sAcc, headAcc and pDOP in UBX-LOG      |
|              | BATCH are only valid if this flag is set.                                                          |
| extraOdo     | Store odometer data                                                                                |
|              | The fields distance, totalDistance and distanceStd in UBX-LOG-BATCH are only valid if this flag is |
|              | set.                                                                                               |
|              | Note: the odometer feature itself must also be enabled.                                            |
| pioEnable    | Enable PIO notification                                                                            |
| pioActiveLow | PIO is active low                                                                                  |

#### <span id="page-207-0"></span>**32.10.3 UBX-CFG-CFG (0x06 0x09)**

## **32.10.3.1 Clear, save and load configurations**

| Message           |        |   | UBX-CFG-CFG                                                                   |       |           |  |                |                                                                                                                                                                  |         |                     |  |  |
|-------------------|--------|---|-------------------------------------------------------------------------------|-------|-----------|--|----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|---------------------|--|--|
| Description       |        |   | Clear, save and load configurations                                           |       |           |  |                |                                                                                                                                                                  |         |                     |  |  |
| Firmware          |        |   | Supported on:                                                                 |       |           |  |                |                                                                                                                                                                  |         |                     |  |  |
|                   |        |   | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                     |       |           |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,                                                                       |         |                     |  |  |
| Type              |        |   | Command                                                                       |       |           |  |                |                                                                                                                                                                  |         |                     |  |  |
| Comment           |        |   |                                                                               |       |           |  |                | See Receiver configuration for a detailed description on how receiver                                                                                            |         |                     |  |  |
|                   |        |   | configuration should be used. The three masks are made up of individual bits, |       |           |  |                |                                                                                                                                                                  |         |                     |  |  |
|                   |        |   | each bit indicating the sub-section of all configurations on which the        |       |           |  |                |                                                                                                                                                                  |         |                     |  |  |
|                   |        |   |                                                                               |       |           |  |                | corresponding action shall be carried out. The reserved bits in the masks must                                                                                   |         |                     |  |  |
|                   |        |   |                                                                               |       |           |  |                | be set to '0'. For detailed information refer to the Organization of the                                                                                         |         |                     |  |  |
|                   |        |   |                                                                               |       |           |  |                | configuration sections. Note that commands can be combined. The sequence of                                                                                      |         |                     |  |  |
|                   |        |   | execution is clear, save, load.                                               |       |           |  |                |                                                                                                                                                                  |         |                     |  |  |
|                   |        |   | Header                                                                        | Class | ID        |  | Length (Bytes) |                                                                                                                                                                  | Payload | Checksum            |  |  |
| Message Structure |        |   | 0xB5 0x62 0x06 0x09 (12) or (13)                                              |       |           |  |                |                                                                                                                                                                  |         | see below CK_A CK_B |  |  |
| Payload Contents: |        |   |                                                                               |       |           |  |                |                                                                                                                                                                  |         |                     |  |  |
| Byte Offset       | Number |   | Scaling                                                                       | Name  |           |  | Unit           | Description                                                                                                                                                      |         |                     |  |  |
|                   | Format |   |                                                                               |       |           |  |                |                                                                                                                                                                  |         |                     |  |  |
| 0                 | X4     | - |                                                                               |       | clearMask |  | -              | Mask with configuration sub-sections to<br>clear (i.e. load default configurations to<br>permanent configurations in non-volatile<br>memory) (see graphic below) |         |                     |  |  |



#### UBX-CFG-CFG continued

| Byte Offset             | Number | Scaling | Name       | Unit | Description                                 |
|-------------------------|--------|---------|------------|------|---------------------------------------------|
|                         | Format |         |            |      |                                             |
| 4                       | X4     | -       | saveMask   | -    | Mask with configuration sub-sections to     |
|                         |        |         |            |      | save (i.e. save current configurations to   |
|                         |        |         |            |      | non-volatile memory), see ID description of |
|                         |        |         |            |      | clearMask                                   |
| 8                       | X4     | -       | loadMask   | -    | Mask with configuration sub-sections to     |
|                         |        |         |            |      | load (i.e. load permanent configurations    |
|                         |        |         |            |      | from non-volatile memory to current         |
|                         |        |         |            |      | configurations), see ID description of      |
|                         |        |         |            |      | clearMask                                   |
| Start of optional block |        |         |            |      |                                             |
| 12                      | X1     | -       | deviceMask | -    | Mask which selects the memory devices       |
|                         |        |         |            |      | for this command. (see graphic below)       |
| End of optional block   |        |         |            |      |                                             |

<span id="page-208-0"></span>

## **Bitfield clearMask**

|  |  |  |  |  |  |  |  |  | ᅩᄼ                  | ---                                               | $\overline{\phantom{a}}$ |                             | 8                       |  | 4           | っ<br>د                                 | - 22<br>ے                           | -4           |                                |
|--|--|--|--|--|--|--|--|--|---------------------|---------------------------------------------------|--------------------------|-----------------------------|-------------------------|--|-------------|----------------------------------------|-------------------------------------|--------------|--------------------------------|
|  |  |  |  |  |  |  |  |  | ੜ<br>ငွ<br>ند<br>⊶. | <u> ட</u><br>õ<br>မ္စ<br>$\overline{\phantom{0}}$ | ō<br>₽<br>–<br>怎         | ō<br>$\cdot$ $\overline{ }$ | <u>ы</u><br>ō<br>⊕<br>ø |  | ≍<br>Ξ<br>× | ட<br><u>_</u><br>≒<br>≂<br>∽<br>市<br>- | ys<br>M<br>÷<br>∸<br>$\overline{a}$ | ω.<br>ৡ<br>ε | ىد<br>ō<br>웅<br>$\overline{a}$ |

| Name     | Description                                                                                        |
|----------|----------------------------------------------------------------------------------------------------|
| ioPort   | Communications port settings. Modifying this sub-section results in an IO system reset. Because of |
|          | this undefined data may be output for a short period of time after receiving the message.          |
| msgConf  | Message configuration                                                                              |
| infMsg   | INF message configuration                                                                          |
| navConf  | Navigation configuration                                                                           |
| rxmConf  | Receiver Manager configuration                                                                     |
| senConf  | Sensor interface configuration (not supported in protocol versions less than 19)                   |
| rinvConf | Remote inventory configuration                                                                     |
| antConf  | Antenna configuration                                                                              |
| logConf  | Logging configuration                                                                              |
| ftsConf  | FTS configuration. Only applicable to the FTS product variant.                                     |

<span id="page-209-1"></span>

## **Bitfield deviceMask**

<span id="page-209-2"></span>This graphic explains the bits of deviceMask



| Name        | Description        |
|-------------|--------------------|
| devBBR      | Battery backed RAM |
| devFlash    | Flash              |
| devEEPROM   | EEPROM             |
| devSpiFlash | SPI Flash          |

## <span id="page-209-0"></span>**32.10.4 UBX-CFG-DAT (0x06 0x06)**

#### **32.10.4.1 Set user-defined datum**

| Message           |         | UBX-CFG-DAT |                                           |       |    |  |                                  |                                                                                            |                                            |                     |  |
|-------------------|---------|-------------|-------------------------------------------|-------|----|--|----------------------------------|--------------------------------------------------------------------------------------------|--------------------------------------------|---------------------|--|
| Description       |         |             | Set user-defined datum                    |       |    |  |                                  |                                                                                            |                                            |                     |  |
| Firmware          |         |             | Supported on:                             |       |    |  |                                  |                                                                                            |                                            |                     |  |
|                   |         |             |                                           |       |    |  |                                  | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                                            |                     |  |
|                   |         |             | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |       |    |  |                                  |                                                                                            |                                            |                     |  |
| Type              |         | Set         |                                           |       |    |  |                                  |                                                                                            |                                            |                     |  |
| Comment           |         |             |                                           |       |    |  |                                  | For more information see the description of Geodetic Systems and Frames.                   |                                            |                     |  |
|                   |         |             | Header                                    | Class | ID |  | Length (Bytes)                   |                                                                                            | Payload                                    | Checksum            |  |
| Message Structure |         |             | 0xB5 0x62 0x06 0x06 44                    |       |    |  |                                  |                                                                                            |                                            | see below CK_A CK_B |  |
| Payload Contents: |         |             |                                           |       |    |  |                                  |                                                                                            |                                            |                     |  |
| Byte Offset       | Number  |             | Scaling                                   | Name  |    |  | Unit                             | Description                                                                                |                                            |                     |  |
|                   | Format  |             |                                           |       |    |  |                                  |                                                                                            |                                            |                     |  |
| 0                 | R8      |             | -                                         | majA  |    |  | m                                |                                                                                            | Semi-major axis ( accepted range = 6,300,  |                     |  |
|                   |         |             |                                           |       |    |  | 000.0 to 6,500,000.0 meters ).   |                                                                                            |                                            |                     |  |
| 8                 | R8      | -           |                                           | flat  |    |  | -                                | 1.0 / flattening ( accepted range is 0.0 to                                                |                                            |                     |  |
|                   |         |             |                                           |       |    |  |                                  | 500.0 ).                                                                                   |                                            |                     |  |
| 16                | R4      |             | -                                         | dX    |    |  | m                                | X axis shift at the origin ( accepted range                                                |                                            |                     |  |
|                   |         |             |                                           |       |    |  |                                  | is +/- 5000.0 meters ).                                                                    |                                            |                     |  |
| 20                | R4      |             | -                                         | dY    |    |  | m                                | Y axis shift at the origin ( accepted range                                                |                                            |                     |  |
|                   |         |             |                                           |       |    |  |                                  | is +/- 5000.0 meters ).                                                                    |                                            |                     |  |
| 24                | R4      |             | -                                         | dZ    |    |  | m                                | Z axis shift at the origin ( accepted range                                                |                                            |                     |  |
|                   |         |             |                                           |       |    |  |                                  | is +/- 5000.0 meters ).                                                                    |                                            |                     |  |
| 28                | R4      |             | -                                         | rotX  |    |  | s                                | Rotation about the X axis ( accepted range                                                 |                                            |                     |  |
|                   |         |             |                                           |       |    |  |                                  | is +/- 20.0 milli-arc seconds ).                                                           |                                            |                     |  |
| 32                | R4<br>- |             |                                           | rotY  |    |  | s                                | Rotation about the Y axis ( accepted range                                                 |                                            |                     |  |
|                   |         |             |                                           |       |    |  | is +/- 20.0 milli-arc seconds ). |                                                                                            |                                            |                     |  |
| 36                | R4<br>- |             |                                           | rotZ  |    |  | s                                |                                                                                            | Rotation about the Z axis ( accepted range |                     |  |
|                   |         |             |                                           |       |    |  |                                  | is +/- 20.0 milli-arc seconds ).                                                           |                                            |                     |  |
| 40                | R4      |             | -                                         | scale |    |  | ppm                              | Scale change ( accepted range is 0.0 to                                                    |                                            |                     |  |
|                   |         |             |                                           |       |    |  |                                  | 50.0 parts per million ).                                                                  |                                            |                     |  |

<span id="page-210-0"></span>

## **32.10.4.2 Get currently defined datum**

| Message           |                  |                                                                                                                              | UBX-CFG-DAT                                                |             |       |                |                                                                                |                                                                                            |                                         |                     |  |  |  |  |
|-------------------|------------------|------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|-------------|-------|----------------|--------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------|-----------------------------------------|---------------------|--|--|--|--|
| Description       |                  |                                                                                                                              | Get currently defined datum                                |             |       |                |                                                                                |                                                                                            |                                         |                     |  |  |  |  |
| Firmware          |                  |                                                                                                                              | Supported on:<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |             |       |                |                                                                                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                                         |                     |  |  |  |  |
| Type              |                  | Get                                                                                                                          |                                                            |             |       |                |                                                                                |                                                                                            |                                         |                     |  |  |  |  |
| Comment           |                  | Returns the parameters of the currently defined datum. If no user-defined<br>datum has been set, this will default to WGS84. |                                                            |             |       |                |                                                                                |                                                                                            |                                         |                     |  |  |  |  |
|                   |                  | Header                                                                                                                       |                                                            | Class<br>ID |       | Length (Bytes) |                                                                                | Payload                                                                                    | Checksum                                |                     |  |  |  |  |
| Message Structure |                  |                                                                                                                              | 0xB5 0x62 0x06 0x06 52                                     |             |       |                |                                                                                |                                                                                            |                                         | see below CK_A CK_B |  |  |  |  |
| Payload Contents: |                  |                                                                                                                              |                                                            |             |       |                |                                                                                |                                                                                            |                                         |                     |  |  |  |  |
| Byte Offset       | Number<br>Format |                                                                                                                              | Scaling                                                    | Name        |       |                | Unit                                                                           | Description                                                                                |                                         |                     |  |  |  |  |
| 0                 | U2               |                                                                                                                              | -                                                          | datumNum    |       |                | -                                                                              | Datum number: 0 = WGS84, 0xFFFF =<br>user-defined                                          |                                         |                     |  |  |  |  |
| 2                 | CH[6]            |                                                                                                                              | -                                                          | datumName   |       | -              | ASCII string: WGS84 or USER                                                    |                                                                                            |                                         |                     |  |  |  |  |
| 8                 | R8               |                                                                                                                              | -                                                          | majA        |       | m              | Semi-major axis ( accepted range = 6,300,<br>000.0 to 6,500,000.0 meters ).    |                                                                                            |                                         |                     |  |  |  |  |
| 16                | R8               |                                                                                                                              | -                                                          | flat        |       |                | -                                                                              | 1.0 / flattening ( accepted range is 0.0 to<br>500.0 ).                                    |                                         |                     |  |  |  |  |
| 24                | R4               |                                                                                                                              | -                                                          | dX          |       |                | m                                                                              | X axis shift at the origin ( accepted range<br>is +/- 5000.0 meters ).                     |                                         |                     |  |  |  |  |
| 28                | R4               |                                                                                                                              | -                                                          | dY          |       |                | m                                                                              | Y axis shift at the origin ( accepted range<br>is +/- 5000.0 meters ).                     |                                         |                     |  |  |  |  |
| 32                | R4               |                                                                                                                              | -                                                          | dZ          |       |                | m                                                                              | Z axis shift at the origin ( accepted range<br>is +/- 5000.0 meters ).                     |                                         |                     |  |  |  |  |
| 36                | R4               |                                                                                                                              | -                                                          | rotX        |       |                | s                                                                              | Rotation about the X axis ( accepted range<br>is +/- 20.0 milli-arc seconds ).             |                                         |                     |  |  |  |  |
| 40                | R4               | -                                                                                                                            |                                                            | rotY        |       |                | s                                                                              | Rotation about the Y axis ( accepted range<br>is +/- 20.0 milli-arc seconds ).             |                                         |                     |  |  |  |  |
| 44                | R4<br>-          |                                                                                                                              |                                                            | rotZ        |       | s              | Rotation about the Z axis ( accepted range<br>is +/- 20.0 milli-arc seconds ). |                                                                                            |                                         |                     |  |  |  |  |
| 48                | R4               |                                                                                                                              | -                                                          |             | scale |                | ppm                                                                            | 50.0 parts per million ).                                                                  | Scale change ( accepted range is 0.0 to |                     |  |  |  |  |

<span id="page-211-2"></span>

## <span id="page-211-0"></span>**32.10.5 UBX-CFG-DGNSS (0x06 0x70)**

### **32.10.5.1 DGNSS configuration**

| Message           |        |                                                    | UBX-CFG-DGNSS                                                            |                            |           |  |      |                                                                                            |          |                     |  |  |  |
|-------------------|--------|----------------------------------------------------|--------------------------------------------------------------------------|----------------------------|-----------|--|------|--------------------------------------------------------------------------------------------|----------|---------------------|--|--|--|
| Description       |        |                                                    | DGNSS configuration                                                      |                            |           |  |      |                                                                                            |          |                     |  |  |  |
| Firmware          |        |                                                    | Supported on:                                                            |                            |           |  |      |                                                                                            |          |                     |  |  |  |
|                   |        |                                                    |                                                                          |                            |           |  |      | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |          |                     |  |  |  |
|                   |        |                                                    |                                                                          |                            |           |  |      | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 (only with High Precision GNSS                   |          |                     |  |  |  |
|                   |        |                                                    | products)                                                                |                            |           |  |      |                                                                                            |          |                     |  |  |  |
| Type              |        |                                                    | Get/set                                                                  |                            |           |  |      |                                                                                            |          |                     |  |  |  |
| Comment           |        |                                                    | This message allows the user to configure the DGNSS configuration of the |                            |           |  |      |                                                                                            |          |                     |  |  |  |
|                   |        |                                                    | receiver.                                                                |                            |           |  |      |                                                                                            |          |                     |  |  |  |
|                   |        | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload |                                                                          |                            |           |  |      |                                                                                            | Checksum |                     |  |  |  |
| Message Structure |        |                                                    | 0xB5 0x62 0x06 0x70 4                                                    |                            |           |  |      |                                                                                            |          | see below CK_A CK_B |  |  |  |
| Payload Contents: |        |                                                    |                                                                          |                            |           |  |      |                                                                                            |          |                     |  |  |  |
| Byte Offset       | Number |                                                    | Scaling                                                                  | Name                       |           |  | Unit | Description                                                                                |          |                     |  |  |  |
|                   | Format |                                                    |                                                                          |                            |           |  |      |                                                                                            |          |                     |  |  |  |
| 0                 | U1     |                                                    | -                                                                        |                            | dgnssMode |  | -    | Specifies differential mode:                                                               |          |                     |  |  |  |
|                   |        |                                                    |                                                                          |                            |           |  |      | 2: RTK float: No attempts are made to fix                                                  |          |                     |  |  |  |
|                   |        |                                                    |                                                                          |                            |           |  |      | ambiguities.                                                                               |          |                     |  |  |  |
|                   |        |                                                    |                                                                          |                            |           |  |      | 3: RTK fixed: Ambiguities are fixed                                                        |          |                     |  |  |  |
|                   |        |                                                    |                                                                          |                            |           |  |      | whenever possible.                                                                         |          |                     |  |  |  |
| 1                 | U1[3]  |                                                    | -                                                                        | reserved1<br>-<br>Reserved |           |  |      |                                                                                            |          |                     |  |  |  |

## <span id="page-211-1"></span>**32.10.6 UBX-CFG-DOSC (0x06 0x61)**

#### **32.10.6.1 Disciplined oscillator configuration**

| Message           |        |                                                     | UBX-CFG-DOSC                         |         |    |  |                |                                                                                           |         |                     |  |
|-------------------|--------|-----------------------------------------------------|--------------------------------------|---------|----|--|----------------|-------------------------------------------------------------------------------------------|---------|---------------------|--|
| Description       |        |                                                     | Disciplined oscillator configuration |         |    |  |                |                                                                                           |         |                     |  |
| Firmware          |        |                                                     | Supported on:                        |         |    |  |                |                                                                                           |         |                     |  |
|                   |        |                                                     |                                      |         |    |  |                | • u-blox 8 / u-blox M8 protocol versions 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20. |         |                     |  |
|                   |        |                                                     |                                      |         |    |  |                | 2, 20.3, 22, 22.01, 23 and 23.01 (only with Time & Frequency Sync products)               |         |                     |  |
| Type              |        |                                                     | Get/set                              |         |    |  |                |                                                                                           |         |                     |  |
| Comment           |        |                                                     |                                      |         |    |  |                | This message allows the characteristics of the internal or external oscillator to         |         |                     |  |
|                   |        |                                                     | be described to the receiver.        |         |    |  |                |                                                                                           |         |                     |  |
|                   |        |                                                     |                                      |         |    |  |                | The gainVco and gainUncertainty parameters are normally set using the                     |         |                     |  |
|                   |        | calibration process initiated using UBX-TIM-VCOCAL. |                                      |         |    |  |                |                                                                                           |         |                     |  |
|                   |        |                                                     |                                      |         |    |  |                | The behavior of the system can be badly affected by setting the wrong values,             |         |                     |  |
|                   |        |                                                     |                                      |         |    |  |                | so customers are advised to only change these parameters with care.                       |         |                     |  |
|                   |        |                                                     | Header                               | Class   | ID |  | Length (Bytes) |                                                                                           | Payload | Checksum            |  |
| Message Structure |        |                                                     | 0xB5 0x62 0x06 0x61                  |         |    |  | 4 + 32*numOsc  |                                                                                           |         | see below CK_A CK_B |  |
| Payload Contents: |        |                                                     |                                      |         |    |  |                |                                                                                           |         |                     |  |
| Byte Offset       | Number |                                                     | Scaling                              | Name    |    |  | Unit           | Description                                                                               |         |                     |  |
|                   | Format |                                                     |                                      |         |    |  |                |                                                                                           |         |                     |  |
| 0                 | U1     |                                                     | -                                    | version |    |  | -              | Message version (0x00 for this version)                                                   |         |                     |  |
| 1                 | U1     |                                                     | -                                    | numOsc  |    |  | -              | Number of oscillators to configure (affects                                               |         |                     |  |
|                   |        |                                                     |                                      |         |    |  |                | length of this message)                                                                   |         |                     |  |



| Byte Offset                            | Number | Scaling | Name          | Unit   | Description                                 |
|----------------------------------------|--------|---------|---------------|--------|---------------------------------------------|
|                                        | Format |         |               |        |                                             |
| 2                                      | U1[2]  | -       | reserved1     | -      | Reserved                                    |
| Start of repeated block (numOsc times) |        |         |               |        |                                             |
| 4 + 32*N                               | U1     | -       | oscId         | -      | Id of oscillator.                           |
|                                        |        |         |               |        | 0 - internal oscillator                     |
|                                        |        |         |               |        | 1 - external oscillator                     |
| 5 + 32*N                               | U1     | -       | reserved2     | -      | Reserved                                    |
| 6 + 32*N                               | X2     | -       | flags         | -      | flags (see graphic below)                   |
| 8 + 32*N                               | U4     | 2^-2    | freq          | Hz     | Nominal frequency of source                 |
| 12 + 32*N                              | I4     | -       | phaseOffset   | ps     | Intended phase offset of the oscillator     |
|                                        |        |         |               |        | relative to the leading edge of the time    |
|                                        |        |         |               |        | pulse                                       |
| 16 + 32*N                              | U4     | 2^-8    | withTemp      | ppb    | Oscillator stability limit over operating   |
|                                        |        |         |               |        | temperature range (must be > 0)             |
| 20 + 32*N                              | U4     | 2^-8    | withAge       | ppb/ye | Oscillator stability with age (must be > 0) |
|                                        |        |         |               | ar     |                                             |
| 24 + 32*N                              | U2     | -       | timeToTemp    | s      | The minimum time that it could take for a   |
|                                        |        |         |               |        | temperature variation to move the           |
|                                        |        |         |               |        | oscillator frequency by 'withTemp' (must    |
|                                        |        |         |               |        | be > 0)                                     |
| 26 + 32*N                              | U1[2]  | -       | reserved3     | -      | Reserved                                    |
| 28 + 32*N                              | I4     | 2^-16   | gainVco       | ppb/ra | Oscillator control gain/slope; change of    |
|                                        |        |         |               | w LSB  | frequency per unit change in raw control    |
|                                        |        |         |               |        | change                                      |
| 32 + 32*N                              | U1     | 2^-8    | gainUncertain | -      | Relative uncertainty (1 standard deviation) |
|                                        |        |         | ty            |        | of oscillator control gain/slope            |
| 33 + 32*N                              | U1[3]  | -       | reserved4     | -      | Reserved                                    |
| End of repeated block                  |        |         |               |        |                                             |

## <span id="page-212-0"></span>**Bitfield flags**



<span id="page-213-1"></span>

| Name         | Description                                                                                   |
|--------------|-----------------------------------------------------------------------------------------------|
| isCalibrated | 1 if the oscillator gain is calibrated, 0 if not                                              |
| controlIf    | Communication interface for oscillator control:                                               |
|              | 0: Custom DAC attached to receiver's I2C                                                      |
|              | 1: Microchip MCP4726 (12 bit DAC) attached to receiver's I2C                                  |
|              | 2: TI DAC8571 (16 bit DAC) attached to receiver's I2C                                         |
|              | 13: 12 bit DAC attached to host                                                               |
|              | 14: 14 bit DAC attached to host                                                               |
|              | 15: 16 bit DAC attached to host                                                               |
|              | Note that for DACs attached to the host, the host must monitor UBX-TIM-DOSC messages and pass |
|              | the supplied raw values on to the DAC.                                                        |

## <span id="page-213-0"></span>**32.10.7 UBX-CFG-ESFALG (0x06 0x56)**

#### **32.10.7.1 Get/set IMU-mount misalignment configuration**

| Message                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                  |      | UBX-CFG-ESFALG |       |          |                                 |                                                                                                                               |                                                                                                                                                                                                                                        |  |  |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------|------|----------------|-------|----------|---------------------------------|-------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--|--|
| Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                  |      |                |       |          |                                 |                                                                                                                               | Get/set IMU-mount misalignment configuration                                                                                                                                                                                           |  |  |
| Firmware                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |                  |      | Supported on:  |       |          |                                 |                                                                                                                               | • u-blox 8 / u-blox M8 protocol versions 15.01, 16 and 17 (only with ADR products)<br>• u-blox 8 / u-blox M8 protocol versions 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.3,<br>22, 22.01, 23 and 23.01 (only with ADR or UDR products) |  |  |
| Type                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                  |      | Get/set        |       |          |                                 |                                                                                                                               |                                                                                                                                                                                                                                        |  |  |
| Get/set the IMU-mount misalignment configuration (rotation from installation<br>Comment<br>frame to the IMU-frame).<br>A detailed description on how to compose this configuration is given in the ADR<br>Installation section for ADR products.<br>A detailed description on how to compose this configuration is given in the UDR<br>Installation section for UDR products.<br>Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>0xB5 0x62 0x06 0x56 12<br>Message Structure |                  |      |                |       |          | Checksum<br>see below CK_A CK_B |                                                                                                                               |                                                                                                                                                                                                                                        |  |  |
| Payload Contents:                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                  |      |                |       |          |                                 |                                                                                                                               |                                                                                                                                                                                                                                        |  |  |
| Byte Offset                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Number<br>Format |      | Scaling        | Name  |          |                                 | Unit                                                                                                                          | Description                                                                                                                                                                                                                            |  |  |
| 0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | U4               |      | -              |       | bitfield |                                 | -                                                                                                                             | Bitfield (see graphic below)                                                                                                                                                                                                           |  |  |
| 4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | U4               | 1e-2 |                | yaw   |          |                                 | deg                                                                                                                           | User-defined IMU-mount yaw angle [0,<br>36000], e.g. for 60.00 degree yaw angle<br>the configured value would be 6000                                                                                                                  |  |  |
| 8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | I2               |      | 1e-2           | pitch |          | deg                             | User-defined IMU-mount pitch angle [-<br>9000, 9000], e.g. for 60.00 degree pitch<br>angle the configured value would be 6000 |                                                                                                                                                                                                                                        |  |  |

10 I2 1e-2 roll deg User-defined IMU-mount roll angle [-

18000, 18000], e.g. for 60.00 degree roll angle the configured value would be 6000

<span id="page-214-1"></span>

## **Bitfield bitfield**

<span id="page-214-2"></span>This graphic explains the bits of bitfield



| Name         | Description                                                                                        |
|--------------|----------------------------------------------------------------------------------------------------|
| version      | Message version (0x00 for this version)                                                            |
| doAutoMntAlg | Only supported on certain products.                                                                |
|              | Enable/disable automatic IMU-mount alignment (0: Disabled, 1: Enabled). This flag can only be used |
|              | with modules containing an internal IMU.                                                           |

## <span id="page-214-0"></span>**32.10.8 UBX-CFG-ESFA (0x06 0x4C)**

#### **32.10.8.1 Get/set the Accelerometer (A) sensor configuration**

| UBX-CFG-ESFA<br>Message |                   |                        |                                                                              |           |              |      |                |                                                                                       |                     |          |  |  |  |
|-------------------------|-------------------|------------------------|------------------------------------------------------------------------------|-----------|--------------|------|----------------|---------------------------------------------------------------------------------------|---------------------|----------|--|--|--|
| Description             |                   |                        |                                                                              |           |              |      |                | Get/set the Accelerometer (A) sensor configuration                                    |                     |          |  |  |  |
| Firmware                |                   |                        | Supported on:                                                                |           |              |      |                |                                                                                       |                     |          |  |  |  |
|                         |                   |                        |                                                                              |           |              |      |                | • u-blox 8 / u-blox M8 protocol versions 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.3, |                     |          |  |  |  |
|                         |                   |                        |                                                                              |           |              |      |                | 22, 22.01, 23 and 23.01 (only with UDR products)                                      |                     |          |  |  |  |
| Type                    |                   |                        | Get/set                                                                      |           |              |      |                |                                                                                       |                     |          |  |  |  |
| Comment                 |                   |                        | Get/set the configuration for the accelerometer sensor required for External |           |              |      |                |                                                                                       |                     |          |  |  |  |
|                         |                   |                        | Sensor Fusion (ESF) based navigation. More details can be found in the       |           |              |      |                |                                                                                       |                     |          |  |  |  |
|                         |                   |                        | Accelerometer Configuration section.                                         |           |              |      |                |                                                                                       |                     |          |  |  |  |
|                         |                   | Header                 |                                                                              | Class     | ID           |      | Length (Bytes) |                                                                                       | Payload             | Checksum |  |  |  |
| Message Structure       |                   | 0xB5 0x62 0x06 0x4C 20 |                                                                              |           |              |      |                |                                                                                       | see below CK_A CK_B |          |  |  |  |
|                         | Payload Contents: |                        |                                                                              |           |              |      |                |                                                                                       |                     |          |  |  |  |
| Byte Offset             | Number            |                        | Scaling                                                                      | Name      |              | Unit | Description    |                                                                                       |                     |          |  |  |  |
|                         | Format            |                        |                                                                              |           |              |      |                |                                                                                       |                     |          |  |  |  |
| 0                       | U1                |                        | -                                                                            | version   |              |      | -              | Message version (0x00 for this version)                                               |                     |          |  |  |  |
| 1                       | U1[9]             |                        | -                                                                            | reserved1 |              | -    | Reserved       |                                                                                       |                     |          |  |  |  |
| 10                      | U1                |                        | 2^-6                                                                         |           | accelRmsThdl |      | m/s^2          | Accelerometer RMS threshold below                                                     |                     |          |  |  |  |
|                         |                   |                        |                                                                              |           |              |      |                | which automatically estimated                                                         |                     |          |  |  |  |
|                         |                   |                        |                                                                              |           |              |      |                | accelerometer noise-level (accuracy) is                                               |                     |          |  |  |  |
|                         |                   |                        |                                                                              |           |              |      |                | updated.                                                                              |                     |          |  |  |  |
| 11                      | U1                |                        | -                                                                            |           | frequency    |      | Hz             | Nominal accelerometer sensor data                                                     |                     |          |  |  |  |
|                         |                   |                        |                                                                              |           |              |      |                | sampling frequency.                                                                   |                     |          |  |  |  |
| 12                      | U2                |                        | -                                                                            |           | latency      |      | ms             | Accelerometer sensor data latency due to                                              |                     |          |  |  |  |
|                         |                   |                        |                                                                              |           |              |      |                | e.g. CAN bus.                                                                         |                     |          |  |  |  |
| 14                      | U2                |                        | 1e-4                                                                         |           | accuracy     |      | m/s^2          | Accelerometer sensor data accuracy.                                                   |                     |          |  |  |  |
| 16                      | U1[4]             |                        | -                                                                            |           | reserved2    |      | -              | Reserved                                                                              |                     |          |  |  |  |

<span id="page-215-2"></span>

## <span id="page-215-0"></span>**32.10.9 UBX-CFG-ESFG (0x06 0x4D)**

### **32.10.9.1 Get/set the Gyroscope (G) sensor configuration**

| Message           |                                                  |         | UBX-CFG-ESFG                                                                    |           |             |               |                |                                                                                       |         |                     |  |  |
|-------------------|--------------------------------------------------|---------|---------------------------------------------------------------------------------|-----------|-------------|---------------|----------------|---------------------------------------------------------------------------------------|---------|---------------------|--|--|
| Description       |                                                  |         |                                                                                 |           |             |               |                | Get/set the Gyroscope (G) sensor configuration                                        |         |                     |  |  |
| Firmware          |                                                  |         | Supported on:                                                                   |           |             |               |                |                                                                                       |         |                     |  |  |
|                   |                                                  |         |                                                                                 |           |             |               |                | • u-blox 8 / u-blox M8 protocol versions 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.3, |         |                     |  |  |
|                   | 22, 22.01, 23 and 23.01 (only with UDR products) |         |                                                                                 |           |             |               |                |                                                                                       |         |                     |  |  |
| Type              |                                                  | Get/set |                                                                                 |           |             |               |                |                                                                                       |         |                     |  |  |
| Comment           |                                                  |         | Get/set the configuration for the gyroscope sensor required for External Sensor |           |             |               |                |                                                                                       |         |                     |  |  |
|                   |                                                  |         | Fusion (ESF) based navigation. More details can be found in the Gyroscope       |           |             |               |                |                                                                                       |         |                     |  |  |
|                   |                                                  |         | Configuration section.                                                          |           |             |               |                |                                                                                       |         |                     |  |  |
|                   |                                                  |         | Header                                                                          | Class     | ID          |               | Length (Bytes) |                                                                                       | Payload | Checksum            |  |  |
| Message Structure |                                                  |         | 0xB5 0x62 0x06 0x4D 20                                                          |           |             |               |                |                                                                                       |         | see below CK_A CK_B |  |  |
|                   | Payload Contents:                                |         |                                                                                 |           |             |               |                |                                                                                       |         |                     |  |  |
| Byte Offset       | Number                                           |         | Scaling                                                                         |           | Name        |               | Unit           | Description                                                                           |         |                     |  |  |
|                   | Format                                           |         |                                                                                 |           |             |               |                |                                                                                       |         |                     |  |  |
| 0                 | U1                                               |         | -                                                                               | version   |             |               | -              | Message version (0x00 for this version)                                               |         |                     |  |  |
| 1                 | U1[7]                                            |         | -                                                                               | reserved1 |             | -             | Reserved       |                                                                                       |         |                     |  |  |
| 8                 | U2                                               |         | -                                                                               |           |             | tcTableSaveRa | s              | Temperature-dependent gyroscope bias                                                  |         |                     |  |  |
|                   |                                                  |         |                                                                                 | te        |             |               |                | table saving update rate.                                                             |         |                     |  |  |
| 10                | U1                                               |         | 2^-8                                                                            |           | gyroRmsThdl |               | deg/s          | Gyroscope sensor RMS threshold below                                                  |         |                     |  |  |
|                   |                                                  |         |                                                                                 |           |             |               |                | which automatically estimated gyroscope                                               |         |                     |  |  |
|                   |                                                  |         |                                                                                 |           |             |               |                | noise-level (accuracy) is updated.                                                    |         |                     |  |  |
| 11                | U1                                               |         | -                                                                               |           | frequency   |               | Hz             | Nominal gyroscope sensor data sampling                                                |         |                     |  |  |
|                   |                                                  |         |                                                                                 |           |             |               |                | frequency.                                                                            |         |                     |  |  |
| 12                | U2                                               |         | -                                                                               |           | latency     |               | ms             | Gyroscope sensor data latency due to e.g.                                             |         |                     |  |  |
|                   |                                                  |         |                                                                                 |           |             |               |                | CAN bus.                                                                              |         |                     |  |  |
| 14                | U2                                               |         | 1e-3                                                                            |           | accuracy    |               | deg/s          | Gyroscope sensor data accuracy.                                                       |         |                     |  |  |
| 16                | U1[4]                                            |         | -                                                                               |           | reserved2   |               | -              | Reserved                                                                              |         |                     |  |  |

## <span id="page-215-1"></span>**32.10.10 UBX-CFG-ESFWT (0x06 0x82)**

## **32.10.10.1 Get/set wheel-tick configuration**

| Message           | UBX-CFG-ESFWT                                                                          |       |    |                                                                               |         |                     |  |  |
|-------------------|----------------------------------------------------------------------------------------|-------|----|-------------------------------------------------------------------------------|---------|---------------------|--|--|
| Description       | Get/set wheel-tick configuration                                                       |       |    |                                                                               |         |                     |  |  |
| Firmware          | Supported on:                                                                          |       |    |                                                                               |         |                     |  |  |
|                   | • u-blox 8 / u-blox M8 protocol versions 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |       |    |                                                                               |         |                     |  |  |
|                   | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 (only with ADR products)                     |       |    |                                                                               |         |                     |  |  |
| Type              | Get/set                                                                                |       |    |                                                                               |         |                     |  |  |
| Comment           | Get/set the wheel-tick configuration for GWT or GAWT solution. Further                 |       |    |                                                                               |         |                     |  |  |
|                   |                                                                                        |       |    | information on the configuration parameters is given in the Automotive Dead   |         |                     |  |  |
|                   | Reckoning (ADR) chapter.                                                               |       |    |                                                                               |         |                     |  |  |
|                   |                                                                                        |       |    | This field can only be used with modules supporting analog wheel-tick signals |         |                     |  |  |
|                   | and containing an internal IMU.                                                        |       |    |                                                                               |         |                     |  |  |
|                   | Header                                                                                 | Class | ID | Length (Bytes)                                                                | Payload | Checksum            |  |  |
| Message Structure | 0xB5 0x62 0x06 0x82 32                                                                 |       |    |                                                                               |         | see below CK_A CK_B |  |  |



| Payload Contents: |                  |         |               |       |                                              |
|-------------------|------------------|---------|---------------|-------|----------------------------------------------|
| Byte Offset       | Number<br>Format | Scaling | Name          | Unit  | Description                                  |
| 0                 | U1               | -       | version       | -     | Message version (0x00 for this version)      |
| 1                 | X1               | -       | flags1        | -     | Flags (see graphic below)                    |
| 2                 | X1               | -       | flags2        | -     | Flags (see graphic below)                    |
| 3                 | U1[1]            | -       | reserved1     | -     | Reserved                                     |
| 4                 | U4               | 1e-6    | wtFactor      | -     | Wheel-tick scale factor to obtain distance   |
|                   |                  |         |               |       | [m] from wheel-ticks (0 = not set)           |
| 8                 | U4               | 1e-6    | wtQuantError  | m (or | Wheel-tick quantization. If useWtSpeed is    |
|                   |                  |         |               | m/s)  | set then this is interpreted as the speed    |
|                   |                  |         |               |       | measurement error RMS.                       |
| 12                | U4               | -       | wtCountMax    | -     | Wheel-tick counter maximum value             |
|                   |                  |         |               |       | (rollover - 1). If null, relative wheel-tick |
|                   |                  |         |               |       | counts are assumed (and therefore no         |
|                   |                  |         |               |       | rollover). If not null, absolute wheel-tick  |
|                   |                  |         |               |       | counts are assumed and the value             |
|                   |                  |         |               |       | corresponds to the highest tick count        |
|                   |                  |         |               |       | value before rollover happens. If            |
|                   |                  |         |               |       | useWtSpeed is set then this value is         |
|                   |                  |         |               |       | ignored.                                     |
|                   |                  |         |               |       | If value is set to 1, absolute wheel-tick    |
|                   |                  |         |               |       | counts are assumed and the value will be     |
|                   |                  |         |               |       | automatic calculated if possible. It is only |
|                   |                  |         |               |       | possible for automatic calibration to        |
|                   |                  |         |               |       | calculate wtCntMax if it can be              |
|                   |                  |         |               |       | represented as a number of set bits (i.e.    |
|                   |                  |         |               |       | 2^N). If it cannot be represented in this    |
|                   |                  |         |               |       | way it must be set to the correct absolute   |
|                   |                  |         |               |       | tick value manually.                         |
| 16                | U2               | -       | wtLatency     | ms    | Wheel-tick data latency due to e.g. CAN      |
|                   |                  |         |               |       | bus                                          |
| 18                | U1               | -       | wtFrequency   | Hz    | Nominal wheel-tick data frequency (0 =       |
|                   |                  |         |               |       | not set)                                     |
| 19                | X1               | -       | flags3        | -     | Flags (see graphic below)                    |
| 20                | U2               | -       | speedDeadBand | cm/s  | Speed sensor dead band (0 = not set)         |
| 22                | U1[10]           | -       | reserved2     | -     | Reserved                                     |



## <span id="page-217-0"></span>**Bitfield flags1**

This graphic explains the bits of flags1



| Name         | Description                                                                              |
|--------------|------------------------------------------------------------------------------------------|
| combineTicks | Use combined rear wheel-ticks instead of the single tick                                 |
| useWtSpeed   | Use speed measurements (data type 11 in ESF-MEAS) instead of single ticks (data type 10) |
| dirPinPol    | Only supported on certain products.                                                      |
|              | Direction pin polarity                                                                   |
|              | 0: High signal level means forward direction,                                            |
|              | 1: High signal level means backward direction.                                           |
| useWtPin     | Use wheel-tick pin for speed measurement.                                                |

## <span id="page-217-1"></span>**Bitfield flags2**



| Name          | Description                                                                                             |
|---------------|---------------------------------------------------------------------------------------------------------|
| autoWtCountMa | Disable automatic estimation of maximum absolute wheel-tick counter value (0: enabled, 1:               |
| xOff          | disabled). See wtCountMax field description for more details.                                           |
|               | (Not supported in protocol versions less than 19)                                                       |
| autoDirPinPol | Only supported on certain products.                                                                     |
| Off           | Disable automatic wheel-tick direction pin polarity detection (0: enabled, 1: disabled). See dirPinPol  |
|               | field description for more details.                                                                     |
|               | (Not supported in protocol versions less than 19)                                                       |
| autoSoftwareW | Only supported on certain products.                                                                     |
| tOff          | Disable automatic use of wheel-tick or speed data received over the software interface if available (0: |
|               | enabled, 1: disabled). In this case, data coming from the hardware interface (wheel-tick pins) will     |
|               | automatically be ignored if wheel-tick/speed data are available from the software interface. See        |
|               | useWtPin field description for more details.                                                            |
|               | (Not supported in protocol versions less than 19)                                                       |

<span id="page-218-1"></span>

#### Bitfield flags2 Description continued

| Name          | Description                                                                                           |
|---------------|-------------------------------------------------------------------------------------------------------|
| autoUseWtSpee | Disable automatic receiver reconfiguration for processing speed data instead of wheel-tick data if no |
| dOff          | wheel-tick data are available but speed data were detected (0: enabled, 1: disabled). See useWtSpeed  |
|               | field description for more details.                                                                   |
|               | (Not supported in protocol versions less than 19)                                                     |

## <span id="page-218-2"></span>**Bitfield flags3**

This graphic explains the bits of flags3



| Name         | Description                                                                                          |
|--------------|------------------------------------------------------------------------------------------------------|
| cntBothEdges | Only supported on certain products.                                                                  |
|              | Count both rising and falling edges on wheel-tick signal (only relevant if wheel-tick is measured by |
|              | the u-blox receiver).                                                                                |
|              | Only turn on this feature if the wheel-tick signal has 50 % duty cycle. Turning on this feature with |
|              | fixed-width pulses can lead to severe degradation of performance.                                    |
|              | Use wheel-tick pin for speed measurement. This field can only be used with modules supporting        |
|              | analog wheel-tick signals.                                                                           |

## <span id="page-218-0"></span>**32.10.11 UBX-CFG-ESRC (0x06 0x60)**

#### **32.10.11.1 External synchronization source configuration**

| Message                                                                               |                                                                                           |        | UBX-CFG-ESRC  |         |            |                                       |                |                                                                             |         |                     |  |  |
|---------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------|--------|---------------|---------|------------|---------------------------------------|----------------|-----------------------------------------------------------------------------|---------|---------------------|--|--|
| Description                                                                           |                                                                                           |        |               |         |            |                                       |                | External synchronization source configuration                               |         |                     |  |  |
| Firmware                                                                              |                                                                                           |        | Supported on: |         |            |                                       |                |                                                                             |         |                     |  |  |
|                                                                                       | • u-blox 8 / u-blox M8 protocol versions 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20. |        |               |         |            |                                       |                |                                                                             |         |                     |  |  |
|                                                                                       |                                                                                           |        |               |         |            |                                       |                | 2, 20.3, 22, 22.01, 23 and 23.01 (only with Time & Frequency Sync products) |         |                     |  |  |
| Type                                                                                  |                                                                                           |        | Get/set       |         |            |                                       |                |                                                                             |         |                     |  |  |
| External time or frequency source configuration. The stability of time and<br>Comment |                                                                                           |        |               |         |            |                                       |                |                                                                             |         |                     |  |  |
| frequency sources is described using different fields, see sourceType field           |                                                                                           |        |               |         |            |                                       |                |                                                                             |         |                     |  |  |
| documentation.                                                                        |                                                                                           |        |               |         |            |                                       |                |                                                                             |         |                     |  |  |
|                                                                                       |                                                                                           | Header |               | Class   | ID         |                                       | Length (Bytes) |                                                                             | Payload | Checksum            |  |  |
| Message Structure                                                                     |                                                                                           |        |               |         |            | 0xB5 0x62 0x06 0x60 4 + 36*numSources |                |                                                                             |         | see below CK_A CK_B |  |  |
| Payload Contents:                                                                     |                                                                                           |        |               |         |            |                                       |                |                                                                             |         |                     |  |  |
| Byte Offset                                                                           | Number                                                                                    |        | Scaling       | Name    |            |                                       | Unit           | Description                                                                 |         |                     |  |  |
|                                                                                       | Format                                                                                    |        |               |         |            |                                       |                |                                                                             |         |                     |  |  |
| 0                                                                                     | U1                                                                                        |        | -             | version |            |                                       | -              | Message version (0x00 for this version)                                     |         |                     |  |  |
| 1                                                                                     | U1                                                                                        |        | -             |         | numSources |                                       | -              | Number of sources (affects length of this                                   |         |                     |  |  |
|                                                                                       |                                                                                           |        |               |         |            | message)                              |                |                                                                             |         |                     |  |  |
| 2                                                                                     | U1[2]                                                                                     |        | -             |         | reserved1  |                                       | -              | Reserved                                                                    |         |                     |  |  |



UBX-CFG-ESRC continued

| Byte Offset                                | Number                 | Scaling | Name          | Unit   | Description                                 |
|--------------------------------------------|------------------------|---------|---------------|--------|---------------------------------------------|
| Start of repeated block (numSources times) | Format                 |         |               |        |                                             |
| 4 + 36*N                                   | U1                     | -       | extInt        | -      | EXTINT index of this source (0 for          |
|                                            |                        |         |               |        | EXTINT0 and 1 for EXTINT1)                  |
|                                            |                        |         | sourceType    |        |                                             |
| 5 + 36*N                                   | U1                     | -       |               | -      | Source type:                                |
|                                            |                        |         |               |        | 0: none                                     |
|                                            |                        |         |               |        | 1: frequency source; use withTemp,          |
|                                            |                        |         |               |        | withAge, timeToTemp and                     |
|                                            |                        |         |               |        | maxDevLifeTime to describe the stability    |
|                                            |                        |         |               |        | of the source                               |
|                                            |                        |         |               |        | 2: time source; use offset,                 |
|                                            |                        |         |               |        | offsetUncertainty and jitter fields to      |
|                                            |                        |         |               |        | describe the stability of the source        |
|                                            |                        |         |               |        | 3: feedback from external oscillator;       |
|                                            |                        |         |               |        | stability data is taken from the external   |
|                                            |                        |         |               |        | oscillator's configuration                  |
| 6 + 36*N                                   | X2                     | -       | flags         | -      | Flags (see graphic below)                   |
| 8 + 36*N                                   | U4                     | 2^-2    | freq          | Hz     | Nominal frequency of source                 |
| 12 + 36*N                                  | U1[4]                  | -       | reserved2     | -      | Reserved                                    |
| 16 + 36*N                                  | withTemp<br>U4<br>2^-8 |         |               | ppb    | Oscillator stability limit over operating   |
|                                            |                        |         |               |        | temperature range (must be > 0)             |
|                                            |                        |         |               |        | Only used if sourceType is 1.               |
| 20 + 36*N                                  | U4                     | 2^-8    | withAge       | ppb/ye | Oscillator stability with age (must be > 0) |
|                                            |                        |         |               | ar     | Only used if sourceType is 1.               |
| 24 + 36*N                                  | U2                     | -       | timeToTemp    | s      | The minimum time that it could take for a   |
|                                            |                        |         |               |        | temperature variation to move the           |
|                                            |                        |         |               |        | oscillator frequency by 'withTemp' (must    |
|                                            |                        |         |               |        | be > 0)                                     |
|                                            |                        |         |               |        | Only used if sourceType is 1.               |
| 26 + 36*N                                  | U2                     | -       | maxDevLifeTim | ppb    | Maximum frequency deviation during          |
|                                            |                        |         | e             |        | lifetime (must be > 0)                      |
|                                            |                        |         |               |        | Only used if sourceType is 1.               |
| 28 + 36*N                                  | I4                     | -       | offset        | ns     | Phase offset of signal                      |
|                                            |                        |         |               |        | Only used if sourceType is 2.               |
| 32 + 36*N                                  | U4                     | -       | offsetUncerta | ns     | Uncertainty of phase offset (one standard   |
|                                            |                        |         | inty          |        | deviation)                                  |
|                                            |                        |         |               |        | Only used if sourceType is 2.               |
| 36 + 36*N                                  | U4                     | -       | jitter        | ns/s   | Phase jitter (must be > 0)                  |
|                                            |                        |         |               |        | Only used if sourceType is 2.               |
| End of repeated block                      |                        |         |               |        |                                             |

<span id="page-220-1"></span>

## <span id="page-220-2"></span>**Bitfield flags**

This graphic explains the bits of flags



| Name     | Description                                                         |
|----------|---------------------------------------------------------------------|
| polarity | Polarity of signal:                                                 |
|          | 0: leading edge is rising edge                                      |
|          | 1: leading edge is falling edge                                     |
| gnssUtc  | Time base of timing signal:                                         |
|          | 0: GNSS - as specified in CFG-TP5 (or GPS if CFG-TP5 indicates UTC) |
|          | 1: UTC                                                              |
|          | Only used if sourceType is 2.                                       |

## <span id="page-220-0"></span>**32.10.12 UBX-CFG-GEOFENCE (0x06 0x69)**

#### **32.10.12.1 Geofencing configuration**

| Message                                                                   |                                            |  | UBX-CFG-GEOFENCE                           |         |           |  |                |                                                                                         |         |                     |  |  |
|---------------------------------------------------------------------------|--------------------------------------------|--|--------------------------------------------|---------|-----------|--|----------------|-----------------------------------------------------------------------------------------|---------|---------------------|--|--|
| Description                                                               |                                            |  | Geofencing configuration                   |         |           |  |                |                                                                                         |         |                     |  |  |
| Firmware                                                                  |                                            |  | Supported on:                              |         |           |  |                |                                                                                         |         |                     |  |  |
|                                                                           |                                            |  |                                            |         |           |  |                | • u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20. |         |                     |  |  |
|                                                                           |                                            |  | 3, 22, 22.01, 23 and 23.01                 |         |           |  |                |                                                                                         |         |                     |  |  |
| Type                                                                      |                                            |  | Get/set                                    |         |           |  |                |                                                                                         |         |                     |  |  |
| Comment                                                                   |                                            |  | Gets or sets the geofencing configuration. |         |           |  |                |                                                                                         |         |                     |  |  |
|                                                                           |                                            |  |                                            |         |           |  |                | See the Geofencing description for feature details.                                     |         |                     |  |  |
|                                                                           |                                            |  |                                            |         |           |  |                | If the receiver is sent a valid new configuration, it will respond with a UBX-ACK       |         |                     |  |  |
|                                                                           |                                            |  |                                            |         |           |  |                | ACK message and immediately change to the new configuration. Otherwise the              |         |                     |  |  |
| receiver will reject the request, by issuing a UBX-ACK-NAK and continuing |                                            |  |                                            |         |           |  |                |                                                                                         |         |                     |  |  |
|                                                                           | operation with the previous configuration. |  |                                            |         |           |  |                |                                                                                         |         |                     |  |  |
|                                                                           |                                            |  |                                            |         |           |  |                | Note that the acknowledge message does not indicate whether the PIO                     |         |                     |  |  |
|                                                                           |                                            |  |                                            |         |           |  |                | configuration has been successfully applied (pin assigned), it only indicates the       |         |                     |  |  |
|                                                                           |                                            |  |                                            |         |           |  |                | successful configuration of the feature. The configured PIO must be previously          |         |                     |  |  |
|                                                                           |                                            |  | unoccupied for successful assignment.      |         |           |  |                |                                                                                         |         |                     |  |  |
|                                                                           |                                            |  | Header                                     | Class   | ID        |  | Length (Bytes) |                                                                                         | Payload | Checksum            |  |  |
| Message Structure                                                         |                                            |  | 0xB5 0x62 0x06 0x69 8 + 12*numFences       |         |           |  |                |                                                                                         |         | see below CK_A CK_B |  |  |
| Payload Contents:                                                         |                                            |  |                                            |         |           |  |                |                                                                                         |         |                     |  |  |
| Byte Offset                                                               | Number                                     |  | Scaling                                    | Name    |           |  | Unit           | Description                                                                             |         |                     |  |  |
|                                                                           | Format                                     |  |                                            |         |           |  |                |                                                                                         |         |                     |  |  |
| 0                                                                         | U1                                         |  | -                                          | version |           |  | -              | Message version (0x00 for this version)                                                 |         |                     |  |  |
| 1                                                                         | U1                                         |  | -                                          |         | numFences |  | -              | Number of geofences contained in this                                                   |         |                     |  |  |
|                                                                           |                                            |  |                                            |         |           |  |                | message. Note that the receiver can only                                                |         |                     |  |  |
|                                                                           |                                            |  |                                            |         |           |  |                | store a limited number of geofences                                                     |         |                     |  |  |
|                                                                           |                                            |  |                                            |         |           |  |                | (currently 4).                                                                          |         |                     |  |  |

<span id="page-221-1"></span>

#### UBX-CFG-GEOFENCE continued

| Byte Offset                               | Number | Scaling | Name        | Unit | Description                                                                                                                                                                                                                     |
|-------------------------------------------|--------|---------|-------------|------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                           | Format |         |             |      |                                                                                                                                                                                                                                 |
| 2                                         | U1     | -       | confLvl     | -    | Required confidence level for state<br>evaluation. This value times the position's<br>standard deviation (sigma) defines the<br>confidence band.<br>0 = no confidence required<br>1 = 68%<br>2 = 95%<br>3 = 99.7%<br>4 = 99.99% |
| 3                                         | U1[1]  | -       | reserved1   | -    | Reserved                                                                                                                                                                                                                        |
| 4                                         | U1     | -       | pioEnabled  | -    | 1 = Enable PIO combined fence state<br>output, 0 = disable                                                                                                                                                                      |
| 5                                         | U1     | -       | pinPolarity | -    | PIO pin polarity. 0 = Low means inside, 1 =<br>Low means outside. Unknown state is<br>always high.                                                                                                                              |
| 6                                         | U1     | -       | pin         | -    | PIO pin number                                                                                                                                                                                                                  |
| 7                                         | U1[1]  | -       | reserved2   | -    | Reserved                                                                                                                                                                                                                        |
| Start of repeated block (numFences times) |        |         |             |      |                                                                                                                                                                                                                                 |
| 8 + 12*N                                  | I4     | 1e-7    | lat         | deg  | Latitude of the geofence circle center                                                                                                                                                                                          |
| 12 + 12*N                                 | I4     | 1e-7    | lon         | deg  | Longitude of the geofence circle center                                                                                                                                                                                         |
| 16 + 12*N                                 | U4     | 1e-2    | radius      | m    | Radius of the geofence circle                                                                                                                                                                                                   |
|                                           |        |         |             |      |                                                                                                                                                                                                                                 |

End of repeated block

## <span id="page-221-0"></span>**32.10.13 UBX-CFG-GNSS (0x06 0x3E)**

## **32.10.13.1 GNSS system configuration**

| Message     | UBX-CFG-GNSS                                                                               |
|-------------|--------------------------------------------------------------------------------------------|
| Description | GNSS system configuration                                                                  |
| Firmware    | Supported on:                                                                              |
|             | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |
|             | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |
| Type        | Get/set                                                                                    |
| Comment     | Gets or sets the GNSS system channel sharing configuration.                                |
|             | If the receiver is sent a valid new configuration, it will respond with a UBX-ACK          |
|             | ACK message and immediately change to the new configuration. Otherwise the                 |
|             | receiver will reject the request, by issuing a UBX-ACK-NAK and continuing                  |
|             | operation with the previous configuration.                                                 |
|             | Configuration requirements:                                                                |
|             | • It is necessary for at least one major GNSS to be enabled, after applying the            |
|             | new configuration to the current one.                                                      |
|             | • It is also required that at least 4 tracking channels are available to each              |
|             | enabled major GNSS, i.e. maxTrkCh must have a minimum value of 4 for each                  |
|             | enabled major GNSS.                                                                        |

• The number of tracking channels in use must not exceed the number of



tracking channels available in hardware, and the sum of all reserved tracking channels needs to be less than or equal to the number of tracking channels in use. Notes: • To avoid cross-correlation issues, it is recommended that GPS and QZSS are always both enabled or both disabled. • Polling this message returns the configuration of all supported GNSS, whether enabled or not; it may also include GNSS unsupported by the particular product, but in such cases the enable flag will always be unset. • See section [GNSS Configuration](#page-26-0) for a discussion of the use of this message. • See section [Satellite Numbering](#page-460-1) for a description of the GNSS IDs available. • Applying the GNSS system configuration takes some time. After issuing UBX-CFG-GNSS, wait first for the acknowledgement from the receiver and then 0.5 seconds before sending the next command. • If Galileo is enabled, UBX-CFG-GNSS must be followed by [UBX-CFG-CFG](#page-207-1) to save current configuration to BBR and then by [UBX-CFG-RST](#page-270-1) with resetMode set to Hardware reset. • Configuration specific to the GNSS system can be done via other messages (e. g. **UBX-CFG-SBAS**).

|                   | Header | Class | ID | Length (Bytes)                            | Payload | Checksum            |
|-------------------|--------|-------|----|-------------------------------------------|---------|---------------------|
| Message Structure |        |       |    | 0xB5 0x62 0x06 0x3E 4 + 8*numConfigBlocks |         | see below CK_A CK_B |

| Payload Contents:                               |        |         |               |      |                                            |
|-------------------------------------------------|--------|---------|---------------|------|--------------------------------------------|
| Byte Offset                                     | Number | Scaling | Name          | Unit | Description                                |
|                                                 | Format |         |               |      |                                            |
| 0                                               | U1     | -       | msgVer        | -    | Message version (0x00 for this version)    |
| 1                                               | U1     | -       | numTrkChHw    | -    | Number of tracking channels available in   |
|                                                 |        |         |               |      | hardware (read only)                       |
| 2                                               | U1     | -       | numTrkChUse   | -    | (Read only in protocol versions greater    |
|                                                 |        |         |               |      | than 23) Number of tracking channels to    |
|                                                 |        |         |               |      | use. Must be > 0, <= numTrkChHw. If        |
|                                                 |        |         |               |      | 0xFF, then number of tracking channels to  |
|                                                 |        |         |               |      | use will be set to numTrkChHw.             |
| 3                                               | U1     | -       | numConfigBloc | -    | Number of configuration blocks following   |
|                                                 |        |         | ks            |      |                                            |
| Start of repeated block (numConfigBlocks times) |        |         |               |      |                                            |
| 4 + 8*N                                         | U1     | -       | gnssId        | -    | System identifier (see Satellite Numbering |
|                                                 |        |         |               |      | )                                          |
| 5 + 8*N                                         | U1     | -       | resTrkCh      | -    | (Read only in protocol versions greater    |
|                                                 |        |         |               |      | than 23) Number of reserved (minimum)      |
|                                                 |        |         |               |      | tracking channels for this system.         |
| 6 + 8*N                                         | U1     | -       | maxTrkCh      | -    | (Read only in protocol versions greater    |
|                                                 |        |         |               |      | than 23) Maximum number of tracking        |
|                                                 |        |         |               |      | channels used for this system. Must be >   |
|                                                 |        |         |               |      | 0, >= resTrkChn, <= numTrkChUse and <=     |
|                                                 |        |         |               |      | maximum number of tracking channels        |
|                                                 |        |         |               |      | supported for this system.                 |
| 7 + 8*N                                         | U1     | -       | reserved1     | -    | Reserved                                   |



UBX-CFG-GNSS continued

| Byte Offset | Number                | Scaling | Name  | Unit | Description                                                                                                  |  |  |  |  |  |  |
|-------------|-----------------------|---------|-------|------|--------------------------------------------------------------------------------------------------------------|--|--|--|--|--|--|
|             | Format                |         |       |      |                                                                                                              |  |  |  |  |  |  |
| 8 + 8*N     | X4                    | -       | flags | -    | Bitfield of flags. At least one signal must<br>be configured in every enabled system.<br>(see graphic below) |  |  |  |  |  |  |
|             | End of repeated block |         |       |      |                                                                                                              |  |  |  |  |  |  |

<span id="page-223-0"></span>**Bitfield flags**

|  |  |  |  | 23 22 21 20 19 18 17 16 |  |  |  |  |  |  |  |  |  |  |  |         |
|--|--|--|--|-------------------------|--|--|--|--|--|--|--|--|--|--|--|---------|
|  |  |  |  | TOO<br>٥ø               |  |  |  |  |  |  |  |  |  |  |  | ŒТ<br>w |

| Name       | Description                                                         |
|------------|---------------------------------------------------------------------|
| enable     | Enable this system                                                  |
| sigCfgMask | Signal configuration mask                                           |
|            | When gnssId is 0 (GPS)                                              |
|            | 0x01 = GPS L1C/A                                                    |
|            | 0x10 = GPS L2C                                                      |
|            | 0x20 = GPS L5                                                       |
|            | When gnssId is 1 (SBAS)                                             |
|            | 0x01 = SBAS L1C/A                                                   |
|            | When gnssId is 2 (Galileo)                                          |
|            | 0x01 = Galileo E1 (not supported in protocol versions less than 18) |
|            | 0x10 = Galileo E5a                                                  |
|            | 0x20 = Galileo E5b                                                  |
|            | When gnssId is 3 (BeiDou)                                           |
|            | 0x01 = BeiDou B1I                                                   |
|            | 0x10 = BeiDou B2I                                                   |
|            | 0x80 = BeiDou B2A                                                   |
|            | When gnssId is 5 (QZSS)                                             |
|            | 0x01 = QZSS L1C/A                                                   |
|            | 0x04 = QZSS L1S                                                     |
|            | 0x10 = QZSS L2C                                                     |
|            | 0x20 = QZSS L5                                                      |
|            | When gnssId is 6 (GLONASS)                                          |
|            | 0x01 = GLONASS L1                                                   |
|            | 0x10 = GLONASS L2                                                   |

<span id="page-224-2"></span>

## <span id="page-224-0"></span>**32.10.14 UBX-CFG-HNR (0x06 0x5C)**

#### **32.10.14.1 High navigation rate settings**

| Message           |        | UBX-CFG-HNR |                               |       |             |  |                |                                                                                       |         |                     |  |  |
|-------------------|--------|-------------|-------------------------------|-------|-------------|--|----------------|---------------------------------------------------------------------------------------|---------|---------------------|--|--|
| Description       |        |             | High navigation rate settings |       |             |  |                |                                                                                       |         |                     |  |  |
| Firmware          |        |             | Supported on:                 |       |             |  |                |                                                                                       |         |                     |  |  |
|                   |        |             |                               |       |             |  |                | • u-blox 8 / u-blox M8 protocol versions 15.01, 16 and 17 (only with ADR products)    |         |                     |  |  |
|                   |        |             |                               |       |             |  |                | • u-blox 8 / u-blox M8 protocol versions 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.3, |         |                     |  |  |
|                   |        |             |                               |       |             |  |                | 22, 22.01, 23 and 23.01 (only with ADR or UDR products)                               |         |                     |  |  |
| Type              |        |             | Get/set                       |       |             |  |                |                                                                                       |         |                     |  |  |
| Comment           |        |             |                               |       |             |  |                | The u-blox receivers support high rates of navigation update up to 30 Hz. The         |         |                     |  |  |
|                   |        |             |                               |       |             |  |                | navigation solution output UBX-NAV-HNR will not be aligned to the top of a            |         |                     |  |  |
|                   |        |             | second.                       |       |             |  |                |                                                                                       |         |                     |  |  |
|                   |        |             |                               |       |             |  |                | • The update rate has a direct influence on the power consumption. The more           |         |                     |  |  |
|                   |        |             |                               |       |             |  |                | fixes that are required, the more CPU power and communication resources are           |         |                     |  |  |
|                   |        |             | required.                     |       |             |  |                |                                                                                       |         |                     |  |  |
|                   |        |             |                               |       |             |  |                | • For most applications a 1 Hz update rate would be sufficient.                       |         |                     |  |  |
|                   |        | Header      |                               | Class | ID          |  | Length (Bytes) |                                                                                       | Payload | Checksum            |  |  |
| Message Structure |        |             | 0xB5 0x62 0x06 0x5C 4         |       |             |  |                |                                                                                       |         | see below CK_A CK_B |  |  |
| Payload Contents: |        |             |                               |       |             |  |                |                                                                                       |         |                     |  |  |
| Byte Offset       | Number |             | Scaling                       | Name  |             |  | Unit           | Description                                                                           |         |                     |  |  |
|                   | Format |             |                               |       |             |  |                |                                                                                       |         |                     |  |  |
| 0                 | U1     |             | -                             |       | highNavRate |  | Hz             | Rate of navigation solution output                                                    |         |                     |  |  |

## <span id="page-224-1"></span>**32.10.15 UBX-CFG-INF (0x06 0x02)**

## **32.10.15.1 Poll configuration for one protocol**

1 U1[3] - reserved1 - [Reserved](#page-183-2)

| Message           |        | UBX-CFG-INF                                  |                                           |       |            |  |                |                                                                                            |         |          |  |  |  |
|-------------------|--------|----------------------------------------------|-------------------------------------------|-------|------------|--|----------------|--------------------------------------------------------------------------------------------|---------|----------|--|--|--|
| Description       |        |                                              | Poll configuration for one protocol       |       |            |  |                |                                                                                            |         |          |  |  |  |
| Firmware          |        |                                              | Supported on:                             |       |            |  |                |                                                                                            |         |          |  |  |  |
|                   |        |                                              |                                           |       |            |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |          |  |  |  |
|                   |        |                                              | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |       |            |  |                |                                                                                            |         |          |  |  |  |
| Type              |        |                                              | Poll Request                              |       |            |  |                |                                                                                            |         |          |  |  |  |
| Comment           |        | -                                            |                                           |       |            |  |                |                                                                                            |         |          |  |  |  |
|                   |        | Header                                       |                                           | Class | ID         |  | Length (Bytes) |                                                                                            | Payload | Checksum |  |  |  |
| Message Structure |        | 0xB5 0x62 0x06 0x02 1<br>see below CK_A CK_B |                                           |       |            |  |                |                                                                                            |         |          |  |  |  |
| Payload Contents: |        |                                              |                                           |       |            |  |                |                                                                                            |         |          |  |  |  |
| Byte Offset       | Number |                                              | Scaling                                   | Name  |            |  | Unit           | Description                                                                                |         |          |  |  |  |
|                   | Format |                                              |                                           |       |            |  |                |                                                                                            |         |          |  |  |  |
| 0                 | U1     |                                              | -                                         |       | protocolID |  | -              | Protocol identifier, identifying the output                                                |         |          |  |  |  |
|                   |        | protocol for this poll request. The          |                                           |       |            |  |                |                                                                                            |         |          |  |  |  |
|                   |        |                                              |                                           |       |            |  |                | following are valid protocol identifiers:                                                  |         |          |  |  |  |
|                   |        |                                              |                                           |       |            |  |                | 0: UBX protocol                                                                            |         |          |  |  |  |
|                   |        |                                              |                                           |       |            |  |                | 1: NMEA protocol                                                                           |         |          |  |  |  |
|                   |        |                                              |                                           |       |            |  |                | 2-255: Reserved                                                                            |         |          |  |  |  |

<span id="page-225-0"></span>

| Message                           |                  |                | UBX-CFG-INF                                                                                                                                                     |            |    |  |                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |         |                     |  |  |  |
|-----------------------------------|------------------|----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|------------|----|--|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|---------------------|--|--|--|
| Description                       |                  |                | Information message configuration                                                                                                                               |            |    |  |                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |         |                     |  |  |  |
| Firmware                          |                  |                | Supported on:<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                                                                      |            |    |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,                                                                                                                                                                                                                                                                                                                                                                        |         |                     |  |  |  |
| Type                              |                  |                | Get/set                                                                                                                                                         |            |    |  |                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |         |                     |  |  |  |
| Comment                           |                  |                | one configuration unit.<br>Note that:<br>• I/O port 0 is I2C (DDC).<br>• I/O port 3 is USB.<br>• I/O port 4 is SPI.<br>• I/O port 5 is reserved for future use. |            |    |  |                | The value of infMsgMask[x] below is formed so that each bit represents one of<br>the INF class messages (bit 0 for ERROR, bit 1 for WARNING and so on). For a<br>complete list, see the Message class INF. Several configurations can be<br>concatenated to one input message. In this case the payload length can be a<br>multiple of the normal length. Output messages from the module contain only<br>• I/O ports 1 and 2 correspond to serial ports 1 and 2. |         |                     |  |  |  |
|                                   |                  |                | Header                                                                                                                                                          | Class      | ID |  | Length (Bytes) |                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Payload | Checksum            |  |  |  |
| Message Structure                 |                  |                | 0xB5 0x62 0x06 0x02 0 + 10*N                                                                                                                                    |            |    |  |                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |         | see below CK_A CK_B |  |  |  |
| Payload Contents:                 |                  |                |                                                                                                                                                                 |            |    |  |                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |         |                     |  |  |  |
| Byte Offset                       | Number<br>Format |                | Scaling                                                                                                                                                         | Name       |    |  | Unit           | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                       |         |                     |  |  |  |
| Start of repeated block (N times) |                  |                |                                                                                                                                                                 |            |    |  |                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |         |                     |  |  |  |
| N*10                              | U1               | -              |                                                                                                                                                                 | protocolID |    |  | -              | Protocol identifier, identifying for which<br>protocol the configuration is set/get. The<br>following are valid protocol identifiers:<br>0: UBX protocol<br>1: NMEA protocol<br>2-255: Reserved                                                                                                                                                                                                                                                                   |         |                     |  |  |  |
| 1 + 10*N                          | U1[3]            | reserved1<br>- |                                                                                                                                                                 |            |    |  | -              | Reserved                                                                                                                                                                                                                                                                                                                                                                                                                                                          |         |                     |  |  |  |
| 4 + 10*N                          | X1[6]            |                | infMsgMask<br>-<br>-<br>A bit mask, saying which information<br>messages are enabled on each I/O port                                                           |            |    |  |                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |         |                     |  |  |  |

## **32.10.15.2 Information message configuration**

<span id="page-225-1"></span>**Bitfield infMsgMask**

End of repeated block

This graphic explains the bits of infMsgMask



(see [graphic below\)](#page-225-1)

<span id="page-226-1"></span>

| Name    | Description    |
|---------|----------------|
| ERROR   | enable ERROR   |
| WARNING | enable WARNING |
| NOTICE  | enable NOTICE  |
| TEST    | enable TEST    |
| DEBUG   | enable DEBUG   |

#### <span id="page-226-0"></span>**32.10.16 UBX-CFG-ITFM (0x06 0x39)**

#### **32.10.16.1 Jamming/interference monitor configuration**

| Message           |        | UBX-CFG-ITFM                                                   |                                           |        |  |  |      |                                                                                            |  |  |  |  |
|-------------------|--------|----------------------------------------------------------------|-------------------------------------------|--------|--|--|------|--------------------------------------------------------------------------------------------|--|--|--|--|
| Description       |        |                                                                |                                           |        |  |  |      | Jamming/interference monitor configuration                                                 |  |  |  |  |
| Firmware          |        |                                                                | Supported on:                             |        |  |  |      |                                                                                            |  |  |  |  |
|                   |        |                                                                |                                           |        |  |  |      | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |  |  |
|                   |        |                                                                | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |        |  |  |      |                                                                                            |  |  |  |  |
| Type              |        |                                                                | Get/set                                   |        |  |  |      |                                                                                            |  |  |  |  |
| Comment           |        | -                                                              |                                           |        |  |  |      |                                                                                            |  |  |  |  |
|                   |        | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum |                                           |        |  |  |      |                                                                                            |  |  |  |  |
| Message Structure |        | 0xB5 0x62 0x06 0x39 8<br>see below CK_A CK_B                   |                                           |        |  |  |      |                                                                                            |  |  |  |  |
| Payload Contents: |        |                                                                |                                           |        |  |  |      |                                                                                            |  |  |  |  |
| Byte Offset       | Number |                                                                | Scaling                                   | Name   |  |  | Unit | Description                                                                                |  |  |  |  |
|                   |        | Format                                                         |                                           |        |  |  |      |                                                                                            |  |  |  |  |
| 0                 | X4     |                                                                | -                                         | config |  |  | -    | Interference config word (see graphic                                                      |  |  |  |  |
|                   |        |                                                                |                                           |        |  |  |      | below)                                                                                     |  |  |  |  |
| 4                 | X4     | config2<br>-                                                   |                                           |        |  |  | -    | Extra settings for jamming/interference                                                    |  |  |  |  |
|                   |        |                                                                |                                           |        |  |  |      | monitor (see graphic below)                                                                |  |  |  |  |

## <span id="page-226-2"></span>**Bitfield config**

|            | 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 |  |  |  |  |  |  |  |  |  |  |  | 16. | 15. | $\vert 4 \vert$ | 13. |  |  |
|------------|-------------------------------------------------------------------------|--|--|--|--|--|--|--|--|--|--|--|-----|-----|-----------------|-----|--|--|
| Φ<br>enabl | ø<br>hmBi<br>8<br>$\overline{\phantom{0}}$                              |  |  |  |  |  |  |  |  |  |  |  |     |     |                 |     |  |  |
|            | $\Box$ signed value<br>unsigned value<br>⊤reserved                      |  |  |  |  |  |  |  |  |  |  |  |     |     |                 |     |  |  |

<span id="page-227-1"></span>

| Name          | Description                                                                         |
|---------------|-------------------------------------------------------------------------------------|
| bbThreshold   | Broadband jamming detection threshold (unit = dB)                                   |
| cwThreshold   | CW jamming detection threshold (unit = dB)                                          |
| algorithmBits | Reserved algorithm settings - should be set to 0x16B156 in hex for correct settings |
| enable        | Enable interference detection                                                       |

## <span id="page-227-2"></span>**Bitfield config2**

This graphic explains the bits of config2

|                                        |  |  |  |  |  |  |  |  |       |                                    |           |  |  | 14 13 12 11 10 9 8 7 6 5 4 3 |  | $\sqrt{2}$ | -0 |
|----------------------------------------|--|--|--|--|--|--|--|--|-------|------------------------------------|-----------|--|--|------------------------------|--|------------|----|
|                                        |  |  |  |  |  |  |  |  | ୄୄୄ   | ஜ<br>$\overline{\phantom{a}}$<br>♯ | ø<br>alBi |  |  |                              |  |            |    |
|                                        |  |  |  |  |  |  |  |  | enabl | దీ<br>忈                            |           |  |  |                              |  |            |    |
| $\Box$ signed value<br>Dunsianed ualue |  |  |  |  |  |  |  |  |       |                                    | 홊         |  |  |                              |  |            |    |

| Name        | Description                                                                     |
|-------------|---------------------------------------------------------------------------------|
| generalBits | General settings - should be set to 0x31E in hex for correct setting            |
| antSetting  | Antenna setting, 0=unknown, 1=passive, 2=active                                 |
| enable2     | Set to 1 to scan auxiliary bands (u-blox 8 / u-blox M8 only, otherwise ignored) |

## <span id="page-227-0"></span>**32.10.17 UBX-CFG-LOGFILTER (0x06 0x47)**

## **32.10.17.1 Data logger configuration**

| Message           |                  | UBX-CFG-LOGFILTER |                                           |       |    |  |                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |  |         |                     |  |
|-------------------|------------------|-------------------|-------------------------------------------|-------|----|--|----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--|---------|---------------------|--|
| Description       |                  |                   | Data logger configuration                 |       |    |  |                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |  |         |                     |  |
| Firmware          |                  |                   | Supported on:                             |       |    |  |                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |  |         |                     |  |
|                   |                  |                   | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |       |    |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |         |                     |  |
| Type              |                  |                   | Get/set                                   |       |    |  |                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |  |         |                     |  |
| Comment           |                  |                   | the configuration.                        |       |    |  |                | This message can be used to configure the data logger, i.e. to enable/disable the<br>log recording and to get/set the position entry filter settings.<br>Position entries can be filtered based on time difference, position difference or<br>current speed thresholds. Position and speed filtering also have a minimum time<br>interval. A position is logged if any of the thresholds are exceeded. If a threshold<br>is set to zero it is ignored. The maximum rate of position logging is 1 Hz.<br>The filter settings will be configured to the provided values only if the<br>'applyAllFilterSettings' flag is set. This allows the recording to be<br>enabled/disabled independently of configuring the filter settings.<br>Configuring the data logger in the absence of a logging file is supported. By<br>doing so, once the logging file is created, the data logger configuration will take<br>effect immediately and logging recording and filtering will activate according to |  |         |                     |  |
|                   |                  | Header            |                                           | Class | ID |  | Length (Bytes) |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |  | Payload | Checksum            |  |
| Message Structure |                  |                   | 0xB5 0x62 0x06 0x47 12                    |       |    |  |                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |  |         | see below CK_A CK_B |  |
| Payload Contents: |                  |                   |                                           |       |    |  |                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |  |         |                     |  |
| Byte Offset       | Number<br>Format |                   | Scaling                                   | Name  |    |  | Unit           | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |  |         |                     |  |



#### UBX-CFG-LOGFILTER continued

| Byte Offset | Number | Scaling | Name          | Unit | Description                                   |
|-------------|--------|---------|---------------|------|-----------------------------------------------|
|             | Format |         |               |      |                                               |
| 0           | U1     | -       | version       | -    | Message version (0x01 for this version)       |
| 1           | X1     | -       | flags         | -    | Flags (see graphic below)                     |
| 2           | U2     | -       | minInterval   | s    | Minimum time interval between logged          |
|             |        |         |               |      | positions (0 = not set). This is only applied |
|             |        |         |               |      | in combination with the speed and/or          |
|             |        |         |               |      | position thresholds. If both minInterval      |
|             |        |         |               |      | and timeThreshold are set, minInterval        |
|             |        |         |               |      | must be less than or equal to                 |
|             |        |         |               |      | timeThreshold.                                |
| 4           | U2     | -       | timeThreshold | s    | If the time difference is greater than the    |
|             |        |         |               |      | threshold, then the position is logged (0 =   |
|             |        |         |               |      | not set).                                     |
| 6           | U2     | -       | speedThreshol | m/s  | If the current speed is greater than the      |
|             |        |         | d             |      | threshold, then the position is logged (0 =   |
|             |        |         |               |      | not set). minInterval also applies.           |
| 8           | U4     | -       | positionThres | m    | If the 3D position difference is greater      |
|             |        |         | hold          |      | than the threshold, then the position is      |
|             |        |         |               |      | logged (0 = not set). minInterval also        |
|             |        |         |               |      | applies.                                      |

## <span id="page-228-0"></span>**Bitfield flags**



<span id="page-229-1"></span>

| Name          | Description                                                                                        |
|---------------|----------------------------------------------------------------------------------------------------|
| recordEnabled | 1 = enable recording, 0 = disable recording                                                        |
| psmOncePerWak | 1 = enable recording only one single position per PSM on/off mode wake-up period, 0 = disable once |
| upEnabled     | per wake-up                                                                                        |
| applyAllFilte | 1 = apply all filter settings, 0 = only apply recordEnabled                                        |
| rSettings     |                                                                                                    |

## <span id="page-229-0"></span>**32.10.18 UBX-CFG-MSG (0x06 0x01)**

## **32.10.18.1 Poll a message configuration**

| UBX-CFG-MSG<br>Message                           |        |        |                                                            |       |          |  |                |                                                                                            |         |                     |
|--------------------------------------------------|--------|--------|------------------------------------------------------------|-------|----------|--|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|
| Description                                      |        |        | Poll a message configuration                               |       |          |  |                |                                                                                            |         |                     |
| Firmware                                         |        |        | Supported on:<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |       |          |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |
| Poll Request<br>Type                             |        |        |                                                            |       |          |  |                |                                                                                            |         |                     |
| Comment                                          |        | -      |                                                            |       |          |  |                |                                                                                            |         |                     |
|                                                  |        | Header |                                                            | Class | ID       |  | Length (Bytes) |                                                                                            | Payload | Checksum            |
| Message Structure                                |        |        | 0xB5 0x62 0x06 0x01 2                                      |       |          |  |                |                                                                                            |         | see below CK_A CK_B |
| Payload Contents:                                |        |        |                                                            |       |          |  |                |                                                                                            |         |                     |
| Byte Offset                                      | Number |        | Scaling                                                    | Name  |          |  | Unit           | Description                                                                                |         |                     |
| Format                                           |        |        |                                                            |       |          |  |                |                                                                                            |         |                     |
| 0                                                | U1     |        | -                                                          |       | msgClass |  | -              | Message class                                                                              |         |                     |
| msgID<br>1<br>U1<br>-<br>-<br>Message identifier |        |        |                                                            |       |          |  |                |                                                                                            |         |                     |

## **32.10.18.2 Set message rate(s)**

| UBX-CFG-MSG<br>Message |       |                                                                                  |                                                   |       |          |  |                |                                                                                            |         |                     |  |  |
|------------------------|-------|----------------------------------------------------------------------------------|---------------------------------------------------|-------|----------|--|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|
| Description            |       |                                                                                  | Set message rate(s)                               |       |          |  |                |                                                                                            |         |                     |  |  |
| Firmware               |       |                                                                                  | Supported on:                                     |       |          |  |                |                                                                                            |         |                     |  |  |
|                        |       |                                                                                  |                                                   |       |          |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |
|                        |       |                                                                                  | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01         |       |          |  |                |                                                                                            |         |                     |  |  |
| Type                   |       |                                                                                  | Get/set                                           |       |          |  |                |                                                                                            |         |                     |  |  |
| Comment                |       |                                                                                  |                                                   |       |          |  |                | Get/set message rate configuration (s) to/from the receiver.                               |         |                     |  |  |
|                        |       |                                                                                  | See also section How to change between protocols. |       |          |  |                |                                                                                            |         |                     |  |  |
|                        |       | • Send rate is relative to the event a message is registered on. For example, if |                                                   |       |          |  |                |                                                                                            |         |                     |  |  |
|                        |       |                                                                                  |                                                   |       |          |  |                | the rate of a navigation message is set to 2, the message is sent every second             |         |                     |  |  |
|                        |       |                                                                                  |                                                   |       |          |  |                | navigation solution. For configuring NMEA messages, the section NMEA                       |         |                     |  |  |
|                        |       |                                                                                  |                                                   |       |          |  |                | Messages Overview describes class and identifier numbers used.                             |         |                     |  |  |
|                        |       |                                                                                  | Header                                            | Class | ID       |  | Length (Bytes) |                                                                                            | Payload | Checksum            |  |  |
| Message Structure      |       |                                                                                  | 0xB5 0x62 0x06 0x01 8                             |       |          |  |                |                                                                                            |         | see below CK_A CK_B |  |  |
| Payload Contents:      |       |                                                                                  |                                                   |       |          |  |                |                                                                                            |         |                     |  |  |
| Byte Offset            |       | Number<br>Scaling<br>Name<br>Unit<br>Description                                 |                                                   |       |          |  |                |                                                                                            |         |                     |  |  |
| Format                 |       |                                                                                  |                                                   |       |          |  |                |                                                                                            |         |                     |  |  |
| 0                      | U1    |                                                                                  | -                                                 |       | msgClass |  | -              | Message class                                                                              |         |                     |  |  |
| 1                      | U1    |                                                                                  | -                                                 | msgID |          |  | -              | Message identifier                                                                         |         |                     |  |  |
| 2                      | U1[6] | rate<br>-<br>-<br>Send rate on I/O port (6 ports)                                |                                                   |       |          |  |                |                                                                                            |         |                     |  |  |

<span id="page-230-1"></span>

#### **32.10.18.3 Set message rate**

| Message                                                         |        |        | UBX-CFG-MSG           |       |    |                    |                |                                                                                            |         |                     |  |  |  |
|-----------------------------------------------------------------|--------|--------|-----------------------|-------|----|--------------------|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|--|
| Description                                                     |        |        | Set message rate      |       |    |                    |                |                                                                                            |         |                     |  |  |  |
| Firmware                                                        |        |        | Supported on:         |       |    |                    |                |                                                                                            |         |                     |  |  |  |
|                                                                 |        |        |                       |       |    |                    |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |  |
| 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                       |        |        |                       |       |    |                    |                |                                                                                            |         |                     |  |  |  |
| Get/set<br>Type                                                 |        |        |                       |       |    |                    |                |                                                                                            |         |                     |  |  |  |
| Set message rate configuration for the current port.<br>Comment |        |        |                       |       |    |                    |                |                                                                                            |         |                     |  |  |  |
|                                                                 |        |        |                       |       |    |                    |                | See also section How to change between protocols.                                          |         |                     |  |  |  |
|                                                                 |        | Header |                       | Class | ID |                    | Length (Bytes) |                                                                                            | Payload | Checksum            |  |  |  |
| Message Structure                                               |        |        | 0xB5 0x62 0x06 0x01 3 |       |    |                    |                |                                                                                            |         | see below CK_A CK_B |  |  |  |
| Payload Contents:                                               |        |        |                       |       |    |                    |                |                                                                                            |         |                     |  |  |  |
| Byte Offset                                                     | Number |        | Scaling               | Name  |    |                    | Unit           | Description                                                                                |         |                     |  |  |  |
|                                                                 |        |        |                       |       |    |                    |                |                                                                                            |         |                     |  |  |  |
| 0                                                               |        | -      | msgClass              |       |    | -                  | Message class  |                                                                                            |         |                     |  |  |  |
| 1                                                               | -      | msgID  |                       |       | -  | Message identifier |                |                                                                                            |         |                     |  |  |  |
| U1<br>rate<br>2<br>U1<br>-<br>-<br>Send rate on current port    |        |        |                       |       |    |                    |                |                                                                                            |         |                     |  |  |  |

## <span id="page-230-0"></span>**32.10.19 UBX-CFG-NAV5 (0x06 0x24)**

#### **32.10.19.1 Navigation engine settings**

| UBX-CFG-NAV5<br>Message |                                                                                            |                                                                                  |                            |       |          |  |      |                                                  |  |                     |  |  |  |
|-------------------------|--------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------|----------------------------|-------|----------|--|------|--------------------------------------------------|--|---------------------|--|--|--|
| Description             |                                                                                            |                                                                                  | Navigation engine settings |       |          |  |      |                                                  |  |                     |  |  |  |
| Firmware                |                                                                                            |                                                                                  | Supported on:              |       |          |  |      |                                                  |  |                     |  |  |  |
|                         | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                                                                                  |                            |       |          |  |      |                                                  |  |                     |  |  |  |
|                         |                                                                                            | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                        |                            |       |          |  |      |                                                  |  |                     |  |  |  |
| Type                    |                                                                                            |                                                                                  | Get/set                    |       |          |  |      |                                                  |  |                     |  |  |  |
| Comment                 |                                                                                            | See the Navigation Configuration Settings Description for a detailed description |                            |       |          |  |      |                                                  |  |                     |  |  |  |
|                         |                                                                                            |                                                                                  |                            |       |          |  |      | of how these settings affect receiver operation. |  |                     |  |  |  |
|                         |                                                                                            | Header                                                                           |                            | Class | Checksum |  |      |                                                  |  |                     |  |  |  |
| Message Structure       |                                                                                            |                                                                                  | 0xB5 0x62 0x06 0x24 36     |       |          |  |      |                                                  |  | see below CK_A CK_B |  |  |  |
| Payload Contents:       |                                                                                            |                                                                                  |                            |       |          |  |      |                                                  |  |                     |  |  |  |
| Byte Offset             | Number                                                                                     |                                                                                  | Scaling                    | Name  |          |  | Unit | Description                                      |  |                     |  |  |  |
|                         | Format                                                                                     |                                                                                  |                            |       |          |  |      |                                                  |  |                     |  |  |  |
| 0                       | X2                                                                                         |                                                                                  | -                          | mask  |          |  | -    | Parameters bitmask. Only the masked              |  |                     |  |  |  |
|                         |                                                                                            |                                                                                  |                            |       |          |  |      | parameters will be applied. (see graphic         |  |                     |  |  |  |
|                         |                                                                                            | below)                                                                           |                            |       |          |  |      |                                                  |  |                     |  |  |  |



#### UBX-CFG-NAV5 continued

| Byte Offset | Number | Scaling | Name          | Unit | Description                                |
|-------------|--------|---------|---------------|------|--------------------------------------------|
|             | Format |         |               |      |                                            |
| 2           | U1     | -       | dynModel      | -    | Dynamic platform model:                    |
|             |        |         |               |      | 0: portable                                |
|             |        |         |               |      | 2: stationary                              |
|             |        |         |               |      | 3: pedestrian                              |
|             |        |         |               |      | 4: automotive                              |
|             |        |         |               |      | 5: sea                                     |
|             |        |         |               |      | 6: airborne with <1g acceleration          |
|             |        |         |               |      | 7: airborne with <2g acceleration          |
|             |        |         |               |      | 8: airborne with <4g acceleration          |
|             |        |         |               |      | 9: wrist-worn watch (not supported in      |
|             |        |         |               |      | protocol versions less than 18)            |
|             |        |         |               |      | 10: motorbike (supported in protocol       |
|             |        |         |               |      | versions 19.2, and 35.10, and 35.15, and   |
|             |        |         |               |      | 35.20)                                     |
|             |        |         |               |      | 11: robotic lawn mower                     |
|             |        |         |               |      | 12: electric kick scooter                  |
| 3           | U1     | -       | fixMode       | -    | Position fixing mode:                      |
|             |        |         |               |      | 1: 2D only                                 |
|             |        |         |               |      | 2: 3D only                                 |
|             |        |         |               |      | 3: auto 2D/3D                              |
| 4           | I4     | 0.01    | fixedAlt      | m    | Fixed altitude (mean sea level) for 2D fix |
|             |        |         |               |      | mode                                       |
| 8           | U4     | 0.0001  | fixedAltVar   | m^2  | Fixed altitude variance for 2D mode        |
| 12          | I1     | -       | minElev       | deg  | Minimum elevation for a GNSS satellite to  |
|             |        |         |               |      | be used in NAV                             |
| 13          | U1     | -       | drLimit       | s    | Reserved                                   |
| 14          | U2     | 0.1     | pDop          | -    | Position DOP mask to use                   |
| 16          | U2     | 0.1     | tDop          | -    | Time DOP mask to use                       |
| 18          | U2     | -       | pAcc          | m    | Position accuracy mask                     |
| 20          | U2     | -       | tAcc          | m    | Time accuracy mask                         |
| 22          | U1     | -       | staticHoldThr | cm/s | Static hold threshold                      |
|             |        |         | esh           |      |                                            |
| 23          | U1     | -       | dgnssTimeout  | s    | DGNSS timeout                              |
| 24          | U1     | -       | cnoThreshNumS | -    | Number of satellites required to have      |
|             |        |         | Vs            |      | C/N0 above cnoThresh for a fix to be       |
|             |        |         |               |      | attempted                                  |
| 25          | U1     | -       | cnoThresh     | dBHz | C/N0 threshold for deciding whether to     |
|             |        |         |               |      | attempt a fix                              |
| 26          | U1[2]  | -       | reserved1     | -    | Reserved                                   |
| 28          | U2     | -       | staticHoldMax | m    | Static hold distance threshold (before     |
|             |        |         | Dist          |      | quitting static hold)                      |



#### UBX-CFG-NAV5 continued

| Byte Offset | Number | Scaling | Name        | Unit | Description                               |
|-------------|--------|---------|-------------|------|-------------------------------------------|
|             | Format |         |             |      |                                           |
| 30          | U1     | -       | utcStandard | -    | UTC standard to be used (see GNSS time    |
|             |        |         |             |      | bases):                                   |
|             |        |         |             |      | 0: Automatic; receiver selects based on   |
|             |        |         |             |      | GNSS configuration                        |
|             |        |         |             |      | 3: UTC as operated by the U.S. Naval      |
|             |        |         |             |      | Observatory (USNO); derived from GPS      |
|             |        |         |             |      | time                                      |
|             |        |         |             |      | 5: UTC as combined from multiple          |
|             |        |         |             |      | European laboratories; derived from       |
|             |        |         |             |      | Galileo time                              |
|             |        |         |             |      | 6: UTC as operated by the former Soviet   |
|             |        |         |             |      | Union (SU); derived from GLONASS time     |
|             |        |         |             |      | 7: UTC as operated by the National Time   |
|             |        |         |             |      | Service Center (NTSC), China; derived     |
|             |        |         |             |      | from BeiDou time                          |
|             |        |         |             |      | 8: UTC as operated by the National        |
|             |        |         |             |      | Physics Laboratory, India (NPLI); derived |
|             |        |         |             |      | from NavIC time                           |
|             |        |         |             |      | (not supported in protocol versions less  |
|             |        |         |             |      | than 16).                                 |
| 31          | U1[5]  | -       | reserved2   | -    | Reserved                                  |

## <span id="page-232-0"></span>**Bitfield mask**



| Name          | Description                                               |
|---------------|-----------------------------------------------------------|
| dyn           | Apply dynamic model settings                              |
| minEl         | Apply minimum elevation settings                          |
| posFixMode    | Apply fix mode settings                                   |
| drLim         | Reserved                                                  |
| posMask       | Apply position mask settings                              |
| timeMask      | Apply time mask settings                                  |
| staticHoldMas | Apply static hold settings                                |
| k             |                                                           |
| dgpsMask      | Apply DGPS settings                                       |
| cnoThreshold  | Apply CNO threshold settings (cnoThresh, cnoThreshNumSVs) |

<span id="page-233-1"></span>

Bitfield mask Description continued

| Name | Description                                        |
|------|----------------------------------------------------|
| utc  | Apply UTC settings                                 |
|      | (not supported in protocol versions less than 16). |

## <span id="page-233-0"></span>**32.10.20 UBX-CFG-NAVX5 (0x06 0x23)**

#### **32.10.20.1 Navigation engine expert settings**

| Message           |        |   | UBX-CFG-NAVX5                     |           |             |   |                                     |                                                               |                                            |                     |  |  |
|-------------------|--------|---|-----------------------------------|-----------|-------------|---|-------------------------------------|---------------------------------------------------------------|--------------------------------------------|---------------------|--|--|
| Description       |        |   | Navigation engine expert settings |           |             |   |                                     |                                                               |                                            |                     |  |  |
| Firmware          |        |   | Supported on:                     |           |             |   |                                     |                                                               |                                            |                     |  |  |
|                   |        |   |                                   |           |             |   |                                     | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16 and 17 |                                            |                     |  |  |
| Type              |        |   | Get/set                           |           |             |   |                                     |                                                               |                                            |                     |  |  |
| Comment           |        | - |                                   |           |             |   |                                     |                                                               |                                            |                     |  |  |
|                   |        |   | Header                            | Class     | ID          |   | Length (Bytes)                      |                                                               | Payload                                    | Checksum            |  |  |
| Message Structure |        |   | 0xB5 0x62 0x06 0x23 40            |           |             |   |                                     |                                                               |                                            | see below CK_A CK_B |  |  |
| Payload Contents: |        |   |                                   |           |             |   |                                     |                                                               |                                            |                     |  |  |
| Byte Offset       | Number |   | Scaling                           | Name      |             |   | Unit                                | Description                                                   |                                            |                     |  |  |
| Format            |        |   |                                   |           |             |   |                                     |                                                               |                                            |                     |  |  |
| 0<br>U2           |        |   | -                                 | version   |             |   | -                                   | Message version (0x0000 for this version)                     |                                            |                     |  |  |
| 2                 | X2     |   | -                                 | mask1     |             |   | -                                   | First parameters bitmask. Only the                            |                                            |                     |  |  |
|                   |        |   |                                   |           |             |   |                                     | flagged parameters will be applied,                           |                                            |                     |  |  |
|                   |        |   |                                   |           |             |   |                                     |                                                               | unused bits must be set to 0. (see graphic |                     |  |  |
|                   |        |   |                                   |           |             |   | below)                              |                                                               |                                            |                     |  |  |
| 4                 | X4     | - |                                   | mask2     |             | - | Second parameters bitmask. Only the |                                                               |                                            |                     |  |  |
|                   |        |   |                                   |           |             |   |                                     | flagged parameters will be applied,                           |                                            |                     |  |  |
|                   |        |   |                                   |           |             |   |                                     | unused bits must be set to 0. (see graphic                    |                                            |                     |  |  |
|                   |        |   |                                   |           |             |   |                                     | below)                                                        |                                            |                     |  |  |
| 8                 | U1[2]  |   | -                                 | reserved1 |             |   | -                                   | Reserved                                                      |                                            |                     |  |  |
| 10                | U1     |   | -                                 | minSVs    |             |   | #SVs                                | Minimum number of satellites for                              |                                            |                     |  |  |
|                   |        |   |                                   |           |             |   |                                     | navigation                                                    |                                            |                     |  |  |
| 11                | U1     |   | -                                 | maxSVs    |             |   | #SVs                                | Maximum number of satellites for                              |                                            |                     |  |  |
| 12                | U1     |   | -                                 | minCNO    |             |   | dBHz                                | navigation<br>Minimum satellite signal level for              |                                            |                     |  |  |
|                   |        |   |                                   |           |             |   |                                     | navigation                                                    |                                            |                     |  |  |
| 13                | U1     |   | -                                 |           | reserved2   |   | -                                   | Reserved                                                      |                                            |                     |  |  |
| 14                | U1     |   | -                                 |           | iniFix3D    |   | -                                   | 1 = initial fix must be 3D                                    |                                            |                     |  |  |
| 15                | U1[2]  |   | -                                 |           | reserved3   |   | -                                   | Reserved                                                      |                                            |                     |  |  |
| 17                | U1     |   | -                                 |           | ackAiding   |   | -                                   | 1 = issue acknowledgements for                                |                                            |                     |  |  |
|                   |        |   |                                   |           |             |   |                                     | assistance message input                                      |                                            |                     |  |  |
| 18                | U2     |   | -                                 |           | wknRollover |   | -                                   | GPS week rollover number; GPS week                            |                                            |                     |  |  |
|                   |        |   |                                   |           |             |   |                                     | numbers will be set correctly from this                       |                                            |                     |  |  |
|                   |        |   |                                   |           |             |   |                                     | week up to 1024 weeks after this week.                        |                                            |                     |  |  |
|                   |        |   |                                   |           |             |   |                                     | Setting this to 0 reverts to firmware                         |                                            |                     |  |  |
|                   |        |   |                                   |           |             |   |                                     | default.                                                      |                                            |                     |  |  |
| 20<br>U1[6]       |        |   | -                                 |           | reserved4   |   | -                                   | Reserved                                                      |                                            |                     |  |  |



UBX-CFG-NAVX5 continued

| Byte Offset | Number | Scaling | Name         | Unit | Description                              |
|-------------|--------|---------|--------------|------|------------------------------------------|
|             | Format |         |              |      |                                          |
| 26          | U1     | -       | usePPP       | -    | 1 = use Precise Point Positioning (only  |
|             |        |         |              |      | available with the PPP product variant)  |
| 27          | U1     | -       | aopCfg       | -    | AssistNow Autonomous configuration       |
|             |        |         |              |      | (see graphic below)                      |
| 28          | U1[2]  | -       | reserved5    | -    | Reserved                                 |
| 30          | U2     | -       | aopOrbMaxErr | m    | Maximum acceptable (modeled)             |
|             |        |         |              |      | AssistNow Autonomous orbit error (valid  |
|             |        |         |              |      | range = 51000, or 0 = reset to firmware  |
|             |        |         |              |      | default)                                 |
| 32          | U1[4]  | -       | reserved6    | -    | Reserved                                 |
| 36          | U1[3]  | -       | reserved7    | -    | Reserved                                 |
| 39          | U1     | -       | useAdr       | -    | Only supported on certain products       |
|             |        |         |              |      | Enable/disable ADR sensor fusion (if 0:  |
|             |        |         |              |      | sensor fusion is disabled - if 1: sensor |
|             |        |         |              |      | fusion is enabled).                      |

## <span id="page-234-0"></span>**Bitfield mask1**

This graphic explains the bits of mask1



| Name         | Description                                                                     |
|--------------|---------------------------------------------------------------------------------|
| minMax       | 1 = apply min/max SVs settings                                                  |
| minCno       | 1 = apply minimum C/N0 setting                                                  |
| initial3dfix | 1 = apply initial 3D fix settings                                               |
| wknRoll      | 1 = apply GPS weeknumber rollover settings                                      |
| ackAid       | 1 = apply assistance acknowledgement settings                                   |
| ppp          | 1 = apply usePPP flag                                                           |
| aop          | 1 = apply aopCfg (useAOP flag) and aopOrbMaxErr settings (AssistNow Autonomous) |

## <span id="page-234-1"></span>**Bitfield mask2**



<span id="page-235-0"></span>

| Name | Description                                          |
|------|------------------------------------------------------|
| adr  | Apply ADR sensor fusion on/off setting (useAdr flag) |

## <span id="page-235-1"></span>**Bitfield aopCfg**

This graphic explains the bits of aopCfg



| Name   | Description                     |
|--------|---------------------------------|
| useAOP | 1 = enable AssistNow Autonomous |

## **32.10.20.2 Navigation engine expert settings**

| Message           |                  |   | UBX-CFG-NAVX5                                                                                                                          |           |           |  |                |                                                                                                                                    |         |                     |  |  |  |
|-------------------|------------------|---|----------------------------------------------------------------------------------------------------------------------------------------|-----------|-----------|--|----------------|------------------------------------------------------------------------------------------------------------------------------------|---------|---------------------|--|--|--|
| Description       |                  |   | Navigation engine expert settings                                                                                                      |           |           |  |                |                                                                                                                                    |         |                     |  |  |  |
| Firmware          |                  |   | Supported on:<br>• u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.<br>3, 22, 22.01, 23 and 23.01 |           |           |  |                |                                                                                                                                    |         |                     |  |  |  |
| Type              |                  |   | Get/set                                                                                                                                |           |           |  |                |                                                                                                                                    |         |                     |  |  |  |
| Comment           |                  |   | (Polling will send back a version 3 message in protocol versions 19.2).                                                                |           |           |  |                |                                                                                                                                    |         |                     |  |  |  |
|                   |                  |   | Header                                                                                                                                 | Class     | ID        |  | Length (Bytes) |                                                                                                                                    | Payload | Checksum            |  |  |  |
| Message Structure |                  |   | 0xB5 0x62 0x06 0x23 40                                                                                                                 |           |           |  |                |                                                                                                                                    |         | see below CK_A CK_B |  |  |  |
| Payload Contents: |                  |   |                                                                                                                                        |           |           |  |                |                                                                                                                                    |         |                     |  |  |  |
| Byte Offset       | Number<br>Format |   | Scaling                                                                                                                                |           | Name      |  | Unit           | Description                                                                                                                        |         |                     |  |  |  |
| 0                 | U2               |   | -                                                                                                                                      | version   |           |  | -              | Message version (0x0002 for this version)                                                                                          |         |                     |  |  |  |
| 2                 | X2               |   | -                                                                                                                                      | mask1     |           |  | -              | First parameters bitmask. Only the<br>flagged parameters will be applied,<br>unused bits must be set to 0. (see graphic<br>below)  |         |                     |  |  |  |
| 4                 | X4               |   | -                                                                                                                                      | mask2     |           |  | -              | Second parameters bitmask. Only the<br>flagged parameters will be applied,<br>unused bits must be set to 0. (see graphic<br>below) |         |                     |  |  |  |
| 8                 | U1[2]            |   | -                                                                                                                                      |           | reserved1 |  | -              | Reserved                                                                                                                           |         |                     |  |  |  |
| 10                | U1               |   | -                                                                                                                                      | minSVs    |           |  | #SVs           | Minimum number of satellites for<br>navigation                                                                                     |         |                     |  |  |  |
| 11                | U1               | - |                                                                                                                                        | maxSVs    |           |  | #SVs           | Maximum number of satellites for<br>navigation                                                                                     |         |                     |  |  |  |
| 12                | U1               | - |                                                                                                                                        | minCNO    |           |  | dBHz           | Minimum satellite signal level for<br>navigation                                                                                   |         |                     |  |  |  |
| 13                | U1               |   | -                                                                                                                                      |           | reserved2 |  | -              | Reserved                                                                                                                           |         |                     |  |  |  |
| 14                | U1               |   | -                                                                                                                                      |           | iniFix3D  |  | -              | 1 = initial fix must be 3D                                                                                                         |         |                     |  |  |  |
| 15                | U1[2]            | - |                                                                                                                                        | reserved3 |           |  | -              | Reserved                                                                                                                           |         |                     |  |  |  |



#### UBX-CFG-NAVX5 continued

| Byte Offset | Number | Scaling | Name          | Unit | Description                                 |
|-------------|--------|---------|---------------|------|---------------------------------------------|
|             | Format |         |               |      |                                             |
| 17          | U1     | -       | ackAiding     | -    | 1 = issue acknowledgements for              |
|             |        |         |               |      | assistance message input                    |
| 18          | U2     | -       | wknRollover   | -    | GPS week rollover number; GPS week          |
|             |        |         |               |      | numbers will be set correctly from this     |
|             |        |         |               |      | week up to 1024 weeks after this week.      |
|             |        |         |               |      | Setting this to 0 reverts to firmware       |
|             |        |         |               |      | default.                                    |
| 20          | U1     | -       | sigAttenCompM | dBHz | Only supported on certain products          |
|             |        |         | ode           |      | Permanently attenuated signal               |
|             |        |         |               |      | compensation (0 = disabled, 255 =           |
|             |        |         |               |      | automatic, 163 = maximum expected           |
|             |        |         |               |      | C/N0 value)                                 |
| 21          | U1     | -       | reserved4     | -    | Reserved                                    |
| 22          | U1[2]  | -       | reserved5     | -    | Reserved                                    |
| 24          | U1[2]  | -       | reserved6     | -    | Reserved                                    |
| 26          | U1     | -       | usePPP        | -    | 1 = use Precise Point Positioning (only     |
|             |        |         |               |      | available with the PPP product variant)     |
| 27          | U1     | -       | aopCfg        | -    | AssistNow Autonomous configuration          |
|             |        |         |               |      | (see graphic below)                         |
| 28          | U1[2]  | -       | reserved7     | -    | Reserved                                    |
| 30          | U2     | -       | aopOrbMaxErr  | m    | Maximum acceptable (modeled)                |
|             |        |         |               |      | AssistNow Autonomous orbit error (valid     |
|             |        |         |               |      | range = 51000, or 0 = reset to firmware     |
|             |        |         |               |      | default)                                    |
| 32          | U1[4]  | -       | reserved8     | -    | Reserved                                    |
| 36          | U1[3]  | -       | reserved9     | -    | Reserved                                    |
| 39          | U1     | -       | useAdr        | -    | Only supported on certain products          |
|             |        |         |               |      | Enable/disable ADR/UDR sensor fusion (if    |
|             |        |         |               |      | 0: sensor fusion is disabled - if 1: sensor |
|             |        |         |               |      | fusion is enabled).                         |

## <span id="page-236-0"></span>**Bitfield mask1**





| Name         | Description                                                                     |
|--------------|---------------------------------------------------------------------------------|
| minMax       | 1 = apply min/max SVs settings                                                  |
| minCno       | 1 = apply minimum C/N0 setting                                                  |
| initial3dfix | 1 = apply initial 3D fix settings                                               |
| wknRoll      | 1 = apply GPS weeknumber rollover settings                                      |
| ackAid       | 1 = apply assistance acknowledgement settings                                   |
| ppp          | 1 = apply usePPP flag                                                           |
| aop          | 1 = apply aopCfg (useAOP flag) and aopOrbMaxErr settings (AssistNow Autonomous) |

## <span id="page-237-0"></span>**Bitfield mask2**

This graphic explains the bits of mask2



| reserved |  |
|----------|--|
|          |  |

| Name         | Description                                              |
|--------------|----------------------------------------------------------|
| adr          | Apply ADR/UDR sensor fusion on/off setting (useAdr flag) |
| sigAttenComp | Only supported on certain products                       |
|              | Apply signal attenuation compensation feature settings   |

## <span id="page-237-1"></span>**Bitfield aopCfg**



| Name   | Description                     |  |  |  |  |  |  |
|--------|---------------------------------|--|--|--|--|--|--|
| useAOP | 1 = enable AssistNow Autonomous |  |  |  |  |  |  |

<span id="page-238-0"></span>

| Message           |                  |                | UBX-CFG-NAVX5                     |                      |           |          |                                                  |                                                                                                                                                                              |          |                     |  |  |  |
|-------------------|------------------|----------------|-----------------------------------|----------------------|-----------|----------|--------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|---------------------|--|--|--|
| Description       |                  |                | Navigation engine expert settings |                      |           |          |                                                  |                                                                                                                                                                              |          |                     |  |  |  |
| Firmware          |                  |                | Supported on:                     |                      |           |          |                                                  | • u-blox 8 / u-blox M8 protocol versions 19.1 and 19.2                                                                                                                       |          |                     |  |  |  |
| Type              |                  |                | Get/set                           |                      |           |          |                                                  |                                                                                                                                                                              |          |                     |  |  |  |
| Comment           |                  | -              |                                   |                      |           |          |                                                  |                                                                                                                                                                              |          |                     |  |  |  |
|                   |                  |                | Header                            | Class<br>ID          |           |          | Length (Bytes)                                   |                                                                                                                                                                              | Checksum |                     |  |  |  |
| Message Structure |                  |                | 0xB5 0x62 0x06 0x23 44            |                      |           |          |                                                  |                                                                                                                                                                              |          | see below CK_A CK_B |  |  |  |
| Payload Contents: |                  |                |                                   |                      |           |          |                                                  |                                                                                                                                                                              |          |                     |  |  |  |
| Byte Offset       | Number<br>Format |                | Scaling                           | Name                 |           |          | Unit                                             | Description                                                                                                                                                                  |          |                     |  |  |  |
| 0                 | U2               |                | -                                 | version              |           |          | -                                                |                                                                                                                                                                              |          |                     |  |  |  |
| 2                 | X2               |                | -                                 | mask1                |           | -        | below)                                           | Message version (0x0003 for this version)<br>First parameters bitmask. Only the<br>flagged parameters will be applied,<br>unused bits must be set to 0. (see graphic         |          |                     |  |  |  |
| 4                 | X4               |                | -                                 | mask2                |           | -        | below)                                           | Second parameters bitmask. Only the<br>flagged parameters will be applied,<br>unused bits must be set to 0. (see graphic                                                     |          |                     |  |  |  |
| 8                 | U1[2]            |                | -                                 |                      | reserved1 |          | -                                                | Reserved                                                                                                                                                                     |          |                     |  |  |  |
| 10                | U1               | -              |                                   | minSVs               |           |          | #SVs                                             | Minimum number of satellites for                                                                                                                                             |          |                     |  |  |  |
|                   |                  |                |                                   |                      |           |          |                                                  | navigation                                                                                                                                                                   |          |                     |  |  |  |
| 11                | U1               |                | -                                 | maxSVs               |           | #SVs     | Maximum number of satellites for                 |                                                                                                                                                                              |          |                     |  |  |  |
| 12                | U1               |                | -                                 | minCNO               |           | dBHz     | navigation<br>Minimum satellite signal level for |                                                                                                                                                                              |          |                     |  |  |  |
|                   |                  |                |                                   |                      |           |          |                                                  | navigation                                                                                                                                                                   |          |                     |  |  |  |
| 13                | U1               |                | -                                 |                      | reserved2 |          | -                                                | Reserved                                                                                                                                                                     |          |                     |  |  |  |
| 14                | U1               |                | -                                 |                      | iniFix3D  |          | -                                                | 1 = initial fix must be 3D                                                                                                                                                   |          |                     |  |  |  |
| 15                | U1[2]            |                | -                                 |                      | reserved3 |          | -                                                | Reserved                                                                                                                                                                     |          |                     |  |  |  |
| 17                | U1               |                | -                                 |                      | ackAiding |          | -                                                | 1 = issue acknowledgements for                                                                                                                                               |          |                     |  |  |  |
|                   |                  |                |                                   |                      |           |          |                                                  | assistance message input                                                                                                                                                     |          |                     |  |  |  |
| 18                | U2<br>-          |                |                                   | wknRollover          |           |          | -                                                | GPS week rollover number; GPS week<br>numbers will be set correctly from this<br>week up to 1024 weeks after this week.<br>Setting this to 0 reverts to firmware<br>default. |          |                     |  |  |  |
| 20                | U1               | -              |                                   | sigAttenCompM<br>ode |           | dBHz     | C/N0 value)                                      | Only supported on certain products<br>Permanently attenuated signal<br>compensation (0 = disabled, 255 =<br>automatic, 163 = maximum expected                                |          |                     |  |  |  |
| 21                | U1               |                | -                                 |                      | reserved4 |          | -                                                | Reserved                                                                                                                                                                     |          |                     |  |  |  |
| 22                | U1[2]            |                | -                                 |                      | reserved5 |          | -                                                | Reserved                                                                                                                                                                     |          |                     |  |  |  |
| 24                | U1[2]            | reserved6<br>- |                                   |                      | -         | Reserved |                                                  |                                                                                                                                                                              |          |                     |  |  |  |

## **32.10.20.3 Navigation engine expert settings**



UBX-CFG-NAVX5 continued

| Byte Offset | Number | Scaling | Name         | Unit | Description                                 |
|-------------|--------|---------|--------------|------|---------------------------------------------|
|             | Format |         |              |      |                                             |
| 26          | U1     | -       | usePPP       | -    | 1 = use Precise Point Positioning (only     |
|             |        |         |              |      | available with the PPP product variant)     |
| 27          | U1     | -       | aopCfg       | -    | AssistNow Autonomous configuration          |
|             |        |         |              |      | (see graphic below)                         |
| 28          | U1[2]  | -       | reserved7    | -    | Reserved                                    |
| 30          | U2     | -       | aopOrbMaxErr | m    | Maximum acceptable (modeled)                |
|             |        |         |              |      | AssistNow Autonomous orbit error (valid     |
|             |        |         |              |      | range = 51000, or 0 = reset to firmware     |
|             |        |         |              |      | default)                                    |
| 32          | U1[4]  | -       | reserved8    | -    | Reserved                                    |
| 36          | U1[3]  | -       | reserved9    | -    | Reserved                                    |
| 39          | U1     | -       | useAdr       | -    | Only supported on certain products          |
|             |        |         |              |      | Enable/disable ADR/UDR sensor fusion (if    |
|             |        |         |              |      | 0: sensor fusion is disabled - if 1: sensor |
|             |        |         |              |      | fusion is enabled).                         |
| 40          | U1[2]  | -       | reserved10   | -    | Reserved                                    |
| 42          | U1[2]  | -       | reserved11   | -    | Reserved                                    |

## <span id="page-239-0"></span>**Bitfield mask1**



| Name         | Description                                                                     |
|--------------|---------------------------------------------------------------------------------|
| minMax       | 1 = apply min/max SVs settings                                                  |
| minCno       | 1 = apply minimum C/N0 setting                                                  |
| initial3dfix | 1 = apply initial 3D fix settings                                               |
| wknRoll      | 1 = apply GPS weeknumber rollover settings                                      |
| ackAid       | 1 = apply assistance acknowledgement settings                                   |
| ppp          | 1 = apply usePPP flag                                                           |
| aop          | 1 = apply aopCfg (useAOP flag) and aopOrbMaxErr settings (AssistNow Autonomous) |

<span id="page-240-1"></span>

## **Bitfield mask2**

<span id="page-240-2"></span>This graphic explains the bits of mask2



| Name         | Description                                              |
|--------------|----------------------------------------------------------|
| adr          | Apply ADR/UDR sensor fusion on/off setting (useAdr flag) |
| sigAttenComp | Only supported on certain products                       |
|              | Apply signal attenuation compensation feature settings   |

## <span id="page-240-3"></span>**Bitfield aopCfg**

This graphic explains the bits of aopCfg



| Name   | Description                     |
|--------|---------------------------------|
| useAOP | 1 = enable AssistNow Autonomous |

## <span id="page-240-0"></span>**32.10.21 UBX-CFG-NMEA (0x06 0x17)**

## **32.10.21.1 NMEA protocol configuration (deprecated)**

| Message           |                                                                            | UBX-CFG-NMEA                                                                               |                                             |       |    |   |                |                                                                                  |         |                     |  |  |  |
|-------------------|----------------------------------------------------------------------------|--------------------------------------------------------------------------------------------|---------------------------------------------|-------|----|---|----------------|----------------------------------------------------------------------------------|---------|---------------------|--|--|--|
| Description       |                                                                            |                                                                                            | NMEA protocol configuration (deprecated)    |       |    |   |                |                                                                                  |         |                     |  |  |  |
| Firmware          |                                                                            |                                                                                            | Supported on:                               |       |    |   |                |                                                                                  |         |                     |  |  |  |
|                   |                                                                            | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                                             |       |    |   |                |                                                                                  |         |                     |  |  |  |
|                   |                                                                            |                                                                                            | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01   |       |    |   |                |                                                                                  |         |                     |  |  |  |
| Type              |                                                                            |                                                                                            | Get/set                                     |       |    |   |                |                                                                                  |         |                     |  |  |  |
| Comment           | This message version is provided for backwards compatibility only. Use the |                                                                                            |                                             |       |    |   |                |                                                                                  |         |                     |  |  |  |
|                   |                                                                            |                                                                                            |                                             |       |    |   |                | last version listed below instead (its fields are backwards compatible with this |         |                     |  |  |  |
|                   |                                                                            |                                                                                            | version, it just has extra fields defined). |       |    |   |                |                                                                                  |         |                     |  |  |  |
|                   |                                                                            |                                                                                            |                                             |       |    |   |                | Get/set the NMEA protocol configuration. See section NMEA Protocol               |         |                     |  |  |  |
|                   |                                                                            |                                                                                            |                                             |       |    |   |                | Configuration for a detailed description of the configuration effects on NMEA    |         |                     |  |  |  |
|                   |                                                                            |                                                                                            | output.                                     |       |    |   |                |                                                                                  |         |                     |  |  |  |
|                   |                                                                            | Header                                                                                     |                                             | Class | ID |   | Length (Bytes) |                                                                                  | Payload | Checksum            |  |  |  |
| Message Structure |                                                                            |                                                                                            | 0xB5 0x62 0x06 0x17                         |       |    | 4 |                |                                                                                  |         | see below CK_A CK_B |  |  |  |
| Payload Contents: |                                                                            |                                                                                            |                                             |       |    |   |                |                                                                                  |         |                     |  |  |  |
| Byte Offset       | Number                                                                     |                                                                                            | Scaling                                     | Name  |    |   | Unit           | Description                                                                      |         |                     |  |  |  |
|                   | Format                                                                     |                                                                                            |                                             |       |    |   |                |                                                                                  |         |                     |  |  |  |

0 X1 - filter - filter flags (see [graphic below](#page-241-0))



#### UBX-CFG-NMEA continued

| Byte Offset | Number | Scaling | Name        | Unit | Description                         |
|-------------|--------|---------|-------------|------|-------------------------------------|
|             | Format |         |             |      |                                     |
| 1           | U1     | -       | nmeaVersion | -    | 0x23: NMEA version 2.3              |
|             |        |         |             |      | 0x21: NMEA version 2.1              |
| 2           | U1     | -       | numSV       | -    | Maximum number of SVs to report per |
|             |        |         |             |      | TalkerId.                           |
|             |        |         |             |      | 0: unlimited                        |
|             |        |         |             |      | 8: 8 SVs                            |
|             |        |         |             |      | 12: 12 SVs                          |
|             |        |         |             |      | 16: 16 SVs                          |
| 3           | X1     | -       | flags       | -    | flags (see graphic below)           |

## <span id="page-241-0"></span>**Bitfield filter**

This graphic explains the bits of filter



| Name          | Description                                        |
|---------------|----------------------------------------------------|
| posFilt       | Enable position output for failed or invalid fixes |
| mskPosFilt    | Enable position output for invalid fixes           |
| timeFilt      | Enable time output for invalid times               |
| dateFilt      | Enable date output for invalid dates               |
| gpsOnlyFilter | Restrict output to GPS satellites only             |
| trackFilt     | Enable COG output even if COG is frozen            |

## <span id="page-241-1"></span>**Bitfield flags**



<span id="page-242-0"></span>

| Name     | Description                                                                                      |
|----------|--------------------------------------------------------------------------------------------------|
| compat   | enable compatibility mode.                                                                       |
|          | This might be needed for certain applications when customer's NMEA parser expects a fixed number |
|          | of digits in position coordinates.                                                               |
| consider | enable considering mode.                                                                         |

#### **32.10.21.2 NMEA protocol configuration V0 (deprecated)**

| Message           | UBX-CFG-NMEA                                                               |       |    |                                                                                            |         |          |  |  |  |  |  |
|-------------------|----------------------------------------------------------------------------|-------|----|--------------------------------------------------------------------------------------------|---------|----------|--|--|--|--|--|
| Description       | NMEA protocol configuration V0 (deprecated)                                |       |    |                                                                                            |         |          |  |  |  |  |  |
| Firmware          | Supported on:                                                              |       |    |                                                                                            |         |          |  |  |  |  |  |
|                   |                                                                            |       |    | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |          |  |  |  |  |  |
|                   |                                                                            |       |    | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |         |          |  |  |  |  |  |
| Type              | Get/set                                                                    |       |    |                                                                                            |         |          |  |  |  |  |  |
| Comment           | This message version is provided for backwards compatibility only. Use the |       |    |                                                                                            |         |          |  |  |  |  |  |
|                   |                                                                            |       |    | last version listed below instead (its fields are backwards compatible with this           |         |          |  |  |  |  |  |
|                   |                                                                            |       |    | version, it just has extra fields defined).                                                |         |          |  |  |  |  |  |
|                   |                                                                            |       |    | Get/set the NMEA protocol configuration. See section NMEA Protocol                         |         |          |  |  |  |  |  |
|                   |                                                                            |       |    | Configuration for a detailed description of the configuration effects on NMEA              |         |          |  |  |  |  |  |
|                   | output.                                                                    |       |    |                                                                                            |         |          |  |  |  |  |  |
|                   | Header                                                                     | Class | ID | Length (Bytes)                                                                             | Payload | Checksum |  |  |  |  |  |
| Message Structure | 0xB5 0x62 0x06 0x17<br>12<br>see below CK_A CK_B                           |       |    |                                                                                            |         |          |  |  |  |  |  |

| Payload Contents: |
|-------------------|
|-------------------|

| Byte Offset | Number | Scaling | Name         | Unit | Description                                  |
|-------------|--------|---------|--------------|------|----------------------------------------------|
|             | Format |         |              |      |                                              |
| 0           | X1     | -       | filter       | -    | filter flags (see graphic below)             |
| 1           | U1     | -       | nmeaVersion  | -    | 0x23: NMEA version 2.3                       |
|             |        |         |              |      | 0x21: NMEA version 2.1                       |
| 2           | U1     | -       | numSV        | -    | Maximum number of SVs to report per          |
|             |        |         |              |      | TalkerId.                                    |
|             |        |         |              |      | 0: unlimited                                 |
|             |        |         |              |      | 8: 8 SVs                                     |
|             |        |         |              |      | 12: 12 SVs                                   |
|             |        |         |              |      | 16: 16 SVs                                   |
| 3           | X1     | -       | flags        | -    | flags (see graphic below)                    |
| 4           | X4     | -       | gnssToFilter | -    | Filters out satellites based on their GNSS.  |
|             |        |         |              |      | If a bitfield is enabled, the corresponding  |
|             |        |         |              |      | satellites will be not output. (see graphic  |
|             |        |         |              |      | below)                                       |
| 8           | U1     | -       | svNumbering  | -    | Configures the display of satellites that do |
|             |        |         |              |      | not have an NMEA-defined value.              |
|             |        |         |              |      | Note: this does not apply to satellites with |
|             |        |         |              |      | an unknown ID.                               |
|             |        |         |              |      | 0: Strict - Satellites are not output        |
|             |        |         |              |      | 1: Extended - Use proprietary numbering      |
|             |        |         |              |      | (see Satellite Numbering)                    |



#### UBX-CFG-NMEA continued

| Byte Offset | Number | Scaling | Name         | Unit | Description                                 |
|-------------|--------|---------|--------------|------|---------------------------------------------|
|             | Format |         |              |      |                                             |
| 9           | U1     | -       | mainTalkerId | -    | By default the main Talker ID (i.e. the     |
|             |        |         |              |      | Talker ID used for all messages other than  |
|             |        |         |              |      | GSV) is determined by the GNSS              |
|             |        |         |              |      | assignment of the receiver's channels (see  |
|             |        |         |              |      | UBX-CFG-GNSS).                              |
|             |        |         |              |      | This field enables the main Talker ID to be |
|             |        |         |              |      | overridden.                                 |
|             |        |         |              |      | 0: Main Talker ID is not overridden         |
|             |        |         |              |      | 1: Set main Talker ID to 'GP'               |
|             |        |         |              |      | 2: Set main Talker ID to 'GL'               |
|             |        |         |              |      | 3: Set main Talker ID to 'GN'               |
|             |        |         |              |      | 4: Set main Talker ID to 'GA'               |
|             |        |         |              |      | 5: Set main Talker ID to 'GB'               |
|             |        |         |              |      | 6: Set main Talker ID to 'GQ' (available in |
|             |        |         |              |      | NMEA 4.11 and later)                        |
| 10          | U1     | -       | gsvTalkerId  | -    | By default the Talker ID for GSV messages   |
|             |        |         |              |      | is GNSS-specific (as defined by NMEA).      |
|             |        |         |              |      | This field enables the GSV Talker ID to be  |
|             |        |         |              |      | overridden.                                 |
|             |        |         |              |      | 0: Use GNSS-specific Talker ID (as defined  |
|             |        |         |              |      | by NMEA)                                    |
|             |        |         |              |      | 1: Use the main Talker ID                   |
| 11          | U1     | -       | version      | -    | Message version (0x00 for this version)     |

## <span id="page-243-0"></span>**Bitfield filter**





| Name          | Description                                        |
|---------------|----------------------------------------------------|
| posFilt       | Enable position output for failed or invalid fixes |
| mskPosFilt    | Enable position output for invalid fixes           |
| timeFilt      | Enable time output for invalid times               |
| dateFilt      | Enable date output for invalid dates               |
| gpsOnlyFilter | Restrict output to GPS satellites only             |
| trackFilt     | Enable COG output even if COG is frozen            |

## <span id="page-244-0"></span>**Bitfield flags**

This graphic explains the bits of flags



| Name     | Description                                                                                      |
|----------|--------------------------------------------------------------------------------------------------|
| compat   | enable compatibility mode.                                                                       |
|          | This might be needed for certain applications when customer's NMEA parser expects a fixed number |
|          | of digits in position coordinates.                                                               |
| consider | enable considering mode.                                                                         |

## <span id="page-244-1"></span>**Bitfield gnssToFilter**

This graphic explains the bits of gnssToFilter

|  |                     |  |  |  |  |  |  |  |  |  |  |  | ь                | 5                                                         | 4                       | <u>.</u>     |             |   |
|--|---------------------|--|--|--|--|--|--|--|--|--|--|--|------------------|-----------------------------------------------------------|-------------------------|--------------|-------------|---|
|  | $\Box$ signed value |  |  |  |  |  |  |  |  |  |  |  | 횽<br>÷<br>Φ<br>효 | 69.<br>ø<br>Æ6<br>$\overline{\phantom{0}}$<br><b>`0.0</b> | ø<br>ω<br><u>ы</u><br>ਠ | ۰<br>å<br>್ಹ | ø<br>g<br>8 | 읆 |

| Description                             |
|-----------------------------------------|
| Disable reporting of GPS satellites     |
| Disable reporting of SBAS satellites    |
| Disable reporting of Galileo satellites |
| Disable reporting of QZSS satellites    |
| Disable reporting of GLONASS satellites |
| Disable reporting of BeiDou satellites  |
|                                         |

<span id="page-245-0"></span>

| Message           |          | UBX-CFG-NMEA                                               |        |              |    |                                                                    |                                                                                                                                                                                                                                                                                                                                         |         |          |  |  |
|-------------------|----------|------------------------------------------------------------|--------|--------------|----|--------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|----------|--|--|
| Description       |          | Extended NMEA protocol configuration V1                    |        |              |    |                                                                    |                                                                                                                                                                                                                                                                                                                                         |         |          |  |  |
| Firmware          |          | Supported on:<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |        |              |    |                                                                    | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,                                                                                                                                                                                                                                              |         |          |  |  |
| Type              |          | Get/set                                                    |        |              |    |                                                                    |                                                                                                                                                                                                                                                                                                                                         |         |          |  |  |
| Comment           |          | output.                                                    |        |              |    | Get/set the NMEA protocol configuration. See section NMEA Protocol | Configuration for a detailed description of the configuration effects on NMEA                                                                                                                                                                                                                                                           |         |          |  |  |
|                   |          | Header                                                     | Class  | ID           |    | Length (Bytes)                                                     |                                                                                                                                                                                                                                                                                                                                         | Payload | Checksum |  |  |
| Message Structure |          | 0xB5 0x62 0x06 0x17                                        |        |              | 20 |                                                                    | see below CK_A CK_B                                                                                                                                                                                                                                                                                                                     |         |          |  |  |
| Payload Contents: |          |                                                            |        |              |    |                                                                    |                                                                                                                                                                                                                                                                                                                                         |         |          |  |  |
| Byte Offset       | Number   | Scaling                                                    | Name   |              |    | Unit                                                               | Description                                                                                                                                                                                                                                                                                                                             |         |          |  |  |
|                   | Format   |                                                            |        |              |    |                                                                    |                                                                                                                                                                                                                                                                                                                                         |         |          |  |  |
| 0                 | X1       | -                                                          | filter |              |    | -                                                                  | filter flags (see graphic below)                                                                                                                                                                                                                                                                                                        |         |          |  |  |
| 1<br>2            | U1<br>U1 | -<br>-                                                     | numSV  | nmeaVersion  |    | -<br>-                                                             | 0x4b: NMEA version 4.11 (not available in<br>all products)<br>0x41: NMEA version 4.10 (not available in<br>all products)<br>0x40: NMEA version 4.0 (not available in<br>all products)<br>0x23: NMEA version 2.3<br>0x21: NMEA version 2.1<br>Maximum number of SVs to report per<br>TalkerId.<br>0: unlimited<br>8: 8 SVs<br>12: 12 SVs |         |          |  |  |
|                   |          |                                                            |        |              |    |                                                                    | 16: 16 SVs                                                                                                                                                                                                                                                                                                                              |         |          |  |  |
| 3                 | X1       | -                                                          | flags  |              |    | -                                                                  | flags (see graphic below)                                                                                                                                                                                                                                                                                                               |         |          |  |  |
| 4                 | X4       | -                                                          |        | gnssToFilter |    | -                                                                  | Filters out satellites based on their GNSS.<br>If a bitfield is enabled, the corresponding<br>satellites will be not output. (see graphic                                                                                                                                                                                               |         |          |  |  |
| 8                 | U1       | -                                                          |        | svNumbering  |    | -                                                                  | below)<br>Configures the display of satellites that do<br>not have an NMEA-defined value.<br>Note: this does not apply to satellites with<br>an unknown ID.<br>0: Strict - Satellites are not output<br>1: Extended - Use proprietary numbering<br>(see Satellite Numbering)                                                            |         |          |  |  |

## **32.10.21.3 Extended NMEA protocol configuration V1**



#### UBX-CFG-NMEA continued

| Byte Offset | Number | Scaling | Name         | Unit | Description                                 |
|-------------|--------|---------|--------------|------|---------------------------------------------|
|             | Format |         |              |      |                                             |
| 9           | U1     | -       | mainTalkerId | -    | By default the main Talker ID (i.e. the     |
|             |        |         |              |      | Talker ID used for all messages other than  |
|             |        |         |              |      | GSV) is determined by the GNSS              |
|             |        |         |              |      | assignment of the receiver's channels (see  |
|             |        |         |              |      | UBX-CFG-GNSS).                              |
|             |        |         |              |      | This field enables the main Talker ID to be |
|             |        |         |              |      | overridden.                                 |
|             |        |         |              |      | 0: Main Talker ID is not overridden         |
|             |        |         |              |      | 1: Set main Talker ID to 'GP'               |
|             |        |         |              |      | 2: Set main Talker ID to 'GL'               |
|             |        |         |              |      | 3: Set main Talker ID to 'GN'               |
|             |        |         |              |      | 4: Set main Talker ID to 'GA'               |
|             |        |         |              |      | 5: Set main Talker ID to 'GB'               |
|             |        |         |              |      | 6: Set main Talker ID to 'GQ' (available in |
|             |        |         |              |      | NMEA 4.11 and later)                        |
| 10          | U1     | -       | gsvTalkerId  | -    | By default the Talker ID for GSV messages   |
|             |        |         |              |      | is GNSS-specific (as defined by NMEA).      |
|             |        |         |              |      | This field enables the GSV Talker ID to be  |
|             |        |         |              |      | overridden.                                 |
|             |        |         |              |      | 0: Use GNSS-specific Talker ID (as defined  |
|             |        |         |              |      | by NMEA)                                    |
|             |        |         |              |      | 1: Use the main Talker ID                   |
| 11          | U1     | -       | version      | -    | Message version (0x01 for this version)     |
| 12          | CH[2]  | -       | bdsTalkerId  | -    | Sets the two characters that should be      |
|             |        |         |              |      | used for the BeiDou Talker ID. If these are |
|             |        |         |              |      | set to zero, then the default BeiDou Talker |
|             |        |         |              |      | ID will be used.                            |
| 14          | U1[6]  | -       | reserved1    | -    | Reserved                                    |

## <span id="page-246-0"></span>**Bitfield filter**





| Name          | Description                                        |
|---------------|----------------------------------------------------|
| posFilt       | Enable position output for failed or invalid fixes |
| mskPosFilt    | Enable position output for invalid fixes           |
| timeFilt      | Enable time output for invalid times               |
| dateFilt      | Enable date output for invalid dates               |
| gpsOnlyFilter | Restrict output to GPS satellites only             |
| trackFilt     | Enable COG output even if COG is frozen            |

## <span id="page-247-0"></span>**Bitfield flags**

This graphic explains the bits of flags



| Name     | Description                                                                                      |
|----------|--------------------------------------------------------------------------------------------------|
| compat   | enable compatibility mode.                                                                       |
|          | This might be needed for certain applications when customer's NMEA parser expects a fixed number |
|          | of digits in position coordinates.                                                               |
| consider | enable considering mode.                                                                         |
| limit82  | enable strict limit to 82 characters maximum.                                                    |
| highPrec | enable high precision mode.                                                                      |
|          | This flag cannot be set in conjunction with either compatibility mode or Limit82 mode (not       |
|          | supported in protocol versions less than 20.01).                                                 |

## <span id="page-247-1"></span>**Bitfield gnssToFilter**

This graphic explains the bits of gnssToFilter

|  |  |  |  |  |  |  |  |  |  |  |  |  | o      | э                          |          | <u>.</u>                                                                                            | -      |     |
|--|--|--|--|--|--|--|--|--|--|--|--|--|--------|----------------------------|----------|-----------------------------------------------------------------------------------------------------|--------|-----|
|  |  |  |  |  |  |  |  |  |  |  |  |  | 용<br>⊣ | 88<br>B<br>⊣<br><b>MAG</b> | 282<br>ਠ | 8<br>$\overline{\phantom{0}}$<br>$\overline{a}$<br>$\overline{\phantom{0}}$<br>呕<br><b>SOLUTION</b> | 8<br>융 | §βs |

| Name    | Description                             |
|---------|-----------------------------------------|
| gps     | Disable reporting of GPS satellites     |
| sbas    | Disable reporting of SBAS satellites    |
| galileo | Disable reporting of Galileo satellites |
| qzss    | Disable reporting of QZSS satellites    |
| glonass | Disable reporting of GLONASS satellites |
| beidou  | Disable reporting of BeiDou satellites  |

<span id="page-248-1"></span>

## <span id="page-248-0"></span>**32.10.22 UBX-CFG-ODO (0x06 0x1E)**

#### **32.10.22.1 Odometer, low-speed COG engine settings**

| Message                    |                                          |            | UBX-CFG-ODO                                                |         |              |   |                                            |                                                                                            |         |                     |  |  |
|----------------------------|------------------------------------------|------------|------------------------------------------------------------|---------|--------------|---|--------------------------------------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|
| Description                |                                          |            | Odometer, low-speed COG engine settings                    |         |              |   |                                            |                                                                                            |         |                     |  |  |
| Firmware                   |                                          |            | Supported on:                                              |         |              |   |                                            |                                                                                            |         |                     |  |  |
|                            |                                          |            |                                                            |         |              |   |                                            | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |
|                            |                                          |            | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                  |         |              |   |                                            |                                                                                            |         |                     |  |  |
| Type                       |                                          |            | Get/set                                                    |         |              |   |                                            |                                                                                            |         |                     |  |  |
| Comment                    |                                          |            | This feature is not supported for the FTS product variant. |         |              |   |                                            |                                                                                            |         |                     |  |  |
|                            |                                          | -          |                                                            |         |              |   |                                            |                                                                                            |         |                     |  |  |
|                            |                                          |            | Header                                                     | Class   | ID           |   | Length (Bytes)                             |                                                                                            | Payload | Checksum            |  |  |
| Message Structure          |                                          |            | 0xB5 0x62 0x06 0x1E 20                                     |         |              |   |                                            |                                                                                            |         | see below CK_A CK_B |  |  |
| Payload Contents:          |                                          |            |                                                            |         |              |   |                                            |                                                                                            |         |                     |  |  |
| Byte Offset                | Number                                   |            | Scaling                                                    | Name    |              |   | Unit                                       | Description                                                                                |         |                     |  |  |
|                            | Format                                   |            |                                                            |         |              |   |                                            |                                                                                            |         |                     |  |  |
| 0                          | U1                                       |            | -                                                          | version |              |   | -                                          | Message version (0x00 for this version)                                                    |         |                     |  |  |
| 1                          | U1[3]                                    |            | reserved1<br>-                                             |         |              |   | -                                          | Reserved                                                                                   |         |                     |  |  |
| 4                          | U1                                       |            | -                                                          | flags   |              |   | -                                          | Odometer/Low-speed COG filter flags (see                                                   |         |                     |  |  |
|                            |                                          |            |                                                            |         |              |   |                                            | graphic below)                                                                             |         |                     |  |  |
| 5                          | X1                                       |            | -                                                          | odoCfg  |              |   | -                                          | Odometer filter settings (see graphic                                                      |         |                     |  |  |
|                            |                                          |            |                                                            |         |              |   |                                            | below)                                                                                     |         |                     |  |  |
| 6                          | U1[6]                                    |            | -                                                          |         | reserved2    |   | -                                          | Reserved                                                                                   |         |                     |  |  |
| 12                         | U1                                       |            | 1e-1                                                       |         | cogMaxSpeed  |   | m/s                                        | Speed below which course-over-ground                                                       |         |                     |  |  |
|                            |                                          |            |                                                            |         |              |   |                                            | (COG) is computed with the low-speed                                                       |         |                     |  |  |
|                            |                                          |            |                                                            |         |              |   |                                            | COG filter                                                                                 |         |                     |  |  |
| 13                         | U1                                       |            | -                                                          |         | cogMaxPosAcc |   | m                                          | Maximum acceptable position accuracy                                                       |         |                     |  |  |
|                            |                                          |            |                                                            |         |              |   |                                            | for computing COG with the low-speed                                                       |         |                     |  |  |
|                            |                                          | COG filter |                                                            |         |              |   |                                            |                                                                                            |         |                     |  |  |
| 14                         | reserved3<br>U1[2]<br>-<br>-<br>Reserved |            |                                                            |         |              |   |                                            |                                                                                            |         |                     |  |  |
| velLpGain<br>16<br>U1<br>- |                                          |            |                                                            |         |              | - | Velocity low-pass filter level, range 0255 |                                                                                            |         |                     |  |  |
| 17<br>U1<br>-              |                                          |            |                                                            |         | cogLpGain    |   | -                                          | COG low-pass filter level (at speed < 8                                                    |         |                     |  |  |
|                            |                                          |            |                                                            |         |              |   | -                                          | m/s), range 0255                                                                           |         |                     |  |  |
| 18                         | U1[2]<br>-                               |            |                                                            |         | reserved4    |   |                                            | Reserved                                                                                   |         |                     |  |  |

## <span id="page-248-2"></span>**Bitfield flags**



<span id="page-249-1"></span>

| Name     | Description                                 |
|----------|---------------------------------------------|
| useODO   | Odometer-enabled flag                       |
| useCOG   | Low-speed COG filter enabled flag           |
| outLPVel | Output low-pass filtered velocity flag      |
| outLPCog | Output low-pass filtered heading (COG) flag |

## <span id="page-249-2"></span>**Bitfield odoCfg**

This graphic explains the bits of odoCfg



| Name    | Description                                                      |
|---------|------------------------------------------------------------------|
| profile | Profile type (0=running, 1=cycling, 2=swimming, 3=car, 4=custom) |

## <span id="page-249-0"></span>**32.10.23 UBX-CFG-PM2 (0x06 0x3B)**

## **32.10.23.1 Extended power management configuration**

| Message           |        |        | UBX-CFG-PM2                                                            |              |               |        |                |                                                                                            |         |                     |  |  |  |
|-------------------|--------|--------|------------------------------------------------------------------------|--------------|---------------|--------|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|--|
| Description       |        |        | Extended power management configuration                                |              |               |        |                |                                                                                            |         |                     |  |  |  |
| Firmware          |        |        | Supported on:                                                          |              |               |        |                |                                                                                            |         |                     |  |  |  |
|                   |        |        |                                                                        |              |               |        |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |  |
|                   |        |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                              |              |               |        |                |                                                                                            |         |                     |  |  |  |
| Type              |        |        | Get/set                                                                |              |               |        |                |                                                                                            |         |                     |  |  |  |
| Comment           |        |        | This feature is not supported for either the ADR, FTS or HPG products. |              |               |        |                |                                                                                            |         |                     |  |  |  |
|                   |        | -      |                                                                        |              |               |        |                |                                                                                            |         |                     |  |  |  |
|                   |        | Header |                                                                        | Class        | ID            |        | Length (Bytes) |                                                                                            | Payload | Checksum            |  |  |  |
| Message Structure |        |        | 0xB5 0x62 0x06 0x3B 44                                                 |              |               |        |                |                                                                                            |         | see below CK_A CK_B |  |  |  |
| Payload Contents: |        |        |                                                                        |              |               |        |                |                                                                                            |         |                     |  |  |  |
| Byte Offset       | Number |        | Scaling                                                                | Name         |               |        | Unit           | Description                                                                                |         |                     |  |  |  |
|                   | Format |        |                                                                        |              |               |        |                |                                                                                            |         |                     |  |  |  |
| 0                 | U1     |        | -                                                                      | version      |               |        | -              | Message version (0x01 for this version)                                                    |         |                     |  |  |  |
| 1                 | U1     |        | -                                                                      |              | reserved1     |        | -              | Reserved                                                                                   |         |                     |  |  |  |
| 2                 | U1     |        | -                                                                      |              | maxStartupSta |        | s              | Maximum time to spend in Acquisition                                                       |         |                     |  |  |  |
|                   |        |        |                                                                        | teDur        |               |        |                | state. If 0: bound disabled (see                                                           |         |                     |  |  |  |
|                   |        |        |                                                                        |              |               |        |                | maxStartupStateDur) (not supported in                                                      |         |                     |  |  |  |
|                   |        |        |                                                                        |              |               |        |                | protocol versions less than 17).                                                           |         |                     |  |  |  |
| 3                 | U1     |        | -                                                                      |              | reserved2     |        | -              | Reserved                                                                                   |         |                     |  |  |  |
| 4                 | X4     |        | -                                                                      | flags        |               |        | -              | PSM configuration flags (see graphic                                                       |         |                     |  |  |  |
|                   |        |        |                                                                        |              |               | below) |                |                                                                                            |         |                     |  |  |  |
| 8<br>U4<br>-      |        |        |                                                                        | updatePeriod |               |        | ms             | Position update period. If set to 0, the                                                   |         |                     |  |  |  |
|                   |        |        |                                                                        |              |               |        |                | receiver will never retry a fix and it will wait                                           |         |                     |  |  |  |
|                   |        |        |                                                                        |              |               |        |                | for external events                                                                        |         |                     |  |  |  |



#### UBX-CFG-PM2 continued

| Byte Offset | Number | Scaling | Name         | Unit | Description                                    |
|-------------|--------|---------|--------------|------|------------------------------------------------|
|             | Format |         |              |      |                                                |
| 12          | U4     | -       | searchPeriod | ms   | Acquisition retry period if previously failed. |
|             |        |         |              |      | If set to 0, the receiver will never retry a   |
|             |        |         |              |      | startup                                        |
| 16          | U4     | -       | gridOffset   | ms   | Grid offset relative to GPS start of week      |
| 20          | U2     | -       | onTime       | s    | Time to stay in Tracking state                 |
| 22          | U2     | -       | minAcqTime   | s    | minimal search time                            |
| 24          | U1[20] | -       | reserved3    | -    | Reserved                                       |

## <span id="page-250-0"></span>**Bitfield flags**

| Name          | Description                                                                             |
|---------------|-----------------------------------------------------------------------------------------|
| extintSel     | EXTINT pin select                                                                       |
|               | 0 EXTINT0                                                                               |
|               | 1 EXTINT1                                                                               |
| extintWake    | EXTINT pin control                                                                      |
|               | 0 disabled                                                                              |
|               | 1 enabled, keep receiver awake as long as selected EXTINT pin is 'high'                 |
| extintBackup  | EXTINT pin control                                                                      |
|               | 0 disabled                                                                              |
|               | 1 enabled, force receiver into BACKUP mode when selected EXTINT pin is 'low'            |
| limitPeakCurr | Limit peak current                                                                      |
|               | 00 disabled                                                                             |
|               | 01 enabled, peak current is limited                                                     |
|               | 10 reserved                                                                             |
|               | 11 reserved                                                                             |
| waitTimeFix   | Wait for Timefix (see waitTimeFix)                                                      |
|               | 0 wait for normal fix OK before starting on time                                        |
|               | 1 wait for time fix OK before starting on time                                          |
| updateRTC     | Update Real Time Clock (see updateRTC)                                                  |
|               | 0 do not wake up to update RTC. RTC is updated during normal on-time.                   |
|               | 1 update RTC. The receiver adds extra wake-up cycles to update the RTC.                 |
| updateEPH     | Update Ephemeris (see updateEPH)                                                        |
|               | 0 do not wake up to update Ephemeris data                                               |
|               | 1 update Ephemeris. The receiver adds extra wake-up cycles to update the Ephemeris data |

<span id="page-251-0"></span>

#### Bitfield flags Description continued

| Name          | Description                                                                                       |
|---------------|---------------------------------------------------------------------------------------------------|
| doNotEnterOff | Behavior of receiver in case of no fix (see doNotEnterOff)                                        |
|               | 0 receiver enters Inactive) Awaiting next search state                                            |
|               | 1 receiver does not enter (Inactive) Awaiting next search state but keeps trying to acquire a fix |
|               | instead                                                                                           |
| mode          | Mode of operation (see mode)                                                                      |
|               | 00 ON/OFF operation (PSMOO)                                                                       |
|               | 01 cyclic tracking operation (PSMCT)                                                              |
|               | 10 reserved                                                                                       |
|               | 11 reserved                                                                                       |

## **32.10.23.2 Extended power management configuration**

| Message           |                                                                                                                                                      |                   | UBX-CFG-PM2                                                                                                         |                        |                      |  |                     |                                                                                                                                                                                                                |                                                                                                |          |  |  |  |
|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------|---------------------------------------------------------------------------------------------------------------------|------------------------|----------------------|--|---------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------|----------|--|--|--|
| Description       |                                                                                                                                                      |                   | Extended power management configuration                                                                             |                        |                      |  |                     |                                                                                                                                                                                                                |                                                                                                |          |  |  |  |
| Firmware          |                                                                                                                                                      |                   | Supported on:<br>• u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.3<br>and 22 |                        |                      |  |                     |                                                                                                                                                                                                                |                                                                                                |          |  |  |  |
| Type              |                                                                                                                                                      |                   | Get/set                                                                                                             |                        |                      |  |                     |                                                                                                                                                                                                                |                                                                                                |          |  |  |  |
| Comment           |                                                                                                                                                      | -                 |                                                                                                                     |                        |                      |  |                     | This feature is not supported for either the ADR, FTS or HPG products.                                                                                                                                         |                                                                                                |          |  |  |  |
|                   |                                                                                                                                                      |                   | Header                                                                                                              | Class                  | ID<br>Length (Bytes) |  |                     |                                                                                                                                                                                                                | Payload                                                                                        | Checksum |  |  |  |
| Message Structure |                                                                                                                                                      |                   | 0xB5 0x62 0x06 0x3B 48                                                                                              |                        |                      |  | see below CK_A CK_B |                                                                                                                                                                                                                |                                                                                                |          |  |  |  |
| Payload Contents: |                                                                                                                                                      |                   |                                                                                                                     |                        |                      |  |                     |                                                                                                                                                                                                                |                                                                                                |          |  |  |  |
| Byte Offset       | Number<br>Format                                                                                                                                     |                   | Scaling                                                                                                             | Name                   | Unit<br>Description  |  |                     |                                                                                                                                                                                                                |                                                                                                |          |  |  |  |
| 0                 | U1                                                                                                                                                   | version<br>-<br>- |                                                                                                                     |                        |                      |  | firmware.           | Message version (0x02 for this version)<br>Note: the message version number is the<br>same as for protocol version 23.01; select<br>correct message version based on the<br>protocol version supported by your |                                                                                                |          |  |  |  |
| 1                 | U1                                                                                                                                                   |                   | -                                                                                                                   |                        | reserved1            |  | -                   | Reserved                                                                                                                                                                                                       |                                                                                                |          |  |  |  |
| 2                 | U1                                                                                                                                                   |                   | -                                                                                                                   | maxStartupSta<br>teDur |                      |  | s                   | Maximum time to spend in Acquisition<br>state. If 0: bound disabled (see<br>maxStartupStateDur) (not supported in<br>protocol versions less than 17).                                                          |                                                                                                |          |  |  |  |
| 3                 | U1                                                                                                                                                   |                   | -                                                                                                                   |                        | reserved2            |  | -                   | Reserved                                                                                                                                                                                                       |                                                                                                |          |  |  |  |
| 4                 | X4                                                                                                                                                   |                   | -                                                                                                                   | flags                  |                      |  | -                   | PSM configuration flags (see graphic<br>below)                                                                                                                                                                 |                                                                                                |          |  |  |  |
| 8                 | updatePeriod<br>U4<br>-<br>ms<br>Position update period. If set to 0, the<br>receiver will never retry a fix and it will wait<br>for external events |                   |                                                                                                                     |                        |                      |  |                     |                                                                                                                                                                                                                |                                                                                                |          |  |  |  |
| 12                | U4<br>-                                                                                                                                              |                   |                                                                                                                     |                        | searchPeriod         |  | ms                  | startup                                                                                                                                                                                                        | Acquisition retry period if previously failed.<br>If set to 0, the receiver will never retry a |          |  |  |  |



#### UBX-CFG-PM2 continued

| Byte Offset | Number | Scaling | Name          | Unit | Description                               |
|-------------|--------|---------|---------------|------|-------------------------------------------|
|             | Format |         |               |      |                                           |
| 16          | U4     | -       | gridOffset    | ms   | Grid offset relative to GPS start of week |
| 20          | U2     | -       | onTime        | s    | Time to stay in Tracking state            |
| 22          | U2     | -       | minAcqTime    | s    | minimal search time                       |
| 24          | U1[20] | -       | reserved3     | -    | Reserved                                  |
| 44          | U4     | -       | extintInactiv | ms   | inactivity time out on EXTINT pin if      |
|             |        |         | ityMs         |      | enabled                                   |

## <span id="page-252-0"></span>**Bitfield flags**

|  |  |  |  |  |  |  | 18 <sub>1</sub> | $\sqrt{17}$ | 16 |  |                        |                                  |                                                              | 9                                                                            | 8 |                                                                          | 6.                                             | 5                                         |                  |  |  |
|--|--|--|--|--|--|--|-----------------|-------------|----|--|------------------------|----------------------------------|--------------------------------------------------------------|------------------------------------------------------------------------------|---|--------------------------------------------------------------------------|------------------------------------------------|-------------------------------------------|------------------|--|--|
|  |  |  |  |  |  |  | Φ<br>ဋ          |             |    |  | ட<br>Φ<br>Æ5<br>ਠ<br>흌 | –<br>œ<br>T<br>↩<br>ю<br>ठ.<br>용 | ×<br>i<br>ш.<br>$\overline{a}$<br>ε<br>i<br>–<br>↩<br>ಕ<br>- | ۰,<br>市<br>宣<br>$\cdot$ $\overline{\phantom{a}}$<br>$\overline{\phantom{0}}$ |   | Φ<br>$\dot{}$<br>↵<br>횾<br>∸<br>$\overline{\phantom{0}}$<br>⊆<br>İ<br>ىد | Ω<br>o<br>呕<br>മ<br>↩<br>-<br>i<br>↩<br>×<br>മ | v<br>좋<br>3<br>ى<br>∽<br>İ<br>↩<br>×<br>w | ⊣<br>S<br>i<br>w |  |  |

| Name          | Description                                                                                     |
|---------------|-------------------------------------------------------------------------------------------------|
| extintSel     | EXTINT pin select                                                                               |
|               | 0 EXTINT0                                                                                       |
|               | 1 EXTINT1                                                                                       |
| extintWake    | EXTINT Pin Control                                                                              |
|               | 0 disabled                                                                                      |
|               | 1 enabled, keep receiver awake as long as selected EXTINT pin is 'high'                         |
| extintBackup  | EXTINT Pin Control                                                                              |
|               | 0 disabled                                                                                      |
|               | 1 enabled, force receiver into BACKUP mode when selected EXTINT pin is 'low'                    |
| extintInactiv | EXTINT Pin Control                                                                              |
| e             | 0 disabled                                                                                      |
|               | 1 enabled, force backup in case EXTINT pin is inactive for time longer than extintIncactivityMs |
| limitPeakCurr | Limit Peak Current                                                                              |
|               | 00 disabled                                                                                     |
|               | 01 enabled, peak current is limited                                                             |
|               | 10 reserved                                                                                     |
|               | 11 reserved                                                                                     |
| waitTimeFix   | Wait for Timefix (see waitTimeFix)                                                              |
|               | 0 wait for normal fix OK before starting on time                                                |
|               | 1 wait for time fix OK before starting on time                                                  |
| updateRTC     | Update Real Time Clock (see updateRTC)                                                          |
|               | 0 do not wake up to update RTC. RTC is updated during normal on-time.                           |
|               | 1 update RTC. The receiver adds extra wake-up cycles to update the RTC.                         |
| updateEPH     | Update Ephemeris (see updateEPH)                                                                |
|               | 0 do not wake up to update Ephemeris data                                                       |
|               | 1 update Ephemeris. The receiver adds extra wake-up cycles to update the Ephemeris data         |

<span id="page-253-0"></span>

#### Bitfield flags Description continued

| Name          | Description                                                                                       |
|---------------|---------------------------------------------------------------------------------------------------|
| doNotEnterOff | Behavior of receiver in case of no fix (see doNotEnterOff)                                        |
|               | 0 receiver enters (Inactive) Awaiting next search state                                           |
|               | 1 receiver does not enter (Inactive) Awaiting next search state but keeps trying to acquire a fix |
|               | instead                                                                                           |
| mode          | Mode of operation (see mode)                                                                      |
|               | 00 ON/OFF operation (PSMOO)                                                                       |
|               | 01 cyclic tracking operation (PSMCT)                                                              |
|               | 10 reserved                                                                                       |
|               | 11 reserved                                                                                       |

## **32.10.23.3 Extended power management configuration**

| Message           |        |   | UBX-CFG-PM2                             |         |              |               |                |                                                                        |         |                     |
|-------------------|--------|---|-----------------------------------------|---------|--------------|---------------|----------------|------------------------------------------------------------------------|---------|---------------------|
| Description       |        |   | Extended power management configuration |         |              |               |                |                                                                        |         |                     |
| Firmware          |        |   | Supported on:                           |         |              |               |                |                                                                        |         |                     |
|                   |        |   |                                         |         |              |               |                | • u-blox 8 / u-blox M8 with protocol version 23.01                     |         |                     |
| Type              |        |   | Get/set                                 |         |              |               |                |                                                                        |         |                     |
| Comment           |        |   |                                         |         |              |               |                | This feature is not supported for either the ADR, FTS or HPG products. |         |                     |
|                   |        | - |                                         |         |              |               |                |                                                                        |         |                     |
|                   |        |   | Header                                  | Class   | ID           |               | Length (Bytes) |                                                                        | Payload | Checksum            |
| Message Structure |        |   | 0xB5 0x62 0x06 0x3B 48                  |         |              |               |                |                                                                        |         | see below CK_A CK_B |
| Payload Contents: |        |   |                                         |         |              |               |                |                                                                        |         |                     |
| Byte Offset       | Number |   | Scaling                                 | Name    |              |               | Unit           | Description                                                            |         |                     |
|                   | Format |   |                                         |         |              |               |                |                                                                        |         |                     |
| 0                 | U1     |   | -                                       | version |              |               | -              | Message version (0x02 for this version)                                |         |                     |
|                   |        |   |                                         |         |              |               |                | Note: the message version number is the                                |         |                     |
|                   |        |   |                                         |         |              |               |                | same as for protocol versions 18 up to 22;                             |         |                     |
|                   |        |   |                                         |         |              |               |                | select correct message version based on                                |         |                     |
|                   |        |   |                                         |         |              |               |                | the protocol version supported by your                                 |         |                     |
|                   |        |   |                                         |         |              |               |                | firmware.                                                              |         |                     |
| 1                 | U1     |   | -                                       |         | reserved1    |               | -              | Reserved                                                               |         |                     |
| 2                 | U1     |   | -                                       |         |              | maxStartupSta | s              | Maximum time to spend in Acquisition                                   |         |                     |
|                   |        |   |                                         | teDur   |              |               |                | state. If 0: bound disabled.                                           |         |                     |
|                   |        |   |                                         |         |              |               |                | (see maxStartupStateDur) (not supported                                |         |                     |
|                   |        |   |                                         |         |              |               |                | in protocol versions 23 to 23.01).                                     |         |                     |
| 3                 | U1     |   | -                                       |         | reserved2    |               | -              | Reserved                                                               |         |                     |
| 4                 | X4     |   | -                                       | flags   |              |               | -              | PSM configuration flags (see graphic                                   |         |                     |
|                   |        |   |                                         |         |              |               |                | below)                                                                 |         |                     |
| 8                 | U4     |   | -                                       |         | updatePeriod |               | ms             | Position update period. If set to 0, the                               |         |                     |
|                   |        |   |                                         |         |              |               |                | receiver will never retry a fix and it will wait                       |         |                     |
|                   |        |   |                                         |         |              |               |                | for external events .                                                  |         |                     |



#### UBX-CFG-PM2 continued

| Byte Offset | Number | Scaling | Name          | Unit | Description                                    |
|-------------|--------|---------|---------------|------|------------------------------------------------|
|             | Format |         |               |      |                                                |
| 12          | U4     | -       | searchPeriod  | ms   | Acquisition retry period if previously failed. |
|             |        |         |               |      | If set to 0, the receiver will never retry a   |
|             |        |         |               |      | startup.                                       |
|             |        |         |               |      | (not supported in protocol versions 23 to      |
|             |        |         |               |      | 23.01).                                        |
| 16          | U4     | -       | gridOffset    | ms   | Grid offset relative to GPS start of week      |
|             |        |         |               |      | (not supported in protocol versions 23 to      |
|             |        |         |               |      | 23.01).                                        |
| 20          | U2     | -       | onTime        | s    | Time to stay in Tracking state                 |
|             |        |         |               |      | (not supported in protocol versions 23 to      |
|             |        |         |               |      | 23.01).                                        |
| 22          | U2     | -       | minAcqTime    | s    | Minimal search time                            |
| 24          | U1[20] | -       | reserved3     | -    | Reserved                                       |
| 44          | U4     | -       | extintInactiv | ms   | inactivity time out on EXTINT pin if           |
|             |        |         | ityMs         |      | enabled                                        |

## <span id="page-254-0"></span>**Bitfield flags**

|  |  |  |  |  |  |  | 18 | 17 | 16               |  |            |             | 10                                      | 9                                                                    | 8 |                                                                   | 6                                     | 5                     | 4                                                      | з                          |  |  |
|--|--|--|--|--|--|--|----|----|------------------|--|------------|-------------|-----------------------------------------|----------------------------------------------------------------------|---|-------------------------------------------------------------------|---------------------------------------|-----------------------|--------------------------------------------------------|----------------------------|--|--|
|  |  |  |  |  |  |  | 웉  |    | ഺ<br>ш<br>c<br>흉 |  | 뜅<br>updat | T<br>updatı | ×<br>į<br>눹<br>$\ddot{}$<br>⊢<br>↩<br>ğ | Æ,<br>ѡ<br>↩<br>İ<br>ε<br>$\overline{a}$<br>$\overline{\phantom{0}}$ |   | İ<br>↩<br>is<br>S<br>$\overline{a}$<br>ť<br>$\ddot{}$<br>ىد<br>a٠ | ₽<br>呕<br>œ.<br>↩<br>i<br>↵<br>×<br>w | Φ<br>盏<br>뒫<br>i<br>ž | $\overline{\phantom{0}}$<br>8<br>↩<br>c<br>İ<br>↩<br>శ | ↵<br>₩<br>帀<br>⊢<br>↩<br>8 |  |  |

| Name       | Description                                                             |
|------------|-------------------------------------------------------------------------|
| optTarget  | Optimization target                                                     |
|            | 000 performance (default)                                               |
|            | 001 power save                                                          |
|            | 010 reserved                                                            |
|            | 011 reserved                                                            |
|            | 100 reserved                                                            |
|            | 101 reserved                                                            |
|            | 110 reserved                                                            |
|            | 111 reserved                                                            |
| extintSel  | EXTINT pin select                                                       |
|            | 0 EXTINT0                                                               |
|            | 1 EXTINT1                                                               |
| extintWake | EXTINT pin control                                                      |
|            | 0 disabled                                                              |
|            | 1 enabled, keep receiver awake as long as selected EXTINT pin is 'high' |



#### Bitfield flags Description continued

| Name          | Description                                                                                       |
|---------------|---------------------------------------------------------------------------------------------------|
| extintBackup  | EXTINT pin control                                                                                |
|               | 0 disabled                                                                                        |
|               | 1 enabled, force receiver into BACKUP mode when selected EXTINT pin is 'low'                      |
| extintInactiv | EXTINT pin control                                                                                |
| e             | 0 disabled                                                                                        |
|               | 1 enabled, force backup in case EXTINT pin is inactive for time longer than extintIncactivityMs   |
| limitPeakCurr | Limit peak current                                                                                |
|               | 00 disabled                                                                                       |
|               | 01 enabled, peak current is limited                                                               |
|               | 10 reserved                                                                                       |
|               | 11 reserved                                                                                       |
| waitTimeFix   | Wait for Timefix                                                                                  |
|               | (see waitTimeFix)                                                                                 |
|               | 0 wait for normal fix OK before starting on time                                                  |
|               | 1 wait for time fix OK before starting on time                                                    |
|               | (not supported in protocol versions 23 to 23.01).                                                 |
| updateRTC     | Update real time clock                                                                            |
|               | (see updateRTC)                                                                                   |
|               | 0 do not wake up to update RTC. RTC is updated during normal on-time.                             |
|               | 1 update RTC. The receiver adds extra wake-up cycles to update the RTC.                           |
|               | (not supported in protocol versions 23 to 23.01, and 32+).                                        |
| updateEPH     | Update ephemeris                                                                                  |
|               | (see updateEPH)                                                                                   |
|               | 0 do not wake up to update Ephemeris data                                                         |
|               | 1 update Ephemeris. The receiver adds extra wake-up cycles to update the Ephemeris data.          |
| doNotEnterOff | Behavior of receiver in case of no fix                                                            |
|               | Behavior of receiver in case of no fix (see doNotEnterOff)                                        |
|               | 0 receiver enters (Inactive) Awaiting next search state                                           |
|               | 1 receiver does not enter (Inactive) Awaiting next search state but keeps trying to acquire a fix |
|               | instead                                                                                           |
|               | (not supported in protocol versions 23 to 23.01).                                                 |
| mode          | Mode of operation                                                                                 |
|               | (see mode)                                                                                        |
|               | 00 ON/OFF operation (PSMOO) (not supported in protocol versions 23 to 23.01)                      |
|               | 01 cyclic tracking operation (PSMCT)                                                              |
|               | 10 reserved                                                                                       |
|               | 11 reserved                                                                                       |

<span id="page-256-1"></span>

#### <span id="page-256-0"></span>**32.10.24 UBX-CFG-PMS (0x06 0x86)**

#### **32.10.24.1 Power mode setup**

| Message           |                  | UBX-CFG-PMS                   |                       |                |                                                                                                                                                            |         |                     |
|-------------------|------------------|-------------------------------|-----------------------|----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|---------------------|
| Description       |                  | Power mode setup              |                       |                |                                                                                                                                                            |         |                     |
| Firmware          |                  | Supported on:<br>23 and 23.01 |                       |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 22, 22.01,                                                                 |         |                     |
| Type              |                  | Get/set                       |                       |                |                                                                                                                                                            |         |                     |
| Comment           |                  |                               |                       |                | Using UBX-CFG-PMS to set Super-E mode to 1, 2 or 4 Hz navigation rates sets<br>minAcqTime to 180 s instead of the default 300 s in protocol version 23.01. |         |                     |
|                   |                  | Header                        | Class<br>ID           | Length (Bytes) |                                                                                                                                                            | Payload | Checksum            |
| Message Structure |                  |                               | 0xB5 0x62 0x06 0x86 8 |                |                                                                                                                                                            |         | see below CK_A CK_B |
| Payload Contents: |                  |                               |                       |                |                                                                                                                                                            |         |                     |
| Byte Offset       | Number<br>Format | Scaling                       | Name                  | Unit           | Description                                                                                                                                                |         |                     |
| 0                 | U1               | -                             | version               | -              | Message version (0x00 for this version)                                                                                                                    |         |                     |
| 1                 | U1               | -                             | powerSetupVal         | -              | Power setup value                                                                                                                                          |         |                     |
|                   |                  |                               | ue                    |                | 0x00 = Full power                                                                                                                                          |         |                     |
|                   |                  |                               |                       |                | 0x01 = Balanced                                                                                                                                            |         |                     |
|                   |                  |                               |                       |                | 0x02 = Interval                                                                                                                                            |         |                     |
|                   |                  |                               |                       |                | 0x03 = Aggressive with 1 Hz                                                                                                                                |         |                     |
|                   |                  |                               |                       |                | 0x04 = Aggressive with 2 Hz                                                                                                                                |         |                     |
|                   |                  |                               |                       |                | 0x05 = Aggressive with 4 Hz                                                                                                                                |         |                     |
|                   |                  |                               |                       |                | 0xFF = Invalid (only when polling)                                                                                                                         |         |                     |
| 2                 | U2               | -                             | period                | s              | Position update period and search period.                                                                                                                  |         |                     |
|                   |                  |                               |                       |                | Recommended minimum period is 10 s,                                                                                                                        |         |                     |
|                   |                  |                               |                       |                | although the receiver accepts any value                                                                                                                    |         |                     |
|                   |                  |                               |                       |                | bigger than 5 s.                                                                                                                                           |         |                     |
|                   |                  |                               |                       |                | Only valid when powerSetupValue set to                                                                                                                     |         |                     |
|                   |                  |                               |                       |                | Interval, otherwise must be set to '0'.                                                                                                                    |         |                     |
| 4                 | U2               | -                             | onTime                | s              | Duration of the ON phase, must be smaller                                                                                                                  |         |                     |
|                   |                  |                               |                       |                | than the period.                                                                                                                                           |         |                     |
|                   |                  |                               |                       |                | Only valid when powerSetupValue set to                                                                                                                     |         |                     |
|                   |                  |                               |                       |                | Interval, otherwise must be set to '0'.                                                                                                                    |         |                     |
| 6                 | U1[2]            | -                             | reserved1             | -              | Reserved                                                                                                                                                   |         |                     |

<span id="page-257-1"></span>

## <span id="page-257-0"></span>**32.10.25 UBX-CFG-PRT (0x06 0x00)**

#### **32.10.25.1 Polls the configuration for one I/O port**

| Message           |        |        | UBX-CFG-PRT                               |        |    |  |                |                                                                                            |         |                     |  |  |  |
|-------------------|--------|--------|-------------------------------------------|--------|----|--|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|--|
| Description       |        |        | Polls the configuration for one I/O port  |        |    |  |                |                                                                                            |         |                     |  |  |  |
| Firmware          |        |        | Supported on:                             |        |    |  |                |                                                                                            |         |                     |  |  |  |
|                   |        |        |                                           |        |    |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |  |
|                   |        |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |        |    |  |                |                                                                                            |         |                     |  |  |  |
| Type              |        |        | Poll Request                              |        |    |  |                |                                                                                            |         |                     |  |  |  |
| Comment           |        |        |                                           |        |    |  |                | Sending this message with a port ID as payload results in having the receiver              |         |                     |  |  |  |
|                   |        |        |                                           |        |    |  |                | return the configuration for the specified port.                                           |         |                     |  |  |  |
|                   |        | Header |                                           | Class  | ID |  | Length (Bytes) |                                                                                            | Payload | Checksum            |  |  |  |
| Message Structure |        |        | 0xB5 0x62 0x06 0x00 1                     |        |    |  |                |                                                                                            |         | see below CK_A CK_B |  |  |  |
| Payload Contents: |        |        |                                           |        |    |  |                |                                                                                            |         |                     |  |  |  |
| Byte Offset       | Number |        | Scaling                                   | Name   |    |  | Unit           | Description                                                                                |         |                     |  |  |  |
|                   | Format |        |                                           |        |    |  |                |                                                                                            |         |                     |  |  |  |
| 0                 | U1     |        | -                                         | PortID |    |  | -              | Port identifier number (see the other                                                      |         |                     |  |  |  |
|                   |        |        |                                           |        |    |  |                | versions of CFG-PRT for valid values)                                                      |         |                     |  |  |  |

## **32.10.25.2 Port configuration for UART ports**

| Message           |        |        | UBX-CFG-PRT                               |        |           |                |                                                                                            |                     |          |
|-------------------|--------|--------|-------------------------------------------|--------|-----------|----------------|--------------------------------------------------------------------------------------------|---------------------|----------|
| Description       |        |        | Port configuration for UART ports         |        |           |                |                                                                                            |                     |          |
| Firmware          |        |        | Supported on:                             |        |           |                |                                                                                            |                     |          |
|                   |        |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |        |           |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                     |          |
| Type              |        |        | Get/set                                   |        |           |                |                                                                                            |                     |          |
| Comment           |        |        |                                           |        |           |                | Several configurations can be concatenated to one input message. In this case              |                     |          |
|                   |        |        |                                           |        |           |                | the payload length can be a multiple of the normal length (see the other versions          |                     |          |
|                   |        |        |                                           |        |           |                | of CFG-PRT). Output messages from the module contain only one configuration                |                     |          |
|                   |        | unit.  |                                           |        |           |                |                                                                                            |                     |          |
|                   |        |        |                                           |        |           |                | Note that this message can affect baud rate and other transmission                         |                     |          |
|                   |        |        |                                           |        |           |                | parameters. Because there may be messages queued for transmission there                    |                     |          |
|                   |        |        |                                           |        |           |                | may be uncertainty about which protocol applies to such messages. In addition a            |                     |          |
|                   |        |        |                                           |        |           |                | message currently in transmission may be corrupted by a protocol change. Host              |                     |          |
|                   |        |        |                                           |        |           |                | data reception parameters may have to be changed to be able to receive future              |                     |          |
|                   |        |        |                                           |        |           |                | messages, including the acknowledge message resulting from the CFG-PRT                     |                     |          |
|                   |        |        | message.                                  |        |           |                |                                                                                            |                     |          |
|                   |        | Header |                                           | Class  | ID        | Length (Bytes) |                                                                                            | Payload             | Checksum |
| Message Structure |        |        | 0xB5 0x62 0x06 0x00 20                    |        |           |                |                                                                                            | see below CK_A CK_B |          |
| Payload Contents: |        |        |                                           |        |           |                |                                                                                            |                     |          |
| Byte Offset       | Number |        | Scaling                                   | Name   |           | Unit           | Description                                                                                |                     |          |
|                   | Format |        |                                           |        |           |                |                                                                                            |                     |          |
| 0                 | U1     |        | -                                         | portID |           | -              | Port identifier number (see the integration                                                |                     |          |
|                   |        |        |                                           |        |           |                | manual for valid UART port IDs)                                                            |                     |          |
| 1                 | U1     |        | -                                         |        | reserved1 | -              | Reserved                                                                                   |                     |          |



| Byte Offset | Number | Scaling | Name         | Unit   | Description                                |
|-------------|--------|---------|--------------|--------|--------------------------------------------|
|             | Format |         |              |        |                                            |
| 2           | X2     | -       | txReady      | -      | TX ready PIN configuration (see graphic    |
|             |        |         |              |        | below)                                     |
| 4           | X4     | -       | mode         | -      | A bit mask describing the UART mode        |
|             |        |         |              |        | (see graphic below)                        |
| 8           | U4     | -       | baudRate     | Bits/s | Baud rate in bits/second                   |
| 12          | X2     | -       | inProtoMask  | -      | A mask describing which input protocols    |
|             |        |         |              |        | are active.                                |
|             |        |         |              |        | Each bit of this mask is used for a        |
|             |        |         |              |        | protocol. Through that, multiple protocols |
|             |        |         |              |        | can be defined on a single port. (see      |
|             |        |         |              |        | graphic below)                             |
| 14          | X2     | -       | outProtoMask | -      | A mask describing which output protocols   |
|             |        |         |              |        | are active.                                |
|             |        |         |              |        | Each bit of this mask is used for a        |
|             |        |         |              |        | protocol. Through that, multiple protocols |
|             |        |         |              |        | can be defined on a single port. (see      |
|             |        |         |              |        | graphic below)                             |
| 16          | X2     | -       | flags        | -      | Flags bit mask (see graphic below)         |
| 18          | U1[2]  | -       | reserved2    | -      | Reserved                                   |

#### UBX-CFG-PRT continued

## <span id="page-258-0"></span>**Bitfield txReady**

This graphic explains the bits of txReady

| Name  |  |  | Description |                                       |  |  |  |                                                                                                       |
|-------|--|--|-------------|---------------------------------------|--|--|--|-------------------------------------------------------------------------------------------------------|
| en    |  |  |             | Enable TX ready feature for this port |  |  |  |                                                                                                       |
| pol   |  |  | Polarity    |                                       |  |  |  |                                                                                                       |
|       |  |  |             | 0 High-active                         |  |  |  |                                                                                                       |
|       |  |  |             | 1 Low-active                          |  |  |  |                                                                                                       |
| pin   |  |  |             |                                       |  |  |  | PIO to be used (must not be in use by another function)                                               |
| thres |  |  | Threshold   |                                       |  |  |  |                                                                                                       |
|       |  |  |             |                                       |  |  |  | The given threshold is multiplied by 8 bytes.                                                         |
|       |  |  |             |                                       |  |  |  | The TX ready PIN goes active after >= thres*8 bytes are pending for the port and going inactive after |
|       |  |  |             |                                       |  |  |  | the last pending bytes have been written to hardware (0-4 bytes before end of stream).                |
|       |  |  |             | 0x000 no threshold                    |  |  |  |                                                                                                       |
|       |  |  |             | 0x001 8byte                           |  |  |  |                                                                                                       |
|       |  |  |             | 0x002 16byte                          |  |  |  |                                                                                                       |
|       |  |  |             |                                       |  |  |  |                                                                                                       |
|       |  |  |             | 0x1FE 4080byte                        |  |  |  |                                                                                                       |
|       |  |  |             | 0x1FF 4088byte                        |  |  |  |                                                                                                       |



## **Bitfield mode**

<span id="page-259-0"></span>This graphic explains the bits of mode

| Name      | Description                          |
|-----------|--------------------------------------|
| charLen   | Character length                     |
|           | 00 5bit (not supported)              |
|           | 01 6bit (not supported)              |
|           | 10 7bit (supported only with parity) |
|           | 11 8bit                              |
| parity    | 000 Even parity                      |
|           | 001 Odd parity                       |
|           | 10X No parity                        |
|           | X1X Reserved                         |
| nStopBits | Number of Stop bits                  |
|           | 00 1 Stop bit                        |
|           | 01 1.5 Stop bit                      |
|           | 10 2 Stop bit                        |
|           | 11 0.5 Stop bit                      |

## <span id="page-259-1"></span>**Bitfield inProtoMask**

This graphic explains the bits of inProtoMask



| inUbx   | UBX protocol                                                     |
|---------|------------------------------------------------------------------|
| inNmea  | NMEA protocol                                                    |
| inRtcm  | RTCM2 protocol                                                   |
| inRtcm3 | RTCM3 protocol (not supported in protocol versions less than 20) |

## <span id="page-259-2"></span>**Bitfield outProtoMask**

This graphic explains the bits of outProtoMask



<span id="page-260-0"></span>

| Name     | Description                                                      |  |  |  |  |  |  |  |  |  |
|----------|------------------------------------------------------------------|--|--|--|--|--|--|--|--|--|
| outUbx   | UBX protocol                                                     |  |  |  |  |  |  |  |  |  |
| outNmea  | NMEA protocol                                                    |  |  |  |  |  |  |  |  |  |
| outRtcm3 | RTCM3 protocol (not supported in protocol versions less than 20) |  |  |  |  |  |  |  |  |  |

## <span id="page-260-1"></span>**Bitfield flags**

This graphic explains the bits of flags

| extendedTxTimeout |
|-------------------|
|                   |
|                   |
|                   |
|                   |
|                   |
|                   |

| ∐ unsıgned v |  |
|--------------|--|
| □reserued    |  |

| Name          | Description                                                                                              |
|---------------|----------------------------------------------------------------------------------------------------------|
| extendedTxTim | Extended TX timeout: if set, the port will time out if allocated TX memory >=4 kB and no activity for 1. |
| eout          | 5 s. If not set the port will time out if no activity for 1.5 s regardless on the amount of allocated TX |
|               | memory .                                                                                                 |

## **32.10.25.3 Port configuration for USB port**

| UBX-CFG-PRT<br>Message                         |                  |                                                                                            |                                                                                                                                                                                                                                                            |        |           |                           |   |                                                   |  |                     |  |
|------------------------------------------------|------------------|--------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------|-----------|---------------------------|---|---------------------------------------------------|--|---------------------|--|
| Port configuration for USB port<br>Description |                  |                                                                                            |                                                                                                                                                                                                                                                            |        |           |                           |   |                                                   |  |                     |  |
| Firmware                                       |                  |                                                                                            | Supported on:                                                                                                                                                                                                                                              |        |           |                           |   |                                                   |  |                     |  |
|                                                |                  | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                                                                                                                                                                                                                                                            |        |           |                           |   |                                                   |  |                     |  |
|                                                |                  |                                                                                            | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                                                                                                                                                                                  |        |           |                           |   |                                                   |  |                     |  |
| Type                                           |                  |                                                                                            | Get/set                                                                                                                                                                                                                                                    |        |           |                           |   |                                                   |  |                     |  |
| Comment                                        |                  |                                                                                            | Several configurations can be concatenated to one input message. In this case<br>the payload length can be a multiple of the normal length (see the other versions<br>of CFG-PRT). Output messages from the module contain only one configuration<br>unit. |        |           |                           |   |                                                   |  |                     |  |
|                                                |                  | Header                                                                                     |                                                                                                                                                                                                                                                            | Class  | ID        | Length (Bytes)<br>Payload |   |                                                   |  | Checksum            |  |
| Message Structure                              |                  | 0xB5 0x62 0x06 0x00 20                                                                     |                                                                                                                                                                                                                                                            |        |           |                           |   |                                                   |  | see below CK_A CK_B |  |
| Payload Contents:                              |                  |                                                                                            |                                                                                                                                                                                                                                                            |        |           |                           |   |                                                   |  |                     |  |
| Byte Offset                                    | Number<br>Format | Scaling<br>Name                                                                            |                                                                                                                                                                                                                                                            |        | Unit      | Description               |   |                                                   |  |                     |  |
| 0                                              | U1               |                                                                                            | -                                                                                                                                                                                                                                                          | portID |           |                           | - | Port identifier number (= 3 for USB port)         |  |                     |  |
| 1                                              | U1               |                                                                                            | -                                                                                                                                                                                                                                                          |        | reserved1 |                           | - | Reserved                                          |  |                     |  |
| 2<br>X2                                        |                  |                                                                                            | -                                                                                                                                                                                                                                                          |        | txReady   |                           | - | TX ready PIN configuration (see graphic<br>below) |  |                     |  |
| 4                                              | U1[8]            |                                                                                            | -                                                                                                                                                                                                                                                          |        | reserved2 |                           | - | Reserved                                          |  |                     |  |



UBX-CFG-PRT continued

| Byte Offset | Number<br>Format | Scaling | Name         | Unit | Description                                                                                                                                                                                             |
|-------------|------------------|---------|--------------|------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 12          | X2               | -       | inProtoMask  | -    | A mask describing which input protocols<br>are active.<br>Each bit of this mask is used for a<br>protocol. Through that, multiple protocols<br>can be defined on a single port. (see<br>graphic below)  |
| 14          | X2               | -       | outProtoMask | -    | A mask describing which output protocols<br>are active.<br>Each bit of this mask is used for a<br>protocol. Through that, multiple protocols<br>can be defined on a single port. (see<br>graphic below) |
| 16          | U1[2]            | -       | reserved3    | -    | Reserved                                                                                                                                                                                                |
| 18          | U1[2]            | -       | reserved4    | -    | Reserved                                                                                                                                                                                                |

## <span id="page-261-0"></span>**Bitfield txReady**

This graphic explains the bits of txReady

| Name  | Description                                                                                           |  |  |  |  |  |  |  |  |  |  |
|-------|-------------------------------------------------------------------------------------------------------|--|--|--|--|--|--|--|--|--|--|
| en    | Enable TX ready feature for this port                                                                 |  |  |  |  |  |  |  |  |  |  |
| pol   | Polarity                                                                                              |  |  |  |  |  |  |  |  |  |  |
|       | 0 High-active                                                                                         |  |  |  |  |  |  |  |  |  |  |
|       | 1 Low-active                                                                                          |  |  |  |  |  |  |  |  |  |  |
| pin   | PIO to be used (must not be in use by another function)                                               |  |  |  |  |  |  |  |  |  |  |
| thres | Threshold                                                                                             |  |  |  |  |  |  |  |  |  |  |
|       | The given threshold is multiplied by 8 bytes.                                                         |  |  |  |  |  |  |  |  |  |  |
|       | The TX ready PIN goes active after >= thres*8 bytes are pending for the port and going inactive after |  |  |  |  |  |  |  |  |  |  |
|       | the last pending bytes have been written to hardware (0-4 bytes before end of stream).                |  |  |  |  |  |  |  |  |  |  |
|       | 0x000 no threshold                                                                                    |  |  |  |  |  |  |  |  |  |  |
|       | 0x001 8byte                                                                                           |  |  |  |  |  |  |  |  |  |  |
|       | 0x002 16byte                                                                                          |  |  |  |  |  |  |  |  |  |  |
|       |                                                                                                       |  |  |  |  |  |  |  |  |  |  |
|       | 0x1FE 4080byte                                                                                        |  |  |  |  |  |  |  |  |  |  |
|       | 0x1FF 4088byte                                                                                        |  |  |  |  |  |  |  |  |  |  |

<span id="page-262-0"></span>

## **Bitfield inProtoMask**

<span id="page-262-1"></span>This graphic explains the bits of inProtoMask



| Name    | Description                                                      |
|---------|------------------------------------------------------------------|
| inUbx   | UBX protocol                                                     |
| inNmea  | NMEA protocol                                                    |
| inRtcm  | RTCM2 protocol                                                   |
| inRtcm3 | RTCM3 protocol (not supported in protocol versions less than 20) |

## <span id="page-262-2"></span>**Bitfield outProtoMask**

This graphic explains the bits of outProtoMask



| Name     | Description                                                      |
|----------|------------------------------------------------------------------|
| outUbx   | UBX protocol                                                     |
| outNmea  | NMEA protocol                                                    |
| outRtcm3 | RTCM3 protocol (not supported in protocol versions less than 20) |

## **32.10.25.4 Port configuration for SPI port**

| Message           |        | UBX-CFG-PRT                     |                                                                                            |         |           |                |                                         |                                                                               |         |                     |  |  |
|-------------------|--------|---------------------------------|--------------------------------------------------------------------------------------------|---------|-----------|----------------|-----------------------------------------|-------------------------------------------------------------------------------|---------|---------------------|--|--|
| Description       |        | Port configuration for SPI port |                                                                                            |         |           |                |                                         |                                                                               |         |                     |  |  |
| Firmware          |        |                                 | Supported on:                                                                              |         |           |                |                                         |                                                                               |         |                     |  |  |
|                   |        |                                 | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |           |                |                                         |                                                                               |         |                     |  |  |
|                   |        |                                 | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |         |           |                |                                         |                                                                               |         |                     |  |  |
| Type              |        |                                 | Get/set                                                                                    |         |           |                |                                         |                                                                               |         |                     |  |  |
| Comment           |        |                                 |                                                                                            |         |           |                |                                         | Several configurations can be concatenated to one input message. In this case |         |                     |  |  |
|                   |        |                                 | the payload length can be a multiple of the normal length. Output messages                 |         |           |                |                                         |                                                                               |         |                     |  |  |
|                   |        |                                 |                                                                                            |         |           |                |                                         | from the module contain only one configuration unit.                          |         |                     |  |  |
|                   |        | Header                          |                                                                                            | Class   | ID        | Length (Bytes) |                                         |                                                                               | Payload | Checksum            |  |  |
| Message Structure |        | 0xB5 0x62 0x06 0x00 20          |                                                                                            |         |           |                |                                         |                                                                               |         | see below CK_A CK_B |  |  |
| Payload Contents: |        |                                 |                                                                                            |         |           |                |                                         |                                                                               |         |                     |  |  |
| Byte Offset       | Number |                                 | Scaling                                                                                    | Name    |           |                | Unit                                    | Description                                                                   |         |                     |  |  |
| Format            |        |                                 |                                                                                            |         |           |                |                                         |                                                                               |         |                     |  |  |
| 0                 | U1     |                                 | -                                                                                          | portID  |           |                | -                                       | Port identifier number (= 4 for SPI port)                                     |         |                     |  |  |
| 1                 | U1     |                                 | -                                                                                          |         | reserved1 |                | -                                       | Reserved                                                                      |         |                     |  |  |
| 2                 | X2     |                                 | -                                                                                          | txReady |           | -              | TX ready PIN configuration (see graphic |                                                                               |         |                     |  |  |
|                   |        |                                 |                                                                                            |         |           |                | below)                                  |                                                                               |         |                     |  |  |



#### UBX-CFG-PRT continued

| Byte Offset | Number | Scaling | Name         | Unit | Description                                |
|-------------|--------|---------|--------------|------|--------------------------------------------|
|             | Format |         |              |      |                                            |
| 4           | X4     | -       | mode         | -    | SPI Mode Flags (see graphic below)         |
| 8           | U1[4]  | -       | reserved2    | -    | Reserved                                   |
| 12          | X2     | -       | inProtoMask  | -    | A mask describing which input protocols    |
|             |        |         |              |      | are active.                                |
|             |        |         |              |      | Each bit of this mask is used for a        |
|             |        |         |              |      | protocol. Through that, multiple protocols |
|             |        |         |              |      | can be defined on a single port.           |
|             |        |         |              |      | (The bitfield inRtcm3 is not supported in  |
|             |        |         |              |      | protocol versions less than 20) (see       |
|             |        |         |              |      | graphic below)                             |
| 14          | X2     | -       | outProtoMask | -    | A mask describing which output protocols   |
|             |        |         |              |      | are active.                                |
|             |        |         |              |      | Each bit of this mask is used for a        |
|             |        |         |              |      | protocol. Through that, multiple protocols |
|             |        |         |              |      | can be defined on a single port.           |
|             |        |         |              |      | (The bitfield outRtcm3 is not supported in |
|             |        |         |              |      | protocol versions less than 20) (see       |
|             |        |         |              |      | graphic below)                             |
| 16          | X2     | -       | flags        | -    | Flags bit mask (see graphic below)         |
| 18          | U1[2]  | -       | reserved3    | -    | Reserved                                   |

## <span id="page-263-0"></span>**Bitfield txReady**

This graphic explains the bits of txReady

| Name |       |  |  |                                       | Description |                    |  |  |  |  |  |  |  |                                                                                                       |
|------|-------|--|--|---------------------------------------|-------------|--------------------|--|--|--|--|--|--|--|-------------------------------------------------------------------------------------------------------|
| en   |       |  |  | Enable TX ready feature for this port |             |                    |  |  |  |  |  |  |  |                                                                                                       |
| pol  |       |  |  | Polarity                              |             |                    |  |  |  |  |  |  |  |                                                                                                       |
|      |       |  |  |                                       |             | 0 High-active      |  |  |  |  |  |  |  |                                                                                                       |
|      |       |  |  |                                       |             | 1 Low-active       |  |  |  |  |  |  |  |                                                                                                       |
| pin  |       |  |  |                                       |             |                    |  |  |  |  |  |  |  | PIO to be used (must not be in use by another function)                                               |
|      | thres |  |  |                                       | Threshold   |                    |  |  |  |  |  |  |  |                                                                                                       |
|      |       |  |  |                                       |             |                    |  |  |  |  |  |  |  | The given threshold is multiplied by 8 bytes.                                                         |
|      |       |  |  |                                       |             |                    |  |  |  |  |  |  |  | The TX ready PIN goes active after >= thres*8 bytes are pending for the port and going inactive after |
|      |       |  |  |                                       |             |                    |  |  |  |  |  |  |  | the last pending bytes have been written to hardware (0-4 bytes before end of stream).                |
|      |       |  |  |                                       |             | 0x000 no threshold |  |  |  |  |  |  |  |                                                                                                       |
|      |       |  |  |                                       |             | 0x001 8byte        |  |  |  |  |  |  |  |                                                                                                       |
|      |       |  |  |                                       |             | 0x002 16byte       |  |  |  |  |  |  |  |                                                                                                       |
|      |       |  |  |                                       |             |                    |  |  |  |  |  |  |  |                                                                                                       |
|      |       |  |  |                                       |             | 0x1FE 4080byte     |  |  |  |  |  |  |  |                                                                                                       |
|      |       |  |  |                                       |             | 0x1FF 4088byte     |  |  |  |  |  |  |  |                                                                                                       |



## **Bitfield mode**

<span id="page-264-0"></span>This graphic explains the bits of mode



| spiMode | 00 SPI Mode 0: CPOL = 0, CPHA = 0                                                              |
|---------|------------------------------------------------------------------------------------------------|
|         | 01 SPI Mode 1: CPOL = 0, CPHA = 1                                                              |
|         | 10 SPI Mode 2: CPOL = 1, CPHA = 0                                                              |
|         | 11 SPI Mode 3: CPOL = 1, CPHA = 1                                                              |
| ffCnt   | Number of bytes containing 0xFF to receive before switching off reception. Range: 0 (mechanism |
|         | off) - 63                                                                                      |

## <span id="page-264-1"></span>**Bitfield inProtoMask**

This graphic explains the bits of inProtoMask



## <span id="page-264-2"></span>**Bitfield outProtoMask**

This graphic explains the bits of outProtoMask



## <span id="page-264-3"></span>**Bitfield flags**



<span id="page-265-0"></span>

| Name          | Description                                                                                              |
|---------------|----------------------------------------------------------------------------------------------------------|
| extendedTxTim | Extended TX timeout: if set, the port will time out if allocated TX memory >=4 kB and no activity for 1. |
| eout          | 5 s.                                                                                                     |

## **32.10.25.5 Port configuration for I2C (DDC) port**

| Message           |                  | UBX-CFG-PRT |                                                                                                                                                                                                                                                   |              |                                                                                                                                                                                                                                                                                          |   |                                                   |                                                                                                                                                                                                                                                                                        |         |                     |  |
|-------------------|------------------|-------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---|---------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|---------------------|--|
| Description       |                  |             | Port configuration for I2C (DDC) port                                                                                                                                                                                                             |              |                                                                                                                                                                                                                                                                                          |   |                                                   |                                                                                                                                                                                                                                                                                        |         |                     |  |
| Firmware          |                  |             | Supported on:<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                                                                                                                                                        |              |                                                                                                                                                                                                                                                                                          |   |                                                   | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,                                                                                                                                                                                             |         |                     |  |
| Type              |                  |             | Get/set                                                                                                                                                                                                                                           |              |                                                                                                                                                                                                                                                                                          |   |                                                   |                                                                                                                                                                                                                                                                                        |         |                     |  |
| Comment           | unit.            |             | Several configurations can be concatenated to one input message. In this case<br>the payload length can be a multiple of the normal length (see the other versions<br>of CFG-PRT). Output messages from the module contain only one configuration |              |                                                                                                                                                                                                                                                                                          |   |                                                   |                                                                                                                                                                                                                                                                                        |         |                     |  |
|                   |                  |             | Header                                                                                                                                                                                                                                            | Class        | ID                                                                                                                                                                                                                                                                                       |   | Length (Bytes)                                    |                                                                                                                                                                                                                                                                                        | Payload | Checksum            |  |
| Message Structure |                  |             | 0xB5 0x62 0x06 0x00 20                                                                                                                                                                                                                            |              |                                                                                                                                                                                                                                                                                          |   |                                                   |                                                                                                                                                                                                                                                                                        |         | see below CK_A CK_B |  |
| Payload Contents: |                  |             |                                                                                                                                                                                                                                                   |              |                                                                                                                                                                                                                                                                                          |   |                                                   |                                                                                                                                                                                                                                                                                        |         |                     |  |
| Byte Offset       | Number<br>Format | Scaling     |                                                                                                                                                                                                                                                   | Name         |                                                                                                                                                                                                                                                                                          |   | Unit                                              | Description                                                                                                                                                                                                                                                                            |         |                     |  |
| 0                 | U1               |             | -                                                                                                                                                                                                                                                 | portID       |                                                                                                                                                                                                                                                                                          | - | port)                                             | Port identifier number (= 0 for I2C (DDC)                                                                                                                                                                                                                                              |         |                     |  |
| 1                 | U1               |             | -                                                                                                                                                                                                                                                 | reserved1    |                                                                                                                                                                                                                                                                                          | - | Reserved                                          |                                                                                                                                                                                                                                                                                        |         |                     |  |
| 2                 | X2               |             | -                                                                                                                                                                                                                                                 | txReady      |                                                                                                                                                                                                                                                                                          | - | TX ready PIN configuration (see graphic<br>below) |                                                                                                                                                                                                                                                                                        |         |                     |  |
| 4                 | X4               |             | -                                                                                                                                                                                                                                                 | mode         |                                                                                                                                                                                                                                                                                          |   | -                                                 | I2C (DDC) Mode Flags (see graphic below)                                                                                                                                                                                                                                               |         |                     |  |
| 8                 | U1[4]            |             | -                                                                                                                                                                                                                                                 |              | reserved2                                                                                                                                                                                                                                                                                |   | -                                                 | Reserved                                                                                                                                                                                                                                                                               |         |                     |  |
| 12<br>14          | X2<br>X2         | -<br>-      |                                                                                                                                                                                                                                                   | outProtoMask | inProtoMask                                                                                                                                                                                                                                                                              |   | -<br>-                                            | A mask describing which input protocols<br>are active.<br>Each bit of this mask is used for a<br>protocol. Through that, multiple protocols<br>can be defined on a single port.<br>(The bitfield inRtcm3 is not supported in<br>protocol versions less than 20) (see<br>graphic below) |         |                     |  |
|                   |                  |             |                                                                                                                                                                                                                                                   |              | A mask describing which output protocols<br>are active.<br>Each bit of this mask is used for a<br>protocol. Through that, multiple protocols<br>can be defined on a single port.<br>(The bitfield outRtcm3 is not supported in<br>protocol versions less than 20) (see<br>graphic below) |   |                                                   |                                                                                                                                                                                                                                                                                        |         |                     |  |
| 16                | X2               |             | -                                                                                                                                                                                                                                                 | flags        |                                                                                                                                                                                                                                                                                          |   | -                                                 | Flags bit mask (see graphic below)                                                                                                                                                                                                                                                     |         |                     |  |
| 18                | U1[2]            |             | -                                                                                                                                                                                                                                                 |              | reserved3                                                                                                                                                                                                                                                                                |   | -                                                 | Reserved                                                                                                                                                                                                                                                                               |         |                     |  |



## <span id="page-266-0"></span>**Bitfield txReady**

This graphic explains the bits of txReady

| Name  | Description                                                                                           |  |  |  |  |  |  |  |  |  |  |
|-------|-------------------------------------------------------------------------------------------------------|--|--|--|--|--|--|--|--|--|--|
| en    | Enable TX ready feature for this port                                                                 |  |  |  |  |  |  |  |  |  |  |
| pol   | Polarity                                                                                              |  |  |  |  |  |  |  |  |  |  |
|       | 0 High-active                                                                                         |  |  |  |  |  |  |  |  |  |  |
|       | 1 Low-active                                                                                          |  |  |  |  |  |  |  |  |  |  |
| pin   | PIO to be used (must not be in use by another function)                                               |  |  |  |  |  |  |  |  |  |  |
| thres | Threshold                                                                                             |  |  |  |  |  |  |  |  |  |  |
|       | The given threshold is multiplied by 8 bytes.                                                         |  |  |  |  |  |  |  |  |  |  |
|       | The TX ready PIN goes active after >= thres*8 bytes are pending for the port and going inactive after |  |  |  |  |  |  |  |  |  |  |
|       | the last pending bytes have been written to hardware (0-4 bytes before end of stream).                |  |  |  |  |  |  |  |  |  |  |
|       | 0x000 no threshold                                                                                    |  |  |  |  |  |  |  |  |  |  |
|       | 0x001 8byte                                                                                           |  |  |  |  |  |  |  |  |  |  |
|       | 0x002 16byte                                                                                          |  |  |  |  |  |  |  |  |  |  |
|       |                                                                                                       |  |  |  |  |  |  |  |  |  |  |
|       | 0x1FE 4080byte                                                                                        |  |  |  |  |  |  |  |  |  |  |
|       | 0x1FF 4088byte                                                                                        |  |  |  |  |  |  |  |  |  |  |

## <span id="page-266-1"></span>**Bitfield mode**

This graphic explains the bits of mode



| Name      | Description                                     |
|-----------|-------------------------------------------------|
| slaveAddr | Slave address                                   |
|           | Range: 0x07 < slaveAddr < 0x78. Bit 0 must be 0 |

## <span id="page-266-2"></span>**Bitfield inProtoMask**

This graphic explains the bits of inProtoMask



<span id="page-267-1"></span>

## <span id="page-267-2"></span>**Bitfield outProtoMask**

This graphic explains the bits of outProtoMask



## <span id="page-267-3"></span>**Bitfield flags**

This graphic explains the bits of flags



#### Name Description extendedTxTim eout Extended TX timeout: if set, the port will time out if allocated TX memory >=4 kB and no activity for 1. 5 s .

## <span id="page-267-0"></span>**32.10.26 UBX-CFG-PWR (0x06 0x57)**

## **32.10.26.1 Put receiver in a defined power state**

| Message           |        |                                                                              | UBX-CFG-PWR                                                                                |         |           |                |      |                                         |         |                     |  |
|-------------------|--------|------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------|---------|-----------|----------------|------|-----------------------------------------|---------|---------------------|--|
| Description       |        |                                                                              | Put receiver in a defined power state                                                      |         |           |                |      |                                         |         |                     |  |
| Firmware          |        |                                                                              | Supported on:                                                                              |         |           |                |      |                                         |         |                     |  |
|                   |        |                                                                              | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |           |                |      |                                         |         |                     |  |
|                   |        |                                                                              | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |         |           |                |      |                                         |         |                     |  |
| Type              |        |                                                                              | Set                                                                                        |         |           |                |      |                                         |         |                     |  |
| Comment           |        | This message is deprecated in protocol versions greater than 17. Use UBX-CFG |                                                                                            |         |           |                |      |                                         |         |                     |  |
|                   |        | RST for GNSS start/stop and UBX-RXM-PMREQ for software backup.               |                                                                                            |         |           |                |      |                                         |         |                     |  |
|                   |        | -                                                                            |                                                                                            |         |           |                |      |                                         |         |                     |  |
|                   |        | Header                                                                       |                                                                                            | Class   | ID        | Length (Bytes) |      |                                         | Payload | Checksum            |  |
| Message Structure |        |                                                                              | 0xB5 0x62 0x06 0x57 8                                                                      |         |           |                |      |                                         |         | see below CK_A CK_B |  |
| Payload Contents: |        |                                                                              |                                                                                            |         |           |                |      |                                         |         |                     |  |
| Byte Offset       | Number |                                                                              | Scaling                                                                                    | Name    |           |                | Unit | Description                             |         |                     |  |
|                   | Format |                                                                              |                                                                                            |         |           |                |      |                                         |         |                     |  |
| 0                 | U1     |                                                                              | -                                                                                          | version |           |                | -    | Message version (0x01 for this version) |         |                     |  |
| 1                 | U1[3]  |                                                                              | -                                                                                          |         | reserved1 |                | -    | Reserved                                |         |                     |  |

<span id="page-268-1"></span>

UBX-CFG-PWR continued

| Byte Offset | Number | Scaling | Name  | Unit | Description                              |
|-------------|--------|---------|-------|------|------------------------------------------|
|             | Format |         |       |      |                                          |
| 4           | U4     | -       | state | -    | Enter system state                       |
|             |        |         |       |      | 0x52554E20: GNSS running                 |
|             |        |         |       |      | 0x53544F50: GNSS stopped                 |
|             |        |         |       |      | 0x42434B50: Software backup. USB         |
|             |        |         |       |      | interface will be disabled, other wakeup |
|             |        |         |       |      | source is needed.                        |

## <span id="page-268-0"></span>**32.10.27 UBX-CFG-RATE (0x06 0x08)**

#### **32.10.27.1 Navigation/measurement rate settings**

| Message           |                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | UBX-CFG-RATE                                               |       |    |  |                |                                                                                            |         |                     |
|-------------------|-----------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|-------|----|--|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|
| Description       |                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Navigation/measurement rate settings                       |       |    |  |                |                                                                                            |         |                     |
| Firmware          |                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Supported on:<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |       |    |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |
| Type              |                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Get/set                                                    |       |    |  |                |                                                                                            |         |                     |
| Comment           |                             | This message allows the user to alter the rate at which navigation solutions (and<br>the measurements that they depend on) are generated by the receiver. The<br>calculation of the navigation solution will always be aligned to the top of a<br>second zero (first second of the week) of the configured reference time system.<br>(Navigation period is an integer multiple of the measurement period in protocol<br>versions greater than 17).<br>• Each measurement triggers the measurements generation and, if available,<br>raw data output.<br>• The navRate value defines that every nth measurement triggers a navigation<br>epoch.<br>• The update rate has a direct influence on the power consumption. The more<br>fixes that are required, the more CPU power and communication resources are<br>required.<br>• For most applications a 1 Hz update rate would be sufficient.<br>• When using power save mode, measurement and navigation rate can differ<br>from the values configured here. |                                                            |       |    |  |                |                                                                                            |         |                     |
|                   |                             | Header                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                            | Class | ID |  | Length (Bytes) | • See Measurement and navigation rate with power save mode for details.                    | Payload | Checksum            |
| Message Structure |                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 0xB5 0x62 0x06 0x08 6                                      |       |    |  |                |                                                                                            |         | see below CK_A CK_B |
| Payload Contents: |                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                            |       |    |  |                |                                                                                            |         |                     |
| Byte Offset       | Number<br>Scaling<br>Format |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                            | Name  |    |  | Unit           | Description                                                                                |         |                     |

<span id="page-269-1"></span>

#### UBX-CFG-RATE continued

| Byte Offset | Number | Scaling | Name     | Unit   | Description                                    |
|-------------|--------|---------|----------|--------|------------------------------------------------|
|             | Format |         |          |        |                                                |
| 0           | U2     | -       | measRate | ms     | The elapsed time between GNSS                  |
|             |        |         |          |        | measurements, which defines the rate, e.       |
|             |        |         |          |        | g. 100 ms => 10 Hz, 1000 ms => 1 Hz,           |
|             |        |         |          |        | 10000 ms => 0.1 Hz. Measurement rate           |
|             |        |         |          |        | should be greater than or equal to 25 ms.      |
|             |        |         |          |        | (Measurement rate should be greater            |
|             |        |         |          |        | than or equal to 50 ms in protocol versions    |
|             |        |         |          |        | less than 24).                                 |
| 2           | U2     | -       | navRate  | cycles | The ratio between the number of                |
|             |        |         |          |        | measurements and the number of                 |
|             |        |         |          |        | navigation solutions, e.g. 5 means five        |
|             |        |         |          |        | measurements for every navigation              |
|             |        |         |          |        | solution. Maximum value is 127. (This          |
|             |        |         |          |        | parameter is ignored and the navRate is        |
|             |        |         |          |        | fixed to 1 in protocol versions less than 18). |
| 4           | U2     | -       | timeRef  | -      | The time system to which measurements          |
|             |        |         |          |        | are aligned:                                   |
|             |        |         |          |        | 0: UTC time                                    |
|             |        |         |          |        | 1: GPS time                                    |
|             |        |         |          |        | 2: GLONASS time (not supported in              |
|             |        |         |          |        | protocol versions less than 18)                |
|             |        |         |          |        | 3: BeiDou time (not supported in protocol      |
|             |        |         |          |        | versions less than 18)                         |
|             |        |         |          |        | 4: Galileo time (not supported in protocol     |
|             |        |         |          |        | versions less than 18)                         |
|             |        |         |          |        | 5: NavIC time (not supported in protocol       |
|             |        |         |          |        | versions less than 29)                         |

## <span id="page-269-0"></span>**32.10.28 UBX-CFG-RINV (0x06 0x34)**

## **32.10.28.1 Contents of remote inventory**

| Message           |        |                                                          | UBX-CFG-RINV                                                                               |       |      |                |   |                           |         |                     |  |
|-------------------|--------|----------------------------------------------------------|--------------------------------------------------------------------------------------------|-------|------|----------------|---|---------------------------|---------|---------------------|--|
| Description       |        |                                                          | Contents of remote inventory                                                               |       |      |                |   |                           |         |                     |  |
| Firmware          |        |                                                          | Supported on:                                                                              |       |      |                |   |                           |         |                     |  |
|                   |        |                                                          | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |       |      |                |   |                           |         |                     |  |
|                   |        |                                                          | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |       |      |                |   |                           |         |                     |  |
| Type              |        |                                                          | Get/set                                                                                    |       |      |                |   |                           |         |                     |  |
| Comment           |        | If N is greater than 30, the excess bytes are discarded. |                                                                                            |       |      |                |   |                           |         |                     |  |
|                   |        | Header                                                   |                                                                                            | Class | ID   | Length (Bytes) |   |                           | Payload | Checksum            |  |
| Message Structure |        |                                                          | 0xB5 0x62 0x06 0x34 1 + 1*N                                                                |       |      |                |   |                           |         | see below CK_A CK_B |  |
| Payload Contents: |        |                                                          |                                                                                            |       |      |                |   |                           |         |                     |  |
| Byte Offset       | Number | Scaling<br>Name                                          |                                                                                            |       | Unit | Description    |   |                           |         |                     |  |
|                   | Format |                                                          |                                                                                            |       |      |                |   |                           |         |                     |  |
| 0                 | X1     |                                                          | -                                                                                          | flags |      |                | - | Flags (see graphic below) |         |                     |  |

<span id="page-270-1"></span>

#### UBX-CFG-RINV continued

| Byte Offset                       | Number | Scaling | Name | Unit | Description                               |  |  |  |  |
|-----------------------------------|--------|---------|------|------|-------------------------------------------|--|--|--|--|
|                                   | Format |         |      |      |                                           |  |  |  |  |
| Start of repeated block (N times) |        |         |      |      |                                           |  |  |  |  |
| 1 + 1*N                           | U1     | -       | data | -    | Data to store/stored in remote inventory. |  |  |  |  |
| End of repeated block             |        |         |      |      |                                           |  |  |  |  |

## <span id="page-270-2"></span>**Bitfield flags**

This graphic explains the bits of flags



| Name   | Description                                                |
|--------|------------------------------------------------------------|
| dump   | Dump data at startup. Does not work if flag binary is set. |
| binary | Data is binary.                                            |

#### <span id="page-270-0"></span>**32.10.29 UBX-CFG-RST (0x06 0x04)**

#### **32.10.29.1 Reset receiver / Clear backup data structures**

| Message           |                                                                              |                                                              | UBX-CFG-RST                                                    |       |    |  |                |                                                                                            |         |                     |
|-------------------|------------------------------------------------------------------------------|--------------------------------------------------------------|----------------------------------------------------------------|-------|----|--|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|
| Description       |                                                                              |                                                              |                                                                |       |    |  |                | Reset receiver / Clear backup data structures                                              |         |                     |
| Firmware          |                                                                              |                                                              | Supported on:                                                  |       |    |  |                |                                                                                            |         |                     |
|                   |                                                                              |                                                              | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                      |       |    |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |
| Type              |                                                                              |                                                              | Command                                                        |       |    |  |                |                                                                                            |         |                     |
| Comment           |                                                                              |                                                              | Do not expect this message to be acknowledged by the receiver. |       |    |  |                |                                                                                            |         |                     |
|                   |                                                                              | • Newer FW version will not acknowledge this message at all. |                                                                |       |    |  |                |                                                                                            |         |                     |
|                   | • Older FW version will acknowledge this message but the acknowledge may not |                                                              |                                                                |       |    |  |                |                                                                                            |         |                     |
|                   | be sent completely before the receiver is reset.                             |                                                              |                                                                |       |    |  |                |                                                                                            |         |                     |
|                   |                                                                              |                                                              | Notes:                                                         |       |    |  |                |                                                                                            |         |                     |
|                   |                                                                              |                                                              |                                                                |       |    |  |                | • If Galileo is enabled, UBX-CFG-RST Controlled GNSS start must be followed by             |         |                     |
|                   |                                                                              |                                                              |                                                                |       |    |  |                | UBX-CFG-CFG to save current configuration to BBR and then by UBX-CFG-RST                   |         |                     |
|                   |                                                                              |                                                              | with resetMode set to Hardware reset.                          |       |    |  |                |                                                                                            |         |                     |
|                   |                                                                              |                                                              |                                                                |       |    |  |                | • If Galileo is enabled, use resetMode Hardware reset instead of Controlled                |         |                     |
|                   |                                                                              |                                                              |                                                                |       |    |  |                | software reset or Controlled software reset (GNSS only).                                   |         |                     |
|                   |                                                                              | Header                                                       |                                                                | Class | ID |  | Length (Bytes) |                                                                                            | Payload | Checksum            |
| Message Structure |                                                                              |                                                              | 0xB5 0x62 0x06 0x04 4                                          |       |    |  |                |                                                                                            |         | see below CK_A CK_B |
| Payload Contents: |                                                                              |                                                              |                                                                |       |    |  |                |                                                                                            |         |                     |
| Byte Offset       | Number                                                                       |                                                              | Scaling                                                        | Name  |    |  | Unit           | Description                                                                                |         |                     |
|                   | Format                                                                       |                                                              |                                                                |       |    |  |                |                                                                                            |         |                     |



UBX-CFG-RST continued

| Byte Offset | Number | Scaling | Name       | Unit | Description                            |
|-------------|--------|---------|------------|------|----------------------------------------|
|             | Format |         |            |      |                                        |
| 0           | X2     | -       | navBbrMask | -    | BBR sections to clear. The following   |
|             |        |         |            |      | special sets apply:                    |
|             |        |         |            |      | 0x0000 Hot start                       |
|             |        |         |            |      | 0x0001 Warm start                      |
|             |        |         |            |      | 0xFFFF Cold start (see graphic below)  |
| 2           | U1     | -       | resetMode  | -    | Reset Type                             |
|             |        |         |            |      | 0x00 = Hardware reset (watchdog)       |
|             |        |         |            |      | immediately                            |
|             |        |         |            |      | 0x01 = Controlled software reset       |
|             |        |         |            |      | 0x02 = Controlled software reset (GNSS |
|             |        |         |            |      | only)                                  |
|             |        |         |            |      | 0x04 = Hardware reset (watchdog) after |
|             |        |         |            |      | shutdown                               |
|             |        |         |            |      | 0x08 = Controlled GNSS stop            |
|             |        |         |            |      | 0x09 = Controlled GNSS start           |
| 3           | U1     | -       | reserved1  | -    | Reserved                               |

## <span id="page-271-0"></span>**Bitfield navBbrMask**

This graphic explains the bits of navBbrMask

| Name   | Description                                                                           |
|--------|---------------------------------------------------------------------------------------|
| eph    | Ephemeris                                                                             |
| alm    | Almanac                                                                               |
| health | Health                                                                                |
| klob   | Klobuchar parameters                                                                  |
| pos    | Position                                                                              |
| clkd   | Clock drift                                                                           |
| osc    | Oscillator parameter                                                                  |
| utc    | UTC correction + GPS leap seconds parameters                                          |
| rtc    | RTC                                                                                   |
| sfdr   | SFDR Parameters (only available on the ADR/UDR/HPS product variant) and weak signal   |
|        | compensation estimates                                                                |
| vmon   | SFDR Vehicle Monitoring Parameter (only available on the ADR/UDR/HPS product variant) |
| tct    | TCT Parameters (only available on the ADR/UDR/HPS product variant)                    |
| aop    | Autonomous orbit parameters                                                           |

<span id="page-272-1"></span>

the receiver to Continuous mode.

## <span id="page-272-0"></span>**32.10.30 UBX-CFG-RXM (0x06 0x11)**

## **32.10.30.1 RXM configuration**

| Message                                            |                                                                              |                                                                            | UBX-CFG-RXM         |        |           |   |          |                                                               |  |                     |  |  |
|----------------------------------------------------|------------------------------------------------------------------------------|----------------------------------------------------------------------------|---------------------|--------|-----------|---|----------|---------------------------------------------------------------|--|---------------------|--|--|
| Description                                        |                                                                              |                                                                            | RXM configuration   |        |           |   |          |                                                               |  |                     |  |  |
| Firmware                                           |                                                                              |                                                                            | Supported on:       |        |           |   |          |                                                               |  |                     |  |  |
|                                                    |                                                                              |                                                                            |                     |        |           |   |          | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16 and 17 |  |                     |  |  |
| Type                                               |                                                                              |                                                                            | Get/set             |        |           |   |          |                                                               |  |                     |  |  |
| Comment                                            |                                                                              | For a detailed description see section Power management in the integration |                     |        |           |   |          |                                                               |  |                     |  |  |
|                                                    |                                                                              |                                                                            | manual              |        |           |   |          |                                                               |  |                     |  |  |
|                                                    | Note that Power save mode cannot be selected when the receiver is configured |                                                                            |                     |        |           |   |          |                                                               |  |                     |  |  |
|                                                    |                                                                              | to process GLONASS signals (using UBX-CFG-GNSS).                           |                     |        |           |   |          |                                                               |  |                     |  |  |
| Header<br>Class<br>ID<br>Length (Bytes)<br>Payload |                                                                              |                                                                            |                     |        |           |   | Checksum |                                                               |  |                     |  |  |
| Message Structure                                  |                                                                              |                                                                            | 0xB5 0x62 0x06 0x11 |        |           | 2 |          |                                                               |  | see below CK_A CK_B |  |  |
| Payload Contents:                                  |                                                                              |                                                                            |                     |        |           |   |          |                                                               |  |                     |  |  |
| Byte Offset                                        | Number                                                                       |                                                                            | Scaling             | Name   |           |   | Unit     | Description                                                   |  |                     |  |  |
|                                                    | Format                                                                       |                                                                            |                     |        |           |   |          |                                                               |  |                     |  |  |
| 0                                                  | U1                                                                           |                                                                            | -                   |        | reserved1 |   | -        | Reserved                                                      |  |                     |  |  |
| 1                                                  | U1                                                                           |                                                                            | -                   | lpMode |           |   | -        | Low power mode                                                |  |                     |  |  |
|                                                    |                                                                              |                                                                            |                     |        |           |   |          | 0: Continuous mode                                            |  |                     |  |  |
|                                                    |                                                                              |                                                                            |                     |        |           |   |          | 1: Power save mode                                            |  |                     |  |  |
|                                                    |                                                                              |                                                                            |                     |        |           |   |          | 4: Continuous mode                                            |  |                     |  |  |
|                                                    |                                                                              |                                                                            |                     |        |           |   |          | Note that for receivers with protocol                         |  |                     |  |  |
|                                                    |                                                                              |                                                                            |                     |        |           |   |          | versions larger or equal to 14, both Low                      |  |                     |  |  |
|                                                    |                                                                              |                                                                            |                     |        |           |   |          | power mode settings 0 and 4 configure                         |  |                     |  |  |

### **32.10.30.2 RXM configuration**

| Message                                                                                 |        |                            | UBX-CFG-RXM                                              |        |           |   |      |                    |                     |          |  |  |
|-----------------------------------------------------------------------------------------|--------|----------------------------|----------------------------------------------------------|--------|-----------|---|------|--------------------|---------------------|----------|--|--|
| Description                                                                             |        |                            | RXM configuration                                        |        |           |   |      |                    |                     |          |  |  |
| Firmware                                                                                |        |                            | Supported on:                                            |        |           |   |      |                    |                     |          |  |  |
| • u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20. |        |                            |                                                          |        |           |   |      |                    |                     |          |  |  |
|                                                                                         |        | 3, 22, 22.01, 23 and 23.01 |                                                          |        |           |   |      |                    |                     |          |  |  |
| Type                                                                                    |        |                            | Get/set                                                  |        |           |   |      |                    |                     |          |  |  |
| Comment                                                                                 |        |                            | For a detailed description see section Power Management. |        |           |   |      |                    |                     |          |  |  |
| Header<br>Class<br>ID<br>Length (Bytes)<br>Payload                                      |        |                            |                                                          |        |           |   |      |                    |                     | Checksum |  |  |
| Message Structure                                                                       |        |                            | 0xB5 0x62 0x06 0x11                                      |        |           | 2 |      |                    | see below CK_A CK_B |          |  |  |
| Payload Contents:                                                                       |        |                            |                                                          |        |           |   |      |                    |                     |          |  |  |
| Byte Offset                                                                             | Number |                            | Scaling                                                  | Name   |           |   | Unit | Description        |                     |          |  |  |
|                                                                                         | Format |                            |                                                          |        |           |   |      |                    |                     |          |  |  |
| 0                                                                                       | U1     |                            | -                                                        |        | reserved1 |   | -    | Reserved           |                     |          |  |  |
| 1                                                                                       | U1     |                            | -                                                        | lpMode |           |   | -    | Low power mode     |                     |          |  |  |
|                                                                                         |        |                            |                                                          |        |           |   |      | 0: Continuous mode |                     |          |  |  |
|                                                                                         |        |                            |                                                          |        |           |   |      | 1: Power save mode |                     |          |  |  |
|                                                                                         |        |                            |                                                          |        |           |   |      | 4: Continuous mode |                     |          |  |  |

<span id="page-273-1"></span>

## <span id="page-273-0"></span>**32.10.31 UBX-CFG-SBAS (0x06 0x16)**

#### **32.10.31.1 SBAS configuration**

| Message           |                                          |  | UBX-CFG-SBAS                                                                  |         |           |   |                     |                                                                                            |         |          |  |  |  |  |
|-------------------|------------------------------------------|--|-------------------------------------------------------------------------------|---------|-----------|---|---------------------|--------------------------------------------------------------------------------------------|---------|----------|--|--|--|--|
| Description       |                                          |  | SBAS configuration                                                            |         |           |   |                     |                                                                                            |         |          |  |  |  |  |
| Firmware          |                                          |  | Supported on:                                                                 |         |           |   |                     |                                                                                            |         |          |  |  |  |  |
|                   |                                          |  |                                                                               |         |           |   |                     | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |          |  |  |  |  |
|                   |                                          |  | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                     |         |           |   |                     |                                                                                            |         |          |  |  |  |  |
| Get/set<br>Type   |                                          |  |                                                                               |         |           |   |                     |                                                                                            |         |          |  |  |  |  |
| Comment           |                                          |  |                                                                               |         |           |   |                     | This message configures the SBAS receiver subsystem (i.e. WAAS, EGNOS,                     |         |          |  |  |  |  |
|                   |                                          |  | MSAS).                                                                        |         |           |   |                     |                                                                                            |         |          |  |  |  |  |
|                   |                                          |  | See SBAS configuration settings description for a detailed description of how |         |           |   |                     |                                                                                            |         |          |  |  |  |  |
|                   |                                          |  | these settings affect receiver operation.                                     |         |           |   |                     |                                                                                            |         |          |  |  |  |  |
|                   |                                          |  | Header                                                                        | Class   | ID        |   | Length (Bytes)      |                                                                                            | Payload | Checksum |  |  |  |  |
|                   | 0xB5 0x62 0x06 0x16<br>Message Structure |  |                                                                               |         |           | 8 | see below CK_A CK_B |                                                                                            |         |          |  |  |  |  |
| Payload Contents: |                                          |  |                                                                               |         |           |   |                     |                                                                                            |         |          |  |  |  |  |
| Byte Offset       | Number                                   |  | Scaling                                                                       |         | Name      |   |                     | Description                                                                                |         |          |  |  |  |  |
|                   | Format                                   |  |                                                                               |         |           |   |                     |                                                                                            |         |          |  |  |  |  |
| 0                 | X1                                       |  | -                                                                             | mode    |           |   | -                   | SBAS mode (see graphic below)                                                              |         |          |  |  |  |  |
| 1                 | X1                                       |  | -                                                                             | usage   |           |   | -                   | SBAS usage (see graphic below)                                                             |         |          |  |  |  |  |
| 2                 | U1                                       |  | -                                                                             | maxSBAS |           |   | -                   | Maximum number of SBAS prioritized                                                         |         |          |  |  |  |  |
|                   |                                          |  |                                                                               |         |           |   |                     | tracking channels (valid range: 0 - 3) to                                                  |         |          |  |  |  |  |
|                   |                                          |  |                                                                               |         |           |   |                     | use (obsolete and superseded by UBX                                                        |         |          |  |  |  |  |
|                   |                                          |  |                                                                               |         |           |   |                     | CFG-GNSS in protocol versions 14+).                                                        |         |          |  |  |  |  |
| 3                 | X1                                       |  | -                                                                             |         | scanmode2 |   | -                   | Continuation of scanmode bitmask below                                                     |         |          |  |  |  |  |
|                   |                                          |  |                                                                               |         |           |   |                     | (see graphic below)                                                                        |         |          |  |  |  |  |
| 4                 | X4                                       |  | -                                                                             |         | scanmode1 |   | -                   | Which SBAS PRN numbers to search for                                                       |         |          |  |  |  |  |
|                   |                                          |  |                                                                               |         |           |   |                     | (bitmask).                                                                                 |         |          |  |  |  |  |
|                   |                                          |  |                                                                               |         |           |   |                     | If all bits are set to zero, auto-scan (i.e. all                                           |         |          |  |  |  |  |
|                   |                                          |  |                                                                               |         |           |   |                     | valid PRNs) are searched.                                                                  |         |          |  |  |  |  |
|                   |                                          |  |                                                                               |         |           |   |                     | Every bit corresponds to a PRN number.                                                     |         |          |  |  |  |  |
|                   |                                          |  |                                                                               |         |           |   |                     | (see graphic below)                                                                        |         |          |  |  |  |  |

## <span id="page-273-2"></span>**Bitfield mode**

This graphic explains the bits of mode





| Name    | Description                                                                                         |
|---------|-----------------------------------------------------------------------------------------------------|
| enabled | SBAS enabled (1) / disabled (0) - This field is deprecated; use UBX-CFG-GNSS to enable/disable SBAS |
|         | operation                                                                                           |
| test    | SBAS testbed: Use data anyhow (1) / Ignore data when in test mode (SBAS msg 0)                      |

## <span id="page-274-0"></span>**Bitfield usage**

This graphic explains the bits of usage



| Name      | Description                                                                                     |
|-----------|-------------------------------------------------------------------------------------------------|
| range     | Use SBAS GEOs as a ranging source (for navigation)                                              |
| diffCorr  | Use SBAS differential corrections                                                               |
| integrity | Use SBAS integrity information. If enabled, the receiver will only use GPS satellites for which |
|           | integrity information is available.                                                             |

## <span id="page-274-1"></span>**Bitfield scanmode2**

This graphic explains the bits of scanmode2



## <span id="page-274-2"></span>**Bitfield scanmode1**

This graphic explains the bits of scanmode1

| 31     | 30   29   28   27   26   25   1 |           |            |           |           |           |       |        | 24   23   22   21   20   19   18   17   16   15   14   13   12   11   10   9 |                                |  |        |               |  |                                      |                  |               |  | l8                         |        | 16. | 15               | 4      | 13. | l2               |                  |
|--------|---------------------------------|-----------|------------|-----------|-----------|-----------|-------|--------|------------------------------------------------------------------------------|--------------------------------|--|--------|---------------|--|--------------------------------------|------------------|---------------|--|----------------------------|--------|-----|------------------|--------|-----|------------------|------------------|
| PRN151 | PRN150                          | 앟<br>PRN1 | ङ्<br>PRN1 | ₩<br>PRN1 | ङ<br>PRN1 | 豎<br>PRN1 | PRN14 | PRN143 | <b>PRN142</b>                                                                | .<br>PRM 40<br>PRM 39<br>PRM 2 |  | PRN138 | <b>PRN137</b> |  | PRM136<br>PRM135<br>PRM134<br>PRM133 | ב<br>PRM 32<br>P | <b>PRN131</b> |  | PRM130<br>PRM128<br>PRM128 | PRN127 |     | PRN126<br>PRN125 | PRN124 |     | PRN123<br>PRN122 | PRN121<br>PRN120 |
|        | □ signed value                  |           |            |           |           |           |       |        |                                                                              |                                |  |        |               |  |                                      |                  |               |  |                            |        |     |                  |        |     |                  |                  |

<span id="page-275-1"></span>

## <span id="page-275-0"></span>**32.10.32 UBX-CFG-SENIF (0x06 0x88)**

#### **32.10.32.1 I2C sensor interface configuration**

| Message                                                                               |        |                                                                | UBX-CFG-SENIF                                           |         |  |   |                                            |                                          |                     |  |  |
|---------------------------------------------------------------------------------------|--------|----------------------------------------------------------------|---------------------------------------------------------|---------|--|---|--------------------------------------------|------------------------------------------|---------------------|--|--|
| Description                                                                           |        |                                                                | I2C sensor interface configuration                      |         |  |   |                                            |                                          |                     |  |  |
| Firmware                                                                              |        |                                                                | Supported on:                                           |         |  |   |                                            |                                          |                     |  |  |
| • u-blox 8 / u-blox M8 protocol versions 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.3, |        |                                                                |                                                         |         |  |   |                                            |                                          |                     |  |  |
|                                                                                       |        |                                                                | 22, 22.01, 23 and 23.01 (only with ADR or UDR products) |         |  |   |                                            |                                          |                     |  |  |
| Type                                                                                  |        |                                                                | Get/set                                                 |         |  |   |                                            |                                          |                     |  |  |
| Comment                                                                               |        | -                                                              |                                                         |         |  |   |                                            |                                          |                     |  |  |
|                                                                                       |        | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum |                                                         |         |  |   |                                            |                                          |                     |  |  |
| 0xB5 0x62 0x06 0x88 6<br>Message Structure                                            |        |                                                                |                                                         |         |  |   |                                            |                                          | see below CK_A CK_B |  |  |
| Payload Contents:                                                                     |        |                                                                |                                                         |         |  |   |                                            |                                          |                     |  |  |
| Byte Offset                                                                           | Number |                                                                | Scaling                                                 | Name    |  |   | Unit                                       | Description                              |                     |  |  |
|                                                                                       | Format |                                                                |                                                         |         |  |   |                                            |                                          |                     |  |  |
| 0                                                                                     | U1     |                                                                | -                                                       | type    |  |   | -                                          | Type of interface, 0 for I2C             |                     |  |  |
| 1                                                                                     | U1     |                                                                | -                                                       | version |  |   | -                                          | Message version, 0 for this message      |                     |  |  |
| 2                                                                                     | X2     | -                                                              |                                                         | flags   |  |   | -                                          | feature configuration flags (see graphic |                     |  |  |
|                                                                                       |        |                                                                |                                                         |         |  |   |                                            | below)                                   |                     |  |  |
| 4                                                                                     | X2     |                                                                | -                                                       | pioConf |  | - | PIO configuration flags (see graphic below |                                          |                     |  |  |
|                                                                                       |        |                                                                |                                                         |         |  |   |                                            | )                                        |                     |  |  |

## <span id="page-275-2"></span>**Bitfield flags**

This graphic explains the bits of flags



| Name    | Description                          |
|---------|--------------------------------------|
| senConn | Sensor is connected to I2C interface |

## <span id="page-275-3"></span>**Bitfield pioConf**

This graphic explains the bits of pioConf



<span id="page-276-1"></span>

| Name      | Description             |
|-----------|-------------------------|
| i2cSdaPio | PIO of the I2C SDA line |
|           | Supported options:      |
| i2cSclPio | PIO of the I2C SCL line |
|           | Supported options:      |

## <span id="page-276-0"></span>**32.10.33 UBX-CFG-SLAS (0x06 0x8D)**

#### **32.10.33.1 SLAS configuration**

| Message                                                                 |                                                                     |                                                                                  | UBX-CFG-SLAS             |           |    |   |                               |             |         |                     |  |  |  |  |
|-------------------------------------------------------------------------|---------------------------------------------------------------------|----------------------------------------------------------------------------------|--------------------------|-----------|----|---|-------------------------------|-------------|---------|---------------------|--|--|--|--|
| Description                                                             |                                                                     |                                                                                  | SLAS configuration       |           |    |   |                               |             |         |                     |  |  |  |  |
| Firmware                                                                |                                                                     |                                                                                  | Supported on:            |           |    |   |                               |             |         |                     |  |  |  |  |
|                                                                         |                                                                     | • u-blox 8 / u-blox M8 with protocol version 19.2 (only with ADR or UDR products |                          |           |    |   |                               |             |         |                     |  |  |  |  |
|                                                                         |                                                                     | )                                                                                |                          |           |    |   |                               |             |         |                     |  |  |  |  |
| Type                                                                    |                                                                     |                                                                                  | Get/set                  |           |    |   |                               |             |         |                     |  |  |  |  |
| Comment                                                                 | This message configures the QZSS SLAS (Sub-meter Level Augmentation |                                                                                  |                          |           |    |   |                               |             |         |                     |  |  |  |  |
| System). See the SLAS Configuration Settings Description for a detailed |                                                                     |                                                                                  |                          |           |    |   |                               |             |         |                     |  |  |  |  |
|                                                                         |                                                                     | description of how these settings affect receiver operation.                     |                          |           |    |   |                               |             |         |                     |  |  |  |  |
|                                                                         |                                                                     | To apply SLAS corrections, QZSS operation and L1S signal tracking must be        |                          |           |    |   |                               |             |         |                     |  |  |  |  |
|                                                                         |                                                                     |                                                                                  | enabled see UBX-CFG-GNSS |           |    |   |                               |             |         |                     |  |  |  |  |
|                                                                         |                                                                     |                                                                                  | Header                   | Class     | ID |   | Length (Bytes)                |             | Payload | Checksum            |  |  |  |  |
| Message Structure                                                       |                                                                     |                                                                                  | 0xB5 0x62 0x06 0x8D 4    |           |    |   |                               |             |         | see below CK_A CK_B |  |  |  |  |
| Payload Contents:                                                       |                                                                     |                                                                                  |                          |           |    |   |                               |             |         |                     |  |  |  |  |
| Byte Offset<br>Number                                                   |                                                                     |                                                                                  | Scaling                  | Name      |    |   | Unit                          | Description |         |                     |  |  |  |  |
|                                                                         | Format                                                              |                                                                                  |                          |           |    |   |                               |             |         |                     |  |  |  |  |
| 0                                                                       | X1                                                                  | -                                                                                |                          | mode      |    | - | SLAS Mode (see graphic below) |             |         |                     |  |  |  |  |
| 1<br>U1[3]                                                              |                                                                     |                                                                                  | -                        | reserved1 |    |   | -                             | Reserved    |         |                     |  |  |  |  |

## <span id="page-276-2"></span>**Bitfield mode**

This graphic explains the bits of mode



| Name    | Description                                                                                  |
|---------|----------------------------------------------------------------------------------------------|
| enabled | Apply QZSS SLAS DGNSS corrections: Enabled (1) / Disabled (0)                                |
| test    | Use QZSS SLAS data when in test mode (SLAS msg 0): Use data anyhow (1) / Ignore data when in |
|         | Test Mode (0)                                                                                |
| raim    | Raim out measurements that are not corrected by QZSS SLAS, if at least 5 measurements are    |
|         | corrected: Enabled (1) / Disabled (0)                                                        |

<span id="page-277-1"></span>

## <span id="page-277-0"></span>**32.10.34 UBX-CFG-SMGR (0x06 0x62)**

### **32.10.34.1 Synchronization manager configuration**

| UBX-CFG-SMGR<br>Message                                      |                  |   |                                       |                                                                                                                                                                                                                                                                                                                                                                                   |            |               |                                                           |                                                                                                                                                                          |                                                                               |                     |  |  |  |
|--------------------------------------------------------------|------------------|---|---------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------|---------------|-----------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------|---------------------|--|--|--|
| Description                                                  |                  |   | Synchronization manager configuration |                                                                                                                                                                                                                                                                                                                                                                                   |            |               |                                                           |                                                                                                                                                                          |                                                                               |                     |  |  |  |
| Firmware                                                     |                  |   | Supported on:                         |                                                                                                                                                                                                                                                                                                                                                                                   |            |               |                                                           | • u-blox 8 / u-blox M8 protocol versions 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.<br>2, 20.3, 22, 22.01, 23 and 23.01 (only with Time & Frequency Sync products) |                                                                               |                     |  |  |  |
| Type                                                         |                  |   | Get/set                               |                                                                                                                                                                                                                                                                                                                                                                                   |            |               |                                                           |                                                                                                                                                                          |                                                                               |                     |  |  |  |
| Comment                                                      |                  | - |                                       |                                                                                                                                                                                                                                                                                                                                                                                   |            |               |                                                           |                                                                                                                                                                          |                                                                               |                     |  |  |  |
|                                                              |                  |   | Header                                | Class                                                                                                                                                                                                                                                                                                                                                                             | ID         |               | Length (Bytes)                                            |                                                                                                                                                                          | Payload                                                                       | Checksum            |  |  |  |
| Message Structure                                            |                  |   | 0xB5 0x62 0x06 0x62 20                |                                                                                                                                                                                                                                                                                                                                                                                   |            |               |                                                           |                                                                                                                                                                          |                                                                               | see below CK_A CK_B |  |  |  |
| Payload Contents:                                            |                  |   |                                       |                                                                                                                                                                                                                                                                                                                                                                                   |            |               |                                                           |                                                                                                                                                                          |                                                                               |                     |  |  |  |
| Byte Offset                                                  | Number<br>Format |   | Scaling                               | Name                                                                                                                                                                                                                                                                                                                                                                              |            |               | Unit                                                      | Description                                                                                                                                                              |                                                                               |                     |  |  |  |
| 0                                                            | U1               |   | -                                     | version                                                                                                                                                                                                                                                                                                                                                                           |            |               | -                                                         | Message version (0x00 for this version)                                                                                                                                  |                                                                               |                     |  |  |  |
| 1                                                            | U1               |   | -                                     |                                                                                                                                                                                                                                                                                                                                                                                   | minGNSSFix |               | -                                                         | Minimum number of GNSS fixes before we<br>commit to use it as a source                                                                                                   |                                                                               |                     |  |  |  |
| 2                                                            | U2               |   | -                                     | maxFreqChange<br>Rate                                                                                                                                                                                                                                                                                                                                                             |            |               | ppb/s                                                     |                                                                                                                                                                          | Maximum frequency change rate during<br>disciplining. Must not exceed 30ppb/s |                     |  |  |  |
| maxPhaseCorrR<br>4<br>U2<br>-<br>ns/s<br>ate<br>maxSlewRate. |                  |   |                                       | Maximum phase correction rate in<br>coherent time pulse mode.<br>For maximum phase correction rate in<br>corrective time pulse mode see<br>Note that in coherent time pulse mode<br>phase correction is achieved by intentional<br>frequency offset. Allowing for a high<br>phase correction rate can result in large<br>intentional frequency offset. Must not<br>exceed 100ns/s |            |               |                                                           |                                                                                                                                                                          |                                                                               |                     |  |  |  |
| 6                                                            | U1[2]            |   | -                                     |                                                                                                                                                                                                                                                                                                                                                                                   | reserved1  |               | -                                                         | Reserved                                                                                                                                                                 |                                                                               |                     |  |  |  |
| 8                                                            | U2<br>-          |   |                                       |                                                                                                                                                                                                                                                                                                                                                                                   |            | freqTolerance | ppb                                                       | Limit of possible deviation from nominal<br>before UBX-TIM-TOS indicates that<br>frequency is out of tolerance                                                           |                                                                               |                     |  |  |  |
| 10                                                           | U2<br>-          |   |                                       | timeTolerance                                                                                                                                                                                                                                                                                                                                                                     |            |               | ns                                                        | Limit of possible deviation from nominal<br>before UBX-TIM-TOS indicates that time<br>pulse is out of tolerance                                                          |                                                                               |                     |  |  |  |
| 12                                                           | X2<br>-          |   |                                       | messageCfg                                                                                                                                                                                                                                                                                                                                                                        |            | -             | Sync manager message configuration<br>(see graphic below) |                                                                                                                                                                          |                                                                               |                     |  |  |  |



#### UBX-CFG-SMGR continued

| Byte Offset | Number | Scaling | Name        | Unit | Description                                |
|-------------|--------|---------|-------------|------|--------------------------------------------|
|             | Format |         |             |      |                                            |
| 14          | U2     | -       | maxSlewRate | us/s | Maximum slew rate, the maximum time        |
|             |        |         |             |      | correction that shall be applied between   |
|             |        |         |             |      | locked pulses in corrective time pulse     |
|             |        |         |             |      | mode.                                      |
|             |        |         |             |      | To have no limit on the slew rate, set the |
|             |        |         |             |      | flag disableMaxSlewRate to 1               |
|             |        |         |             |      | For maximum phase correction rate in       |
|             |        |         |             |      | coherent time pulse mode see               |
|             |        |         |             |      | maxPhaseCorrRate.                          |
| 16          | X4     | -       | flags       | -    | Flags (see graphic below)                  |

## <span id="page-278-0"></span>**Bitfield messageCfg**

This graphic explains the bits of messageCfg



| Name         | Description                                                                              |
|--------------|------------------------------------------------------------------------------------------|
| measInternal | 1 = report the estimated offset of the internal oscillator based on the oscillator model |
| measGNSS     | 1 = report the internal oscillator's offset relative to GNSS                             |
| measEXTINT0  | 1 = report the internal oscillator's offset relative to the source on EXTINT0            |
| measEXTINT1  | 1 = report the internal oscillator's offset relative to the source on EXTINT1            |

## <span id="page-278-1"></span>**Bitfield flags**

|  |                                       |  |  |  |  |  |  | 16            | 15 <sub>1</sub> | 14 | 13   12   11         |                             |                       | 10        |  |                  | 6                   | 5                 | 4                 | 3          |                |                   | O                   |
|--|---------------------------------------|--|--|--|--|--|--|---------------|-----------------|----|----------------------|-----------------------------|-----------------------|-----------|--|------------------|---------------------|-------------------|-------------------|------------|----------------|-------------------|---------------------|
|  | $\Box$ signed value<br>unsigned value |  |  |  |  |  |  | disableOffset | Ë<br>TPCoher    |    | imeWarning<br>issueT | 9<br>equarni<br>⊾<br>issueF | sableMaxSlewRate<br>뭉 | useAnyFix |  | enableHostMeasEx | eHostNeasI<br>enabl | ᅱ<br>enableEXTINT | ∘<br>enableEXTINT | enableGNSS | preferenceMode | 뎧<br>disableExter | Ten<br>disableInter |



| Name          | Description                                                                                            |
|---------------|--------------------------------------------------------------------------------------------------------|
| disableIntern | 1 = disable disciplining of the internal oscillator                                                    |
| al            |                                                                                                        |
| disableExtern | 1 = disable disciplining of the external oscillator                                                    |
| al            |                                                                                                        |
| preferenceMod | Reference selection preference                                                                         |
| e             | 0 - best frequency accuracy                                                                            |
|               | 1 - best phase accuracy                                                                                |
| enableGNSS    | 1 = enable use of GNSS as synchronization source                                                       |
| enableEXTINT0 | 1 = enable use of EXTINT0 as synchronization source                                                    |
| enableEXTINT1 | 1 = enable use of EXTINT1 as synchronization source                                                    |
| enableHostMea | 1 = enable use of host measurements on the internal oscillator as synchronization source               |
| sInt          | Measurements made by the host must be sent to the receiver using a UBX-TIM-SMEAS-DATA0                 |
|               | message.                                                                                               |
| enableHostMea | 1 = enable use of host measurements on the external oscillator as synchronization source               |
| sExt          | Measurements made by the host must be sent to the receiver using a UBX-TIM-SMEAS-DATA0                 |
|               | message.                                                                                               |
| useAnyFix     | 0 - use over-determined navigation solutions only                                                      |
|               | 1 - use any fix                                                                                        |
| disableMaxSle | 0 - use the value in the field maxSlewRate for maximum time correction in corrective time pulse        |
| wRate         | mode                                                                                                   |
|               | 1 - don't use the value in the field maxSlewRate                                                       |
| issueFreqWarn | 1 = issue a warning (via UBX-TIM-TOS flag) when frequency uncertainty exceeds freqTolerance            |
| ing           |                                                                                                        |
| issueTimeWarn | 1 = issue a warning (via UBX-TIM-TOS flag) when time uncertainty exceeds timeTolerance                 |
| ing           |                                                                                                        |
| TPCoherent    | Control time pulse coherency                                                                           |
|               | 0 - Coherent pulses. Time phase offsets will be corrected gradually by varying the GNSS oscillator     |
|               | rate within frequency tolerance limits. There will always be the correct number of GNSS oscillator     |
|               | cycles between time pulses. Given tight limits this may take a long time                               |
|               | 1 - Non-coherent pulses. In this mode the receiver will correct time phase offsets as quickly as       |
|               | allowed by the specified maximum slew rate, in which case there may not be the expected number of      |
|               | GNSS oscillator cycles between time pulses.                                                            |
|               | 2 - Post-initialization coherent pulses. The receiver will run in non-coherent mode as described above |
|               | until the pulse timing has been corrected and PLL is active on the internal oscillator, but will then  |
|               | switch to coherent pulse mode.                                                                         |
| disableOffset | 1 = disable automatic storage of oscillator offset                                                     |
|               |                                                                                                        |

<span id="page-280-2"></span>

## <span id="page-280-0"></span>**32.10.35 UBX-CFG-SPT (0x06 0x64)**

#### **32.10.35.1 Configure and start a sensor production test**

| Message           |        |   | UBX-CFG-SPT                                  |          |           |   |                                        |                                                                                        |         |                     |  |  |  |
|-------------------|--------|---|----------------------------------------------|----------|-----------|---|----------------------------------------|----------------------------------------------------------------------------------------|---------|---------------------|--|--|--|
| Description       |        |   | Configure and start a sensor production test |          |           |   |                                        |                                                                                        |         |                     |  |  |  |
| Firmware          |        |   | Supported on:                                |          |           |   |                                        |                                                                                        |         |                     |  |  |  |
|                   |        |   |                                              |          |           |   |                                        | • u-blox 8 / u-blox M8 protocol versions 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |  |
|                   |        |   |                                              |          |           |   |                                        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 (only with ADR products)                     |         |                     |  |  |  |
|                   |        |   |                                              |          |           |   |                                        | • u-blox 8 / u-blox M8 protocol versions 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.3,  |         |                     |  |  |  |
|                   |        |   |                                              |          |           |   |                                        | 22, 22.01, 23 and 23.01 (only with UDR products)                                       |         |                     |  |  |  |
| Type              |        |   | Get/set                                      |          |           |   |                                        |                                                                                        |         |                     |  |  |  |
| Comment           |        |   |                                              |          |           |   |                                        | The production test uses the built-in self-test capabilities of an attached sensor.    |         |                     |  |  |  |
|                   |        |   |                                              |          |           |   |                                        | This message is only supported if a sensor is directly connected to the u-blox         |         |                     |  |  |  |
| receiver.         |        |   |                                              |          |           |   |                                        |                                                                                        |         |                     |  |  |  |
|                   |        |   | Header                                       | Class    | ID        |   | Length (Bytes)                         |                                                                                        | Payload | Checksum            |  |  |  |
| Message Structure |        |   | 0xB5 0x62 0x06 0x64 12                       |          |           |   |                                        |                                                                                        |         | see below CK_A CK_B |  |  |  |
| Payload Contents: |        |   |                                              |          |           |   |                                        |                                                                                        |         |                     |  |  |  |
| Byte Offset       | Number |   | Scaling                                      | Name     |           |   | Unit                                   | Description                                                                            |         |                     |  |  |  |
|                   | Format |   |                                              |          |           |   |                                        |                                                                                        |         |                     |  |  |  |
| 0                 | U1     |   | -                                            | version  |           |   | -                                      | Message version (0x00 for this version)                                                |         |                     |  |  |  |
| 1                 | U1     |   |                                              |          | reserved1 |   | -                                      | Reserved                                                                               |         |                     |  |  |  |
| 2                 |        | - |                                              | sensorId |           | - | ID of the sensor to be tested; see UBX |                                                                                        |         |                     |  |  |  |
|                   |        |   |                                              |          |           |   |                                        | MON-SPT for defined IDs                                                                |         |                     |  |  |  |
| 4                 | U1[8]  |   | -                                            |          | reserved2 |   | -                                      | Reserved                                                                               |         |                     |  |  |  |

## <span id="page-280-1"></span>**32.10.36 UBX-CFG-TMODE2 (0x06 0x3D)**

## **32.10.36.1 Time mode settings 2**

| Message           |        |        | UBX-CFG-TMODE2                    |       |    |                |                                                                               |         |                                                                                            |
|-------------------|--------|--------|-----------------------------------|-------|----|----------------|-------------------------------------------------------------------------------|---------|--------------------------------------------------------------------------------------------|
| Description       |        |        | Time mode settings 2              |       |    |                |                                                                               |         |                                                                                            |
| Firmware          |        |        | Supported on:                     |       |    |                |                                                                               |         |                                                                                            |
|                   |        |        |                                   |       |    |                |                                                                               |         | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |
|                   |        |        |                                   |       |    |                | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 (only with Time & Frequency Sync or |         |                                                                                            |
|                   |        |        | Time Sync products)               |       |    |                |                                                                               |         |                                                                                            |
| Type              |        |        | Get/set                           |       |    |                |                                                                               |         |                                                                                            |
| Comment           |        |        |                                   |       |    |                | This message is available only for timing receivers                           |         |                                                                                            |
|                   |        |        |                                   |       |    |                | See the Time Mode Description for details. This message replaces the          |         |                                                                                            |
|                   |        |        | deprecated UBX-CFG-TMODE message. |       |    |                |                                                                               |         |                                                                                            |
|                   |        | Header |                                   | Class | ID | Length (Bytes) |                                                                               | Payload | Checksum                                                                                   |
| Message Structure |        |        | 0xB5 0x62 0x06 0x3D 28            |       |    |                |                                                                               |         | see below CK_A CK_B                                                                        |
| Payload Contents: |        |        |                                   |       |    |                |                                                                               |         |                                                                                            |
| Byte Offset       | Number |        | Scaling                           | Name  |    | Unit           | Description                                                                   |         |                                                                                            |
|                   | Format |        |                                   |       |    |                |                                                                               |         |                                                                                            |



#### UBX-CFG-TMODE2 continued

| Byte Offset | Number | Scaling | Name         | Unit   | Description                             |
|-------------|--------|---------|--------------|--------|-----------------------------------------|
|             | Format |         |              |        |                                         |
| 0           | U1     | -       | timeMode     | -      | Time Transfer Mode:                     |
|             |        |         |              |        | 0 Disabled                              |
|             |        |         |              |        | 1 Survey In                             |
|             |        |         |              |        | 2 Fixed Mode (true position information |
|             |        |         |              |        | required)                               |
|             |        |         |              |        | 3-255 Reserved                          |
| 1           | U1     | -       | reserved1    | -      | Reserved                                |
| 2           | X2     | -       | flags        | -      | Time mode flags (see graphic below)     |
| 4           | I4     | -       | ecefXOrLat   | cm_    | WGS84 ECEF X coordinate or latitude,    |
|             |        |         |              | or_    | depending on flags above                |
|             |        |         |              | deg*1e |                                         |
|             |        |         |              | 7      |                                         |
| 8           | I4     | -       | ecefYOrLon   | cm_    | WGS84 ECEF Y coordinate or longitude,   |
|             |        |         |              | or_    | depending on flags above                |
|             |        |         |              | deg*1e |                                         |
|             |        |         |              | 7      |                                         |
| 12          | I4     | -       | ecefZOrAlt   | cm     | WGS84 ECEF Z coordinate or altitude,    |
|             |        |         |              |        | depending on flags above                |
| 16          | U4     | -       | fixedPosAcc  | mm     | Fixed position 3D accuracy              |
| 20          | U4     | -       | svinMinDur   | s      | Survey-in minimum duration              |
| 24          | U4     | -       | svinAccLimit | mm     | Survey-in position accuracy limit       |

## <span id="page-281-0"></span>**Bitfield flags**



| Name   | Description                                        |
|--------|----------------------------------------------------|
| lla    | Position is given in LAT/LON/ALT (default is ECEF) |
| altInv | Altitude is not valid, in case lla was set         |

<span id="page-282-1"></span>

## <span id="page-282-0"></span>**32.10.37 UBX-CFG-TMODE3 (0x06 0x71)**

### **32.10.37.1 Time mode settings 3**

| Message           |        |  | UBX-CFG-TMODE3                |         |              |    |                                            |                                                                                                                                                                                                                                                                                                                       |         |                     |
|-------------------|--------|--|-------------------------------|---------|--------------|----|--------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|---------------------|
| Description       |        |  | Time mode settings 3          |         |              |    |                                            |                                                                                                                                                                                                                                                                                                                       |         |                     |
| Firmware          |        |  | Supported on:                 |         |              |    |                                            | • u-blox 8 / u-blox M8 protocol versions 20, 20.01, 20.1, 20.2 and 20.3 (only with                                                                                                                                                                                                                                    |         |                     |
|                   |        |  | High Precision GNSS products) |         |              |    |                                            |                                                                                                                                                                                                                                                                                                                       |         |                     |
| Type              |        |  | Get/set                       |         |              |    |                                            |                                                                                                                                                                                                                                                                                                                       |         |                     |
| Comment           |        |  |                               |         |              |    | See the Time Mode Description for details. | Configures the receiver to be in Time Mode. The position referred to in this<br>message is that of the Antenna Reference Point (ARP).                                                                                                                                                                                 |         |                     |
|                   |        |  | Header                        | Class   | ID           |    | Length (Bytes)                             |                                                                                                                                                                                                                                                                                                                       | Payload | Checksum            |
| Message Structure |        |  | 0xB5 0x62 0x06 0x71           |         |              | 40 |                                            |                                                                                                                                                                                                                                                                                                                       |         | see below CK_A CK_B |
| Payload Contents: |        |  |                               |         |              |    |                                            |                                                                                                                                                                                                                                                                                                                       |         |                     |
| Byte Offset       | Number |  | Scaling                       | Name    |              |    | Unit                                       | Description                                                                                                                                                                                                                                                                                                           |         |                     |
|                   | Format |  |                               |         |              |    |                                            |                                                                                                                                                                                                                                                                                                                       |         |                     |
| 0                 | U1     |  | -                             | version |              |    | -                                          | Message version (0x00 for this version)                                                                                                                                                                                                                                                                               |         |                     |
| 1                 | U1     |  | -                             |         | reserved1    |    | -                                          | Reserved                                                                                                                                                                                                                                                                                                              |         |                     |
| 2                 | X2     |  | -                             | flags   |              |    | -                                          | Receiver mode flags (see graphic below)                                                                                                                                                                                                                                                                               |         |                     |
| 4<br>I4           |        |  | -                             |         | ecefXOrLat   |    | cm_                                        | WGS84 ECEF X coordinate (or latitude) of                                                                                                                                                                                                                                                                              |         |                     |
|                   |        |  |                               |         |              |    | or_<br>deg*1e<br>7                         | the ARP position, depending on flags<br>above                                                                                                                                                                                                                                                                         |         |                     |
| 8                 | I4     |  | -                             |         | ecefYOrLon   |    | cm_<br>or_<br>deg*1e<br>7                  | WGS84 ECEF Y coordinate (or longitude)<br>of the ARP position, depending on flags<br>above                                                                                                                                                                                                                            |         |                     |
| 12<br>I4          |        |  | -                             |         | ecefZOrAlt   |    | cm                                         | WGS84 ECEF Z coordinate (or altitude) of<br>the ARP position, depending on flags<br>above                                                                                                                                                                                                                             |         |                     |
| 16                | I1     |  | -                             |         | ecefXOrLatHP |    | 0.1_<br>mm_<br>or_<br>deg*1e<br>9          | High-precision WGS84 ECEF X coordinate<br>(or latitude) of the ARP position,<br>depending on flags above. Must be in the<br>range -99+99.<br>The precise WGS84 ECEF X coordinate in<br>units of cm, or the precise WGS84 ECEF<br>latitude in units of 1e-7 degrees, is given by<br>ecefXOrLat + (ecefXOrLatHP * 1e-2) |         |                     |



#### UBX-CFG-TMODE3 continued

| Byte Offset | Number | Scaling | Name         | Unit   | Description                                  |
|-------------|--------|---------|--------------|--------|----------------------------------------------|
|             | Format |         |              |        |                                              |
| 17          | I1     | -       | ecefYOrLonHP | 0.1_   | High-precision WGS84 ECEF Y coordinate       |
|             |        |         |              | mm_    | (or longitude) of the ARP position,          |
|             |        |         |              | or_    | depending on flags above. Must be in the     |
|             |        |         |              | deg*1e | range -99+99.                                |
|             |        |         |              | 9      | The precise WGS84 ECEF Y coordinate in       |
|             |        |         |              |        | units of cm, or the precise WGS84 ECEF       |
|             |        |         |              |        | longitude in units of 1e-7 degrees, is given |
|             |        |         |              |        | by                                           |
|             |        |         |              |        | ecefYOrLon + (ecefYOrLonHP * 1e-2)           |
| 18          | I1     | -       | ecefZOrAltHP | 0.1_   | High-precision WGS84 ECEF Z coordinate       |
|             |        |         |              | mm     | (or altitude) of the ARP position,           |
|             |        |         |              |        | depending on flags above. Must be in the     |
|             |        |         |              |        | range -99+99.                                |
|             |        |         |              |        | The precise WGS84 ECEF Z coordinate, or      |
|             |        |         |              |        | altitude coordinate, in units of cm is given |
|             |        |         |              |        | by                                           |
|             |        |         |              |        | ecefZOrAlt + (ecefZOrAltHP * 1e-2)           |
| 19          | U1     | -       | reserved2    | -      | Reserved                                     |
| 20          | U4     | -       | fixedPosAcc  | 0.1_   | Fixed position 3D accuracy                   |
|             |        |         |              | mm     |                                              |
| 24          | U4     | -       | svinMinDur   | s      | Survey-in minimum duration                   |
| 28          | U4     | -       | svinAccLimit | 0.1_   | Survey-in position accuracy limit            |
|             |        |         |              | mm     |                                              |
| 32          | U1[8]  | -       | reserved3    | -      | Reserved                                     |

## <span id="page-283-0"></span>**Bitfield flags**



| Name | Description                                           |
|------|-------------------------------------------------------|
| mode | Receiver Mode:                                        |
|      | 0 Disabled                                            |
|      | 1 Survey In                                           |
|      | 2 Fixed Mode (true ARP position information required) |
|      | 3-255 Reserved                                        |
| lla  | Position is given in LAT/LON/ALT (default is ECEF)    |

<span id="page-284-1"></span>

## <span id="page-284-0"></span>**32.10.38 UBX-CFG-TP5 (0x06 0x31)**

#### **32.10.38.1 Poll time pulse parameters for time pulse 0**

| Message           | UBX-CFG-TP5                                                                       |                                                 |    |                                                                                            |         |          |  |  |  |  |  |  |  |  |  |
|-------------------|-----------------------------------------------------------------------------------|-------------------------------------------------|----|--------------------------------------------------------------------------------------------|---------|----------|--|--|--|--|--|--|--|--|--|
| Description       |                                                                                   |                                                 |    | Poll time pulse parameters for time pulse 0                                                |         |          |  |  |  |  |  |  |  |  |  |
| Firmware          | Supported on:                                                                     |                                                 |    |                                                                                            |         |          |  |  |  |  |  |  |  |  |  |
|                   |                                                                                   |                                                 |    | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |          |  |  |  |  |  |  |  |  |  |
|                   |                                                                                   | 20.1, 20.2, 20.3 and 22                         |    |                                                                                            |         |          |  |  |  |  |  |  |  |  |  |
| Type              |                                                                                   | Poll Request                                    |    |                                                                                            |         |          |  |  |  |  |  |  |  |  |  |
| Comment           | Sending this (empty / no-payload) message to the receiver results in the receiver |                                                 |    |                                                                                            |         |          |  |  |  |  |  |  |  |  |  |
|                   |                                                                                   |                                                 |    | returning a message of type UBX-CFG-TP5 with a payload as defined below for                |         |          |  |  |  |  |  |  |  |  |  |
|                   | timepulse 0.                                                                      |                                                 |    |                                                                                            |         |          |  |  |  |  |  |  |  |  |  |
|                   | Header                                                                            | Class                                           | ID | Length (Bytes)                                                                             | Payload | Checksum |  |  |  |  |  |  |  |  |  |
| Message Structure |                                                                                   | 0xB5 0x62 0x06 0x31<br>0<br>see below CK_A CK_B |    |                                                                                            |         |          |  |  |  |  |  |  |  |  |  |
| No payload        |                                                                                   |                                                 |    |                                                                                            |         |          |  |  |  |  |  |  |  |  |  |

#### **32.10.38.2 Poll time pulse parameters**

| Message           |        | UBX-CFG-TP5 |                            |       |    |   |                |                                                                                            |         |                     |  |  |  |  |  |
|-------------------|--------|-------------|----------------------------|-------|----|---|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|--|--|--|
| Description       |        |             | Poll time pulse parameters |       |    |   |                |                                                                                            |         |                     |  |  |  |  |  |
| Firmware          |        |             | Supported on:              |       |    |   |                |                                                                                            |         |                     |  |  |  |  |  |
|                   |        |             |                            |       |    |   |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |  |  |  |
|                   |        |             | 20.1, 20.2, 20.3 and 22    |       |    |   |                |                                                                                            |         |                     |  |  |  |  |  |
| Type              |        |             | Poll Request               |       |    |   |                |                                                                                            |         |                     |  |  |  |  |  |
| Comment           |        |             |                            |       |    |   |                | Sending this message to the receiver results in the receiver returning a message           |         |                     |  |  |  |  |  |
|                   |        |             |                            |       |    |   |                | of type UBX-CFG-TP5 with a payload as defined below for the specified time                 |         |                     |  |  |  |  |  |
|                   |        |             | pulse.                     |       |    |   |                |                                                                                            |         |                     |  |  |  |  |  |
|                   |        |             | Header                     | Class | ID |   | Length (Bytes) |                                                                                            | Payload | Checksum            |  |  |  |  |  |
| Message Structure |        |             | 0xB5 0x62 0x06 0x31        |       |    | 1 |                |                                                                                            |         | see below CK_A CK_B |  |  |  |  |  |
| Payload Contents: |        |             |                            |       |    |   |                |                                                                                            |         |                     |  |  |  |  |  |
| Byte Offset       | Number |             | Scaling                    | Name  |    |   | Unit           | Description                                                                                |         |                     |  |  |  |  |  |
|                   | Format |             |                            |       |    |   |                |                                                                                            |         |                     |  |  |  |  |  |
| 0                 | U1     |             | -                          | tpIdx |    |   | -              | Time pulse selection (0 = TIMEPULSE, 1 =                                                   |         |                     |  |  |  |  |  |
|                   |        |             |                            |       |    |   |                | TIMEPULSE2)                                                                                |         |                     |  |  |  |  |  |

<span id="page-285-0"></span>

## **32.10.38.3 Time pulse parameters**

| Message           |        | UBX-CFG-TP5                                     |         |              |               |                |                                                                             |         |                     |
|-------------------|--------|-------------------------------------------------|---------|--------------|---------------|----------------|-----------------------------------------------------------------------------|---------|---------------------|
| Description       |        | Time pulse parameters                           |         |              |               |                |                                                                             |         |                     |
| Firmware          |        | Supported on:                                   |         |              |               |                |                                                                             |         |                     |
|                   |        | • u-blox 8 / u-blox M8 with protocol version 15 |         |              |               |                |                                                                             |         |                     |
| Type              |        | Get/set                                         |         |              |               |                |                                                                             |         |                     |
| Comment           |        |                                                 |         |              |               |                | This message is used to get/set time pulse parameters. For more information |         |                     |
|                   |        | see section Time pulse.                         |         |              |               |                |                                                                             |         |                     |
|                   |        | Header                                          | Class   | ID           |               | Length (Bytes) |                                                                             | Payload | Checksum            |
| Message Structure |        | 0xB5 0x62 0x06 0x31                             |         |              | 32            |                |                                                                             |         | see below CK_A CK_B |
| Payload Contents: |        |                                                 |         |              |               |                |                                                                             |         |                     |
| Byte Offset       | Number | Scaling                                         | Name    |              |               | Unit           | Description                                                                 |         |                     |
|                   | Format |                                                 |         |              |               |                |                                                                             |         |                     |
| 0                 | U1     | -                                               | tpIdx   |              |               | -              | Time pulse selection (0 = TIMEPULSE, 1 =                                    |         |                     |
|                   |        |                                                 |         |              |               |                | TIMEPULSE2)                                                                 |         |                     |
| 1                 | U1     | -                                               | version |              |               | -              | Message version (0x00 for this version)                                     |         |                     |
| 2                 | U1[2]  | -                                               |         | reserved1    |               | -              | Reserved                                                                    |         |                     |
| 4                 | I2     | -                                               |         |              | antCableDelay | ns             | Antenna cable delay                                                         |         |                     |
| 6                 | I2     | -                                               |         | rfGroupDelay |               | ns             | RF group delay                                                              |         |                     |
| 8                 | U4     | -                                               |         | freqPeriod   |               | Hz_or_         | Frequency or period time, depending on                                      |         |                     |
|                   |        |                                                 |         |              |               | us             | setting of bit 'isFreq'                                                     |         |                     |
| 12                | U4     | -                                               |         |              | freqPeriodLoc | Hz_or_         | Frequency or period time when locked to                                     |         |                     |
|                   |        |                                                 | k       |              |               | us             | GPS time, only used if 'lockedOtherSet' is                                  |         |                     |
|                   |        |                                                 |         |              |               |                | set                                                                         |         |                     |
| 16                | U4     | -                                               |         |              | pulseLenRatio | us_or_         | Pulse length or duty cycle, depending on                                    |         |                     |
|                   |        |                                                 |         |              |               | 2^-32          | 'isLength'                                                                  |         |                     |
| 20                | U4     | -                                               |         |              | pulseLenRatio | us_or_         | Pulse length or duty cycle when locked to                                   |         |                     |
|                   |        |                                                 | Lock    |              |               | 2^-32          | GPS time, only used if 'lockedOtherSet' is                                  |         |                     |
|                   |        |                                                 |         |              |               |                | set                                                                         |         |                     |
| 24                | I4     | -                                               |         |              | userConfigDel | ns             | User-configurable time pulse delay                                          |         |                     |
|                   |        |                                                 | ay      |              |               |                |                                                                             |         |                     |
| 28                | X4     | -                                               | flags   |              |               | -              | Configuration flags (see graphic below)                                     |         |                     |

## <span id="page-285-1"></span>**Bitfield flags**

|                                         |  |  |  |  |  |  |  |  |  |  |  |                      | 6                                      | 5                                              | 4               | з                                    | ←                                           |                                                    | U         |
|-----------------------------------------|--|--|--|--|--|--|--|--|--|--|--|----------------------|----------------------------------------|------------------------------------------------|-----------------|--------------------------------------|---------------------------------------------|----------------------------------------------------|-----------|
| _______________________________________ |  |  |  |  |  |  |  |  |  |  |  | espe<br>ಕ<br>i<br>ळे | ₽<br>$\overline{a}$<br>ਨੋ<br>$\vec{a}$ | molorias<br>i<br>$\overline{\phantom{0}}$<br>ඟ | ength<br>귱<br>i | reg<br>ळ<br>$\overline{\phantom{a}}$ | ğ<br>ockedOther<br>$\overline{\phantom{0}}$ | ರ<br>Φ<br>ss<br>S<br>쯍<br>$\overline{\phantom{0}}$ | s<br>acti |

<span id="page-286-0"></span>

| Name          | Description                                                                                           |
|---------------|-------------------------------------------------------------------------------------------------------|
| active        | if set enable time pulse; if pin assigned to another function, other function takes precedence        |
| lockGpsFreq   | if set synchronize time pulse to GPS as soon as GPS time is valid, otherwise use local clock          |
| lockedOtherSe | if set use 'freqPeriodLock' and 'pulseLenRatioLock' as soon as GPS time is valid and 'freqPeriod' and |
| t             | 'pulseLenRatio' if GPS time is invalid,                                                               |
|               | if flag is cleared 'freqPeriod' and 'pulseLenRatio' used regardless of GPS time                       |
| isFreq        | if set 'freqPeriodLock' and 'freqPeriod' interpreted as frequency, otherwise interpreted as period    |
| isLength      | if set 'pulseLenRatioLock' and 'pulseLenRatio' interpreted as pulse length, otherwise interpreted as  |
|               | duty cycle                                                                                            |
| alignToTow    | align pulse to top of second (period time must be integer fraction of 1s)                             |
| polarity      | pulse polarity:                                                                                       |
|               | 0 = falling edge at top of second                                                                     |
|               | 1 = rising edge at top of second                                                                      |
| gridUtcGps    | timegrid to use:                                                                                      |
|               | 0 = UTC                                                                                               |
|               | 1 = GPS                                                                                               |

#### **32.10.38.4 Time pulse parameters**

| Message           |        |       | UBX-CFG-TP5                      |           |                |               |         |                                                                                           |  |                     |  |  |  |
|-------------------|--------|-------|----------------------------------|-----------|----------------|---------------|---------|-------------------------------------------------------------------------------------------|--|---------------------|--|--|--|
| Description       |        |       | Time pulse parameters            |           |                |               |         |                                                                                           |  |                     |  |  |  |
| Firmware          |        |       | Supported on:                    |           |                |               |         |                                                                                           |  |                     |  |  |  |
|                   |        |       |                                  |           |                |               |         | • u-blox 8 / u-blox M8 protocol versions 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20. |  |                     |  |  |  |
|                   |        |       | 2, 20.3, 22, 22.01, 23 and 23.01 |           |                |               |         |                                                                                           |  |                     |  |  |  |
| Type              |        |       | Get/set                          |           |                |               |         |                                                                                           |  |                     |  |  |  |
| Comment           |        | -     |                                  |           |                |               |         |                                                                                           |  |                     |  |  |  |
|                   | Header | Class | ID                               |           | Length (Bytes) |               | Payload | Checksum                                                                                  |  |                     |  |  |  |
| Message Structure |        |       | 0xB5 0x62 0x06 0x31              |           |                | 32            |         |                                                                                           |  | see below CK_A CK_B |  |  |  |
| Payload Contents: |        |       |                                  |           |                |               |         |                                                                                           |  |                     |  |  |  |
| Byte Offset       | Number |       | Scaling                          | Name      |                |               | Unit    | Description                                                                               |  |                     |  |  |  |
|                   | Format |       |                                  |           |                |               |         |                                                                                           |  |                     |  |  |  |
| 0                 | U1     | -     |                                  | tpIdx     |                |               | -       | Time pulse selection (0 = TIMEPULSE, 1 =                                                  |  |                     |  |  |  |
|                   |        |       |                                  |           |                |               |         | TIMEPULSE2)                                                                               |  |                     |  |  |  |
| 1                 | U1     |       | -                                | version   |                |               | -       | Message version (0x01 for this version)                                                   |  |                     |  |  |  |
| 2                 | U1[2]  |       | -                                | reserved1 |                |               | -       | Reserved                                                                                  |  |                     |  |  |  |
| 4                 | I2     |       | -                                |           |                | antCableDelay | ns      | Antenna cable delay                                                                       |  |                     |  |  |  |
| 6                 | I2     |       | -                                |           | rfGroupDelay   |               | ns      | RF group delay                                                                            |  |                     |  |  |  |
| 8                 | U4     |       | -                                |           | freqPeriod     |               | Hz_or_  | Frequency or period time, depending on                                                    |  |                     |  |  |  |
|                   |        |       |                                  |           |                |               | us      | setting of bit 'isFreq'                                                                   |  |                     |  |  |  |
| 12                | U4     |       | -                                |           |                | freqPeriodLoc | Hz_or_  | Frequency or period time when locked to                                                   |  |                     |  |  |  |
|                   |        |       |                                  | k         |                |               | us      | GNSS time, only used if 'lockedOtherSet'                                                  |  |                     |  |  |  |
|                   |        |       |                                  |           |                |               |         | is set                                                                                    |  |                     |  |  |  |
| 16                | U4     | -     |                                  |           |                | pulseLenRatio | us_or_  | Pulse length or duty cycle, depending on                                                  |  |                     |  |  |  |
|                   |        |       |                                  |           |                |               | 2^-32   | 'isLength'                                                                                |  |                     |  |  |  |
| 20                | U4     |       | -                                |           | pulseLenRatio  |               |         | us_or_<br>Pulse length or duty cycle when locked to                                       |  |                     |  |  |  |
|                   |        |       |                                  | Lock      |                |               | 2^-32   | GNSS time, only used if 'lockedOtherSet'                                                  |  |                     |  |  |  |
|                   |        |       |                                  |           |                |               | is set  |                                                                                           |  |                     |  |  |  |



UBX-CFG-TP5 continued

| Byte Offset | Number | Scaling | Name          | Unit | Description                             |
|-------------|--------|---------|---------------|------|-----------------------------------------|
|             | Format |         |               |      |                                         |
| 24          | I4     | -       | userConfigDel | ns   | User-configurable time pulse delay      |
|             |        |         | ay            |      |                                         |
| 28          | X4     | -       | flags         | -    | Configuration flags (see graphic below) |

## <span id="page-287-0"></span>**Bitfield flags**

|  |  |  |  |  |  |  |  |  |   | $13 \mid 12 \mid 11 \mid 10 \mid 9$ |         | 8 | 6      | 15                                                 | 4                                 | з                 |                        |                                               | 0           |
|--|--|--|--|--|--|--|--|--|---|-------------------------------------|---------|---|--------|----------------------------------------------------|-----------------------------------|-------------------|------------------------|-----------------------------------------------|-------------|
|  |  |  |  |  |  |  |  |  | ø |                                     | Ė<br>య్ |   | 忈<br>ᅙ | ō<br>⊢<br>ō<br>⊢<br>જ<br>$\overline{ }$<br>⊣<br>Æ5 | 퓛<br>w<br>ಕ<br>$\mathbf{\dot{a}}$ | 25<br>Ф<br>ळ<br>Ė | Φ<br>60<br>Φ<br>뭉<br>Φ | ਨ<br>60<br>ø<br>ఴ<br>$\overline{\phantom{0}}$ | g<br>i<br>g |

| Name          | Description                                                                                             |
|---------------|---------------------------------------------------------------------------------------------------------|
| active        | If set enable time pulse; if pin assigned to another function, other function takes precedence.         |
|               | Must be set for FTS variant.                                                                            |
| lockGnssFreq  | If set, synchronize time pulse to GNSS as soon as GNSS time is valid. If not set, or before GNSS time   |
|               | is valid, use local clock.                                                                              |
|               | This flag is ignored by the FTS product variant; in this case the receiver always locks to the best     |
|               | available time/frequency reference (which is not necessarily GNSS).                                     |
|               | This flag can be unset only in Timing product variants.                                                 |
| lockedOtherSe | If set the receiver switches between the timepulse settings given by 'freqPeriodLocked' &               |
| t             | 'pulseLenLocked' and those given by 'freqPeriod' & 'pulseLen'. The 'Locked' settings are used where     |
|               | the receiver has an accurate sense of time. For non-FTS products, this occurs when GNSS solution        |
|               | with a reliable time is available, but for FTS products the setting syncMode field governs behavior. In |
|               | all cases, the receiver only uses 'freqPeriod' & 'pulseLen' when the flag is unset.                     |
| isFreq        | If set 'freqPeriodLock' and 'freqPeriod' are interpreted as frequency, otherwise interpreted as period. |
| isLength      | If set 'pulseLenRatioLock' and 'pulseLenRatio' interpreted as pulse length, otherwise interpreted as    |
|               | duty cycle.                                                                                             |
| alignToTow    | Align pulse to top of second (period time must be integer fraction of 1s).                              |
|               | Also set 'lockGnssFreq' to use this feature.                                                            |
|               | This flag is ignored by the FTS product variant; it is assumed to be always set (as is lockGnssFreq).   |
|               | Set maxSlewRate and maxPhaseCorrRate fields of UBX-CFG-SMGR to 0 to disable alignment.                  |
| polarity      | Pulse polarity:                                                                                         |
|               | 0: falling edge at top of second                                                                        |
|               | 1: rising edge at top of second                                                                         |

<span id="page-288-1"></span>

#### Bitfield flags Description continued

| Name        | Description                                                                                            |
|-------------|--------------------------------------------------------------------------------------------------------|
| gridUtcGnss | Timegrid to use:                                                                                       |
|             | 0: UTC                                                                                                 |
|             | 1: GPS                                                                                                 |
|             | 2: GLONASS                                                                                             |
|             | 3: BeiDou                                                                                              |
|             | 4: Galileo (not supported in protocol versions less than 18)                                           |
|             | This flag is only relevant if 'lockGnssFreq' and 'alignToTow' are set.                                 |
|             | Note that configured GNSS time is estimated by the receiver if locked to any GNSS system. If the       |
|             | receiver has a valid GNSS fix it will attempt to steer the TP to the specified time grid even if the   |
|             | specified time is not based on information from the constellation's satellites. To ensure timing based |
|             | purely on a given GNSS, restrict the supported constellations in UBX-CFG-GNSS.                         |
| syncMode    | Sync Manager lock mode to use:                                                                         |
|             | 0: switch to 'freqPeriodLock' and 'pulseLenRatioLock' as soon as Sync Manager has an accurate          |
|             | time, never switch back to 'freqPeriod' and 'pulseLenRatio'                                            |
|             | 1: switch to 'freqPeriodLock' and 'pulseLenRatioLock' as soon as Sync Manager has an accurate          |
|             | time, and switch back to 'freqPeriod' and 'pulseLenRatio' as soon as time gets inaccurate              |
|             | This field is only relevant for the FTS product variant.                                               |
|             | This field is only relevant if the flag 'lockedOtherSet' is set.                                       |

## <span id="page-288-0"></span>**32.10.39 UBX-CFG-TXSLOT (0x06 0x53)**

## **32.10.39.1 TX buffer time slots configuration**

| Message                                                                        |         |                                                                                   | UBX-CFG-TXSLOT                                                                      |         |    |  |                |                                                                                           |         |                     |  |  |  |
|--------------------------------------------------------------------------------|---------|-----------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|---------|----|--|----------------|-------------------------------------------------------------------------------------------|---------|---------------------|--|--|--|
| Description                                                                    |         |                                                                                   | TX buffer time slots configuration                                                  |         |    |  |                |                                                                                           |         |                     |  |  |  |
| Firmware                                                                       |         |                                                                                   | Supported on:                                                                       |         |    |  |                |                                                                                           |         |                     |  |  |  |
|                                                                                |         |                                                                                   |                                                                                     |         |    |  |                | • u-blox 8 / u-blox M8 protocol versions 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20. |         |                     |  |  |  |
|                                                                                |         |                                                                                   |                                                                                     |         |    |  |                | 2, 20.3, 22, 22.01, 23 and 23.01 (only with Time & Frequency Sync products)               |         |                     |  |  |  |
| Type                                                                           |         | Set                                                                               |                                                                                     |         |    |  |                |                                                                                           |         |                     |  |  |  |
| Comment                                                                        |         | This message configures how transmit time slots are defined for the receiver      |                                                                                     |         |    |  |                |                                                                                           |         |                     |  |  |  |
|                                                                                |         |                                                                                   | interfaces. These time slots are relative to the chosen time pulse. A receiver that |         |    |  |                |                                                                                           |         |                     |  |  |  |
|                                                                                |         |                                                                                   | supports this message offers 3 time slots: nr. 0, 1 and 2. These time pulses        |         |    |  |                |                                                                                           |         |                     |  |  |  |
|                                                                                |         | follow each other and their associated priorities decrease in this order. The end |                                                                                     |         |    |  |                |                                                                                           |         |                     |  |  |  |
| of each can be specified in this message, the beginning is when the circularly |         |                                                                                   |                                                                                     |         |    |  |                |                                                                                           |         |                     |  |  |  |
|                                                                                |         |                                                                                   |                                                                                     |         |    |  |                | previous slot ends (i.e. slot 0 starts when slot 2 finishes).                             |         |                     |  |  |  |
|                                                                                |         | Header                                                                            |                                                                                     | Class   | ID |  | Length (Bytes) |                                                                                           | Payload | Checksum            |  |  |  |
| Message Structure                                                              |         |                                                                                   | 0xB5 0x62 0x06 0x53 16                                                              |         |    |  |                |                                                                                           |         | see below CK_A CK_B |  |  |  |
| Payload Contents:                                                              |         |                                                                                   |                                                                                     |         |    |  |                |                                                                                           |         |                     |  |  |  |
| Byte Offset                                                                    | Number  |                                                                                   | Scaling                                                                             | Name    |    |  | Unit           | Description                                                                               |         |                     |  |  |  |
|                                                                                | Format  |                                                                                   |                                                                                     |         |    |  |                |                                                                                           |         |                     |  |  |  |
| 0                                                                              | U1      |                                                                                   | -                                                                                   | version |    |  | -              | Message version (0x00 for this version)                                                   |         |                     |  |  |  |
| 1                                                                              | X1<br>- |                                                                                   |                                                                                     | enable  |    |  | -              | Bitfield of ports for which the slots are                                                 |         |                     |  |  |  |
|                                                                                |         |                                                                                   |                                                                                     |         |    |  |                | enabled. (see graphic below)                                                              |         |                     |  |  |  |
| 2                                                                              | U1      |                                                                                   | -                                                                                   | refTp   |    |  | -              | Reference timepulse source                                                                |         |                     |  |  |  |
|                                                                                |         |                                                                                   |                                                                                     |         |    |  |                | 0 - Timepulse                                                                             |         |                     |  |  |  |
|                                                                                |         |                                                                                   |                                                                                     |         |    |  |                | 1 - Timepulse 2                                                                           |         |                     |  |  |  |

<span id="page-289-1"></span>

UBX-CFG-TXSLOT continued

| Byte Offset           | Number                            | Scaling | Name      | Unit | Description                                |  |  |  |  |  |
|-----------------------|-----------------------------------|---------|-----------|------|--------------------------------------------|--|--|--|--|--|
|                       | Format                            |         |           |      |                                            |  |  |  |  |  |
| 3                     | U1                                | -       | reserved1 | -    | Reserved                                   |  |  |  |  |  |
|                       | Start of repeated block (3 times) |         |           |      |                                            |  |  |  |  |  |
| 4 + 4*N               | U4                                | -       | end       | -    | End of timeslot in milliseconds after time |  |  |  |  |  |
|                       |                                   |         |           |      | pulse                                      |  |  |  |  |  |
| End of repeated block |                                   |         |           |      |                                            |  |  |  |  |  |

## <span id="page-289-2"></span>**Bitfield enable**

This graphic explains the bits of enable



| Name  | Description |
|-------|-------------|
| DDC   | DDC/I2C     |
| UART1 | UART 1      |
| UART2 | UART 2      |
| USB   | USB         |
| SPI   | SPI         |

## <span id="page-289-0"></span>**32.10.40 UBX-CFG-USB (0x06 0x1B)**

#### **32.10.40.1 USB configuration**

| Message           |                                                |   | UBX-CFG-USB                                                    |           |           |   |          |                                                                                            |  |  |  |  |
|-------------------|------------------------------------------------|---|----------------------------------------------------------------|-----------|-----------|---|----------|--------------------------------------------------------------------------------------------|--|--|--|--|
| Description       |                                                |   | USB configuration                                              |           |           |   |          |                                                                                            |  |  |  |  |
| Firmware          |                                                |   | Supported on:                                                  |           |           |   |          |                                                                                            |  |  |  |  |
|                   |                                                |   |                                                                |           |           |   |          | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |  |  |
|                   |                                                |   | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                      |           |           |   |          |                                                                                            |  |  |  |  |
| Type              |                                                |   | Get/set                                                        |           |           |   |          |                                                                                            |  |  |  |  |
| Comment           |                                                | - |                                                                |           |           |   |          |                                                                                            |  |  |  |  |
|                   |                                                |   | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum |           |           |   |          |                                                                                            |  |  |  |  |
| Message Structure | 0xB5 0x62 0x06 0x1B 108<br>see below CK_A CK_B |   |                                                                |           |           |   |          |                                                                                            |  |  |  |  |
| Payload Contents: |                                                |   |                                                                |           |           |   |          |                                                                                            |  |  |  |  |
| Byte Offset       | Number                                         |   | Scaling                                                        | Name      |           |   | Unit     | Description                                                                                |  |  |  |  |
|                   | Format                                         |   |                                                                |           |           |   |          |                                                                                            |  |  |  |  |
| 0                 | U2                                             |   | -                                                              |           | vendorID  |   | -        | Vendor ID. This field shall only be set to                                                 |  |  |  |  |
|                   |                                                |   |                                                                |           |           |   |          | registered Vendor IDs. Changing this field                                                 |  |  |  |  |
|                   |                                                |   |                                                                |           |           |   |          | requires special Host drivers.                                                             |  |  |  |  |
| 2<br>U2<br>-      |                                                |   |                                                                |           | productID |   | -        | Product ID. Changing this field requires                                                   |  |  |  |  |
|                   |                                                |   |                                                                |           |           |   |          | special Host drivers.                                                                      |  |  |  |  |
| 4                 | U1[2]<br>-                                     |   |                                                                | reserved1 |           |   | -        | Reserved                                                                                   |  |  |  |  |
| 6<br>U1[2]<br>-   |                                                |   | reserved2                                                      |           |           | - | Reserved |                                                                                            |  |  |  |  |



#### UBX-CFG-USB continued

| Byte Offset | Number | Scaling | Name          | Unit | Description                                 |
|-------------|--------|---------|---------------|------|---------------------------------------------|
|             | Format |         |               |      |                                             |
| 8           | U2     | -       | powerConsumpt | mA   | Power consumed by the device                |
|             |        |         | ion           |      |                                             |
| 10          | X2     | -       | flags         | -    | various configuration flags (see graphic    |
|             |        |         |               |      | below)                                      |
| 12          | CH[32  | -       | vendorString  | -    | String containing the vendor name. 32       |
|             | ]      |         |               |      | ASCII bytes including 0-termination.        |
| 44          | CH[32  | -       | productString | -    | String containing the product name. 32      |
|             | ]      |         |               |      | ASCII bytes including 0-termination.        |
| 76          | CH[32  | -       | serialNumber  | -    | String containing the serial number. 32     |
|             | ]      |         |               |      | ASCII bytes including 0-termination.        |
|             |        |         |               |      | Changing the String fields requires special |
|             |        |         |               |      | Host drivers.                               |

## <span id="page-290-0"></span>**Bitfield flags**



| Name      | Description                       |
|-----------|-----------------------------------|
| reEnum    | force re-enumeration              |
| powerMode | self-powered (1), bus-powered (0) |

<span id="page-291-0"></span>

## **32.11 UBX-ESF (0x10)**

External Sensor Fusion Messages: i.e. External Sensor Measurements and Status Information. Messages in the ESF class are used to output external sensor fusion information from the receiver.

## <span id="page-291-1"></span>**32.11.1 UBX-ESF-ALG (0x10 0x14)**

#### **32.11.1.1 IMU alignment information**

| Message           |        |                 | UBX-ESF-ALG                                                                        |                                                 |    |     |                                 |                                                                                       |         |                     |  |  |
|-------------------|--------|-----------------|------------------------------------------------------------------------------------|-------------------------------------------------|----|-----|---------------------------------|---------------------------------------------------------------------------------------|---------|---------------------|--|--|
| Description       |        |                 | IMU alignment information                                                          |                                                 |    |     |                                 |                                                                                       |         |                     |  |  |
| Firmware          |        |                 | Supported on:                                                                      |                                                 |    |     |                                 |                                                                                       |         |                     |  |  |
|                   |        |                 |                                                                                    |                                                 |    |     |                                 | • u-blox 8 / u-blox M8 protocol versions 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.3, |         |                     |  |  |
|                   |        |                 |                                                                                    |                                                 |    |     |                                 | 22, 22.01, 23 and 23.01 (only with ADR or UDR products)                               |         |                     |  |  |
| Type              |        |                 | Periodic/Polled                                                                    |                                                 |    |     |                                 |                                                                                       |         |                     |  |  |
| Comment           |        |                 |                                                                                    |                                                 |    |     |                                 | This message outputs the IMU alignment angles which define the rotation from          |         |                     |  |  |
|                   |        |                 |                                                                                    |                                                 |    |     |                                 | the installation-frame to the IMU-frame (see the IMU-mount Misalignment               |         |                     |  |  |
|                   |        |                 | section for more details). In addition, it outputs information about the automatic |                                                 |    |     |                                 |                                                                                       |         |                     |  |  |
|                   |        |                 | IMU-mount alignment (if enabled).                                                  |                                                 |    |     |                                 |                                                                                       |         |                     |  |  |
|                   |        |                 | Header                                                                             | Class                                           | ID |     | Length (Bytes)                  |                                                                                       | Payload | Checksum            |  |  |
| Message Structure |        |                 | 0xB5 0x62 0x10 0x14                                                                |                                                 |    | 16  |                                 |                                                                                       |         | see below CK_A CK_B |  |  |
| Payload Contents: |        |                 |                                                                                    |                                                 |    |     |                                 |                                                                                       |         |                     |  |  |
| Byte Offset       | Number |                 | Scaling                                                                            | Name                                            |    |     | Unit                            | Description                                                                           |         |                     |  |  |
|                   | Format |                 |                                                                                    |                                                 |    |     |                                 |                                                                                       |         |                     |  |  |
| 0                 | U4     |                 | -                                                                                  | iTOW                                            |    |     | ms                              | GPS time of week of the navigation epoch.                                             |         |                     |  |  |
|                   |        |                 |                                                                                    |                                                 |    |     |                                 | See the description of iTOW for details.                                              |         |                     |  |  |
| 4                 | U1     |                 | -                                                                                  | version                                         |    |     | -                               | Message version (0x01 for this version)                                               |         |                     |  |  |
| 5                 | U1     |                 | -                                                                                  | flags                                           |    |     | -                               | Flags (see graphic below)                                                             |         |                     |  |  |
| 6                 | U1     | error<br>-<br>- |                                                                                    |                                                 |    |     |                                 | Flags (see graphic below)                                                             |         |                     |  |  |
| 7                 | U1     |                 | -                                                                                  | reserved1                                       |    | -   | Reserved                        |                                                                                       |         |                     |  |  |
| 8                 | U4     | 1e-2            |                                                                                    | yaw                                             |    | deg | IMU-mount yaw angle [0, 360]    |                                                                                       |         |                     |  |  |
| 12                | I2     | 1e-2            |                                                                                    | pitch                                           |    | deg | IMU-mount pitch angle [-90, 90] |                                                                                       |         |                     |  |  |
| 14                | I2     |                 | 1e-2                                                                               | roll<br>deg<br>IMU-mount roll angle [-180, 180] |    |     |                                 |                                                                                       |         |                     |  |  |

## <span id="page-291-2"></span>**Bitfield flags**



<span id="page-292-1"></span>

| Name         | Description                                                                                       |
|--------------|---------------------------------------------------------------------------------------------------|
| autoMntAlgOn | Automatic IMU-mount alignment on/off bit (0: automatic alignment is not running, 1: automatic     |
|              | alignment is running)                                                                             |
| status       | Status of the IMU-mount alignment (0: user-defined/fixed angles are used, 1: IMU-mount roll/pitch |
|              | angles alignment is ongoing, 2: IMU-mount roll/pitch/yaw angles alignment is ongoing, 3: coarse   |
|              | IMU-mount alignment are used, 4: fine IMU-mount alignment are used)                               |

## <span id="page-292-2"></span>**Bitfield error**

This graphic explains the bits of error



| Name         | Description                                                                                                 |
|--------------|-------------------------------------------------------------------------------------------------------------|
| tiltAlgError | IMU-mount tilt (roll and/or pitch) alignment error (0: no error, 1: error)                                  |
| yawAlgError  | IMU-mount yaw alignment error (0: no error, 1: error)                                                       |
| angleError   | IMU-mount misalignment Euler angle singularity error (0: no error, 1: error). If this error bit is set, the |
|              | IMU-mount roll and IMU-mount yaw angles cannot uniquely be defined due to the singularity issue             |
|              | happening with installations mounted with a +/- 90 degrees misalignment around pitch axis. This is          |
|              | also known as the 'gimbal-lock' problem affecting rotations described by Euler angles.                      |

## <span id="page-292-0"></span>**32.11.2 UBX-ESF-INS (0x10 0x15)**

## **32.11.2.1 Vehicle dynamics information**

| Message           | UBX-ESF-INS                                                                    |       |    |                                                                                       |         |                     |  |  |  |  |  |  |  |
|-------------------|--------------------------------------------------------------------------------|-------|----|---------------------------------------------------------------------------------------|---------|---------------------|--|--|--|--|--|--|--|
| Description       | Vehicle dynamics information                                                   |       |    |                                                                                       |         |                     |  |  |  |  |  |  |  |
| Firmware          | Supported on:                                                                  |       |    |                                                                                       |         |                     |  |  |  |  |  |  |  |
|                   |                                                                                |       |    | • u-blox 8 / u-blox M8 protocol versions 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.3, |         |                     |  |  |  |  |  |  |  |
|                   |                                                                                |       |    | 22, 22.01, 23 and 23.01 (only with ADR or UDR products)                               |         |                     |  |  |  |  |  |  |  |
| Type              | Periodic/Polled                                                                |       |    |                                                                                       |         |                     |  |  |  |  |  |  |  |
| Comment           |                                                                                |       |    | This message outputs information about the vehicle dynamics.                          |         |                     |  |  |  |  |  |  |  |
|                   | For ADR products (in protocol versions less than 19.2), the output dynamics    |       |    |                                                                                       |         |                     |  |  |  |  |  |  |  |
|                   | information (angular rates and accelerations) is expressed with respect to the |       |    |                                                                                       |         |                     |  |  |  |  |  |  |  |
|                   | vehicle-frame. More information can be found in the ADR Navigation Output      |       |    |                                                                                       |         |                     |  |  |  |  |  |  |  |
|                   | section.                                                                       |       |    |                                                                                       |         |                     |  |  |  |  |  |  |  |
|                   |                                                                                |       |    | For ADR products, the output dynamics information (angular rates and                  |         |                     |  |  |  |  |  |  |  |
|                   |                                                                                |       |    | accelerations) is expressed with respect to the vehicle-frame. More information       |         |                     |  |  |  |  |  |  |  |
|                   |                                                                                |       |    | can be found in the ADR Navigation Output section.                                    |         |                     |  |  |  |  |  |  |  |
|                   |                                                                                |       |    | For UDR products, the output dynamics information (angular rates and                  |         |                     |  |  |  |  |  |  |  |
|                   | accelerations) are expressed with respect to the body-frame. More information  |       |    |                                                                                       |         |                     |  |  |  |  |  |  |  |
|                   | can be found in the UDR Navigation Output section.                             |       |    |                                                                                       |         |                     |  |  |  |  |  |  |  |
|                   | Header                                                                         | Class | ID | Length (Bytes)                                                                        | Payload | Checksum            |  |  |  |  |  |  |  |
| Message Structure | 0xB5 0x62 0x10 0x15                                                            |       |    | 36                                                                                    |         | see below CK_A CK_B |  |  |  |  |  |  |  |



| Payload Contents: |        |         |           |       |                                           |
|-------------------|--------|---------|-----------|-------|-------------------------------------------|
| Byte Offset       | Number | Scaling | Name      | Unit  | Description                               |
|                   | Format |         |           |       |                                           |
| 0                 | U4     | -       | bitfield0 | -     | Bitfield (see graphic below)              |
| 4                 | U1[4]  | -       | reserved1 | -     | Reserved                                  |
| 8                 | U4     | -       | iTOW      | ms    | GPS time of week of the navigation epoch. |
|                   |        |         |           |       | See the description of iTOW for details.  |
| 12                | I4     | 1e-3    | xAngRate  | deg/s | Compensated x-axis angular rate.          |
| 16                | I4     | 1e-3    | yAngRate  | deg/s | Compensated y-axis angular rate.          |
| 20                | I4     | 1e-3    | zAngRate  | deg/s | Compensated z-axis angular rate.          |
| 24                | I4     | 1e-2    | xAccel    | m/s^2 | Compensated x-axis acceleration (gravity  |
|                   |        |         |           |       | free).                                    |
| 28                | I4     | 1e-2    | yAccel    | m/s^2 | Compensated y-axis acceleration (gravity  |
|                   |        |         |           |       | free).                                    |
| 32                | I4     | 1e-2    | zAccel    | m/s^2 | Compensated z-axis acceleration (gravity  |
|                   |        |         |           |       | free).                                    |

## <span id="page-293-0"></span>**Bitfield bitfield0**

This graphic explains the bits of bitfield0

|  |  |  |  |  |  |  |  |  | 13                                              | 12                                              | 11            | 10 <sub>1</sub>               | 9                                               | 8                        |        | 6 | 5 | $\overline{4}$ | -3 | 2 |  |
|--|--|--|--|--|--|--|--|--|-------------------------------------------------|-------------------------------------------------|---------------|-------------------------------|-------------------------------------------------|--------------------------|--------|---|---|----------------|----|---|--|
|  |  |  |  |  |  |  |  |  | ರ<br>$\overline{a}$<br>$\overline{\phantom{0}}$ | ਠ<br>$\overline{ }$<br>$\overline{\phantom{0}}$ | ರ<br>$\dot{}$ | 콬<br>$\overline{\phantom{0}}$ | ರ<br>$\overline{a}$<br>$\overline{\phantom{0}}$ | ರ<br>$\mathbf{\ddot{a}}$ | ε<br>್ |   |   |                |    |   |  |
|  |  |  |  |  |  |  |  |  | S<br>$\overline{\phantom{0}}$                   | \$.<br>$\overline{\phantom{0}}$<br>Φ            | g             | Š<br>Φ                        | Š<br>υ                                          | eVal                     | ğ      |   |   |                |    |   |  |
|  |  |  |  |  |  |  |  |  | zAcce)                                          | ۰<br>કૂ                                         | xAccel        | zAngRat                       | ngRatu                                          | gRati                    |        |   |   |                |    |   |  |
|  |  |  |  |  |  |  |  |  |                                                 |                                                 |               |                               | 蛋                                               | 좆                        |        |   |   |                |    |   |  |

| Name          | Description                                                                  |
|---------------|------------------------------------------------------------------------------|
| version       | Message version (0x01 for this version)                                      |
| xAngRateValid | Compensated x-axis angular rate data validity flag (0: not valid, 1: valid). |
| yAngRateValid | Compensated y-axis angular rate data validity flag (0: not valid, 1: valid). |
| zAngRateValid | Compensated z-axis angular rate data validity flag (0: not valid, 1: valid). |
| xAccelValid   | Compensated x-axis acceleration data validity flag (0: not valid, 1: valid). |
| yAccelValid   | Compensated y-axis acceleration data validity flag (0: not valid, 1: valid). |
| zAccelValid   | Compensated z-axis acceleration data validity flag (0: not valid, 1: valid). |

<span id="page-294-1"></span>

## <span id="page-294-0"></span>**32.11.3 UBX-ESF-MEAS (0x10 0x02)**

#### **32.11.3.1 External sensor fusion measurements**

| Message                                                                              |                  |        | UBX-ESF-MEAS                        |         |           |  |                |                                                                                                                                                                                                                                                                                                                       |         |                     |
|--------------------------------------------------------------------------------------|------------------|--------|-------------------------------------|---------|-----------|--|----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|---------------------|
| Description                                                                          |                  |        | External sensor fusion measurements |         |           |  |                |                                                                                                                                                                                                                                                                                                                       |         |                     |
| Firmware<br>Type<br>Comment                                                          |                  |        | Supported on:<br>Input/Output       |         |           |  |                | • u-blox 8 / u-blox M8 protocol versions 15.01, 16 and 17 (only with ADR products)<br>• u-blox 8 / u-blox M8 protocol versions 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.3,<br>22, 22.01, 23 and 23.01 (only with ADR or UDR products)<br>Possible data types for the data field are described in the ESF Measurement |         |                     |
|                                                                                      |                  | Header | Data section.                       | Class   | ID        |  | Length (Bytes) |                                                                                                                                                                                                                                                                                                                       | Payload | Checksum            |
| Message Structure                                                                    |                  |        | 0xB5 0x62 0x10 0x02                 |         |           |  | 4*numMeas)     | (8 + 4*numMeas) or (12 +                                                                                                                                                                                                                                                                                              |         | see below CK_A CK_B |
| Payload Contents:                                                                    |                  |        |                                     |         |           |  |                |                                                                                                                                                                                                                                                                                                                       |         |                     |
| Byte Offset                                                                          | Number<br>Format |        | Scaling                             | Name    |           |  | Unit           | Description                                                                                                                                                                                                                                                                                                           |         |                     |
| 0                                                                                    | U4               |        | -                                   | timeTag |           |  | -              | Time tag of measurement generated by<br>external sensor                                                                                                                                                                                                                                                               |         |                     |
| 4                                                                                    | X2               |        | -                                   | flags   |           |  | -              | Flags. Set all unused bits to zero. (see<br>graphic below)                                                                                                                                                                                                                                                            |         |                     |
| 6                                                                                    | U2               |        | -                                   | id      |           |  | -              | Identification number of data provider                                                                                                                                                                                                                                                                                |         |                     |
| Start of repeated block (numMeas times)                                              |                  |        |                                     |         |           |  |                |                                                                                                                                                                                                                                                                                                                       |         |                     |
| 8 + 4*N                                                                              | X4               |        | -                                   | data    |           |  | -              | data (see graphic below)                                                                                                                                                                                                                                                                                              |         |                     |
| End of repeated block                                                                |                  |        |                                     |         |           |  |                |                                                                                                                                                                                                                                                                                                                       |         |                     |
| Start of optional block                                                              |                  |        |                                     |         |           |  |                |                                                                                                                                                                                                                                                                                                                       |         |                     |
| 8 +                                                                                  | U4               |        | -                                   |         | calibTtag |  | ms             | Receiver local time calibrated.                                                                                                                                                                                                                                                                                       |         |                     |
| 4*numMea<br>This field must not be supplied when<br>calibTtagValid is set to 0.<br>s |                  |        |                                     |         |           |  |                |                                                                                                                                                                                                                                                                                                                       |         |                     |
| End of optional block                                                                |                  |        |                                     |         |           |  |                |                                                                                                                                                                                                                                                                                                                       |         |                     |

## <span id="page-294-2"></span>**Bitfield flags**



<span id="page-295-1"></span>

| Name          | Description                                                                                          |
|---------------|------------------------------------------------------------------------------------------------------|
| timeMarkSent  | Time mark signal was supplied just prior to sending this message: 0 = none, 1 = on Ext0, 2 = on Ext1 |
| timeMarkEdge  | Trigger on rising (0) or falling (1) edge of time mark signal                                        |
| calibTtagVali | Calibration time tag available. Always set to zero.                                                  |
| d             |                                                                                                      |
| numMeas       | Number of measurements contained in this message (optional, can be obtained from message size)       |

## <span id="page-295-2"></span>**Bitfield data**

This graphic explains the bits of data

|                                                  |        |  |  |   | 29   28   27   26   25   24   23   22   21   20   19   18   17   16   15   14   13   12   11   10   9   8   7   6   5   4   3   2   1   0 |  |  |  |  |  |  |  |  |  |  |  |
|--------------------------------------------------|--------|--|--|---|-------------------------------------------------------------------------------------------------------------------------------------------|--|--|--|--|--|--|--|--|--|--|--|
|                                                  | 呕<br>흉 |  |  | 횽 |                                                                                                                                           |  |  |  |  |  |  |  |  |  |  |  |
| □ signed value<br>□ unsigned value<br>□ reserved |        |  |  |   |                                                                                                                                           |  |  |  |  |  |  |  |  |  |  |  |

| Name      | Description                                 |
|-----------|---------------------------------------------|
| dataField | Data                                        |
| dataType  | Type of data (0 = no data; 163 = data type) |

## <span id="page-295-0"></span>**32.11.4 UBX-ESF-RAW (0x10 0x03)**

## **32.11.4.1 Raw sensor measurements**

| Message                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                  |  | UBX-ESF-RAW             |      |           |  |      |                                                                                                                                                                                                                                        |  |  |  |  |  |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------|--|-------------------------|------|-----------|--|------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--|--|--|--|--|
| Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |                  |  | Raw sensor measurements |      |           |  |      |                                                                                                                                                                                                                                        |  |  |  |  |  |
| Firmware                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                  |  | Supported on:           |      |           |  |      | • u-blox 8 / u-blox M8 protocol versions 15.01, 16 and 17 (only with ADR products)<br>• u-blox 8 / u-blox M8 protocol versions 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.3,<br>22, 22.01, 23 and 23.01 (only with ADR or UDR products) |  |  |  |  |  |
| Type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                  |  | Output                  |      |           |  |      |                                                                                                                                                                                                                                        |  |  |  |  |  |
| The message contains measurements from the active inertial sensors<br>Comment<br>connected to the GNSS chip. Possible data types for the data field are<br>accelerometer, gyroscope and temperature readings as described in the ESF<br>Measurement Data section.<br>Note that the rate selected in UBX-CFG-MSG is not respected. If a positive rate is<br>selected then all raw measurements will be output.<br>See also Raw Sensor Measurement Data.<br>Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum<br>0xB5 0x62 0x10 0x03 4 + 8*N<br>see below CK_A CK_B<br>Message Structure |                  |  |                         |      |           |  |      |                                                                                                                                                                                                                                        |  |  |  |  |  |
| Payload Contents:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                  |  |                         |      |           |  |      |                                                                                                                                                                                                                                        |  |  |  |  |  |
| Byte Offset                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Number<br>Format |  | Scaling                 | Name |           |  | Unit | Description                                                                                                                                                                                                                            |  |  |  |  |  |
| 0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | U1[4]            |  | -                       |      | reserved1 |  | -    | Reserved                                                                                                                                                                                                                               |  |  |  |  |  |
| Start of repeated block (N times)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                  |  |                         |      |           |  |      |                                                                                                                                                                                                                                        |  |  |  |  |  |
| 4 + 8*N                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | X4               |  | -                       | data |           |  | -    | data<br>Same as in UBX-ESF-MEAS (see graphic<br>below)                                                                                                                                                                                 |  |  |  |  |  |

<span id="page-296-1"></span>

UBX-ESF-RAW continued

| Byte Offset           | Number | Scaling | Name  | Unit | Description     |
|-----------------------|--------|---------|-------|------|-----------------|
|                       | Format |         |       |      |                 |
| 8 + 8*N               | U4     | -       | sTtag | -    | sensor time tag |
| End of repeated block |        |         |       |      |                 |

## <span id="page-296-2"></span>**Bitfield data**

This graphic explains the bits of data

| Name      |  |  |      | Description |  |  |  |  |  |  |  |  |  |  |  |  |
|-----------|--|--|------|-------------|--|--|--|--|--|--|--|--|--|--|--|--|
| dataField |  |  | data |             |  |  |  |  |  |  |  |  |  |  |  |  |

| dataType | type of data (0 = no data; 1255 = data type) |
|----------|----------------------------------------------|
|          |                                              |

### <span id="page-296-0"></span>**32.11.5 UBX-ESF-STATUS (0x10 0x10)**

#### **32.11.5.1 External sensor fusion status**

| Message           |         |          | UBX-ESF-STATUS                     |         |             |      |                                                                                       |  |                     |
|-------------------|---------|----------|------------------------------------|---------|-------------|------|---------------------------------------------------------------------------------------|--|---------------------|
| Description       |         |          | External sensor fusion status      |         |             |      |                                                                                       |  |                     |
| Firmware          |         |          | Supported on:                      |         |             |      |                                                                                       |  |                     |
|                   |         |          |                                    |         |             |      | • u-blox 8 / u-blox M8 protocol versions 15.01, 16 and 17 (only with ADR products)    |  |                     |
|                   |         |          |                                    |         |             |      | • u-blox 8 / u-blox M8 protocol versions 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.3, |  |                     |
|                   |         |          |                                    |         |             |      | 22, 22.01, 23 and 23.01 (only with ADR or UDR products)                               |  |                     |
| Type              |         |          | Periodic/Polled                    |         |             |      |                                                                                       |  |                     |
| Comment           |         | -        |                                    |         |             |      |                                                                                       |  |                     |
|                   | Payload | Checksum |                                    |         |             |      |                                                                                       |  |                     |
| Message Structure |         |          | 0xB5 0x62 0x10 0x10 16 + 4*numSens |         |             |      |                                                                                       |  | see below CK_A CK_B |
| Payload Contents: |         |          |                                    |         |             |      |                                                                                       |  |                     |
| Byte Offset       | Number  |          | Scaling                            | Name    |             | Unit | Description                                                                           |  |                     |
|                   | Format  |          |                                    |         |             |      |                                                                                       |  |                     |
| 0                 | U4      |          | -                                  | iTOW    |             | ms   | GPS time of week of the navigation epoch.                                             |  |                     |
|                   |         |          |                                    |         |             |      | See the description of iTOW for details.                                              |  |                     |
| 4                 | U1      |          | -                                  | version |             | -    | Message version (0x02 for this version)                                               |  |                     |
| 5                 | X1      |          | -                                  |         | initStatus1 | -    | Initialization status bitfield, part 1 (see                                           |  |                     |
|                   |         |          |                                    |         |             |      | graphic below)                                                                        |  |                     |
| 6                 | X1      |          | -                                  |         | initStatus2 | -    | Initialization status bitfield, part 2 (see                                           |  |                     |
|                   |         |          |                                    |         |             |      | graphic below)                                                                        |  |                     |
| 7                 | U1[5]   |          | -                                  |         | reserved1   | -    | Reserved                                                                              |  |                     |



#### UBX-ESF-STATUS continued

| Byte Offset                             | Number | Scaling | Name        | Unit | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|-----------------------------------------|--------|---------|-------------|------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                         | Format |         |             |      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 12                                      | U1     | -       | fusionMode  | -    | Fusion mode:<br>0: Initialization mode: receiver is<br>initializing some unknown values required<br>for doing sensor fusion<br>1: Fusion mode: GNSS and sensor data are<br>used for navigation solution computation<br>2: Suspended fusion mode: sensor fusion<br>is temporarily disabled due to e.g. invalid<br>sensor data or detected ferry<br>3: Disabled fusion mode: sensor fusion is<br>permanently disabled until receiver reset<br>due e.g. to sensor error |
|                                         |        |         |             |      | More details can be found in the Fusion<br>Modes section.                                                                                                                                                                                                                                                                                                                                                                                                            |
| 13                                      | U1[2]  | -       | reserved2   | -    | Reserved                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 15                                      | U1     | -       | numSens     | -    | Number of sensors                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Start of repeated block (numSens times) |        |         |             |      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 16 + 4*N                                | X1     | -       | sensStatus1 | -    | Sensor status, part 1 (see graphic below)                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 17 + 4*N                                | X1     | -       | sensStatus2 | -    | Sensor status, part 2 (see graphic below)                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 18 + 4*N                                | U1     | -       | freq        | Hz   | Observation frequency                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 19 + 4*N                                | X1     | -       | faults      | -    | Sensor faults (see graphic below)                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| End of repeated block                   |        |         |             |      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |

## <span id="page-297-0"></span>**Bitfield initStatus1**

This graphic explains the bits of initStatus1





| Name          | Description                                                                                     |
|---------------|-------------------------------------------------------------------------------------------------|
| wtInitStatus  | Wheel tick factor initialization status (0: off, 1: initializing, 2: initialized).              |
| mntAlgStatus  | Automatic IMU-mount alignment status (0: off, 1: initializing, 2: initialized, 3: initialized). |
| insInitStatus | INS initialization status (0: off, 1: initializing, 2: initialized).                            |

## <span id="page-298-0"></span>**Bitfield initStatus2**

This graphic explains the bits of initStatus2



| Name          | Description                                                          |
|---------------|----------------------------------------------------------------------|
| imuInitStatus | IMU initialization status (0: off, 1: initializing, 2: initialized). |

## <span id="page-298-1"></span>**Bitfield sensStatus1**

This graphic explains the bits of sensStatus1



| Name  | Description                                                                                          |
|-------|------------------------------------------------------------------------------------------------------|
| type  | Sensor data type. See section Sensor data types in the integration manual for details.               |
| used  | If set, sensor data is used for the current sensor fusion solution.                                  |
| ready | If set, sensor is set up (configuration is available or not required) but not used for computing the |
|       | current sensor fusion solution.                                                                      |

## <span id="page-298-2"></span>**Bitfield sensStatus2**

This graphic explains the bits of sensStatus2





| Name        | Description                                                                                       |
|-------------|---------------------------------------------------------------------------------------------------|
| calibStatus | 00: Sensor is not calibrated                                                                      |
|             | 01: Sensor is calibrating                                                                         |
|             | 10/11: Sensor is calibrated                                                                       |
|             | Good dead reckoning performance is only possible when all used sensors are calibrated. Depending  |
|             | on the quality of the GNSS signals and the sensor data, the sensors may take a longer time to get |
|             | calibrated.                                                                                       |
| timeStatus  | 00: No data                                                                                       |
|             | 01: Reception of the first byte used to tag the measurement                                       |
|             | 10: Event input used to tag the measurement                                                       |
|             | 11: Time tag provided with the data                                                               |

## <span id="page-299-0"></span>**Bitfield faults**



| Name        | Description                                      |
|-------------|--------------------------------------------------|
| badMeas     | Bad measurements detected                        |
| badTTag     | Bad measurement time-tags detected               |
| missingMeas | Missing or time-misaligned measurements detected |
| noisyMeas   | High measurement noise-level detected            |

<span id="page-300-0"></span>

## **32.12 UBX-HNR (0x28)**

High Rate Navigation Results Messages: i.e. High rate time, position, speed, heading. Messages in the HNR class are used to output high rate navigation data for position, altitude, velocity and their accuracies.

## <span id="page-300-1"></span>**32.12.1 UBX-HNR-ATT (0x28 0x01)**

## **32.12.1.1 Attitude solution**

| Message           |        |                                                                                  | UBX-HNR-ATT                     |         |    |  |                |                                                                               |         |                     |  |  |  |
|-------------------|--------|----------------------------------------------------------------------------------|---------------------------------|---------|----|--|----------------|-------------------------------------------------------------------------------|---------|---------------------|--|--|--|
| Description       |        |                                                                                  | Attitude solution               |         |    |  |                |                                                                               |         |                     |  |  |  |
| Firmware          |        |                                                                                  | Supported on:                   |         |    |  |                |                                                                               |         |                     |  |  |  |
|                   |        | • u-blox 8 / u-blox M8 with protocol version 19.2 (only with ADR or UDR products |                                 |         |    |  |                |                                                                               |         |                     |  |  |  |
|                   |        | )                                                                                |                                 |         |    |  |                |                                                                               |         |                     |  |  |  |
| Type              |        |                                                                                  | Periodic/Polled                 |         |    |  |                |                                                                               |         |                     |  |  |  |
| Comment           |        |                                                                                  |                                 |         |    |  |                | This message outputs the attitude solution as roll, pitch and heading angles. |         |                     |  |  |  |
|                   |        | More details about vehicle attitude can be found in the Vehicle Attitude Output  |                                 |         |    |  |                |                                                                               |         |                     |  |  |  |
|                   |        | (ADR) section for ADR products.                                                  |                                 |         |    |  |                |                                                                               |         |                     |  |  |  |
|                   |        | More details about vehicle attitude can be found in the Vehicle Attitude Output  |                                 |         |    |  |                |                                                                               |         |                     |  |  |  |
|                   |        |                                                                                  | (UDR) section for UDR products. |         |    |  |                |                                                                               |         |                     |  |  |  |
|                   |        |                                                                                  | Header                          | Class   | ID |  | Length (Bytes) |                                                                               | Payload | Checksum            |  |  |  |
| Message Structure |        |                                                                                  | 0xB5 0x62 0x28 0x01 32          |         |    |  |                |                                                                               |         | see below CK_A CK_B |  |  |  |
| Payload Contents: |        |                                                                                  |                                 |         |    |  |                |                                                                               |         |                     |  |  |  |
| Byte Offset       | Number |                                                                                  | Scaling                         | Name    |    |  | Unit           | Description                                                                   |         |                     |  |  |  |
|                   | Format |                                                                                  |                                 |         |    |  |                |                                                                               |         |                     |  |  |  |
| 0                 | U4     |                                                                                  | -                               | iTOW    |    |  | ms             | GPS time of week of the HNR epoch.                                            |         |                     |  |  |  |
| 4                 | U1     |                                                                                  | -                               | version |    |  | -              | Message version (0x01 for this version)                                       |         |                     |  |  |  |

20 U4 1e-5 accRoll deg Vehicle roll accuracy (if null, roll angle is

24 U4 1e-5 accPitch deg Vehicle pitch accuracy (if null, pitch angle

28 U4 1e-5 accHeading deg Vehicle heading accuracy (if null, heading

not available).

is not available).

angle is not available).

 U1[3] - reserved1 - [Reserved](#page-183-2) I4 1e-5 roll deg Vehicle roll. I4 1e-5 pitch deg Vehicle pitch. I4 1e-5 heading deg Vehicle heading.

<span id="page-301-1"></span>

## <span id="page-301-0"></span>**32.12.2 UBX-HNR-INS (0x28 0x02)**

#### **32.12.2.1 Vehicle dynamics information**

| Message                                                              |                                                                                |                                                                           | UBX-HNR-INS                                                                  |        |           |  |                |                                                                                       |         |                     |  |  |  |
|----------------------------------------------------------------------|--------------------------------------------------------------------------------|---------------------------------------------------------------------------|------------------------------------------------------------------------------|--------|-----------|--|----------------|---------------------------------------------------------------------------------------|---------|---------------------|--|--|--|
| Description                                                          |                                                                                |                                                                           | Vehicle dynamics information                                                 |        |           |  |                |                                                                                       |         |                     |  |  |  |
| Firmware                                                             |                                                                                |                                                                           | Supported on:                                                                |        |           |  |                |                                                                                       |         |                     |  |  |  |
|                                                                      |                                                                                |                                                                           |                                                                              |        |           |  |                | • u-blox 8 / u-blox M8 protocol versions 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.3, 22, |         |                     |  |  |  |
|                                                                      |                                                                                |                                                                           |                                                                              |        |           |  |                | 22.01, 23 and 23.01 (only with ADR or UDR products)                                   |         |                     |  |  |  |
| Type                                                                 |                                                                                |                                                                           | Periodic/Polled                                                              |        |           |  |                |                                                                                       |         |                     |  |  |  |
| Comment                                                              |                                                                                |                                                                           |                                                                              |        |           |  |                | This message outputs high rate information about vehicle dynamics computed            |         |                     |  |  |  |
| by the Inertial Navigation System (INS) during ESF-based navigation. |                                                                                |                                                                           |                                                                              |        |           |  |                |                                                                                       |         |                     |  |  |  |
|                                                                      | For ADR products (in protocol versions less than 19.2), the output dynamics    |                                                                           |                                                                              |        |           |  |                |                                                                                       |         |                     |  |  |  |
|                                                                      | information (angular rates and accelerations) is expressed with respect to the |                                                                           |                                                                              |        |           |  |                |                                                                                       |         |                     |  |  |  |
|                                                                      |                                                                                | vehicle-frame. More information can be found in the ADR Navigation Output |                                                                              |        |           |  |                |                                                                                       |         |                     |  |  |  |
|                                                                      |                                                                                |                                                                           | section.                                                                     |        |           |  |                |                                                                                       |         |                     |  |  |  |
|                                                                      |                                                                                |                                                                           |                                                                              |        |           |  |                | For UDR products, the output dynamics information (angular rates and                  |         |                     |  |  |  |
|                                                                      |                                                                                |                                                                           | accelerations) is expressed with respect to the body-frame. More information |        |           |  |                |                                                                                       |         |                     |  |  |  |
|                                                                      |                                                                                |                                                                           |                                                                              |        |           |  |                | can be found in the UDR Navigation Output section.                                    |         |                     |  |  |  |
|                                                                      |                                                                                |                                                                           |                                                                              |        |           |  |                | For ADR products, the output dynamics information (angular rates and                  |         |                     |  |  |  |
|                                                                      |                                                                                |                                                                           |                                                                              |        |           |  |                | accelerations) is expressed with respect to the vehicle-frame. More information       |         |                     |  |  |  |
|                                                                      |                                                                                |                                                                           |                                                                              |        |           |  |                | can be found in the ADR Navigation Output section.                                    |         |                     |  |  |  |
|                                                                      |                                                                                |                                                                           | Header                                                                       | Class  | ID        |  | Length (Bytes) |                                                                                       | Payload | Checksum            |  |  |  |
| Message Structure                                                    |                                                                                |                                                                           | 0xB5 0x62 0x28 0x02 36                                                       |        |           |  |                |                                                                                       |         | see below CK_A CK_B |  |  |  |
| Payload Contents:                                                    |                                                                                |                                                                           |                                                                              |        |           |  |                |                                                                                       |         |                     |  |  |  |
| Byte Offset                                                          | Number                                                                         |                                                                           | Scaling                                                                      | Name   |           |  | Unit           | Description                                                                           |         |                     |  |  |  |
|                                                                      | Format                                                                         |                                                                           |                                                                              |        |           |  |                |                                                                                       |         |                     |  |  |  |
| 0                                                                    | X4                                                                             |                                                                           | -                                                                            |        | bitfield0 |  | -              | Bitfield (see graphic below)                                                          |         |                     |  |  |  |
| 4                                                                    | U1[4]                                                                          |                                                                           | -                                                                            |        | reserved1 |  | -              | Reserved                                                                              |         |                     |  |  |  |
| 8                                                                    | U4                                                                             |                                                                           | -                                                                            | iTOW   |           |  | ms             | GPS time of week of the HNR epoch.                                                    |         |                     |  |  |  |
| 12                                                                   | I4                                                                             |                                                                           | 1e-3                                                                         |        | xAngRate  |  | deg/s          | Compensated x-axis angular rate.                                                      |         |                     |  |  |  |
| 16                                                                   | I4                                                                             |                                                                           | 1e-3                                                                         |        | yAngRate  |  | deg/s          | Compensated y-axis angular rate.                                                      |         |                     |  |  |  |
| 20                                                                   | I4                                                                             |                                                                           | 1e-3                                                                         |        | zAngRate  |  | deg/s          | Compensated z-axis angular rate.                                                      |         |                     |  |  |  |
| 24                                                                   | I4                                                                             |                                                                           | 1e-2                                                                         | xAccel |           |  | m/s^2          | Compensated x-axis acceleration (with                                                 |         |                     |  |  |  |
|                                                                      |                                                                                |                                                                           |                                                                              |        |           |  |                | gravity).                                                                             |         |                     |  |  |  |
| 28                                                                   | I4                                                                             |                                                                           | 1e-2                                                                         | yAccel |           |  | m/s^2          | Compensated y-axis acceleration (with                                                 |         |                     |  |  |  |
|                                                                      |                                                                                |                                                                           |                                                                              |        |           |  |                | gravity).                                                                             |         |                     |  |  |  |
| 32                                                                   | I4                                                                             |                                                                           | 1e-2                                                                         | zAccel |           |  | m/s^2          | Compensated z-axis acceleration (with                                                 |         |                     |  |  |  |
|                                                                      |                                                                                | gravity).                                                                 |                                                                              |        |           |  |                |                                                                                       |         |                     |  |  |  |

<span id="page-302-1"></span>

## <span id="page-302-2"></span>**Bitfield bitfield0**

This graphic explains the bits of bitfield0

|  |                                         |  |  |  |  |  |  |  |                                                                                               | ---                                                                                                        |                                                                           | 10                                                                                   | 9                                                                 | 8                                         |                  | 6 | 5 | 4 | 3 | 2. | $\mathbf{1}$ | 0 |
|--|-----------------------------------------|--|--|--|--|--|--|--|-----------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------|--------------------------------------------------------------------------------------|-------------------------------------------------------------------|-------------------------------------------|------------------|---|---|---|---|----|--------------|---|
|  | _______________________________________ |  |  |  |  |  |  |  | ਠ<br>$\overline{a}$<br>$\overline{\phantom{0}}$<br>S<br>$\overline{\phantom{0}}$<br>Φ<br>ZACC | ರ<br>$\overline{\phantom{a}}$<br>$\overline{\phantom{0}}$<br>₿<br>$\overline{\phantom{0}}$<br>Φ<br>۰<br>કુ | ರ<br>$\overline{a}$<br>g<br>$\overline{\phantom{0}}$<br>Φ<br>٥<br>9€<br>≫ | ರ<br>$\overline{\phantom{a}}$<br>$\overline{\phantom{0}}$<br>45<br>⋗<br>v<br>AngRate | ರ<br>$\overline{a}$<br>$\overline{\phantom{0}}$<br>₹.<br>yAngRate | ರ<br>$\overline{a}$<br>eVal<br>gRati<br>좆 | ε<br>İ<br>ø<br>ğ |   |   |   |   |    |              |   |

| Name          | Description                                                                  |
|---------------|------------------------------------------------------------------------------|
| version       | Message version (0x00 for this version)                                      |
| xAngRateValid | Compensated x-axis angular rate data validity flag (0: not valid, 1: valid). |
| yAngRateValid | Compensated y-axis angular rate data validity flag (0: not valid, 1: valid). |
| zAngRateValid | Compensated z-axis angular rate data validity flag (0: not valid, 1: valid). |
| xAccelValid   | Compensated x-axis acceleration data validity flag (0: not valid, 1: valid). |
| yAccelValid   | Compensated y-axis acceleration data validity flag (0: not valid, 1: valid). |
| zAccelValid   | Compensated z-axis acceleration data validity flag (0: not valid, 1: valid). |

## <span id="page-302-0"></span>**32.12.3 UBX-HNR-PVT (0x28 0x00)**

## **32.12.3.1 High rate output of PVT solution**

| Message           |        |                                                                | UBX-HNR-PVT                                                                   |       |  |  |       |                                                                                       |  |                     |  |  |  |
|-------------------|--------|----------------------------------------------------------------|-------------------------------------------------------------------------------|-------|--|--|-------|---------------------------------------------------------------------------------------|--|---------------------|--|--|--|
| Description       |        |                                                                | High rate output of PVT solution                                              |       |  |  |       |                                                                                       |  |                     |  |  |  |
| Firmware          |        |                                                                | Supported on:                                                                 |       |  |  |       |                                                                                       |  |                     |  |  |  |
|                   |        |                                                                |                                                                               |       |  |  |       | • u-blox 8 / u-blox M8 protocol versions 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.3, |  |                     |  |  |  |
|                   |        |                                                                |                                                                               |       |  |  |       | 22, 22.01, 23 and 23.01 (only with ADR or UDR products)                               |  |                     |  |  |  |
| Type              |        |                                                                | Periodic/Polled                                                               |       |  |  |       |                                                                                       |  |                     |  |  |  |
| Comment           |        |                                                                |                                                                               |       |  |  |       | This message provides the position, velocity and time solution with high output       |  |                     |  |  |  |
|                   |        | rate.                                                          |                                                                               |       |  |  |       |                                                                                       |  |                     |  |  |  |
|                   |        |                                                                | Note that during a leap second there may be more or less than 60 seconds in a |       |  |  |       |                                                                                       |  |                     |  |  |  |
|                   |        |                                                                | minute.                                                                       |       |  |  |       |                                                                                       |  |                     |  |  |  |
|                   |        |                                                                | See the description of leap seconds for details.                              |       |  |  |       |                                                                                       |  |                     |  |  |  |
|                   |        | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum |                                                                               |       |  |  |       |                                                                                       |  |                     |  |  |  |
| Message Structure |        |                                                                | 0xB5 0x62 0x28 0x00 72                                                        |       |  |  |       |                                                                                       |  | see below CK_A CK_B |  |  |  |
| Payload Contents: |        |                                                                |                                                                               |       |  |  |       |                                                                                       |  |                     |  |  |  |
| Byte Offset       | Number |                                                                | Scaling                                                                       | Name  |  |  | Unit  | Description                                                                           |  |                     |  |  |  |
|                   | Format |                                                                |                                                                               |       |  |  |       |                                                                                       |  |                     |  |  |  |
| 0                 | U4     |                                                                | -                                                                             | iTOW  |  |  | ms    | GPS time of week of the navigation epoch.                                             |  |                     |  |  |  |
|                   |        |                                                                |                                                                               |       |  |  |       | See the description of iTOW for details.                                              |  |                     |  |  |  |
| 4                 | U2     |                                                                | -                                                                             | year  |  |  | y     | Year (UTC)                                                                            |  |                     |  |  |  |
| 6                 | U1     |                                                                | -                                                                             | month |  |  | month | Month, range 112 (UTC)                                                                |  |                     |  |  |  |
| 7                 | U1     |                                                                | -                                                                             | day   |  |  | d     | Day of month, range 131 (UTC)                                                         |  |                     |  |  |  |
| 8                 | U1     |                                                                | -                                                                             | hour  |  |  | h     | Hour of day, range 023 (UTC)                                                          |  |                     |  |  |  |
| 9                 | U1     |                                                                | -                                                                             | min   |  |  | min   | Minute of hour, range 059 (UTC)                                                       |  |                     |  |  |  |
| 10                | U1     | sec<br>-                                                       |                                                                               |       |  |  | s     | Seconds of minute, range 060 (UTC)                                                    |  |                     |  |  |  |
| 11                | X1     |                                                                | -                                                                             | valid |  |  | -     | Validity Flags (see graphic below)                                                    |  |                     |  |  |  |
| 12                | I4     |                                                                | -                                                                             | nano  |  |  | ns    | Fraction of second, range -1e9  1e9 (UTC)                                             |  |                     |  |  |  |



#### UBX-HNR-PVT continued

| Byte Offset | Number | Scaling | Name      | Unit | Description                          |
|-------------|--------|---------|-----------|------|--------------------------------------|
|             | Format |         |           |      |                                      |
| 16          | U1     | -       | gpsFix    | -    | GPSfix Type, range 05                |
|             |        |         |           |      | 0x00 = No Fix                        |
|             |        |         |           |      | 0x01 = Dead Reckoning only           |
|             |        |         |           |      | 0x02 = 2D-Fix                        |
|             |        |         |           |      | 0x03 = 3D-Fix                        |
|             |        |         |           |      | 0x04 = GPS + dead reckoning combined |
|             |        |         |           |      | 0x05 = Time only fix                 |
|             |        |         |           |      | 0x060xff: reserved                   |
| 17          | X1     | -       | flags     | -    | Fix Status Flags (see graphic below) |
| 18          | U1[2]  | -       | reserved1 | -    | Reserved                             |
| 20          | I4     | 1e-7    | lon       | deg  | Longitude                            |
| 24          | I4     | 1e-7    | lat       | deg  | Latitude                             |
| 28          | I4     | -       | height    | mm   | Height above Ellipsoid               |
| 32          | I4     | -       | hMSL      | mm   | Height above mean sea level          |
| 36          | I4     | -       | gSpeed    | mm/s | Ground Speed (2-D)                   |
| 40          | I4     | -       | speed     | mm/s | Speed (3-D)                          |
| 44          | I4     | 1e-5    | headMot   | deg  | Heading of motion (2-D)              |
| 48          | I4     | 1e-5    | headVeh   | deg  | Heading of vehicle (2-D)             |
| 52          | U4     | -       | hAcc      | mm   | Horizontal accuracy                  |
| 56          | U4     | -       | vAcc      | mm   | Vertical accuracy                    |
| 60          | U4     | -       | sAcc      | mm/s | Speed accuracy                       |
| 64          | U4     | 1e-5    | headAcc   | deg  | Heading accuracy                     |
| 68          | U1[4]  | -       | reserved2 | -    | Reserved                             |

## <span id="page-303-0"></span>**Bitfield valid**

This graphic explains the bits of valid





| Name          | Description                                                                                 |
|---------------|---------------------------------------------------------------------------------------------|
| validDate     | 1 = Valid UTC Date (see Time Validity section in the integration manual for details)        |
| validTime     | 1 = Valid UTC Time of Day (see Time Validity section in the integration manual for details) |
| fullyResolved | 1 = UTC Time of Day has been fully resolved (no seconds uncertainty)                        |

## <span id="page-304-0"></span>**Bitfield flags**



| Name         | Description                                  |
|--------------|----------------------------------------------|
| GPSfixOK     | >1 = Fix within limits (e.g. DOP & accuracy) |
| DiffSoln     | 1 = DGPS used                                |
| WKNSET       | 1 = Valid GPS week number                    |
| TOWSET       | 1 = Valid GPS time of week (iTOW & fTOW)     |
| headVehValid | 1= Heading of vehicle is valid               |

<span id="page-305-0"></span>

## **32.13 UBX-INF (0x04)**

Information Messages: i.e. Printf-Style Messages, with IDs such as Error, Warning, Notice. Messages in the INF class are used to output strings in a printf style from the firmware or application code. All INF messages have an associated type to indicate the kind of message.

## <span id="page-305-1"></span>**32.13.1 UBX-INF-DEBUG (0x04 0x04)**

#### **32.13.1.1 ASCII output with debug contents**

| Message                           |        | UBX-INF-DEBUG                                                                              |      |  |  |      |             |  |                     |
|-----------------------------------|--------|--------------------------------------------------------------------------------------------|------|--|--|------|-------------|--|---------------------|
| Description                       |        | ASCII output with debug contents                                                           |      |  |  |      |             |  |                     |
| Firmware                          |        | Supported on:                                                                              |      |  |  |      |             |  |                     |
|                                   |        | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |      |  |  |      |             |  |                     |
|                                   |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |      |  |  |      |             |  |                     |
| Type                              |        | Output                                                                                     |      |  |  |      |             |  |                     |
| Comment                           |        | This message has a variable length payload, representing an ASCII string.                  |      |  |  |      |             |  |                     |
|                                   |        | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum                             |      |  |  |      |             |  |                     |
| Message Structure                 |        | 0xB5 0x62 0x04 0x04 0 + 1*N                                                                |      |  |  |      |             |  | see below CK_A CK_B |
| Payload Contents:                 |        |                                                                                            |      |  |  |      |             |  |                     |
| Byte Offset                       | Number | Scaling                                                                                    | Name |  |  | Unit | Description |  |                     |
|                                   | Format |                                                                                            |      |  |  |      |             |  |                     |
| Start of repeated block (N times) |        |                                                                                            |      |  |  |      |             |  |                     |
| N*1                               | CH     | str<br>-<br>-<br>ASCII Character                                                           |      |  |  |      |             |  |                     |
| End of repeated block             |        |                                                                                            |      |  |  |      |             |  |                     |

## <span id="page-305-2"></span>**32.13.2 UBX-INF-ERROR (0x04 0x00)**

#### **32.13.2.1 ASCII output with error contents**

| Message                           |        |                                                    | UBX-INF-ERROR                                                             |      |  |  |          |                                                                                            |  |                     |
|-----------------------------------|--------|----------------------------------------------------|---------------------------------------------------------------------------|------|--|--|----------|--------------------------------------------------------------------------------------------|--|---------------------|
| Description                       |        |                                                    | ASCII output with error contents                                          |      |  |  |          |                                                                                            |  |                     |
| Firmware                          |        |                                                    | Supported on:                                                             |      |  |  |          |                                                                                            |  |                     |
|                                   |        |                                                    |                                                                           |      |  |  |          | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |                     |
|                                   |        |                                                    | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                 |      |  |  |          |                                                                                            |  |                     |
| Type                              |        |                                                    | Output                                                                    |      |  |  |          |                                                                                            |  |                     |
| Comment                           |        |                                                    | This message has a variable length payload, representing an ASCII string. |      |  |  |          |                                                                                            |  |                     |
|                                   |        | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload |                                                                           |      |  |  | Checksum |                                                                                            |  |                     |
| Message Structure                 |        |                                                    | 0xB5 0x62 0x04 0x00 0 + 1*N                                               |      |  |  |          |                                                                                            |  | see below CK_A CK_B |
| Payload Contents:                 |        |                                                    |                                                                           |      |  |  |          |                                                                                            |  |                     |
| Byte Offset                       | Number |                                                    | Scaling                                                                   | Name |  |  | Unit     | Description                                                                                |  |                     |
|                                   | Format |                                                    |                                                                           |      |  |  |          |                                                                                            |  |                     |
| Start of repeated block (N times) |        |                                                    |                                                                           |      |  |  |          |                                                                                            |  |                     |
| N*1                               | CH     |                                                    | str<br>-<br>-<br>ASCII Character                                          |      |  |  |          |                                                                                            |  |                     |
| End of repeated block             |        |                                                    |                                                                           |      |  |  |          |                                                                                            |  |                     |

<span id="page-306-2"></span>

## <span id="page-306-0"></span>**32.13.3 UBX-INF-NOTICE (0x04 0x02)**

### **32.13.3.1 ASCII output with informational contents**

| Message                           |        |        | UBX-INF-NOTICE                                                                             |       |    |  |                |             |         |                     |
|-----------------------------------|--------|--------|--------------------------------------------------------------------------------------------|-------|----|--|----------------|-------------|---------|---------------------|
| Description                       |        |        | ASCII output with informational contents                                                   |       |    |  |                |             |         |                     |
| Firmware                          |        |        | Supported on:                                                                              |       |    |  |                |             |         |                     |
|                                   |        |        | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |       |    |  |                |             |         |                     |
|                                   |        |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |       |    |  |                |             |         |                     |
| Type                              |        |        | Output                                                                                     |       |    |  |                |             |         |                     |
| Comment                           |        |        | This message has a variable length payload, representing an ASCII string.                  |       |    |  |                |             |         |                     |
|                                   |        | Header |                                                                                            | Class | ID |  | Length (Bytes) |             | Payload | Checksum            |
| Message Structure                 |        |        | 0xB5 0x62 0x04 0x02 0 + 1*N                                                                |       |    |  |                |             |         | see below CK_A CK_B |
| Payload Contents:                 |        |        |                                                                                            |       |    |  |                |             |         |                     |
| Byte Offset                       | Number |        | Scaling                                                                                    | Name  |    |  | Unit           | Description |         |                     |
|                                   | Format |        |                                                                                            |       |    |  |                |             |         |                     |
| Start of repeated block (N times) |        |        |                                                                                            |       |    |  |                |             |         |                     |
| N*1                               | CH     |        | str<br>-<br>-<br>ASCII Character                                                           |       |    |  |                |             |         |                     |
| End of repeated block             |        |        |                                                                                            |       |    |  |                |             |         |                     |

## <span id="page-306-1"></span>**32.13.4 UBX-INF-TEST (0x04 0x03)**

#### **32.13.4.1 ASCII output with test contents**

| Message                           |        |                                                    | UBX-INF-TEST                                                                               |      |  |  |          |             |  |                     |
|-----------------------------------|--------|----------------------------------------------------|--------------------------------------------------------------------------------------------|------|--|--|----------|-------------|--|---------------------|
| Description                       |        |                                                    | ASCII output with test contents                                                            |      |  |  |          |             |  |                     |
| Firmware                          |        |                                                    | Supported on:                                                                              |      |  |  |          |             |  |                     |
|                                   |        |                                                    | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |      |  |  |          |             |  |                     |
|                                   |        |                                                    | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |      |  |  |          |             |  |                     |
| Type                              |        |                                                    | Output                                                                                     |      |  |  |          |             |  |                     |
| Comment                           |        |                                                    | This message has a variable length payload, representing an ASCII string.                  |      |  |  |          |             |  |                     |
|                                   |        | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload |                                                                                            |      |  |  | Checksum |             |  |                     |
| Message Structure                 |        |                                                    | 0xB5 0x62 0x04 0x03 0 + 1*N                                                                |      |  |  |          |             |  | see below CK_A CK_B |
| Payload Contents:                 |        |                                                    |                                                                                            |      |  |  |          |             |  |                     |
| Byte Offset                       | Number |                                                    | Scaling                                                                                    | Name |  |  | Unit     | Description |  |                     |
|                                   | Format |                                                    |                                                                                            |      |  |  |          |             |  |                     |
| Start of repeated block (N times) |        |                                                    |                                                                                            |      |  |  |          |             |  |                     |
| N*1                               | CH     |                                                    | str<br>-<br>-<br>ASCII Character                                                           |      |  |  |          |             |  |                     |
| End of repeated block             |        |                                                    |                                                                                            |      |  |  |          |             |  |                     |

<span id="page-307-1"></span>

## <span id="page-307-0"></span>**32.13.5 UBX-INF-WARNING (0x04 0x01)**

#### **32.13.5.1 ASCII output with warning contents**

| Message                           |        | UBX-INF-WARNING                                                                            |      |  |  |      |             |  |                     |
|-----------------------------------|--------|--------------------------------------------------------------------------------------------|------|--|--|------|-------------|--|---------------------|
| Description                       |        | ASCII output with warning contents                                                         |      |  |  |      |             |  |                     |
| Firmware                          |        | Supported on:                                                                              |      |  |  |      |             |  |                     |
|                                   |        | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |      |  |  |      |             |  |                     |
|                                   |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |      |  |  |      |             |  |                     |
| Type                              |        | Output                                                                                     |      |  |  |      |             |  |                     |
| Comment                           |        | This message has a variable length payload, representing an ASCII string.                  |      |  |  |      |             |  |                     |
|                                   |        | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum                             |      |  |  |      |             |  |                     |
| Message Structure                 |        | 0xB5 0x62 0x04 0x01 0 + 1*N                                                                |      |  |  |      |             |  | see below CK_A CK_B |
| Payload Contents:                 |        |                                                                                            |      |  |  |      |             |  |                     |
| Byte Offset                       | Number | Scaling                                                                                    | Name |  |  | Unit | Description |  |                     |
|                                   | Format |                                                                                            |      |  |  |      |             |  |                     |
| Start of repeated block (N times) |        |                                                                                            |      |  |  |      |             |  |                     |
| N*1                               | CH     | str<br>-<br>-<br>ASCII Character                                                           |      |  |  |      |             |  |                     |
| End of repeated block             |        |                                                                                            |      |  |  |      |             |  |                     |



<span id="page-308-0"></span>

## **32.14 UBX-LOG (0x21)**

Logging Messages: i.e. Log creation, deletion, info and retrieval.

Messages in the LOG class are used to configure and report status information of the logging and batching features.

## <span id="page-308-1"></span>**32.14.1 UBX-LOG-BATCH (0x21 0x11)**

### **32.14.1.1 Batched data**

| Message                                     |        |  | UBX-LOG-BATCH                                    |         |              |  |                                         |                                                                                     |         |          |  |  |
|---------------------------------------------|--------|--|--------------------------------------------------|---------|--------------|--|-----------------------------------------|-------------------------------------------------------------------------------------|---------|----------|--|--|
| Description                                 |        |  | Batched data                                     |         |              |  |                                         |                                                                                     |         |          |  |  |
| Firmware                                    |        |  | Supported on:                                    |         |              |  |                                         |                                                                                     |         |          |  |  |
|                                             |        |  |                                                  |         |              |  |                                         | • u-blox 8 / u-blox M8 with protocol version 23.01                                  |         |          |  |  |
| Type                                        |        |  | Polled                                           |         |              |  |                                         |                                                                                     |         |          |  |  |
| Comment                                     |        |  |                                                  |         |              |  |                                         | This message combines position, velocity and time solution, including accuracy      |         |          |  |  |
|                                             |        |  | figures.                                         |         |              |  |                                         |                                                                                     |         |          |  |  |
|                                             |        |  |                                                  |         |              |  |                                         | The output of this message can be requested via UBX-LOG-RETRIEVEBATCH.              |         |          |  |  |
|                                             |        |  |                                                  |         |              |  |                                         | The content of this message is influenced by UBX-CFG-BATCH. Depending on the        |         |          |  |  |
|                                             |        |  |                                                  |         |              |  |                                         | flags extraPvt and extraOdo some of the fields in this message may not be           |         |          |  |  |
|                                             |        |  |                                                  |         |              |  |                                         | valid. This validity information is also indicated in this message via flags of the |         |          |  |  |
|                                             |        |  | same name.                                       |         |              |  |                                         |                                                                                     |         |          |  |  |
|                                             |        |  |                                                  |         |              |  | See Data Batching for more information. |                                                                                     |         |          |  |  |
|                                             |        |  |                                                  |         |              |  |                                         | Note that during a leap second there may be more or less than 60 seconds in a       |         |          |  |  |
|                                             |        |  | minute.                                          |         |              |  |                                         |                                                                                     |         |          |  |  |
|                                             |        |  | See the description of leap seconds for details. |         |              |  |                                         |                                                                                     |         |          |  |  |
|                                             |        |  | Header                                           | Class   | ID           |  | Length (Bytes)                          |                                                                                     | Payload | Checksum |  |  |
| 0xB5 0x62 0x21<br>0x11<br>Message Structure |        |  | 100                                              |         |              |  | see below CK_A CK_B                     |                                                                                     |         |          |  |  |
| Payload Contents:                           |        |  |                                                  |         |              |  |                                         |                                                                                     |         |          |  |  |
| Byte Offset                                 | Number |  | Scaling                                          | Name    |              |  | Unit                                    | Description                                                                         |         |          |  |  |
|                                             | Format |  |                                                  |         |              |  |                                         |                                                                                     |         |          |  |  |
| 0                                           | U1     |  | -                                                | version |              |  | -                                       | Message version (0x00 for this version)                                             |         |          |  |  |
| 1                                           | X1     |  | -                                                |         | contentValid |  | -                                       | Content validity flags (see graphic below)                                          |         |          |  |  |
| 2                                           | U2     |  | -                                                | msgCnt  |              |  | -                                       | Message counter; increments for each                                                |         |          |  |  |
|                                             |        |  |                                                  |         |              |  |                                         | sent UBX-LOG-BATCH message.                                                         |         |          |  |  |
| 4                                           | U4     |  | -                                                | iTOW    |              |  | ms                                      | GPS time of week of the navigation epoch.                                           |         |          |  |  |
|                                             |        |  |                                                  |         |              |  |                                         | See the description of iTOW for details.                                            |         |          |  |  |
| 8                                           | U2     |  | -                                                | year    |              |  | y                                       | Only valid if extraPvt is set.<br>Year (UTC)                                        |         |          |  |  |
| 10                                          | U1     |  | -                                                | month   |              |  | month                                   | Month, range 112 (UTC)                                                              |         |          |  |  |
| 11                                          | U1     |  | -                                                | day     |              |  | d                                       | Day of month, range 131 (UTC)                                                       |         |          |  |  |
| 12                                          | U1     |  | -                                                | hour    |              |  | h                                       | Hour of day, range 023 (UTC)                                                        |         |          |  |  |
| 13                                          | U1     |  | -                                                | min     |              |  | min                                     | Minute of hour, range 059 (UTC)                                                     |         |          |  |  |
| 14                                          | U1     |  | -                                                | sec     |              |  |                                         | Seconds of minute, range 060 (UTC)                                                  |         |          |  |  |
| 15                                          | X1     |  | -                                                | valid   |              |  | s<br>-                                  | Validity flags (see graphic below)                                                  |         |          |  |  |
| 16                                          | U4     |  | -                                                | tAcc    |              |  | ns                                      | Time accuracy estimate (UTC)                                                        |         |          |  |  |
|                                             |        |  |                                                  |         |              |  |                                         | Only valid if extraPvt is set.                                                      |         |          |  |  |
| 20                                          | I4     |  | -                                                | fracSec |              |  | ns                                      | Fraction of second, range -1e9  1e9 (UTC)                                           |         |          |  |  |



#### UBX-LOG-BATCH continued

| Byte Offset | Number | Scaling | Name          | Unit | Description                               |
|-------------|--------|---------|---------------|------|-------------------------------------------|
|             | Format |         |               |      |                                           |
| 24          | U1     | -       | fixType       | -    | GNSSfix Type:                             |
|             |        |         |               |      | 0: no fix                                 |
|             |        |         |               |      | 2: 2D-fix                                 |
|             |        |         |               |      | 3: 3D-fix                                 |
| 25          | X1     | -       | flags         | -    | Fix status flags (see graphic below)      |
| 26          | X1     | -       | flags2        | -    | Additional flags                          |
| 27          | U1     | -       | numSV         | -    | Number of satellites used in Nav Solution |
|             |        |         |               |      | Only valid if extraPvt is set.            |
| 28          | I4     | 1e-7    | lon           | deg  | Longitude                                 |
| 32          | I4     | 1e-7    | lat           | deg  | Latitude                                  |
| 36          | I4     | -       | height        | mm   | Height above ellipsoid                    |
| 40          | I4     | -       | hMSL          | mm   | Height above mean sea level               |
|             |        |         |               |      | Only valid if extraPvt is set.            |
| 44          | U4     | -       | hAcc          | mm   | Horizontal accuracy estimate              |
| 48          | U4     | -       | vAcc          | mm   | Vertical accuracy estimate                |
|             |        |         |               |      | Only valid if extraPvt is set.            |
| 52          | I4     | -       | velN          | mm/s | NED north velocity                        |
|             |        |         |               |      | Only valid if extraPvt is set.            |
| 56          | I4     | -       | velE          | mm/s | NED east velocity                         |
|             |        |         |               |      | Only valid if extraPvt is set.            |
| 60          | I4     | -       | velD          | mm/s | NED down velocity                         |
|             |        |         |               |      | Only valid if extraPvt is set.            |
| 64          | I4     | -       | gSpeed        | mm/s | Ground Speed (2-D)                        |
| 68          | I4     | 1e-5    | headMot       | deg  | Heading of motion (2-D)                   |
| 72          | U4     | -       | sAcc          | mm/s | Speed accuracy estimate                   |
|             |        |         |               |      | Only valid if extraPvt is set.            |
| 76          | U4     | 1e-5    | headAcc       | deg  | Heading accuracy estimate                 |
|             |        |         |               |      | Only valid if extraPvt is set.            |
| 80          | U2     | 0.01    | pDOP          | -    | Position DOP                              |
|             |        |         |               |      | Only valid if extraPvt is set.            |
| 82          | U1[2]  | -       | reserved1     | -    | Reserved                                  |
| 84          | U4     | -       | distance      | m    | Ground distance since last reset          |
|             |        |         |               |      | Only valid if extraOdo is set.            |
| 88          | U4     | -       | totalDistance | m    | Total cumulative ground distance          |
|             |        |         |               |      | Only valid if extraOdo is set.            |
| 92          | U4     | -       | distanceStd   | m    | Ground distance accuracy (1-sigma)        |
|             |        |         |               |      | Only valid if extraOdo is set.            |
| 96          | U1[4]  | -       | reserved2     | -    | Reserved                                  |



## **Bitfield contentValid**

This graphic explains the bits of contentValid

<span id="page-310-0"></span>

| Name     | Description                                                                                          |
|----------|------------------------------------------------------------------------------------------------------|
| extraPvt | Extra PVT information is valid                                                                       |
|          | The fields iTOW, tAcc, numSV, hMSL, vAcc, velN, velE, velD, sAcc, headAcc and pDOP are only valid if |
|          | this flag is set.                                                                                    |
| extraOdo | Odometer data is valid                                                                               |
|          | The fields distance, totalDistance and distanceStd are only valid if this flag is set.               |
|          | Note: the odometer feature itself must also be enabled.                                              |

## <span id="page-310-1"></span>**Bitfield valid**

This graphic explains the bits of valid



| Name      | Description                             |
|-----------|-----------------------------------------|
| validDate | 1 = valid UTC Date                      |
|           | (see Time Validity section for details) |
| validTime | 1 = valid UTC Time of Day               |
|           | (see Time Validity section for details) |

## <span id="page-310-2"></span>**Bitfield flags**



<span id="page-311-1"></span>

| Name      | Description                                                 |
|-----------|-------------------------------------------------------------|
| gnssFixOK | 1 = valid fix (i.e within DOP & accuracy masks)             |
| diffSoln  | 1 = differential corrections were applied                   |
| psmState  | Power save mode state                                       |
|           | (see Power Management)                                      |
|           | 0: PSM is not active                                        |
|           | 1: Enabled (an intermediate state before Acquisition state) |
|           | 2: Acquisition                                              |
|           | 3: Tracking                                                 |
|           | 4: Power optimized tracking                                 |
|           | 5: Inactive                                                 |

## <span id="page-311-0"></span>**32.14.2 UBX-LOG-CREATE (0x21 0x07)**

## **32.14.2.1 Create log file**

| Message           |                  | UBX-LOG-CREATE                                                                                                                                                                                                                                               |         |               |   |                                                                                                                                                                                                                                                                     |                                                                                                                                                                      |         |          |  |
|-------------------|------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|---------------|---|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|----------|--|
| Description       |                  | Create log file                                                                                                                                                                                                                                              |         |               |   |                                                                                                                                                                                                                                                                     |                                                                                                                                                                      |         |          |  |
| Firmware          |                  | Supported on:<br>• u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                                                                     |         |               |   |                                                                                                                                                                                                                                                                     |                                                                                                                                                                      |         |          |  |
| Type              |                  | Command                                                                                                                                                                                                                                                      |         |               |   |                                                                                                                                                                                                                                                                     |                                                                                                                                                                      |         |          |  |
| Comment           |                  | This message is used to create an initial logging file and activate the logging<br>subsystem.<br>UBX-ACK-ACK or UBX-ACK-NAK are returned to indicate success or failure.<br>This message does not handle activation of recording or filtering of log entries |         |               |   |                                                                                                                                                                                                                                                                     |                                                                                                                                                                      |         |          |  |
|                   |                  | (see UBX-CFG-LOGFILTER).<br>Header                                                                                                                                                                                                                           | Class   | ID            |   | Length (Bytes)                                                                                                                                                                                                                                                      |                                                                                                                                                                      | Payload | Checksum |  |
| Message Structure |                  | 0xB5 0x62 0x21<br>0x07 8<br>see below CK_A CK_B                                                                                                                                                                                                              |         |               |   |                                                                                                                                                                                                                                                                     |                                                                                                                                                                      |         |          |  |
| Payload Contents: |                  |                                                                                                                                                                                                                                                              |         |               |   |                                                                                                                                                                                                                                                                     |                                                                                                                                                                      |         |          |  |
| Byte Offset       | Number<br>Format | Scaling                                                                                                                                                                                                                                                      | Name    |               |   | Unit                                                                                                                                                                                                                                                                | Description                                                                                                                                                          |         |          |  |
| 0                 | U1               | -                                                                                                                                                                                                                                                            | version |               |   | -                                                                                                                                                                                                                                                                   | Message version (0x00 for this version)                                                                                                                              |         |          |  |
| 1                 | X1               | -                                                                                                                                                                                                                                                            | logCfg  |               |   | -                                                                                                                                                                                                                                                                   | Config flags (see graphic below)                                                                                                                                     |         |          |  |
| 2                 | U1               | -                                                                                                                                                                                                                                                            |         | reserved1     |   | -                                                                                                                                                                                                                                                                   | Reserved                                                                                                                                                             |         |          |  |
| 3                 | U1               | logSize<br>-                                                                                                                                                                                                                                                 |         |               | - | Indicates the size of the log:<br>0 (maximum safe size): Ensures that<br>logging will not be interrupted and enough<br>space will be left available for all other<br>uses of the filestore<br>1 (minimum size):<br>2 (user-defined): See 'userDefinedSize'<br>below |                                                                                                                                                                      |         |          |  |
| 4                 | U4               | -                                                                                                                                                                                                                                                            | ze      | userDefinedSi |   | bytes                                                                                                                                                                                                                                                               | Sets the maximum amount of space in the<br>filestore that can be used by the logging<br>task.<br>This field is only applicable if logSize is set<br>to user-defined. |         |          |  |

<span id="page-312-2"></span>

## **Bitfield logCfg**

<span id="page-312-3"></span>This graphic explains the bits of logCfg



| Name     | Description                                                                    |
|----------|--------------------------------------------------------------------------------|
| circular | Log is circular (new entries overwrite old ones in a full log) if this bit set |

## <span id="page-312-0"></span>**32.14.3 UBX-LOG-ERASE (0x21 0x03)**

#### **32.14.3.1 Erase logged data**

| Message           |                   | UBX-LOG-ERASE                                   |    |                                                                                            |         |          |  |  |
|-------------------|-------------------|-------------------------------------------------|----|--------------------------------------------------------------------------------------------|---------|----------|--|--|
| Description       | Erase logged data |                                                 |    |                                                                                            |         |          |  |  |
| Firmware          | Supported on:     |                                                 |    |                                                                                            |         |          |  |  |
|                   |                   |                                                 |    | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |          |  |  |
|                   |                   | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01       |    |                                                                                            |         |          |  |  |
| Type              | Command           |                                                 |    |                                                                                            |         |          |  |  |
| Comment           |                   |                                                 |    | This message deactivates the logging system and erases all logged data.                    |         |          |  |  |
|                   |                   |                                                 |    | UBX-ACK-ACK or UBX-ACK-NAK are returned to indicate success or failure.                    |         |          |  |  |
|                   | Header            | Class                                           | ID | Length (Bytes)                                                                             | Payload | Checksum |  |  |
| Message Structure |                   | 0xB5 0x62 0x21<br>0x03 0<br>see below CK_A CK_B |    |                                                                                            |         |          |  |  |
| No payload        |                   |                                                 |    |                                                                                            |         |          |  |  |

## <span id="page-312-1"></span>**32.14.4 UBX-LOG-FINDTIME (0x21 0x0E)**

#### **32.14.4.1 Find index of a log entry based on a given time**

| Message     | UBX-LOG-FINDTIME                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|-------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Description | Find index of a log entry based on a given time                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Firmware    | Supported on:<br>• u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Type        | Input                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Comment     | This message can be used for a time-based search of a log. It can find the index<br>of the first log entry with time equal to the given time, otherwise the index of the<br>most recent entry with time less than the given time. This index can then be<br>used with the UBX-LOG-RETRIEVE message to provide time-based retrieval of<br>log entries.<br>Searching a log is effective for a given time later than the base date (January<br>1st, 2004). Searching a log for a given time earlier than the base date will result<br>in an 'entry not found' response. (Searching a log for a given time earlier than the<br>base date will result in a UBX-ACK-NAK message in protocol versions less than<br>18).<br>Searching a log for a given time greater than the last recorded entry's time will<br>return the index of the last recorded entry. (If the logging has stopped due to<br>lack of file space, such a search will result in a UBX-ACK-NAK message in |

<span id="page-313-0"></span>

|                   |        |                | protocol versions less than 18). |       |         |                           |                           |                                         |         |                     |
|-------------------|--------|----------------|----------------------------------|-------|---------|---------------------------|---------------------------|-----------------------------------------|---------|---------------------|
|                   |        |                | Header                           | Class | ID      |                           | Length (Bytes)            |                                         | Payload | Checksum            |
| Message Structure |        |                | 0xB5 0x62 0x21                   |       | 0x0E 10 |                           |                           |                                         |         | see below CK_A CK_B |
| Payload Contents: |        |                |                                  |       |         |                           |                           |                                         |         |                     |
| Byte Offset       | Number |                | Scaling                          |       | Name    |                           | Unit                      | Description                             |         |                     |
|                   | Format |                |                                  |       |         |                           |                           |                                         |         |                     |
| 0                 | U1     |                | version<br>-                     |       |         |                           | -                         | Message version (0x00 for this version) |         |                     |
| 1                 | U1     |                | -                                | type  |         |                           | -                         | Message type, 0 for request             |         |                     |
| 2                 | U2     |                | -                                | year  |         |                           | -                         | Year (1-65635) of UTC time              |         |                     |
| 4                 | U1     |                | -                                |       | month   |                           | -                         | Month (1-12) of UTC time                |         |                     |
| 5                 | U1     |                | -                                | day   |         |                           | -                         | Day (1-31) of UTC time                  |         |                     |
| 6                 | U1     |                | -                                | hour  |         |                           | -                         | Hour (0-23) of UTC time                 |         |                     |
| 7                 | U1     | minute<br>-    |                                  |       | -       | Minute (0-59) of UTC time |                           |                                         |         |                     |
| 8                 | U1     | second<br>-    |                                  |       |         | -                         | Second (0-60) of UTC time |                                         |         |                     |
| 9                 | U1     | reserved1<br>- |                                  |       |         | -                         | Reserved                  |                                         |         |                     |

#### **32.14.4.2 Response to FINDTIME request**

| Message           |                  |        | UBX-LOG-FINDTIME                           |                                                      |             |                                          |                                           |                                                                                            |  |  |  |  |
|-------------------|------------------|--------|--------------------------------------------|------------------------------------------------------|-------------|------------------------------------------|-------------------------------------------|--------------------------------------------------------------------------------------------|--|--|--|--|
| Description       |                  |        | Response to FINDTIME request               |                                                      |             |                                          |                                           |                                                                                            |  |  |  |  |
| Firmware          |                  |        | Supported on:                              |                                                      |             |                                          | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |  |  |
| Type              |                  |        | Output                                     |                                                      |             |                                          |                                           |                                                                                            |  |  |  |  |
| Comment           |                  | -      |                                            |                                                      |             |                                          |                                           |                                                                                            |  |  |  |  |
|                   |                  | Header |                                            | Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum |             |                                          |                                           |                                                                                            |  |  |  |  |
| Message Structure |                  |        | 0xB5 0x62 0x21                             | 0x0E 8<br>see below CK_A CK_B                        |             |                                          |                                           |                                                                                            |  |  |  |  |
| Payload Contents: |                  |        |                                            |                                                      |             |                                          |                                           |                                                                                            |  |  |  |  |
| Byte Offset       | Number<br>Format |        | Scaling                                    | Name                                                 |             |                                          | Unit                                      | Description                                                                                |  |  |  |  |
| 0                 | U1               |        | -                                          | version                                              |             |                                          | -                                         | Message version (0x01 for this version)                                                    |  |  |  |  |
| 1                 | U1               |        | -                                          | type                                                 |             |                                          | -                                         | Message type, 1 for response                                                               |  |  |  |  |
| 2                 | U1[2]            |        | -                                          |                                                      | reserved1   |                                          | -                                         | Reserved                                                                                   |  |  |  |  |
| 4                 | U4               |        | -                                          |                                                      | entryNumber |                                          | -                                         | Index of the first log entry with time =                                                   |  |  |  |  |
|                   |                  |        |                                            |                                                      |             |                                          |                                           | given time, otherwise index of the most                                                    |  |  |  |  |
|                   |                  |        | recent entry with time < given time. If    |                                                      |             |                                          |                                           |                                                                                            |  |  |  |  |
|                   |                  |        |                                            |                                                      |             | 0xFFFFFFFF, no log entry found with time |                                           |                                                                                            |  |  |  |  |
|                   |                  |        | <= given time. The indexing of log entries |                                                      |             |                                          |                                           |                                                                                            |  |  |  |  |
|                   |                  |        |                                            |                                                      |             |                                          |                                           | is zero-based.                                                                             |  |  |  |  |

<span id="page-314-1"></span>

## <span id="page-314-0"></span>**32.14.5 UBX-LOG-INFO (0x21 0x08)**

#### **32.14.5.1 Poll for log information**

| Message           |               | UBX-LOG-INFO                                    |    |                                                                                            |         |          |  |  |  |  |  |  |  |  |
|-------------------|---------------|-------------------------------------------------|----|--------------------------------------------------------------------------------------------|---------|----------|--|--|--|--|--|--|--|--|
| Description       |               | Poll for log information                        |    |                                                                                            |         |          |  |  |  |  |  |  |  |  |
| Firmware          | Supported on: |                                                 |    |                                                                                            |         |          |  |  |  |  |  |  |  |  |
|                   |               |                                                 |    | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |          |  |  |  |  |  |  |  |  |
|                   |               |                                                 |    | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |         |          |  |  |  |  |  |  |  |  |
| Type              |               | Poll Request                                    |    |                                                                                            |         |          |  |  |  |  |  |  |  |  |
| Comment           |               |                                                 |    | Upon sending of this message, the receiver returns UBX-LOG-INFO as defined                 |         |          |  |  |  |  |  |  |  |  |
|                   | below.        |                                                 |    |                                                                                            |         |          |  |  |  |  |  |  |  |  |
|                   | Header        | Class                                           | ID | Length (Bytes)                                                                             | Payload | Checksum |  |  |  |  |  |  |  |  |
| Message Structure |               | 0xB5 0x62 0x21<br>0x08 0<br>see below CK_A CK_B |    |                                                                                            |         |          |  |  |  |  |  |  |  |  |
| No payload        |               |                                                 |    |                                                                                            |         |          |  |  |  |  |  |  |  |  |

## **32.14.5.2 Log information**

| Message           |        |        | UBX-LOG-INFO                              |               |                                |  |                |                                                                                            |         |          |  |  |  |
|-------------------|--------|--------|-------------------------------------------|---------------|--------------------------------|--|----------------|--------------------------------------------------------------------------------------------|---------|----------|--|--|--|
| Description       |        |        | Log information                           |               |                                |  |                |                                                                                            |         |          |  |  |  |
| Firmware          |        |        | Supported on:                             |               |                                |  |                |                                                                                            |         |          |  |  |  |
|                   |        |        |                                           |               |                                |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |          |  |  |  |
|                   |        |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |               |                                |  |                |                                                                                            |         |          |  |  |  |
| Type              |        |        | Output                                    |               |                                |  |                |                                                                                            |         |          |  |  |  |
| Comment           |        |        |                                           |               |                                |  |                | This message is used to report information about the logging subsystem.                    |         |          |  |  |  |
|                   |        | Note:  |                                           |               |                                |  |                |                                                                                            |         |          |  |  |  |
|                   |        |        |                                           |               |                                |  |                | • The reported maximum log size will be smaller than that originally specified in          |         |          |  |  |  |
|                   |        |        |                                           |               |                                |  |                | LOG-CREATE due to logging and filestore implementation overheads.                          |         |          |  |  |  |
|                   |        |        |                                           |               |                                |  |                | • Log entries are compressed in a variable length fashion, so it may be difficult          |         |          |  |  |  |
|                   |        |        |                                           |               |                                |  |                | to predict log space usage with any precision.                                             |         |          |  |  |  |
|                   |        |        |                                           |               |                                |  |                | • There may be times when the receiver does not have an accurate time (e.g. if             |         |          |  |  |  |
|                   |        |        |                                           |               |                                |  |                | the week number is not yet known), in which case some entries will not have a              |         |          |  |  |  |
|                   |        |        |                                           |               |                                |  |                | timestamp. This may result in the oldest/newest entry time values not taking               |         |          |  |  |  |
|                   |        |        | account of these entries.                 |               |                                |  |                |                                                                                            |         |          |  |  |  |
|                   |        | Header |                                           | Class         | ID                             |  | Length (Bytes) |                                                                                            | Payload | Checksum |  |  |  |
| Message Structure |        |        | 0xB5 0x62 0x21                            |               | 0x08 48<br>see below CK_A CK_B |  |                |                                                                                            |         |          |  |  |  |
| Payload Contents: |        |        |                                           |               |                                |  |                |                                                                                            |         |          |  |  |  |
| Byte Offset       | Number |        | Scaling                                   | Name          |                                |  | Unit           | Description                                                                                |         |          |  |  |  |
|                   | Format |        |                                           |               |                                |  |                |                                                                                            |         |          |  |  |  |
| 0                 | U1     |        | -                                         | version       |                                |  | -              | Message version (0x01 for this version)                                                    |         |          |  |  |  |
| 1                 | U1[3]  |        | -                                         |               | reserved1                      |  | -              | Reserved                                                                                   |         |          |  |  |  |
| 4                 | U4     |        | -                                         |               | filestoreCapa                  |  | bytes          | The capacity of the filestore                                                              |         |          |  |  |  |
|                   |        |        | city                                      |               |                                |  |                |                                                                                            |         |          |  |  |  |
| 8                 | U1[8]  |        | -                                         |               | reserved2                      |  | -              | Reserved                                                                                   |         |          |  |  |  |
| 16                | U4     |        | -                                         | currentMaxLog |                                |  | bytes          | The maximum size the current log is                                                        |         |          |  |  |  |
|                   |        |        |                                           | Size          |                                |  |                | allowed to grow to                                                                         |         |          |  |  |  |
| 20                | U4     |        | -                                         |               | currentLogSiz                  |  | bytes          | Approximate amount of space in log                                                         |         |          |  |  |  |
|                   |        |        | e<br>currently occupied                   |               |                                |  |                |                                                                                            |         |          |  |  |  |



#### UBX-LOG-INFO continued

| Byte Offset | Number | Scaling | Name         | Unit | Description                                |
|-------------|--------|---------|--------------|------|--------------------------------------------|
|             | Format |         |              |      |                                            |
| 24          | U4     | -       | entryCount   | -    | Number of entries in the log.              |
|             |        |         |              |      | Note: for circular logs this value will    |
|             |        |         |              |      | decrease when a group of entries is        |
|             |        |         |              |      | deleted to make space for new ones.        |
| 28          | U2     | -       | oldestYear   | -    | Oldest entry UTC year (1-65635) or zero if |
|             |        |         |              |      | there are no entries with known time       |
| 30          | U1     | -       | oldestMonth  | -    | Oldest month (1-12)                        |
| 31          | U1     | -       | oldestDay    | -    | Oldest day (1-31)                          |
| 32          | U1     | -       | oldestHour   | -    | Oldest hour (0-23)                         |
| 33          | U1     | -       | oldestMinute | -    | Oldest minute (0-59)                       |
| 34          | U1     | -       | oldestSecond | -    | Oldest second (0-60)                       |
| 35          | U1     | -       | reserved3    | -    | Reserved                                   |
| 36          | U2     | -       | newestYear   | -    | Newest year (1-65635) or zero if there are |
|             |        |         |              |      | no entries with known time                 |
| 38          | U1     | -       | newestMonth  | -    | Newest month (1-12)                        |
| 39          | U1     | -       | newestDay    | -    | Newest day (1-31)                          |
| 40          | U1     | -       | newestHour   | -    | Newest hour (0-23)                         |
| 41          | U1     | -       | newestMinute | -    | Newest minute (0-59)                       |
| 42          | U1     | -       | newestSecond | -    | Newest second (0-60)                       |
| 43          | U1     | -       | reserved4    | -    | Reserved                                   |
| 44          | X1     | -       | status       | -    | Log status flags (see graphic below)       |
| 45          | U1[3]  | -       | reserved5    | -    | Reserved                                   |

## <span id="page-315-0"></span>**Bitfield status**



| Name      | Description                                |
|-----------|--------------------------------------------|
| recording | Log entry recording is currently turned on |
| inactive  | Logging system not active - no log present |
| circular  | The current log is circular                |

<span id="page-316-1"></span>

## <span id="page-316-0"></span>**32.14.6 UBX-LOG-RETRIEVEBATCH (0x21 0x10)**

## **32.14.6.1 Request batch data**

| Message           |        |                                                              | UBX-LOG-RETRIEVEBATCH                                                          |       |        |  |                |                                                                   |         |                     |  |  |  |
|-------------------|--------|--------------------------------------------------------------|--------------------------------------------------------------------------------|-------|--------|--|----------------|-------------------------------------------------------------------|---------|---------------------|--|--|--|
| Description       |        |                                                              | Request batch data                                                             |       |        |  |                |                                                                   |         |                     |  |  |  |
| Firmware          |        |                                                              | Supported on:                                                                  |       |        |  |                |                                                                   |         |                     |  |  |  |
|                   |        |                                                              |                                                                                |       |        |  |                | • u-blox 8 / u-blox M8 with protocol version 23.01                |         |                     |  |  |  |
| Type              |        |                                                              | Command                                                                        |       |        |  |                |                                                                   |         |                     |  |  |  |
| Comment           |        |                                                              | This message is used to request batched data.                                  |       |        |  |                |                                                                   |         |                     |  |  |  |
|                   |        |                                                              | Batch entries are returned in chronological order, using one UBX-LOG-BATCH per |       |        |  |                |                                                                   |         |                     |  |  |  |
|                   |        |                                                              | navigation epoch.                                                              |       |        |  |                |                                                                   |         |                     |  |  |  |
|                   |        |                                                              |                                                                                |       |        |  |                | The speed of transfer can be maximized by using a high data rate. |         |                     |  |  |  |
|                   |        |                                                              | See Data Batching for more information.                                        |       |        |  |                |                                                                   |         |                     |  |  |  |
|                   |        |                                                              | Header                                                                         | Class | ID     |  | Length (Bytes) |                                                                   | Payload | Checksum            |  |  |  |
| Message Structure |        |                                                              | 0xB5 0x62 0x21                                                                 |       | 0x10 4 |  |                |                                                                   |         | see below CK_A CK_B |  |  |  |
| Payload Contents: |        |                                                              |                                                                                |       |        |  |                |                                                                   |         |                     |  |  |  |
| Byte Offset       | Number |                                                              | Scaling                                                                        | Name  |        |  | Unit           | Description                                                       |         |                     |  |  |  |
|                   | Format |                                                              |                                                                                |       |        |  |                |                                                                   |         |                     |  |  |  |
| 0                 | U1     | version<br>-<br>-<br>Message version (0x00 for this version) |                                                                                |       |        |  |                |                                                                   |         |                     |  |  |  |
| 1                 | X1     | flags<br>-<br>-<br>Flags (see graphic below)                 |                                                                                |       |        |  |                |                                                                   |         |                     |  |  |  |
| 2                 | U1[2]  |                                                              | reserved1<br>-<br>-<br>Reserved                                                |       |        |  |                |                                                                   |         |                     |  |  |  |

## <span id="page-316-2"></span>**Bitfield flags**



| Name         | Description                                                             |
|--------------|-------------------------------------------------------------------------|
| sendMonFirst | Send UBX-MON-BATCH message before sending the UBX-LOG-BATCH message(s). |

<span id="page-317-2"></span>

## <span id="page-317-0"></span>**32.14.7 UBX-LOG-RETRIEVEPOSEXTRA (0x21 0x0f)**

### **32.14.7.1 Odometer log entry**

| Message           |        | UBX-LOG-RETRIEVEPOSEXTRA                                       |         |            |                                           |      |                                                                                            |                     |  |  |
|-------------------|--------|----------------------------------------------------------------|---------|------------|-------------------------------------------|------|--------------------------------------------------------------------------------------------|---------------------|--|--|
| Description       |        | Odometer log entry                                             |         |            |                                           |      |                                                                                            |                     |  |  |
| Firmware          |        | Supported on:                                                  |         |            |                                           |      |                                                                                            |                     |  |  |
|                   |        |                                                                |         |            |                                           |      | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                     |  |  |
|                   |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                      |         |            |                                           |      |                                                                                            |                     |  |  |
| Type              |        | Output                                                         |         |            |                                           |      |                                                                                            |                     |  |  |
| Comment           |        | This message is used to report an odometer log entry           |         |            |                                           |      |                                                                                            |                     |  |  |
|                   |        | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum |         |            |                                           |      |                                                                                            |                     |  |  |
| Message Structure |        | 0xB5 0x62 0x21<br>0x0f 32                                      |         |            |                                           |      |                                                                                            | see below CK_A CK_B |  |  |
| Payload Contents: |        |                                                                |         |            |                                           |      |                                                                                            |                     |  |  |
| Byte Offset       | Number | Scaling                                                        | Name    |            |                                           | Unit | Description                                                                                |                     |  |  |
|                   | Format |                                                                |         |            |                                           |      |                                                                                            |                     |  |  |
| 0                 | U4     | -                                                              |         | entryIndex |                                           | -    | The index of this log entry                                                                |                     |  |  |
| 4                 | U1     | -                                                              | version |            |                                           | -    | Message version (0x00 for this version)                                                    |                     |  |  |
| 5                 | U1     | -                                                              |         | reserved1  |                                           | -    | Reserved                                                                                   |                     |  |  |
| 6                 | U2     | -                                                              | year    |            |                                           | -    | Year (1-65635) of UTC time. Will be zero if                                                |                     |  |  |
|                   |        |                                                                |         |            |                                           |      | time not known                                                                             |                     |  |  |
| 8                 | U1     | -                                                              | month   |            |                                           | -    | Month (1-12) of UTC time                                                                   |                     |  |  |
| 9                 | U1     | -                                                              | day     |            |                                           | -    | Day (1-31) of UTC time                                                                     |                     |  |  |
| 10                | U1     | -                                                              | hour    |            |                                           | -    | Hour (0-23) of UTC time                                                                    |                     |  |  |
| 11                | U1     | -                                                              | minute  |            |                                           | -    | Minute (0-59) of UTC time                                                                  |                     |  |  |
| 12                | U1     | -                                                              | second  |            |                                           | -    | Second (0-60) of UTC time                                                                  |                     |  |  |
| 13                | U1[3]  | -                                                              |         | reserved2  |                                           | -    | Reserved                                                                                   |                     |  |  |
| 16                | U4     | distance<br>-                                                  |         | -          | Odometer distance traveled since the last |      |                                                                                            |                     |  |  |
|                   |        |                                                                |         |            |                                           |      | time the odometer was reset by a UBX                                                       |                     |  |  |
|                   |        |                                                                |         |            |                                           |      | NAV-RESETODO                                                                               |                     |  |  |
| 20                | U1[12] | -                                                              |         | reserved3  |                                           | -    | Reserved                                                                                   |                     |  |  |

## <span id="page-317-1"></span>**32.14.8 UBX-LOG-RETRIEVEPOS (0x21 0x0b)**

## **32.14.8.1 Position fix log entry**

| Message           |        |        | UBX-LOG-RETRIEVEPOS                                                                        |       |         |  |                |                                                         |         |                     |  |  |  |  |
|-------------------|--------|--------|--------------------------------------------------------------------------------------------|-------|---------|--|----------------|---------------------------------------------------------|---------|---------------------|--|--|--|--|
| Description       |        |        | Position fix log entry                                                                     |       |         |  |                |                                                         |         |                     |  |  |  |  |
| Firmware          |        |        | Supported on:                                                                              |       |         |  |                |                                                         |         |                     |  |  |  |  |
|                   |        |        | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |       |         |  |                |                                                         |         |                     |  |  |  |  |
|                   |        |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |       |         |  |                |                                                         |         |                     |  |  |  |  |
| Type              |        |        | Output                                                                                     |       |         |  |                |                                                         |         |                     |  |  |  |  |
| Comment           |        |        |                                                                                            |       |         |  |                | This message is used to report a position fix log entry |         |                     |  |  |  |  |
|                   |        | Header |                                                                                            | Class | ID      |  | Length (Bytes) |                                                         | Payload | Checksum            |  |  |  |  |
| Message Structure |        |        | 0xB5 0x62 0x21                                                                             |       | 0x0b 40 |  |                |                                                         |         | see below CK_A CK_B |  |  |  |  |
| Payload Contents: |        |        |                                                                                            |       |         |  |                |                                                         |         |                     |  |  |  |  |
| Byte Offset       | Number |        | Scaling<br>Name<br>Unit<br>Description                                                     |       |         |  |                |                                                         |         |                     |  |  |  |  |
|                   | Format |        |                                                                                            |       |         |  |                |                                                         |         |                     |  |  |  |  |
| 0                 | U4     |        | entryIndex<br>-<br>-<br>The index of this log entry                                        |       |         |  |                |                                                         |         |                     |  |  |  |  |

<span id="page-318-1"></span>

#### UBX-LOG-RETRIEVEPOS continued

| Byte Offset | Number | Scaling | Name      | Unit | Description                               |
|-------------|--------|---------|-----------|------|-------------------------------------------|
|             | Format |         |           |      |                                           |
| 4           | I4     | 1e-7    | lon       | deg  | Longitude                                 |
| 8           | I4     | 1e-7    | lat       | deg  | Latitude                                  |
| 12          | I4     | -       | hMSL      | mm   | Height above mean sea level               |
| 16          | U4     | -       | hAcc      | mm   | Horizontal accuracy estimate              |
| 20          | U4     | -       | gSpeed    | mm/s | Ground speed (2-D)                        |
| 24          | U4     | 1e-5    | heading   | deg  | Heading                                   |
| 28          | U1     | -       | version   | -    | Message version (0x00 for this version)   |
| 29          | U1     | -       | fixType   | -    | Fix type:                                 |
|             |        |         |           |      | 0x01: Dead Reckoning only                 |
|             |        |         |           |      | 0x02: 2D-Fix                              |
|             |        |         |           |      | 0x03: 3D-Fix                              |
|             |        |         |           |      | 0x04: GNSS + Dead Reckoning combined      |
| 30          | U2     | -       | year      | -    | Year (1-65635) of UTC time                |
| 32          | U1     | -       | month     | -    | Month (1-12) of UTC time                  |
| 33          | U1     | -       | day       | -    | Day (1-31) of UTC time                    |
| 34          | U1     | -       | hour      | -    | Hour (0-23) of UTC time                   |
| 35          | U1     | -       | minute    | -    | Minute (0-59) of UTC time                 |
| 36          | U1     | -       | second    | -    | Second (0-60) of UTC time                 |
| 37          | U1     | -       | reserved1 | -    | Reserved                                  |
| 38          | U1     | -       | numSV     | -    | Number of satellites used in the position |
|             |        |         |           |      | fix                                       |
| 39          | U1     | -       | reserved2 | -    | Reserved                                  |

#### <span id="page-318-0"></span>**32.14.9 UBX-LOG-RETRIEVESTRING (0x21 0x0d)**

#### **32.14.9.1 Byte string log entry**

| Message           |        |                                                                | UBX-LOG-RETRIEVESTRING                                         |         |            |  |      |                                                                                            |  |  |  |  |
|-------------------|--------|----------------------------------------------------------------|----------------------------------------------------------------|---------|------------|--|------|--------------------------------------------------------------------------------------------|--|--|--|--|
| Description       |        |                                                                | Byte string log entry                                          |         |            |  |      |                                                                                            |  |  |  |  |
| Firmware          |        |                                                                | Supported on:                                                  |         |            |  |      |                                                                                            |  |  |  |  |
|                   |        |                                                                |                                                                |         |            |  |      | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |  |  |
|                   |        |                                                                | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                      |         |            |  |      |                                                                                            |  |  |  |  |
| Type              |        |                                                                | Output                                                         |         |            |  |      |                                                                                            |  |  |  |  |
| Comment           |        |                                                                | This message is used to report a byte string log entry         |         |            |  |      |                                                                                            |  |  |  |  |
|                   |        |                                                                | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum |         |            |  |      |                                                                                            |  |  |  |  |
| Message Structure |        | 0xB5 0x62 0x21<br>0x0d 16 + 1*byteCount<br>see below CK_A CK_B |                                                                |         |            |  |      |                                                                                            |  |  |  |  |
| Payload Contents: |        |                                                                |                                                                |         |            |  |      |                                                                                            |  |  |  |  |
| Byte Offset       | Number |                                                                | Scaling                                                        | Name    |            |  | Unit | Description                                                                                |  |  |  |  |
|                   | Format |                                                                |                                                                |         |            |  |      |                                                                                            |  |  |  |  |
| 0                 | U4     |                                                                | -                                                              |         | entryIndex |  | -    | The index of this log entry                                                                |  |  |  |  |
| 4                 | U1     |                                                                | -                                                              | version |            |  | -    | Message version (0x00 for this version)                                                    |  |  |  |  |
| 5                 | U1     |                                                                | -                                                              |         | reserved1  |  | -    | Reserved                                                                                   |  |  |  |  |
| 6                 | U2     | year<br>-                                                      |                                                                |         |            |  | -    | Year (1-65635) of UTC time. Will be zero if                                                |  |  |  |  |
|                   |        |                                                                |                                                                |         |            |  |      | time not known                                                                             |  |  |  |  |
| 8                 | U1     |                                                                | -                                                              | month   |            |  | -    | Month (1-12) of UTC time                                                                   |  |  |  |  |

<span id="page-319-1"></span>

#### UBX-LOG-RETRIEVESTRING continued

| Byte Offset                               | Number                | Scaling | Name      | Unit | Description               |  |  |  |  |
|-------------------------------------------|-----------------------|---------|-----------|------|---------------------------|--|--|--|--|
|                                           | Format                |         |           |      |                           |  |  |  |  |
| 9                                         | U1                    | -       | day       | -    | Day (1-31) of UTC time    |  |  |  |  |
| 10                                        | U1                    | -       | hour      | -    | Hour (0-23) of UTC time   |  |  |  |  |
| 11                                        | U1                    | -       | minute    | -    | Minute (0-59) of UTC time |  |  |  |  |
| 12                                        | U1                    | -       | second    | -    | Second (0-60) of UTC time |  |  |  |  |
| 13                                        | U1                    | -       | reserved2 | -    | Reserved                  |  |  |  |  |
| 14                                        | U2                    | -       | byteCount | -    | Size of string in bytes   |  |  |  |  |
| Start of repeated block (byteCount times) |                       |         |           |      |                           |  |  |  |  |
| 16 + 1*N                                  | U1                    | -       | bytes     | -    | The bytes of the string   |  |  |  |  |
|                                           | End of repeated block |         |           |      |                           |  |  |  |  |

## <span id="page-319-0"></span>**32.14.10 UBX-LOG-RETRIEVE (0x21 0x09)**

#### **32.14.10.1 Request log data**

| Message           |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | UBX-LOG-RETRIEVE                                                                                                                                                                             |       |         |  |                |                                                                                            |         |                     |  |  |  |
|-------------------|------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------|---------|--|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|--|
| Description       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Request log data                                                                                                                                                                             |       |         |  |                |                                                                                            |         |                     |  |  |  |
| Firmware          |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Supported on:<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                                                                                                   |       |         |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |  |
| Type              |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Command                                                                                                                                                                                      |       |         |  |                |                                                                                            |         |                     |  |  |  |
| Comment           |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | This message is used to request logged data (log recording must first be<br>disabled, see UBX-CFG-LOGFILTER).<br>Log entries are returned in chronological order, using the messages UBX-LOG |       |         |  |                |                                                                                            |         |                     |  |  |  |
|                   |                  | RETRIEVEPOS and UBX-LOG-RETRIEVESTRING. If the odometer was enabled at<br>the time a position was logged, then message UBX-LOG-RETRIEVEPOSEXTRA will<br>also be used. The maximum number of entries that can be returned in response<br>to a single UBX-LOG-RETRIEVE message is 256. If more entries than this are<br>required the message will need to be sent multiple times with different<br>startNumbers. The retrieve will be stopped if any UBX-LOG message is received.<br>The speed of transfer can be maximized by using a high data rate and<br>temporarily stopping the GPS processing (see UBX-CFG-RST). |                                                                                                                                                                                              |       |         |  |                |                                                                                            |         |                     |  |  |  |
|                   |                  | Header                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                              | Class | ID      |  | Length (Bytes) |                                                                                            | Payload | Checksum            |  |  |  |
| Message Structure |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 0xB5 0x62 0x21                                                                                                                                                                               |       | 0x09 12 |  |                |                                                                                            |         | see below CK_A CK_B |  |  |  |
| Payload Contents: |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                              |       |         |  |                |                                                                                            |         |                     |  |  |  |
| Byte Offset       | Number<br>Format |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Scaling                                                                                                                                                                                      | Name  |         |  | Unit           | Description                                                                                |         |                     |  |  |  |
| 0                 | U4               | startNumber<br>-<br>-<br>Index of first log entry to be transferred. If<br>it is larger than the index of the last<br>available log entry, then the first log entry<br>to be transferred is the last available log<br>entry. The indexing of log entries is zero<br>based.                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                                                              |       |         |  |                |                                                                                            |         |                     |  |  |  |

<span id="page-320-1"></span>

#### UBX-LOG-RETRIEVE continued

| Byte Offset | Number | Scaling | Name       | Unit | Description                                                                                                                                                                                                                                                                                                  |
|-------------|--------|---------|------------|------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|             | Format |         |            |      |                                                                                                                                                                                                                                                                                                              |
| 4           | U4     | -       | entryCount | -    | Number of log entries to transfer in total<br>including the first entry to be transferred.<br>If it is larger than the log entries available<br>starting from the first entry to be<br>transferred, then only the available log<br>entries are transferred followed by a UBX<br>ACK-NAK. The maximum is 256. |
| 8           | U1     | -       | version    | -    | Message version (0x00 for this version)                                                                                                                                                                                                                                                                      |
| 9           | U1[3]  | -       | reserved1  | -    | Reserved                                                                                                                                                                                                                                                                                                     |

## <span id="page-320-0"></span>**32.14.11 UBX-LOG-STRING (0x21 0x04)**

## **32.14.11.1 Store arbitrary string in on-board flash**

| Message                           |        |        | UBX-LOG-STRING                                                                             |       |    |              |                |               |         |                     |  |
|-----------------------------------|--------|--------|--------------------------------------------------------------------------------------------|-------|----|--------------|----------------|---------------|---------|---------------------|--|
| Description                       |        |        | Store arbitrary string in on-board flash                                                   |       |    |              |                |               |         |                     |  |
| Firmware                          |        |        | Supported on:                                                                              |       |    |              |                |               |         |                     |  |
|                                   |        |        | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |       |    |              |                |               |         |                     |  |
|                                   |        |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |       |    |              |                |               |         |                     |  |
| Type                              |        |        | Command                                                                                    |       |    |              |                |               |         |                     |  |
| Comment                           |        |        | This message can be used to store an arbitrary byte string in the on-board flash           |       |    |              |                |               |         |                     |  |
|                                   |        |        | memory. The maximum length that can be stored is 256 bytes.                                |       |    |              |                |               |         |                     |  |
|                                   |        | Header |                                                                                            | Class | ID |              | Length (Bytes) |               | Payload | Checksum            |  |
| Message Structure                 |        |        | 0xB5 0x62 0x21                                                                             |       |    | 0x04 0 + 1*N |                |               |         | see below CK_A CK_B |  |
| Payload Contents:                 |        |        |                                                                                            |       |    |              |                |               |         |                     |  |
| Byte Offset                       | Number |        | Scaling                                                                                    | Name  |    |              | Unit           | Description   |         |                     |  |
|                                   | Format |        |                                                                                            |       |    |              |                |               |         |                     |  |
| Start of repeated block (N times) |        |        |                                                                                            |       |    |              |                |               |         |                     |  |
| N*1                               | U1     |        | bytes<br>-<br>-<br>The string of bytes to be logged                                        |       |    |              |                |               |         |                     |  |
|                                   |        |        |                                                                                            |       |    |              |                | (maximum 256) |         |                     |  |
| End of repeated block             |        |        |                                                                                            |       |    |              |                |               |         |                     |  |

<span id="page-321-0"></span>

## **32.15 UBX-MGA (0x13)**

Multiple GNSS Assistance Messages: i.e. Assistance data for various GNSS. Messages in the MGA class are used for GNSS aiding information from and to the receiver.

## <span id="page-321-1"></span>**32.15.1 UBX-MGA-ACK (0x13 0x60)**

#### **32.15.1.1 UBX-MGA-ACK-DATA0**

| Message           |                  |                | UBX-MGA-ACK-DATA0                                              |         |          |                                                                                                                                                                                                                     |      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |  |  |
|-------------------|------------------|----------------|----------------------------------------------------------------|---------|----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--|--|
| Description       |                  |                | Multiple GNSS acknowledge message                              |         |          |                                                                                                                                                                                                                     |      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |  |  |
| Firmware          |                  |                | Supported on:<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01     |         |          |                                                                                                                                                                                                                     |      | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |  |  |
| Type              |                  |                | Output                                                         |         |          |                                                                                                                                                                                                                     |      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |  |  |
| Comment           |                  |                | assistance message.<br>CFG-NAVX5 message.                      |         |          |                                                                                                                                                                                                                     |      | This message is sent by a u-blox receiver to acknowledge the receipt of an<br>Acknowledgments are enabled by setting the ackAiding parameter in the UBX<br>See the description of flow control for details.                                                                                                                                                                                                                                                                                                                                                                      |  |  |
|                   |                  |                | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum |         |          |                                                                                                                                                                                                                     |      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |  |  |
| Message Structure |                  |                | 0xB5 0x62 0x13<br>0x60 8<br>see below CK_A CK_B                |         |          |                                                                                                                                                                                                                     |      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |  |  |
| Payload Contents: |                  |                |                                                                |         |          |                                                                                                                                                                                                                     |      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |  |  |
| Byte Offset       | Number<br>Format |                | Scaling                                                        | Name    |          |                                                                                                                                                                                                                     | Unit | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |  |  |
| 0                 | U1               | type<br>-<br>- |                                                                |         |          | Type of acknowledgment:<br>0: The message was not used by the<br>receiver (see infoCode field for an<br>indication of why)<br>1: The message was accepted for use by<br>the receiver (the infoCode field will be 0) |      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |  |  |
| 1                 | U1               |                | -                                                              | version |          |                                                                                                                                                                                                                     | -    | Message version (0x00 for this version)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |  |  |
| 2                 | U1               |                | -                                                              |         | infoCode |                                                                                                                                                                                                                     | -    | Provides greater information on what the<br>receiver chose to do with the message<br>contents:<br>0: The receiver accepted the data<br>1: The receiver does not know the time so<br>it cannot use the data (To resolve this a<br>UBX-MGA-INI-TIME_UTC message should<br>be supplied first)<br>2: The message version is not supported<br>by the receiver<br>3: The message size does not match the<br>message version<br>4: The message data could not be stored<br>to the database<br>5: The receiver is not ready to use the<br>message data<br>6: The message type is unknown |  |  |

<span id="page-322-1"></span>

#### UBX-MGA-ACK continued

| Byte Offset | Number | Scaling | Name          | Unit | Description                           |
|-------------|--------|---------|---------------|------|---------------------------------------|
|             | Format |         |               |      |                                       |
| 3           | U1     | -       | msgId         | -    | UBX message ID of the acknowledged    |
|             |        |         |               |      | message                               |
| 4           | U1[4]  | -       | msgPayloadSta | -    | The first 4 bytes of the acknowledged |
|             |        |         | rt            |      | message's payload                     |

#### <span id="page-322-0"></span>**32.15.2 UBX-MGA-ANO (0x13 0x20)**

## **32.15.2.1 Multiple GNSS AssistNow Offline assistance**

| Message           |        |       | UBX-MGA-ANO                                           |                       |           |  |                |                                                                                            |         |  |          |
|-------------------|--------|-------|-------------------------------------------------------|-----------------------|-----------|--|----------------|--------------------------------------------------------------------------------------------|---------|--|----------|
| Description       |        |       |                                                       |                       |           |  |                | Multiple GNSS AssistNow Offline assistance                                                 |         |  |          |
| Firmware          |        |       | Supported on:                                         |                       |           |  |                |                                                                                            |         |  |          |
|                   |        |       |                                                       |                       |           |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |  |          |
|                   |        |       | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01             |                       |           |  |                |                                                                                            |         |  |          |
| Type              |        | Input |                                                       |                       |           |  |                |                                                                                            |         |  |          |
| Comment           |        |       |                                                       |                       |           |  |                | This message is created by the AssistNow Offline service to deliver AssistNow              |         |  |          |
|                   |        |       | Offline assistance to the receiver.                   |                       |           |  |                |                                                                                            |         |  |          |
|                   |        |       | See the description of AssistNow Offline for details. |                       |           |  |                |                                                                                            |         |  |          |
|                   |        |       | Header                                                | Class                 | ID        |  | Length (Bytes) |                                                                                            | Payload |  | Checksum |
| Message Structure |        |       | 0xB5 0x62 0x13<br>0x20 76<br>see below CK_A CK_B      |                       |           |  |                |                                                                                            |         |  |          |
| Payload Contents: |        |       |                                                       |                       |           |  |                |                                                                                            |         |  |          |
| Byte Offset       | Number |       | Scaling                                               | Name                  |           |  | Unit           | Description                                                                                |         |  |          |
|                   | Format |       |                                                       |                       |           |  |                |                                                                                            |         |  |          |
| 0                 | U1     |       | -                                                     | type                  |           |  | -              | Message type (0x00 for this type)                                                          |         |  |          |
| 1                 | U1     |       | -                                                     | version               |           |  | -              | Message version (0x00 for this version)                                                    |         |  |          |
| 2                 | U1     |       | -                                                     | svId                  |           |  | -              | Satellite identifier (see Satellite                                                        |         |  |          |
|                   |        |       |                                                       |                       |           |  |                | Numbering)                                                                                 |         |  |          |
| 3                 | U1     |       | -                                                     | gnssId                |           |  | -              | GNSS identifier (see Satellite Numbering)                                                  |         |  |          |
| 4                 | U1     |       | -                                                     | year                  |           |  | -              | years since the year 2000                                                                  |         |  |          |
| 5                 | U1     |       | month<br>-<br>-<br>month (112)                        |                       |           |  |                |                                                                                            |         |  |          |
| 6                 | U1     |       | -                                                     | day<br>-<br>day (131) |           |  |                |                                                                                            |         |  |          |
| 7                 | U1     |       | reserved1<br>-<br>-<br>Reserved                       |                       |           |  |                |                                                                                            |         |  |          |
| 8                 | U1[64] |       | -                                                     | data                  |           |  | -              | assistance data                                                                            |         |  |          |
| 72                | U1[4]  |       | -                                                     |                       | reserved2 |  | -              | Reserved                                                                                   |         |  |          |

<span id="page-323-1"></span>

### <span id="page-323-0"></span>**32.15.3 UBX-MGA-BDS (0x13 0x03)**

#### **32.15.3.1 UBX-MGA-BDS-EPH**

| Message           |                  |       | UBX-MGA-BDS-EPH                                            |           |               |                 |                                |                                                                                                                                    |  |                     |  |
|-------------------|------------------|-------|------------------------------------------------------------|-----------|---------------|-----------------|--------------------------------|------------------------------------------------------------------------------------------------------------------------------------|--|---------------------|--|
| Description       |                  |       | BeiDou ephemeris assistance                                |           |               |                 |                                |                                                                                                                                    |  |                     |  |
| Firmware          |                  |       | Supported on:<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |           |               |                 |                                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,                                         |  |                     |  |
| Type              |                  | Input |                                                            |           |               |                 |                                |                                                                                                                                    |  |                     |  |
| Comment           |                  |       | receiver.                                                  |           |               |                 |                                | This message allows the delivery of BeiDou D1/D2 ephemeris assistance to a<br>See the description of AssistNow Online for details. |  |                     |  |
|                   |                  |       | Header                                                     | Class     | Payload       | Checksum        |                                |                                                                                                                                    |  |                     |  |
| Message Structure |                  |       | 0xB5 0x62 0x13                                             |           | ID<br>0x03 88 |                 | Length (Bytes)                 |                                                                                                                                    |  | see below CK_A CK_B |  |
| Payload Contents: |                  |       |                                                            |           |               |                 |                                |                                                                                                                                    |  |                     |  |
| Byte Offset       | Number<br>Format |       | Scaling                                                    | Name      |               |                 | Unit                           | Description                                                                                                                        |  |                     |  |
| 0                 | U1               |       | -                                                          | type      |               |                 | -                              | Message type (0x01 for this type)                                                                                                  |  |                     |  |
| 1                 | U1               |       | -                                                          | version   |               |                 | -                              | Message version (0x00 for this version)                                                                                            |  |                     |  |
| 2                 | U1               |       | -                                                          | svId      |               |                 | -                              | BeiDou satellite identifier (see Satellite<br>Numbering)                                                                           |  |                     |  |
| 3                 | U1               |       | -                                                          | reserved1 |               |                 | -                              | Reserved                                                                                                                           |  |                     |  |
| 4                 | U1               |       | -                                                          | SatH1     |               |                 | -                              | Autonomous satellite Health flag                                                                                                   |  |                     |  |
| 5                 | U1               |       | -                                                          | IODC      |               |                 | -                              | Issue of Data, Clock                                                                                                               |  |                     |  |
| 6                 | I2               |       | 2^-66                                                      | a2        |               |                 | s/s^2                          | Time polynomial coefficient 2                                                                                                      |  |                     |  |
| 8                 | I4               |       | 2^-50                                                      | a1        |               |                 | s/s                            | Time polynomial coefficient 1                                                                                                      |  |                     |  |
| 12                | I4               |       | 2^-33                                                      | a0        |               |                 | s                              | Time polynomial coefficient 0                                                                                                      |  |                     |  |
| 16                | U4               |       | 2^3                                                        | toc       |               |                 | s                              | Clock data reference time                                                                                                          |  |                     |  |
| 20                | I2               |       | 0.1                                                        | TGD1      |               |                 | ns                             | Equipment Group Delay Differential                                                                                                 |  |                     |  |
| 22                | U1               |       | -                                                          | URAI      |               |                 | -                              | User Range Accuracy Index                                                                                                          |  |                     |  |
| 23                | U1               |       | -                                                          | IODE      |               |                 | -                              | Issue of Data, Ephemeris                                                                                                           |  |                     |  |
| 24                | U4               |       | 2^3                                                        | toe       |               |                 | s                              | Ephemeris reference time                                                                                                           |  |                     |  |
| 28                | U4               |       | 2^-19                                                      | sqrtA     |               |                 | m^0.5                          | Square root of semi-major axis                                                                                                     |  |                     |  |
| 32                | U4               |       | 2^-33                                                      | e         |               |                 | -                              | Eccentricity                                                                                                                       |  |                     |  |
| 36                | I4               |       | 2^-31                                                      | omega     |               |                 | semi<br>circles                | Argument of perigee                                                                                                                |  |                     |  |
| 40                | I2               |       | 2^-43                                                      | Deltan    |               |                 | semi<br>circles<br>/s          | Mean motion difference from computed<br>value                                                                                      |  |                     |  |
| 42                | I2               |       | 2^-43                                                      | IDOT      |               |                 | semi<br>circles<br>/s          | Rate of inclination angle                                                                                                          |  |                     |  |
| 44                | I4               | 2^-31 |                                                            | M0        |               | semi<br>circles | Mean anomaly at reference time |                                                                                                                                    |  |                     |  |
| 48                | I4               |       | 2^-31                                                      | Omega0    |               |                 | semi<br>circles                | Longitude of ascending node of orbital of<br>plane computed according to reference<br>time                                         |  |                     |  |

<span id="page-324-0"></span>

#### UBX-MGA-BDS continued

| Byte Offset | Number | Scaling | Name      | Unit    | Description                             |
|-------------|--------|---------|-----------|---------|-----------------------------------------|
|             | Format |         |           |         |                                         |
| 52          | I4     | 2^-43   | OmegaDot  | semi    | Rate of right ascension                 |
|             |        |         |           | circles |                                         |
|             |        |         |           | /s      |                                         |
| 56          | I4     | 2^-31   | i0        | semi    | Inclination angle at reference time     |
|             |        |         |           | circles |                                         |
| 60          | I4     | 2^-31   | Cuc       | radian  | Amplitude of cosine harmonic correction |
|             |        |         |           | s       | term to the argument of latitude        |
| 64          | I4     | 2^-31   | Cus       | radian  | Amplitude of sine harmonic correction   |
|             |        |         |           | s       | term to the argument of latitude        |
| 68          | I4     | 2^-6    | Crc       | m       | Amplitude of cosine harmonic correction |
|             |        |         |           |         | term to the orbit radius                |
| 72          | I4     | 2^-6    | Crs       | m       | Amplitude of sine harmonic correction   |
|             |        |         |           |         | term to the orbit radius                |
| 76          | I4     | 2^-31   | Cic       | radian  | Amplitude of cosine harmonic correction |
|             |        |         |           | s       | term to the angle of inclination        |
| 80          | I4     | 2^-31   | Cis       | radian  | Amplitude of sine harmonic correction   |
|             |        |         |           | s       | term to the angle of inclination        |
| 84          | U1[4]  | -       | reserved2 | -       | Reserved                                |

### **32.15.3.2 UBX-MGA-BDS-ALM**

| Message           |        |       | UBX-MGA-BDS-ALM                                                |         |                                |  |         |                                                                                            |  |  |
|-------------------|--------|-------|----------------------------------------------------------------|---------|--------------------------------|--|---------|--------------------------------------------------------------------------------------------|--|--|
| Description       |        |       | BeiDou almanac assistance                                      |         |                                |  |         |                                                                                            |  |  |
| Firmware          |        |       | Supported on:                                                  |         |                                |  |         |                                                                                            |  |  |
|                   |        |       |                                                                |         |                                |  |         | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |
|                   |        |       | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                      |         |                                |  |         |                                                                                            |  |  |
| Type              |        | Input |                                                                |         |                                |  |         |                                                                                            |  |  |
| Comment           |        |       |                                                                |         |                                |  |         | This message allows the delivery of BeiDou almanac assistance to a receiver.               |  |  |
|                   |        |       | See the description of AssistNow Online for details.           |         |                                |  |         |                                                                                            |  |  |
|                   |        |       | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum |         |                                |  |         |                                                                                            |  |  |
| Message Structure |        |       | 0xB5 0x62 0x13                                                 |         | 0x03 40<br>see below CK_A CK_B |  |         |                                                                                            |  |  |
| Payload Contents: |        |       |                                                                |         |                                |  |         |                                                                                            |  |  |
| Byte Offset       | Number |       | Scaling                                                        | Name    |                                |  | Unit    | Description                                                                                |  |  |
|                   | Format |       |                                                                |         |                                |  |         |                                                                                            |  |  |
| 0                 | U1     |       | -                                                              | type    |                                |  | -       | Message type (0x02 for this version)                                                       |  |  |
| 1                 | U1     |       | -                                                              | version |                                |  | -       | Message version (0x00 for this version)                                                    |  |  |
| 2                 | U1     |       | -                                                              | svId    |                                |  | -       | BeiDou satellite identifier (see Satellite                                                 |  |  |
|                   |        |       |                                                                |         |                                |  |         | Numbering)                                                                                 |  |  |
| 3                 | U1     |       | -                                                              |         | reserved1                      |  | -       | Reserved                                                                                   |  |  |
| 4                 | U1     |       | -                                                              | Wna     |                                |  | week    | Almanac Week Number                                                                        |  |  |
| 5                 | U1     |       | toa<br>2^12<br>s<br>Almanac reference time                     |         |                                |  |         |                                                                                            |  |  |
| 6                 | I2     |       | 2^-19                                                          | deltaI  |                                |  | semi    | Almanac correction of orbit reference                                                      |  |  |
|                   |        |       |                                                                |         |                                |  | circles | inclination at reference time                                                              |  |  |

8 U4 2^-11 sqrtA m^0.5 Almanac square root of semi-major axis

<span id="page-325-0"></span>

#### UBX-MGA-BDS continued

| Byte Offset | Number | Scaling | Name      | Unit    | Description                            |
|-------------|--------|---------|-----------|---------|----------------------------------------|
|             | Format |         |           |         |                                        |
| 12          | U4     | 2^-21   | e         | -       | Almanac eccentricity                   |
| 16          | I4     | 2^-23   | omega     | semi    | Almanac argument of perigee            |
|             |        |         |           | circles |                                        |
| 20          | I4     | 2^-23   | M0        | semi    | Almanac mean anomaly at reference time |
|             |        |         |           | circles |                                        |
| 24          | I4     | 2^-23   | Omega0    | semi    | Almanac longitude of ascending node of |
|             |        |         |           | circles | orbit plane at computed according to   |
|             |        |         |           |         | reference time                         |
| 28          | I4     | 2^-38   | omegaDot  | semi    | Almanac rate of right ascension        |
|             |        |         |           | circles |                                        |
|             |        |         |           | /s      |                                        |
| 32          | I2     | 2^-20   | a0        | s       | Almanac satellite clock bias           |
| 34          | I2     | 2^-38   | a1        | s/s     | Almanac satellite clock rate           |
| 36          | U1[4]  | -       | reserved2 | -       | Reserved                               |

### **32.15.3.3 UBX-MGA-BDS-HEALTH**

| Message           |        |        | UBX-MGA-BDS-HEALTH                                                          |                                                      |            |                                       |      |                                                                                            |  |  |  |
|-------------------|--------|--------|-----------------------------------------------------------------------------|------------------------------------------------------|------------|---------------------------------------|------|--------------------------------------------------------------------------------------------|--|--|--|
| Description       |        |        | BeiDou health assistance                                                    |                                                      |            |                                       |      |                                                                                            |  |  |  |
| Firmware          |        |        | Supported on:                                                               |                                                      |            |                                       |      |                                                                                            |  |  |  |
|                   |        |        |                                                                             |                                                      |            |                                       |      | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |  |
|                   |        |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                   |                                                      |            |                                       |      |                                                                                            |  |  |  |
| Type              |        |        | Input                                                                       |                                                      |            |                                       |      |                                                                                            |  |  |  |
| Comment           |        |        | This message allows the delivery of BeiDou health assistance to a receiver. |                                                      |            |                                       |      |                                                                                            |  |  |  |
|                   |        |        |                                                                             |                                                      |            |                                       |      | See the description of AssistNow Online for details.                                       |  |  |  |
|                   |        | Header |                                                                             | Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum |            |                                       |      |                                                                                            |  |  |  |
| Message Structure |        |        | 0xB5 0x62 0x13                                                              | 0x03 68<br>see below CK_A CK_B                       |            |                                       |      |                                                                                            |  |  |  |
| Payload Contents: |        |        |                                                                             |                                                      |            |                                       |      |                                                                                            |  |  |  |
| Byte Offset       | Number |        | Scaling                                                                     | Name                                                 |            |                                       | Unit | Description                                                                                |  |  |  |
|                   | Format |        |                                                                             |                                                      |            |                                       |      |                                                                                            |  |  |  |
| 0                 | U1     |        | -                                                                           | type                                                 |            |                                       | -    | Message type (0x04 for this type)                                                          |  |  |  |
| 1                 | U1     |        | -                                                                           | version                                              |            |                                       | -    | Message version (0x00 for this version)                                                    |  |  |  |
| 2                 | U1[2]  |        | -                                                                           |                                                      | reserved1  |                                       | -    | Reserved                                                                                   |  |  |  |
| 4                 | U2[30] |        | -                                                                           |                                                      | healthCode |                                       | -    | Each two-byte value represents a BeiDou                                                    |  |  |  |
|                   |        |        |                                                                             |                                                      |            |                                       |      | SV (1-30). The 9 LSBs of each byte contain                                                 |  |  |  |
|                   |        |        |                                                                             |                                                      |            |                                       |      | the 9 bit health code from subframe 5                                                      |  |  |  |
|                   |        |        |                                                                             |                                                      |            | pages 7,8 of the D1 message, and from |      |                                                                                            |  |  |  |
|                   |        |        |                                                                             |                                                      |            |                                       |      | subframe 5 pages 35,36 of the D2                                                           |  |  |  |
|                   |        |        |                                                                             |                                                      |            |                                       |      | message.                                                                                   |  |  |  |
| 64                | U1[4]  |        | -                                                                           |                                                      | reserved2  |                                       | -    | Reserved                                                                                   |  |  |  |

<span id="page-326-0"></span>

### **32.15.3.4 UBX-MGA-BDS-UTC**

| Message           |                  |       | UBX-MGA-BDS-UTC                                                                                                                  |         |                                          |  |                |                                                                                            |         |                     |  |
|-------------------|------------------|-------|----------------------------------------------------------------------------------------------------------------------------------|---------|------------------------------------------|--|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|
| Description       |                  |       | BeiDou UTC assistance                                                                                                            |         |                                          |  |                |                                                                                            |         |                     |  |
| Firmware          |                  |       | Supported on:<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                                       |         |                                          |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |
| Type              |                  | Input |                                                                                                                                  |         |                                          |  |                |                                                                                            |         |                     |  |
| Comment           |                  |       | This message allows the delivery of BeiDou UTC assistance to a receiver.<br>See the description of AssistNow Online for details. |         |                                          |  |                |                                                                                            |         |                     |  |
|                   |                  |       | Header                                                                                                                           | Class   | ID                                       |  | Length (Bytes) |                                                                                            | Payload | Checksum            |  |
| Message Structure |                  |       | 0xB5 0x62 0x13<br>0x03 20                                                                                                        |         |                                          |  |                |                                                                                            |         | see below CK_A CK_B |  |
| Payload Contents: |                  |       |                                                                                                                                  |         |                                          |  |                |                                                                                            |         |                     |  |
| Byte Offset       | Number<br>Format |       | Scaling                                                                                                                          | Name    |                                          |  | Unit           | Description                                                                                |         |                     |  |
| 0                 | U1               |       | -                                                                                                                                | type    |                                          |  | -              | Message type (0x05 for this type)                                                          |         |                     |  |
| 1                 | U1               |       | -                                                                                                                                | version |                                          |  | -              | Message version (0x00 for this version)                                                    |         |                     |  |
| 2                 | U1[2]            |       | -                                                                                                                                |         | reserved1                                |  | -              | Reserved                                                                                   |         |                     |  |
| 4                 | I4               |       | 2^-30                                                                                                                            | a0UTC   |                                          |  | s              | BDT clock bias relative to UTC                                                             |         |                     |  |
| 8                 | I4               |       | 2^-50                                                                                                                            | a1UTC   |                                          |  | s/s            | BDT clock rate relative to UTC                                                             |         |                     |  |
| 12                | I1               |       | -                                                                                                                                | dtLS    |                                          |  | s              | Delta time due to leap seconds before the<br>new leap second effective                     |         |                     |  |
| 13                | U1[1]            |       | -                                                                                                                                |         | reserved2                                |  | -              | Reserved                                                                                   |         |                     |  |
| 14                | U1               |       | -                                                                                                                                | wnRec   |                                          |  | week           | BeiDou week number of reception of this<br>UTC parameter set (8-bit truncated)             |         |                     |  |
| 15                | U1               |       | -                                                                                                                                | wnLSF   |                                          |  | week           | Week number of the new leap second                                                         |         |                     |  |
| 16                | U1               |       | -                                                                                                                                | dN      | day<br>Day number of the new leap second |  |                |                                                                                            |         |                     |  |
| 17                | I1               |       | -                                                                                                                                | dtLSF   |                                          |  | s              | Delta time due to leap seconds after the                                                   |         |                     |  |
|                   |                  |       |                                                                                                                                  |         |                                          |  |                | new leap second effective                                                                  |         |                     |  |
| 18                | U1[2]            |       | -                                                                                                                                |         | reserved3                                |  | -              | Reserved                                                                                   |         |                     |  |

## **32.15.3.5 UBX-MGA-BDS-IONO**

| Message           |        | UBX-MGA-BDS-IONO                                                                           |       |         |  |                |                                                      |         |                     |  |  |
|-------------------|--------|--------------------------------------------------------------------------------------------|-------|---------|--|----------------|------------------------------------------------------|---------|---------------------|--|--|
| Description       |        | BeiDou ionosphere assistance                                                               |       |         |  |                |                                                      |         |                     |  |  |
| Firmware          |        | Supported on:                                                                              |       |         |  |                |                                                      |         |                     |  |  |
|                   |        | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |       |         |  |                |                                                      |         |                     |  |  |
|                   |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |       |         |  |                |                                                      |         |                     |  |  |
| Type              |        | Input                                                                                      |       |         |  |                |                                                      |         |                     |  |  |
| Comment           |        | This message allows the delivery of BeiDou ionospheric assistance to a receiver.           |       |         |  |                |                                                      |         |                     |  |  |
|                   |        |                                                                                            |       |         |  |                | See the description of AssistNow Online for details. |         |                     |  |  |
|                   |        | Header                                                                                     | Class | ID      |  | Length (Bytes) |                                                      | Payload | Checksum            |  |  |
| Message Structure |        | 0xB5 0x62 0x13                                                                             |       | 0x03 16 |  |                |                                                      |         | see below CK_A CK_B |  |  |
| Payload Contents: |        |                                                                                            |       |         |  |                |                                                      |         |                     |  |  |
| Byte Offset       | Number | Scaling<br>Name<br>Unit<br>Description                                                     |       |         |  |                |                                                      |         |                     |  |  |
|                   | Format |                                                                                            |       |         |  |                |                                                      |         |                     |  |  |
| 0                 | U1     | -                                                                                          | type  |         |  | -              | Message type (0x06 for this type)                    |         |                     |  |  |

<span id="page-327-1"></span>

#### UBX-MGA-BDS continued

| Byte Offset | Number | Scaling | Name      | Unit   | Description                             |
|-------------|--------|---------|-----------|--------|-----------------------------------------|
|             | Format |         |           |        |                                         |
| 1           | U1     | -       | version   | -      | Message version (0x00 for this version) |
| 2           | U1[2]  | -       | reserved1 | -      | Reserved                                |
| 4           | I1     | 2^-30   | alpha0    | s      | Ionospheric parameter alpha0            |
| 5           | I1     | 2^-27   | alpha1    | s/pi   | Ionospheric parameter alpha1            |
| 6           | I1     | 2^-24   | alpha2    | s/pi^2 | Ionospheric parameter alpha2            |
| 7           | I1     | 2^-24   | alpha3    | s/pi^3 | Ionospheric parameter alpha3            |
| 8           | I1     | 2^11    | beta0     | s      | Ionospheric parameter beta0             |
| 9           | I1     | 2^14    | beta1     | s/pi   | Ionospheric parameter beta1             |
| 10          | I1     | 2^16    | beta2     | s/pi^2 | Ionospheric parameter beta2             |
| 11          | I1     | 2^16    | beta3     | s/pi^3 | Ionospheric parameter beta3             |
| 12          | U1[4]  | -       | reserved2 | -      | Reserved                                |

## <span id="page-327-0"></span>**32.15.4 UBX-MGA-DBD (0x13 0x80)**

#### **32.15.4.1 Poll the navigation database**

| Message           |                | UBX-MGA-DBD                  |        |                                                                                                                                                                                                                                         |         |                     |  |  |  |  |
|-------------------|----------------|------------------------------|--------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|---------------------|--|--|--|--|
| Description       |                | Poll the navigation database |        |                                                                                                                                                                                                                                         |         |                     |  |  |  |  |
| Firmware          | Supported on:  |                              |        |                                                                                                                                                                                                                                         |         |                     |  |  |  |  |
|                   |                |                              |        | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,                                                                                                                                              |         |                     |  |  |  |  |
|                   |                |                              |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                                                                                                                                                               |         |                     |  |  |  |  |
| Type              | Poll Request   |                              |        |                                                                                                                                                                                                                                         |         |                     |  |  |  |  |
| Comment           |                |                              |        | Poll the whole navigation data base. The receiver will send all available data from                                                                                                                                                     |         |                     |  |  |  |  |
|                   |                |                              |        | its internal database. The receiver will indicate the finish of the transmission<br>with a UBX-MGA-ACK. The msgPayloadStart field of the UBX-MGA-ACK message<br>will contain a U4 representing the number of UBX-MGA-DBD-DATA* messages |         |                     |  |  |  |  |
|                   | sent.          |                              |        |                                                                                                                                                                                                                                         |         |                     |  |  |  |  |
|                   | Header         | Class                        | ID     | Length (Bytes)                                                                                                                                                                                                                          | Payload | Checksum            |  |  |  |  |
| Message Structure | 0xB5 0x62 0x13 |                              | 0x80 0 |                                                                                                                                                                                                                                         |         | see below CK_A CK_B |  |  |  |  |
| No payload        |                |                              |        |                                                                                                                                                                                                                                         |         |                     |  |  |  |  |

### **32.15.4.2 Navigation database dump entry**

| Message     | UBX-MGA-DBD                                                                                |
|-------------|--------------------------------------------------------------------------------------------|
| Description | Navigation database dump entry                                                             |
| Firmware    | Supported on:                                                                              |
|             | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |
|             | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |
| Type        | Input/Output                                                                               |
| Comment     | UBX-MGA-DBD messages are only intended to be sent back to the same                         |
|             | receiver that generated them.                                                              |
|             | Navigation database entry. The data fields are firmware-specific. Transmission             |
|             | of this type of message will be acknowledged by UBX-MGA-ACK messages, if                   |
|             | acknowledgment has been enabled.                                                           |
|             | See the description of flow control for details.                                           |
|             | The maximum payload size for firmware 2.01 onwards is 164 bytes (which makes               |

<span id="page-328-1"></span>

|                                   |        |                                          |                                        | the maximum message size 172 bytes). |                                             |                                      |   |          |  |  |  |
|-----------------------------------|--------|------------------------------------------|----------------------------------------|--------------------------------------|---------------------------------------------|--------------------------------------|---|----------|--|--|--|
|                                   |        |                                          | Header                                 | Class                                | ID<br>Length (Bytes)<br>Payload<br>Checksum |                                      |   |          |  |  |  |
| Message Structure                 |        |                                          | 0xB5 0x62 0x13                         |                                      |                                             | 0x80 12 + 1*N<br>see below CK_A CK_B |   |          |  |  |  |
| Payload Contents:                 |        |                                          |                                        |                                      |                                             |                                      |   |          |  |  |  |
| Byte Offset                       | Number |                                          | Scaling<br>Name<br>Unit<br>Description |                                      |                                             |                                      |   |          |  |  |  |
|                                   | Format |                                          |                                        |                                      |                                             |                                      |   |          |  |  |  |
| 0                                 | U1[12] |                                          | -                                      |                                      | reserved1                                   |                                      | - | Reserved |  |  |  |
| Start of repeated block (N times) |        |                                          |                                        |                                      |                                             |                                      |   |          |  |  |  |
| 12 + 1*N                          | U1     | data<br>-<br>-<br>firmware-specific data |                                        |                                      |                                             |                                      |   |          |  |  |  |
| End of repeated block             |        |                                          |                                        |                                      |                                             |                                      |   |          |  |  |  |

## <span id="page-328-0"></span>**32.15.5 UBX-MGA-FLASH (0x13 0x21)**

## **32.15.5.1 UBX-MGA-FLASH-DATA**

| Message                              |                  |       | UBX-MGA-FLASH-DATA                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |         |      |            |                |                                                                                            |         |                     |  |
|--------------------------------------|------------------|-------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|------|------------|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|
| Description                          |                  |       | Transfer MGA-ANO data block to flash                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |         |      |            |                |                                                                                            |         |                     |  |
| Firmware                             |                  |       | Supported on:<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |         |      |            |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |
| Type                                 |                  | Input |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |         |      |            |                |                                                                                            |         |                     |  |
| Comment                              |                  |       | This message is used to transfer a block of MGA-ANO data from host to the<br>receiver. Upon reception of this message, the receiver will write the payload data<br>to its internal non-volatile memory (flash). Also, on reception of the first MGA<br>FLASH-DATA message, the receiver will erase the flash allocated to storing any<br>existing MGA-ANO data. The payload can be up to 512 bytes. Payloads larger<br>than this would exceed the receiver's internal buffering capabilities. The receiver<br>will ACK/NACK this message using the message alternatives given below. The<br>host shall wait for an acknowledge message before sending the next data block.<br>See Flash-based AssistNow Offline for details. |         |      |            |                |                                                                                            |         |                     |  |
|                                      |                  |       | Header                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Class   | ID   |            | Length (Bytes) |                                                                                            | Payload | Checksum            |  |
| Message Structure                    |                  |       | 0xB5 0x62 0x13                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |         | 0x21 | 6 + 1*size |                |                                                                                            |         | see below CK_A CK_B |  |
| Payload Contents:                    |                  |       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |         |      |            |                |                                                                                            |         |                     |  |
| Byte Offset                          | Number<br>Format |       | Scaling                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Name    |      |            | Unit           | Description                                                                                |         |                     |  |
| 0                                    | U1               |       | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | type    |      |            | -              | Message type (0x01 for this type)                                                          |         |                     |  |
| 1                                    | U1               |       | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | version |      |            | -              | Message version (0x00 for this version)                                                    |         |                     |  |
| 2                                    | U2               |       | sequence<br>-<br>-<br>Message sequence number, starting at 0<br>and increamenting by 1 for each MGA<br>FLASH-DATA message sent.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |         |      |            |                |                                                                                            |         |                     |  |
| 4                                    | U2               |       | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | size    |      |            | -              | Payload size in bytes.                                                                     |         |                     |  |
| Start of repeated block (size times) |                  |       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |         |      |            |                |                                                                                            |         |                     |  |
| 6 + 1*N                              | U1               |       | data<br>-<br>-<br>Payload data.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |         |      |            |                |                                                                                            |         |                     |  |
| End of repeated block                |                  |       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |         |      |            |                |                                                                                            |         |                     |  |

<span id="page-329-0"></span>

## **32.15.5.2 UBX-MGA-FLASH-STOP**

| Message           |        |                         | UBX-MGA-FLASH-STOP                                                              |       |      |                                         |                |                                                                                            |         |                     |
|-------------------|--------|-------------------------|---------------------------------------------------------------------------------|-------|------|-----------------------------------------|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|
| Description       |        |                         | Finish flashing MGA-ANO data                                                    |       |      |                                         |                |                                                                                            |         |                     |
| Firmware          |        |                         | Supported on:                                                                   |       |      |                                         |                |                                                                                            |         |                     |
|                   |        |                         |                                                                                 |       |      |                                         |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |
|                   |        |                         | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                       |       |      |                                         |                |                                                                                            |         |                     |
| Type              |        | Input                   |                                                                                 |       |      |                                         |                |                                                                                            |         |                     |
| Comment           |        |                         |                                                                                 |       |      |                                         |                | This message is used to tell the receiver that there are no more MGA-FLASH                 |         |                     |
|                   |        |                         | type 1 messages coming, and that it can do any final internal operations needed |       |      |                                         |                |                                                                                            |         |                     |
|                   |        |                         | to commit the data to flash as a background activity. A UBX-MGA-ACK message     |       |      |                                         |                |                                                                                            |         |                     |
|                   |        |                         |                                                                                 |       |      |                                         |                | will be sent at the end of this process. Note that there may be a delay of several         |         |                     |
|                   |        |                         |                                                                                 |       |      |                                         |                | seconds before the UBX-MGA-ACK for this message is sent because of the time                |         |                     |
|                   |        |                         |                                                                                 |       |      |                                         |                | taken for this processing. See Flash-based AssistNow Offline for details.                  |         |                     |
|                   |        | Header                  |                                                                                 | Class | ID   |                                         | Length (Bytes) |                                                                                            | Payload | Checksum            |
| Message Structure |        |                         | 0xB5 0x62 0x13                                                                  |       | 0x21 | 2                                       |                |                                                                                            |         | see below CK_A CK_B |
| Payload Contents: |        |                         |                                                                                 |       |      |                                         |                |                                                                                            |         |                     |
| Byte Offset       | Number | Scaling<br>Name<br>Unit |                                                                                 |       |      | Description                             |                |                                                                                            |         |                     |
|                   | Format |                         |                                                                                 |       |      |                                         |                |                                                                                            |         |                     |
| 0                 | U1     | type<br>-<br>-          |                                                                                 |       |      | Message type (0x02 for this type)       |                |                                                                                            |         |                     |
| 1                 | U1     | version<br>-<br>-       |                                                                                 |       |      | Message version (0x00 for this version) |                |                                                                                            |         |                     |

## **32.15.5.3 UBX-MGA-FLASH-ACK**

| Message           |        |        | UBX-MGA-FLASH-ACK                                                         |                                                      |  |  |      |                                                                                            |  |  |  |  |
|-------------------|--------|--------|---------------------------------------------------------------------------|------------------------------------------------------|--|--|------|--------------------------------------------------------------------------------------------|--|--|--|--|
| Description       |        |        | Acknowledge last FLASH-DATA or -STOP                                      |                                                      |  |  |      |                                                                                            |  |  |  |  |
| Firmware          |        |        | Supported on:                                                             |                                                      |  |  |      |                                                                                            |  |  |  |  |
|                   |        |        |                                                                           |                                                      |  |  |      | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |  |  |
|                   |        |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                 |                                                      |  |  |      |                                                                                            |  |  |  |  |
| Type              |        |        | Output                                                                    |                                                      |  |  |      |                                                                                            |  |  |  |  |
| Comment           |        |        |                                                                           |                                                      |  |  |      | This message reports an ACK/NACK to the host for the last MGA-FLASH type 1                 |  |  |  |  |
|                   |        |        | or type 2 message message received. See Flash-based AssistNow Offline for |                                                      |  |  |      |                                                                                            |  |  |  |  |
|                   |        |        | details.                                                                  |                                                      |  |  |      |                                                                                            |  |  |  |  |
|                   |        | Header |                                                                           | Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum |  |  |      |                                                                                            |  |  |  |  |
| Message Structure |        |        |                                                                           | 0xB5 0x62 0x13<br>0x21<br>6<br>see below CK_A CK_B   |  |  |      |                                                                                            |  |  |  |  |
| Payload Contents: |        |        |                                                                           |                                                      |  |  |      |                                                                                            |  |  |  |  |
| Byte Offset       | Number |        | Scaling                                                                   | Name                                                 |  |  | Unit | Description                                                                                |  |  |  |  |
|                   | Format |        |                                                                           |                                                      |  |  |      |                                                                                            |  |  |  |  |
| 0                 | U1     |        | -                                                                         | type                                                 |  |  | -    | Message type (0x03 for this type)                                                          |  |  |  |  |
| 1                 | U1     |        | -                                                                         | version                                              |  |  | -    | Message version (0x00 for this version)                                                    |  |  |  |  |
| 2                 | U1     |        | -                                                                         | ack                                                  |  |  | -    | Acknowledgment type. 0 - ACK: Message                                                      |  |  |  |  |
|                   |        |        |                                                                           |                                                      |  |  |      | received and written to flash. 1 - NACK:                                                   |  |  |  |  |
|                   |        |        | Problem with last message, re                                             |                                                      |  |  |      |                                                                                            |  |  |  |  |
|                   |        |        | transmission required (this only happens                                  |                                                      |  |  |      |                                                                                            |  |  |  |  |
|                   |        |        |                                                                           |                                                      |  |  |      | while acknowledging a UBX-MGA_FLASH_                                                       |  |  |  |  |
|                   |        |        |                                                                           |                                                      |  |  |      | DATA message). 2 - NACK: problem with                                                      |  |  |  |  |
|                   |        |        |                                                                           |                                                      |  |  |      | last message, give up.                                                                     |  |  |  |  |

<span id="page-330-1"></span>

#### UBX-MGA-FLASH continued

| Byte Offset | Number | Scaling | Name      | Unit | Description                        |
|-------------|--------|---------|-----------|------|------------------------------------|
|             | Format |         |           |      |                                    |
| 3           | U1     | -       | reserved1 | -    | Reserved                           |
| 4           | U2     | -       | sequence  | -    | If acknowledging a UBX-MGA-FLASH   |
|             |        |         |           |      | DATA message this is the Message   |
|             |        |         |           |      | sequence number being ack'ed. If   |
|             |        |         |           |      | acknowledging a UBX-MGA-FLASH-STOP |
|             |        |         |           |      | message it will be set to 0xffff.  |

#### <span id="page-330-0"></span>**32.15.6 UBX-MGA-GAL (0x13 0x02)**

### **32.15.6.1 UBX-MGA-GAL-EPH**

| Message           |                  |       | UBX-MGA-GAL-EPH                             |         |           |  |                       |                                                                                                                                         |                                         |                     |  |
|-------------------|------------------|-------|---------------------------------------------|---------|-----------|--|-----------------------|-----------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|---------------------|--|
| Description       |                  |       | Galileo ephemeris assistance                |         |           |  |                       |                                                                                                                                         |                                         |                     |  |
| Firmware          |                  |       | Supported on:<br>3, 22, 22.01, 23 and 23.01 |         |           |  |                       | • u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.                                                 |                                         |                     |  |
| Type              |                  | Input |                                             |         |           |  |                       |                                                                                                                                         |                                         |                     |  |
| Comment           |                  |       |                                             |         |           |  |                       | This message allows the delivery of Galileo ephemeris assistance to a receiver.<br>See the description of AssistNow Online for details. |                                         |                     |  |
|                   |                  |       | Header                                      | Class   | ID        |  | Length (Bytes)        |                                                                                                                                         | Payload                                 | Checksum            |  |
| Message Structure |                  |       | 0xB5 0x62 0x13                              |         | 0x02 76   |  |                       |                                                                                                                                         |                                         | see below CK_A CK_B |  |
| Payload Contents: |                  |       |                                             |         |           |  |                       |                                                                                                                                         |                                         |                     |  |
| Byte Offset       | Number<br>Format |       | Scaling                                     | Name    |           |  | Unit                  | Description                                                                                                                             |                                         |                     |  |
| 0                 | U1               |       | -                                           | type    |           |  | -                     | Message type (0x01 for this type)                                                                                                       |                                         |                     |  |
| 1                 | U1               |       | -                                           | version |           |  | -                     |                                                                                                                                         | Message version (0x00 for this version) |                     |  |
| 2                 | U1               |       | -                                           | svId    |           |  | -                     | Galileo Satellite identifier (see Satellite                                                                                             |                                         |                     |  |
|                   |                  |       |                                             |         |           |  |                       | Numbering)                                                                                                                              |                                         |                     |  |
| 3                 | U1               |       | -                                           |         | reserved1 |  | -                     | Reserved                                                                                                                                |                                         |                     |  |
| 4                 | U2               |       | -                                           | iodNav  |           |  | -                     | Ephemeris and clock correction Issue of<br>Data                                                                                         |                                         |                     |  |
| 6                 | I2               |       | 2^-43                                       | deltaN  |           |  | semi<br>circles<br>/s | Mean motion difference from computed<br>value                                                                                           |                                         |                     |  |
| 8                 | I4               |       | 2^-31                                       | m0      |           |  | semi<br>circles       | Mean anomaly at reference time                                                                                                          |                                         |                     |  |
| 12                | U4               |       | 2^-33                                       | e       |           |  | -                     | Eccentricity                                                                                                                            |                                         |                     |  |
| 16                | U4               |       | 2^-19                                       | sqrtA   |           |  | m^0.5                 | Square root of the semi-major axis                                                                                                      |                                         |                     |  |
| 20                | I4               |       | 2^-31                                       | omega0  |           |  | semi                  | Longitude of ascending node of orbital                                                                                                  |                                         |                     |  |
|                   |                  |       |                                             |         |           |  | circles               | plane at weekly epoch                                                                                                                   |                                         |                     |  |
| 24                | I4               |       | 2^-31                                       | i0      |           |  | semi<br>circles       | Inclination angle at reference time                                                                                                     |                                         |                     |  |
| 28                | I4               |       | 2^-31                                       | omega   |           |  | semi                  | Argument of perigee                                                                                                                     |                                         |                     |  |
|                   |                  |       |                                             |         |           |  | circles               |                                                                                                                                         |                                         |                     |  |



#### UBX-MGA-GAL continued

| Byte Offset | Number | Scaling | Name          | Unit    | Description                                 |
|-------------|--------|---------|---------------|---------|---------------------------------------------|
|             | Format |         |               |         |                                             |
| 32          | I4     | 2^-43   | omegaDot      | semi    | Rate of change of right ascension           |
|             |        |         |               | circles |                                             |
|             |        |         |               | /s      |                                             |
| 36          | I2     | 2^-43   | iDot          | semi    | Rate of change of inclination angle         |
|             |        |         |               | circles |                                             |
|             |        |         |               | /s      |                                             |
| 38          | I2     | 2^-29   | cuc           | radian  | Amplitude of the cosine harmonic            |
|             |        |         |               | s       | correction term to the argument of          |
|             |        |         |               |         | latitude                                    |
| 40          | I2     | 2^-29   | cus           | radian  | Amplitude of the sine harmonic correction   |
|             |        |         |               | s       | term to the argument of latitude            |
| 42          | I2     | 2^-5    | crc           | radian  | Amplitude of the cosine harmonic            |
|             |        |         |               | s       | correction term to the orbit radius         |
| 44          | I2     | 2^-5    | crs           | radian  | Amplitude of the sine harmonic correction   |
|             |        |         |               | s       | term to the orbit radius                    |
| 46          | I2     | 2^-29   | cic           | radian  | Amplitude of the cosine harmonic            |
|             |        |         |               | s       | correction term to the angle of inclination |
| 48          | I2     | 2^-29   | cis           | radian  | Amplitude of the sine harmonic correction   |
|             |        |         |               | s       | term to the angle of inclination            |
| 50          | U2     | 60      | toe           | s       | Ephemeris reference time                    |
| 52          | I4     | 2^-34   | af0           | s       | SV clock bias correction coefficient        |
| 56          | I4     | 2^-46   | af1           | s/s     | SV clock drift correction coefficient       |
| 60          | I1     | 2^-59   | af2           | s/s     | SV clock drift rate correction coefficient  |
|             |        |         |               | square  |                                             |
|             |        |         |               | d       |                                             |
| 61          | U1     | -       | sisaIndexE1E5 | -       | Signal-In-Space Accuracy index for dual     |
|             |        |         | b             |         | frequency E1-E5b                            |
| 62          | U2     | 60      | toc           | s       | Clock correction data reference Time of     |
|             |        |         |               |         | Week                                        |
| 64          | I2     | 2^-32   | bgdE1E5b      | s       | E1-E5b Broadcast Group Delay                |
| 66          | U1[2]  | -       | reserved2     | -       | Reserved                                    |
| 68          | U1     | -       | healthE1B     | -       | E1-B Signal Health Status                   |
| 69          | U1     | -       | dataValidityE | -       | E1-B Data Validity Status                   |
|             |        |         | 1B            |         |                                             |
| 70          | U1     | -       | healthE5b     | -       | E5b Signal Health Status                    |
| 71          | U1     | -       | dataValidityE | -       | E5b Data Validity Status                    |
|             |        |         | 5b            |         |                                             |
| 72          | U1[4]  | -       | reserved3     | -       | Reserved                                    |

<span id="page-332-0"></span>

#### **32.15.6.2 UBX-MGA-GAL-ALM**

| Message           |                  | UBX-MGA-GAL-ALM             |                                             |            |           |       |                                                                                             |                                                                                                                                       |         |                     |
|-------------------|------------------|-----------------------------|---------------------------------------------|------------|-----------|-------|---------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------|---------|---------------------|
| Description       |                  |                             | Galileo almanac assistance                  |            |           |       |                                                                                             |                                                                                                                                       |         |                     |
| Firmware          |                  |                             | Supported on:<br>3, 22, 22.01, 23 and 23.01 |            |           |       |                                                                                             | • u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.                                               |         |                     |
| Type              |                  |                             | Input                                       |            |           |       |                                                                                             |                                                                                                                                       |         |                     |
| Comment           |                  |                             |                                             |            |           |       |                                                                                             | This message allows the delivery of Galileo almanac assistance to a receiver.<br>See the description of AssistNow Online for details. |         |                     |
|                   |                  |                             | Header                                      | Class      | ID        |       | Length (Bytes)                                                                              |                                                                                                                                       | Payload | Checksum            |
| Message Structure |                  | 0xB5 0x62 0x13<br>0x02 32   |                                             |            |           |       |                                                                                             |                                                                                                                                       |         | see below CK_A CK_B |
| Payload Contents: |                  |                             |                                             |            |           |       |                                                                                             |                                                                                                                                       |         |                     |
| Byte Offset       | Number<br>Format |                             | Scaling<br>Name                             |            |           |       | Unit                                                                                        | Description                                                                                                                           |         |                     |
| 0                 | U1               |                             | -                                           | type       |           |       | -                                                                                           | Message type (0x02 for this type)                                                                                                     |         |                     |
| 1                 | U1               |                             | -                                           | version    |           |       | -                                                                                           | Message version (0x00 for this version)                                                                                               |         |                     |
| 2                 | U1               |                             | -                                           | svId       |           |       | -                                                                                           | Galileo Satellite identifier (see Satellite                                                                                           |         |                     |
|                   |                  |                             |                                             |            |           |       |                                                                                             | Numbering)                                                                                                                            |         |                     |
| 3                 | U1               |                             | -                                           |            | reserved1 |       |                                                                                             | Reserved                                                                                                                              |         |                     |
| 4                 | U1               |                             | -                                           | ioda       |           |       | -                                                                                           | Almanac Issue of Data                                                                                                                 |         |                     |
| 5                 | U1               |                             | -                                           | almWNa     |           |       | week                                                                                        | Almanac reference week number                                                                                                         |         |                     |
| 6                 | U2               |                             | 600                                         | toa        |           |       | s                                                                                           | Almanac reference time                                                                                                                |         |                     |
| 8                 | I2               |                             | 2^-9                                        | deltaSqrtA |           | m^0.5 | Difference with respect to the square root<br>of the nominal semi-major axis (29 600<br>km) |                                                                                                                                       |         |                     |
| 10                | U2               |                             | 2^-16                                       | e          |           |       | -                                                                                           | Eccentricity                                                                                                                          |         |                     |
| 12                | I2               |                             | 2^-14                                       | deltaI     |           |       | semi<br>circles                                                                             | Inclination at reference time relative to i0<br>= 56 degree                                                                           |         |                     |
| 14                | I2               |                             | 2^-15                                       | omega0     |           |       | semi<br>circles                                                                             | Longitude of ascending node of orbital<br>plane at weekly epoch                                                                       |         |                     |
| 16                | I2               |                             | 2^-33                                       |            | omegaDot  |       | semi<br>circles<br>/s                                                                       | Rate of change of right ascension                                                                                                     |         |                     |
| 18                | I2               |                             | 2^-15                                       | omega      |           |       | semi<br>circles                                                                             | Argument of perigee                                                                                                                   |         |                     |
| 20                | I2               |                             | 2^-15                                       | m0         |           |       | semi<br>circles                                                                             | Satellite mean anomaly at reference time                                                                                              |         |                     |
| 22                | I2               |                             | 2^-19                                       | af0        |           |       |                                                                                             | Satellite clock correction bias 'truncated'                                                                                           |         |                     |
| 24                | I2               |                             | 2^-38                                       | af1        |           | s/s   | Satellite clock correction linear 'truncated'                                               |                                                                                                                                       |         |                     |
| 26                | U1               |                             | -                                           | healthE1B  |           |       | -                                                                                           | Satellite E1-B signal health status                                                                                                   |         |                     |
| 27                | U1               |                             | -                                           |            |           |       | -                                                                                           | Satellite E5b signal health status                                                                                                    |         |                     |
| 28                | U1[4]            | healthE5b<br>reserved2<br>- |                                             |            |           | -     | Reserved                                                                                    |                                                                                                                                       |         |                     |

<span id="page-333-0"></span>

## **32.15.6.3 UBX-MGA-GAL-TIMEOFFSET**

| Message           |        |                                                                      | UBX-MGA-GAL-TIMEOFFSET             |         |                                                      |  |       |                                                                                         |  |  |  |
|-------------------|--------|----------------------------------------------------------------------|------------------------------------|---------|------------------------------------------------------|--|-------|-----------------------------------------------------------------------------------------|--|--|--|
| Description       |        |                                                                      | Galileo GPS time offset assistance |         |                                                      |  |       |                                                                                         |  |  |  |
| Firmware          |        |                                                                      | Supported on:                      |         |                                                      |  |       |                                                                                         |  |  |  |
|                   |        |                                                                      |                                    |         |                                                      |  |       | • u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20. |  |  |  |
|                   |        |                                                                      | 3, 22, 22.01, 23 and 23.01         |         |                                                      |  |       |                                                                                         |  |  |  |
| Type              |        | Input                                                                |                                    |         |                                                      |  |       |                                                                                         |  |  |  |
| Comment           |        | This message allows the delivery of Galileo time to GPS time offset. |                                    |         |                                                      |  |       |                                                                                         |  |  |  |
|                   |        |                                                                      |                                    |         | See the description of AssistNow Online for details. |  |       |                                                                                         |  |  |  |
|                   |        | Header                                                               |                                    | Class   | ID<br>Length (Bytes)<br>Payload<br>Checksum          |  |       |                                                                                         |  |  |  |
| Message Structure |        |                                                                      | 0xB5 0x62 0x13                     |         | 0x02 12<br>see below CK_A CK_B                       |  |       |                                                                                         |  |  |  |
| Payload Contents: |        |                                                                      |                                    |         |                                                      |  |       |                                                                                         |  |  |  |
| Byte Offset       | Number |                                                                      | Scaling                            | Name    |                                                      |  | Unit  | Description                                                                             |  |  |  |
|                   | Format |                                                                      |                                    |         |                                                      |  |       |                                                                                         |  |  |  |
| 0                 | U1     |                                                                      | -                                  | type    |                                                      |  | -     | Message type (0x03 for this type)                                                       |  |  |  |
| 1                 | U1     |                                                                      | -                                  | version |                                                      |  | -     | Message version (0x00 for this version)                                                 |  |  |  |
| 2                 | U1[2]  |                                                                      | -                                  |         | reserved1                                            |  | -     | Reserved                                                                                |  |  |  |
| 4                 | I2     |                                                                      | 2^-35                              | a0G     |                                                      |  | s     | Constant term of the polynomial                                                         |  |  |  |
|                   |        |                                                                      |                                    |         |                                                      |  |       | describing the offset                                                                   |  |  |  |
| 6                 | I2     |                                                                      | 2^-51                              | a1G     |                                                      |  | s/s   | Rate of change of the offset                                                            |  |  |  |
| 8                 | U1     |                                                                      | 3600                               | t0G     |                                                      |  | s     | Reference time for GGTO data                                                            |  |  |  |
| 9                 | U1     |                                                                      | -                                  | wn0G    |                                                      |  | weeks | Week Number of GGTO reference                                                           |  |  |  |
| 10                | U1[2]  |                                                                      | -                                  |         | reserved2                                            |  | -     | Reserved                                                                                |  |  |  |

## **32.15.6.4 UBX-MGA-GAL-UTC**

| Message           |        |        | UBX-MGA-GAL-UTC            |                                                 |         |                |      |                                                                                         |         |                     |
|-------------------|--------|--------|----------------------------|-------------------------------------------------|---------|----------------|------|-----------------------------------------------------------------------------------------|---------|---------------------|
| Description       |        |        | Galileo UTC assistance     |                                                 |         |                |      |                                                                                         |         |                     |
| Firmware          |        |        | Supported on:              |                                                 |         |                |      |                                                                                         |         |                     |
|                   |        |        |                            |                                                 |         |                |      | • u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20. |         |                     |
|                   |        |        | 3, 22, 22.01, 23 and 23.01 |                                                 |         |                |      |                                                                                         |         |                     |
| Type              |        | Input  |                            |                                                 |         |                |      |                                                                                         |         |                     |
| Comment           |        |        |                            |                                                 |         |                |      | This message allows the delivery of Galileo UTC assistance to a receiver.               |         |                     |
|                   |        |        |                            |                                                 |         |                |      | See the description of AssistNow Online for details.                                    |         |                     |
|                   |        | Header |                            | Class                                           | ID      | Length (Bytes) |      |                                                                                         | Payload | Checksum            |
| Message Structure |        |        | 0xB5 0x62 0x13             |                                                 | 0x02 20 |                |      |                                                                                         |         | see below CK_A CK_B |
| Payload Contents: |        |        |                            |                                                 |         |                |      |                                                                                         |         |                     |
| Byte Offset       | Number |        | Scaling                    | Name                                            |         |                | Unit | Description                                                                             |         |                     |
|                   | Format |        |                            |                                                 |         |                |      |                                                                                         |         |                     |
| 0                 | U1     |        | -                          | type                                            |         |                | -    | Message type (0x05 for this type)                                                       |         |                     |
| 1                 | U1     |        | -                          | version                                         |         |                | -    | Message version (0x00 for this version)                                                 |         |                     |
| 2                 | U1[2]  |        | -                          | reserved1<br>-<br>Reserved                      |         |                |      |                                                                                         |         |                     |
| 4                 | I4     |        | 2^-30                      | a0<br>s<br>First parameter of UTC polynomial    |         |                |      |                                                                                         |         |                     |
| 8                 | I4     |        | 2^-50                      | a1<br>s/s<br>Second parameter of UTC polynomial |         |                |      |                                                                                         |         |                     |
| 12                | I1     |        | -                          | dtLS                                            |         |                | s    | Delta time due to current leap seconds                                                  |         |                     |

<span id="page-334-1"></span>

#### UBX-MGA-GAL continued

| Byte Offset | Number | Scaling | Name      | Unit  | Description                               |
|-------------|--------|---------|-----------|-------|-------------------------------------------|
|             | Format |         |           |       |                                           |
| 13          | U1     | 3600    | tot       | s     | UTC parameters reference time of week     |
|             |        |         |           |       | (Galileo time)                            |
| 14          | U1     | -       | wnt       | weeks | UTC parameters reference week number      |
|             |        |         |           |       | (the 8-bit WNt field)                     |
| 15          | U1     | -       | wnLSF     | weeks | Week number at the end of which the       |
|             |        |         |           |       | future leap second becomes effective (the |
|             |        |         |           |       | 8-bit WNLSF field)                        |
| 16          | U1     | -       | dN        | days  | Day number at the end of which the future |
|             |        |         |           |       | leap second becomes effective             |
| 17          | I1     | -       | dTLSF     | s     | Delta time due to future leap seconds     |
| 18          | U1[2]  | -       | reserved2 | -     | Reserved                                  |

## <span id="page-334-0"></span>**32.15.7 UBX-MGA-GLO (0x13 0x06)**

#### **32.15.7.1 UBX-MGA-GLO-EPH**

| Message           |        |       | UBX-MGA-GLO-EPH                                      |         |                                |  |                |                                                                                            |         |          |  |
|-------------------|--------|-------|------------------------------------------------------|---------|--------------------------------|--|----------------|--------------------------------------------------------------------------------------------|---------|----------|--|
| Description       |        |       | GLONASS ephemeris assistance                         |         |                                |  |                |                                                                                            |         |          |  |
| Firmware          |        |       | Supported on:                                        |         |                                |  |                |                                                                                            |         |          |  |
|                   |        |       |                                                      |         |                                |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |          |  |
|                   |        |       | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01            |         |                                |  |                |                                                                                            |         |          |  |
| Type              |        | Input |                                                      |         |                                |  |                |                                                                                            |         |          |  |
| Comment           |        |       |                                                      |         |                                |  |                | This message allows the delivery of GLONASS ephemeris assistance to a                      |         |          |  |
|                   |        |       | receiver.                                            |         |                                |  |                |                                                                                            |         |          |  |
|                   |        |       | See the description of AssistNow Online for details. |         |                                |  |                |                                                                                            |         |          |  |
|                   |        |       | Header                                               | Class   | ID                             |  | Length (Bytes) |                                                                                            | Payload | Checksum |  |
| Message Structure |        |       | 0xB5 0x62 0x13                                       |         | 0x06 48<br>see below CK_A CK_B |  |                |                                                                                            |         |          |  |
| Payload Contents: |        |       |                                                      |         |                                |  |                |                                                                                            |         |          |  |
| Byte Offset       | Number |       | Scaling                                              | Name    |                                |  | Unit           | Description                                                                                |         |          |  |
|                   | Format |       |                                                      |         |                                |  |                |                                                                                            |         |          |  |
| 0                 | U1     |       | -                                                    | type    |                                |  | -              | Message type (0x01 for this type)                                                          |         |          |  |
| 1                 | U1     |       | -                                                    | version |                                |  | -              | Message version (0x00 for this version)                                                    |         |          |  |
| 2                 | U1     |       | -                                                    | svId    |                                |  | -              | GLONASS Satellite identifier (see Satellite                                                |         |          |  |
|                   |        |       |                                                      |         |                                |  |                | Numbering)                                                                                 |         |          |  |
| 3                 | U1     |       | -                                                    |         | reserved1                      |  | -              | Reserved                                                                                   |         |          |  |
| 4                 | U1     |       | -                                                    | FT      |                                |  | -              | User range accuracy                                                                        |         |          |  |
| 5                 | U1     |       | -                                                    | B       |                                |  | -              | Health flag from string 2                                                                  |         |          |  |
| 6                 | U1     |       | -                                                    | M       |                                |  | -              | Type of GLONASS satellite (1 indicates                                                     |         |          |  |
|                   |        |       |                                                      |         |                                |  |                | GLONASS-M)                                                                                 |         |          |  |
| 7                 | I1     |       | -                                                    | H       |                                |  | -              | Carrier frequency number of navigation RF                                                  |         |          |  |
|                   |        |       |                                                      |         |                                |  |                | signal, Range=(-7  6), -128 for unknown                                                    |         |          |  |
| 8                 | I4     |       | 2^-11                                                | x       |                                |  | km             | X component of the SV position in PZ-90.                                                   |         |          |  |
|                   |        |       |                                                      |         |                                |  |                | 02 coordinate System                                                                       |         |          |  |
| 12                | I4     |       | 2^-11                                                | y       |                                |  | km             | Y component of the SV position in PZ-90.                                                   |         |          |  |
|                   |        |       |                                                      |         |                                |  |                | 02 coordinate System                                                                       |         |          |  |

<span id="page-335-0"></span>

#### UBX-MGA-GLO continued

| Byte Offset | Number | Scaling | Name      | Unit  | Description                                 |
|-------------|--------|---------|-----------|-------|---------------------------------------------|
|             | Format |         |           |       |                                             |
| 16          | I4     | 2^-11   | z         | km    | Z component of the SV position in PZ-90.    |
|             |        |         |           |       | 02 coordinate System                        |
| 20          | I4     | 2^-20   | dx        | km/s  | X component of the SV velocity in PZ-90.    |
|             |        |         |           |       | 02 coordinate System                        |
| 24          | I4     | 2^-20   | dy        | km/s  | Y component of the SV velocity in PZ-90.    |
|             |        |         |           |       | 02 coordinate System                        |
| 28          | I4     | 2^-20   | dz        | km/s  | Z component of the SV velocity in PZ-90.    |
|             |        |         |           |       | 02 coordinate System                        |
| 32          | I1     | 2^-30   | ddx       | km/s^ | X component of the SV acceleration in PZ    |
|             |        |         |           | 2     | 90.02 coordinate System                     |
| 33          | I1     | 2^-30   | ddy       | km/s^ | Y component of the SV acceleration in PZ    |
|             |        |         |           | 2     | 90.02 coordinate System                     |
| 34          | I1     | 2^-30   | ddz       | km/s^ | Z component of the SV acceleration in PZ    |
|             |        |         |           | 2     | 90.02 coordinate System                     |
| 35          | U1     | 15      | tb        | minut | Index of a time interval within current day |
|             |        |         |           | es    | according to UTC(SU)                        |
| 36          | I2     | 2^-40   | gamma     | -     | Relative carrier frequency deviation        |
| 38          | U1     | -       | E         | days  | Ephemeris data age indicator                |
| 39          | I1     | 2^-30   | deltaTau  | s     | Time difference between L2 and L1 band      |
| 40          | I4     | 2^-30   | tau       | s     | SV clock bias                               |
| 44          | U1[4]  | -       | reserved2 | -     | Reserved                                    |

## **32.15.7.2 UBX-MGA-GLO-ALM**

| Message           |        |                                                              | UBX-MGA-GLO-ALM                                                               |      |           |  |      |                                                                                            |  |                     |  |  |
|-------------------|--------|--------------------------------------------------------------|-------------------------------------------------------------------------------|------|-----------|--|------|--------------------------------------------------------------------------------------------|--|---------------------|--|--|
| Description       |        |                                                              | GLONASS almanac assistance                                                    |      |           |  |      |                                                                                            |  |                     |  |  |
| Firmware          |        |                                                              | Supported on:                                                                 |      |           |  |      |                                                                                            |  |                     |  |  |
|                   |        |                                                              |                                                                               |      |           |  |      | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |                     |  |  |
|                   |        |                                                              | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                     |      |           |  |      |                                                                                            |  |                     |  |  |
| Type              |        | Input                                                        |                                                                               |      |           |  |      |                                                                                            |  |                     |  |  |
| Comment           |        |                                                              | This message allows the delivery of GLONASS almanac assistance to a receiver. |      |           |  |      |                                                                                            |  |                     |  |  |
|                   |        |                                                              | See the description of AssistNow Online for details.                          |      |           |  |      |                                                                                            |  |                     |  |  |
|                   |        |                                                              | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum                |      |           |  |      |                                                                                            |  |                     |  |  |
| Message Structure |        |                                                              | 0xB5 0x62 0x13                                                                |      | 0x06 36   |  |      |                                                                                            |  | see below CK_A CK_B |  |  |
| Payload Contents: |        |                                                              |                                                                               |      |           |  |      |                                                                                            |  |                     |  |  |
| Byte Offset       | Number |                                                              | Scaling                                                                       | Name |           |  | Unit | Description                                                                                |  |                     |  |  |
|                   | Format |                                                              |                                                                               |      |           |  |      |                                                                                            |  |                     |  |  |
| 0                 | U1     |                                                              | -                                                                             | type |           |  | -    | Message type (0x02 for this type)                                                          |  |                     |  |  |
| 1                 | U1     | version<br>-<br>-<br>Message version (0x00 for this version) |                                                                               |      |           |  |      |                                                                                            |  |                     |  |  |
| 2                 | U1     |                                                              | -                                                                             | svId |           |  | -    | GLONASS Satellite identifier (see Satellite                                                |  |                     |  |  |
|                   |        |                                                              |                                                                               |      |           |  |      | Numbering)                                                                                 |  |                     |  |  |
| 3                 | U1     |                                                              | -                                                                             |      | reserved1 |  | -    | Reserved                                                                                   |  |                     |  |  |

<span id="page-336-0"></span>

#### UBX-MGA-GLO continued

| Byte Offset | Number | Scaling | Name      | Unit    | Description                                   |
|-------------|--------|---------|-----------|---------|-----------------------------------------------|
|             | Format |         |           |         |                                               |
| 4           | U2     | -       | N         | days    | Reference calender day number of              |
|             |        |         |           |         | almanac within the four-year period (from     |
|             |        |         |           |         | string 5)                                     |
| 6           | U1     | -       | M         | -       | Type of GLONASS satellite (1 indicates        |
|             |        |         |           |         | GLONASS-M)                                    |
| 7           | U1     | -       | C         | -       | Unhealthy flag at instant of almanac          |
|             |        |         |           |         | upload (1 indicates operability of satellite) |
| 8           | I2     | 2^-18   | tau       | s       | Coarse time correction to GLONASS time        |
| 10          | U2     | 2^-20   | epsilon   | -       | Eccentricity                                  |
| 12          | I4     | 2^-20   | lambda    | semi    | Longitude of the first (within the N-day)     |
|             |        |         |           | circles | ascending node of satellite orbit in PC-90.   |
|             |        |         |           |         | 02 coordinate system                          |
| 16          | I4     | 2^-20   | deltaI    | semi    | Correction to the mean value of inclination   |
|             |        |         |           | circles |                                               |
| 20          | U4     | 2^-5    | tLambda   | s       | Time of the first ascending node passage      |
| 24          | I4     | 2^-9    | deltaT    | s/orbit | Correction to the mean value of Draconian     |
|             |        |         |           | al      | period                                        |
|             |        |         |           | period  |                                               |
| 28          | I1     | 2^-14   | deltaDT   | s/orbit | Rate of change of Draconian period            |
|             |        |         |           | al      |                                               |
|             |        |         |           | period  |                                               |
|             |        |         |           | ^2      |                                               |
| 29          | I1     | -       | H         | -       | Carrier frequency number of navigation RF     |
|             |        |         |           |         | signal, Range=(-7  6)                         |
| 30          | I2     | -       | omega     | -       | Argument of perigee                           |
| 32          | U1[4]  | -       | reserved2 | -       | Reserved                                      |

## **32.15.7.3 UBX-MGA-GLO-TIMEOFFSET**

| Message           |        |        | UBX-MGA-GLO-TIMEOFFSET                                                          |       |         |  |                |                                                                                            |         |                     |  |  |  |
|-------------------|--------|--------|---------------------------------------------------------------------------------|-------|---------|--|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|--|
| Description       |        |        | GLONASS auxiliary time offset assistance                                        |       |         |  |                |                                                                                            |         |                     |  |  |  |
| Firmware          |        |        | Supported on:                                                                   |       |         |  |                |                                                                                            |         |                     |  |  |  |
|                   |        |        |                                                                                 |       |         |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |  |
|                   |        |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                       |       |         |  |                |                                                                                            |         |                     |  |  |  |
| Type              |        | Input  |                                                                                 |       |         |  |                |                                                                                            |         |                     |  |  |  |
| Comment           |        |        | This message allows the delivery of auxiliary GLONASS assistance (including the |       |         |  |                |                                                                                            |         |                     |  |  |  |
|                   |        |        |                                                                                 |       |         |  |                | GLONASS time offsets to other GNSS systems) to a receiver.                                 |         |                     |  |  |  |
|                   |        |        |                                                                                 |       |         |  |                | See the description of AssistNow Online for details.                                       |         |                     |  |  |  |
|                   |        | Header |                                                                                 | Class | ID      |  | Length (Bytes) |                                                                                            | Payload | Checksum            |  |  |  |
| Message Structure |        |        | 0xB5 0x62 0x13                                                                  |       | 0x06 20 |  |                |                                                                                            |         | see below CK_A CK_B |  |  |  |
| Payload Contents: |        |        |                                                                                 |       |         |  |                |                                                                                            |         |                     |  |  |  |
| Byte Offset       | Number |        | Scaling<br>Name<br>Unit<br>Description                                          |       |         |  |                |                                                                                            |         |                     |  |  |  |
|                   | Format |        |                                                                                 |       |         |  |                |                                                                                            |         |                     |  |  |  |
| 0                 | U1     |        | -                                                                               | type  |         |  | -              | Message type (0x03 for this type)                                                          |         |                     |  |  |  |

<span id="page-337-1"></span>

#### UBX-MGA-GLO continued

| Byte Offset | Number | Scaling | Name      | Unit  | Description                                 |
|-------------|--------|---------|-----------|-------|---------------------------------------------|
|             | Format |         |           |       |                                             |
| 1           | U1     | -       | version   | -     | Message version (0x00 for this version)     |
| 2           | U2     | -       | N         | days  | Reference calendar day number within the    |
|             |        |         |           |       | four-year period of almanac (from string 5) |
| 4           | I4     | 2^-27   | tauC      | s     | Time scale correction to UTC(SU) time       |
| 8           | I4     | 2^-31   | tauGps    | s     | Correction to GPS time relative to          |
|             |        |         |           |       | GLONASS time                                |
| 12          | I2     | 2^-10   | B1        | s     | Coefficient to determine delta UT1          |
| 14          | I2     | 2^-16   | B2        | s/msd | Rate of change of delta UT1                 |
| 16          | U1[4]  | -       | reserved1 | -     | Reserved                                    |

## <span id="page-337-0"></span>**32.15.8 UBX-MGA-GPS (0x13 0x00)**

## **32.15.8.1 UBX-MGA-GPS-EPH**

| Message           |        |        | UBX-MGA-GPS-EPH                           |         |             |  |                |                                                                                            |                                   |                     |  |
|-------------------|--------|--------|-------------------------------------------|---------|-------------|--|----------------|--------------------------------------------------------------------------------------------|-----------------------------------|---------------------|--|
| Description       |        |        | GPS ephemeris assistance                  |         |             |  |                |                                                                                            |                                   |                     |  |
| Firmware          |        |        | Supported on:                             |         |             |  |                |                                                                                            |                                   |                     |  |
|                   |        |        |                                           |         |             |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                                   |                     |  |
|                   |        |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |         |             |  |                |                                                                                            |                                   |                     |  |
| Type              |        | Input  |                                           |         |             |  |                |                                                                                            |                                   |                     |  |
| Comment           |        |        |                                           |         |             |  |                | This message allows the delivery of GPS ephemeris assistance to a receiver.                |                                   |                     |  |
|                   |        |        |                                           |         |             |  |                | See the description of AssistNow Online for details.                                       |                                   |                     |  |
|                   |        | Header |                                           | Class   | ID          |  | Length (Bytes) |                                                                                            | Payload                           | Checksum            |  |
| Message Structure |        |        | 0xB5 0x62 0x13                            |         | 0x00 68     |  |                |                                                                                            |                                   | see below CK_A CK_B |  |
| Payload Contents: |        |        |                                           |         |             |  |                |                                                                                            |                                   |                     |  |
| Byte Offset       | Number |        | Scaling                                   | Name    |             |  | Unit           | Description                                                                                |                                   |                     |  |
|                   | Format |        |                                           |         |             |  |                |                                                                                            |                                   |                     |  |
| 0                 | U1     |        | -                                         | type    |             |  | -              |                                                                                            | Message type (0x01 for this type) |                     |  |
| 1                 | U1     |        | -                                         | version |             |  | -              | Message version (0x00 for this version)                                                    |                                   |                     |  |
| 2                 | U1     |        | -                                         | svId    |             |  | -              | GPS Satellite identifier (see Satellite                                                    |                                   |                     |  |
|                   |        |        |                                           |         |             |  |                | Numbering)                                                                                 |                                   |                     |  |
| 3                 | U1     |        | -                                         |         | reserved1   |  | -              | Reserved                                                                                   |                                   |                     |  |
| 4                 | U1     |        | -                                         |         | fitInterval |  | -              | Fit interval flag                                                                          |                                   |                     |  |
| 5                 | U1     |        | -                                         |         | uraIndex    |  | -              | URA index                                                                                  |                                   |                     |  |
| 6                 | U1     |        | -                                         |         | svHealth    |  | -              | SV health                                                                                  |                                   |                     |  |
| 7                 | I1     |        | 2^-31                                     | tgd     |             |  | s              | Group delay differential                                                                   |                                   |                     |  |
| 8                 | U2     |        | -                                         | iodc    |             |  | -              | IODC                                                                                       |                                   |                     |  |
| 10                | U2     |        | 2^4                                       | toc     |             |  | s              | Clock data reference time                                                                  |                                   |                     |  |
| 12                | U1     |        | -                                         |         | reserved2   |  | -              | Reserved                                                                                   |                                   |                     |  |
| 13                | I1     |        | 2^-55                                     | af2     |             |  | s/s            | Time polynomial coefficient 2                                                              |                                   |                     |  |
|                   |        |        |                                           |         |             |  | square         |                                                                                            |                                   |                     |  |
|                   |        |        | d                                         |         |             |  |                |                                                                                            |                                   |                     |  |
| 14                | I2     |        | 2^-43                                     | af1     |             |  | s/s            | Time polynomial coefficient 1                                                              |                                   |                     |  |
| 16                | I4     |        | 2^-31                                     | af0     |             |  | s              | Time polynomial coefficient 0                                                              |                                   |                     |  |
| 20                | I2     |        | 2^-5                                      | crs     |             |  | m              | Crs                                                                                        |                                   |                     |  |



#### UBX-MGA-GPS continued

| Byte Offset | Number | Scaling | Name      | Unit    | Description                             |
|-------------|--------|---------|-----------|---------|-----------------------------------------|
|             | Format |         |           |         |                                         |
| 22          | I2     | 2^-43   | deltaN    | semi    | Mean motion difference from computed    |
|             |        |         |           | circles | value                                   |
|             |        |         |           | /s      |                                         |
| 24          | I4     | 2^-31   | m0        | semi    | Mean anomaly at reference time          |
|             |        |         |           | circles |                                         |
| 28          | I2     | 2^-29   | cuc       | radian  | Amplitude of cosine harmonic correction |
|             |        |         |           | s       | term to argument of latitude            |
| 30          | I2     | 2^-29   | cus       | radian  | Amplitude of sine harmonic correction   |
|             |        |         |           | s       | term to argument of latitude            |
| 32          | U4     | 2^-33   | e         | -       | Eccentricity                            |
| 36          | U4     | 2^-19   | sqrtA     | m^0.5   | Square root of the semi-major axis      |
| 40          | U2     | 2^4     | toe       | s       | Reference time of ephemeris             |
| 42          | I2     | 2^-29   | cic       | radian  | Amplitude of cos harmonic correction    |
|             |        |         |           | s       | term to angle of inclination            |
| 44          | I4     | 2^-31   | omega0    | semi    | Longitude of ascending node of orbit    |
|             |        |         |           | circles | plane at weekly epoch                   |
| 48          | I2     | 2^-29   | cis       | radian  | Amplitude of sine harmonic correction   |
|             |        |         |           | s       | term to angle of inclination            |
| 50          | I2     | 2^-5    | crc       | m       | Amplitude of cosine harmonic correction |
|             |        |         |           |         | term to orbit radius                    |
| 52          | I4     | 2^-31   | i0        | semi    | Inclination angle at reference time     |
|             |        |         |           | circles |                                         |
| 56          | I4     | 2^-31   | omega     | semi    | Argument of perigee                     |
|             |        |         |           | circles |                                         |
| 60          | I4     | 2^-43   | omegaDot  | semi    | Rate of right ascension                 |
|             |        |         |           | circles |                                         |
|             |        |         |           | /s      |                                         |
| 64          | I2     | 2^-43   | idot      | semi    | Rate of inclination angle               |
|             |        |         |           | circles |                                         |
|             |        |         |           | /s      |                                         |
| 66          | U1[2]  | -       | reserved3 | -       | Reserved                                |

<span id="page-339-0"></span>

#### **32.15.8.2 UBX-MGA-GPS-ALM**

| Message           |        | UBX-MGA-GPS-ALM |                                           |         |           |         |                                |                                                                                            |  |                     |  |
|-------------------|--------|-----------------|-------------------------------------------|---------|-----------|---------|--------------------------------|--------------------------------------------------------------------------------------------|--|---------------------|--|
| Description       |        |                 | GPS almanac assistance                    |         |           |         |                                |                                                                                            |  |                     |  |
| Firmware          |        |                 | Supported on:                             |         |           |         |                                |                                                                                            |  |                     |  |
|                   |        |                 |                                           |         |           |         |                                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |                     |  |
|                   |        |                 | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |         |           |         |                                |                                                                                            |  |                     |  |
| Type              |        | Input           |                                           |         |           |         |                                |                                                                                            |  |                     |  |
| Comment           |        |                 |                                           |         |           |         |                                | This message allows the delivery of GPS almanac assistance to a receiver.                  |  |                     |  |
|                   |        |                 |                                           |         |           |         |                                | See the description of AssistNow Online for details.                                       |  |                     |  |
|                   |        |                 | Header                                    | Class   | ID        |         | Length (Bytes)                 | Payload<br>Checksum                                                                        |  |                     |  |
| Message Structure |        |                 | 0xB5 0x62 0x13                            |         | 0x00 36   |         |                                |                                                                                            |  | see below CK_A CK_B |  |
| Payload Contents: |        |                 |                                           |         |           |         |                                |                                                                                            |  |                     |  |
| Byte Offset       | Number |                 | Scaling                                   | Name    |           |         | Unit                           | Description                                                                                |  |                     |  |
|                   | Format |                 |                                           |         |           |         |                                |                                                                                            |  |                     |  |
| 0                 | U1     |                 | -                                         | type    |           |         | -                              | Message type (0x02 for this type)                                                          |  |                     |  |
| 1                 | U1     |                 | -                                         | version |           |         | -                              | Message version (0x00 for this version)                                                    |  |                     |  |
| 2                 | U1     |                 | -                                         | svId    |           |         | -                              | GPS Satellite identifier (see Satellite                                                    |  |                     |  |
|                   |        |                 |                                           |         |           |         |                                | Numbering)                                                                                 |  |                     |  |
| 3                 | U1     |                 | -                                         |         | svHealth  |         | -                              | SV health information                                                                      |  |                     |  |
| 4                 | U2     |                 | 2^-21                                     | e       |           |         | -                              | Eccentricity                                                                               |  |                     |  |
| 6                 | U1     |                 | -                                         | almWNa  |           |         | week                           | Reference week number of almanac (the                                                      |  |                     |  |
|                   |        |                 |                                           |         |           |         |                                | 8-bit WNa field)                                                                           |  |                     |  |
| 7                 | U1     |                 | 2^12                                      | toa     |           |         | s                              | Reference time of almanac                                                                  |  |                     |  |
| 8                 | I2     |                 | 2^-19                                     | deltaI  |           |         | semi                           | Delta inclination angle at reference time                                                  |  |                     |  |
|                   |        |                 |                                           |         |           |         | circles                        |                                                                                            |  |                     |  |
| 10                | I2     |                 | 2^-38                                     |         | omegaDot  |         | semi                           | Rate of right ascension                                                                    |  |                     |  |
|                   |        |                 |                                           |         |           |         | circles                        |                                                                                            |  |                     |  |
|                   |        |                 |                                           |         |           |         | /s                             |                                                                                            |  |                     |  |
| 12                | U4     |                 | 2^-11                                     | sqrtA   |           |         | m^0.5                          | Square root of the semi-major axis                                                         |  |                     |  |
| 16                | I4     |                 | 2^-23                                     | omega0  |           |         | semi                           | Longitude of ascending node of orbit                                                       |  |                     |  |
|                   |        |                 |                                           |         |           |         | circles                        | plane                                                                                      |  |                     |  |
| 20                | I4     |                 | 2^-23                                     | omega   |           |         | semi                           | Argument of perigee                                                                        |  |                     |  |
|                   |        |                 |                                           |         |           |         | circles                        |                                                                                            |  |                     |  |
| 24                | I4     | m0<br>2^-23     |                                           |         |           | semi    | Mean anomaly at reference time |                                                                                            |  |                     |  |
|                   |        |                 |                                           |         |           | circles |                                |                                                                                            |  |                     |  |
| 28                | I2     |                 | 2^-20                                     | af0     |           |         | s                              | Time polynomial coefficient 0 (8 MSBs)                                                     |  |                     |  |
| 30                | I2     |                 | 2^-38                                     | af1     |           |         | s/s                            | Time polynomial coefficient 1                                                              |  |                     |  |
| 32                | U1[4]  |                 | -                                         |         | reserved1 |         | -                              | Reserved                                                                                   |  |                     |  |

<span id="page-340-0"></span>

## **32.15.8.3 UBX-MGA-GPS-HEALTH**

| Message           |        |                                                                   | UBX-MGA-GPS-HEALTH                                                       |         |           |  |      |                                                                                            |  |  |  |  |
|-------------------|--------|-------------------------------------------------------------------|--------------------------------------------------------------------------|---------|-----------|--|------|--------------------------------------------------------------------------------------------|--|--|--|--|
| Description       |        |                                                                   | GPS health assistance                                                    |         |           |  |      |                                                                                            |  |  |  |  |
| Firmware          |        |                                                                   | Supported on:                                                            |         |           |  |      |                                                                                            |  |  |  |  |
|                   |        |                                                                   |                                                                          |         |           |  |      | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |  |  |
|                   |        |                                                                   | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                |         |           |  |      |                                                                                            |  |  |  |  |
| Type              |        | Input                                                             |                                                                          |         |           |  |      |                                                                                            |  |  |  |  |
| Comment           |        |                                                                   | This message allows the delivery of GPS health assistance to a receiver. |         |           |  |      |                                                                                            |  |  |  |  |
|                   |        |                                                                   | See the description of AssistNow Online for details.                     |         |           |  |      |                                                                                            |  |  |  |  |
|                   |        |                                                                   | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum           |         |           |  |      |                                                                                            |  |  |  |  |
| Message Structure |        | 0xB5 0x62 0x13<br>0x00 40<br>see below CK_A CK_B                  |                                                                          |         |           |  |      |                                                                                            |  |  |  |  |
| Payload Contents: |        |                                                                   |                                                                          |         |           |  |      |                                                                                            |  |  |  |  |
| Byte Offset       | Number |                                                                   | Scaling                                                                  | Name    |           |  | Unit | Description                                                                                |  |  |  |  |
|                   | Format |                                                                   |                                                                          |         |           |  |      |                                                                                            |  |  |  |  |
| 0                 | U1     |                                                                   | -                                                                        | type    |           |  | -    | Message type (0x04 for this type)                                                          |  |  |  |  |
| 1                 | U1     |                                                                   | -                                                                        | version |           |  | -    | Message version (0x00 for this version)                                                    |  |  |  |  |
| 2                 | U1[2]  |                                                                   | -                                                                        |         | reserved1 |  | -    | Reserved                                                                                   |  |  |  |  |
| 4                 | U1[32] | healthCode<br>-<br>-<br>Each byte represents a GPS SV (1-32). The |                                                                          |         |           |  |      |                                                                                            |  |  |  |  |
|                   |        |                                                                   |                                                                          |         |           |  |      | 6 LSBs of each byte contains the 6 bit                                                     |  |  |  |  |
|                   |        |                                                                   |                                                                          |         |           |  |      | health code from subframes 4/5 page 25.                                                    |  |  |  |  |
| 36                | U1[4]  |                                                                   | -                                                                        |         | reserved2 |  | -    | Reserved                                                                                   |  |  |  |  |

## **32.15.8.4 UBX-MGA-GPS-UTC**

| Message           |        |       | UBX-MGA-GPS-UTC                                                       |         |           |  |      |                                                                                            |  |  |  |  |
|-------------------|--------|-------|-----------------------------------------------------------------------|---------|-----------|--|------|--------------------------------------------------------------------------------------------|--|--|--|--|
| Description       |        |       | GPS UTC assistance                                                    |         |           |  |      |                                                                                            |  |  |  |  |
| Firmware          |        |       | Supported on:                                                         |         |           |  |      |                                                                                            |  |  |  |  |
|                   |        |       |                                                                       |         |           |  |      | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |  |  |
|                   |        |       | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                             |         |           |  |      |                                                                                            |  |  |  |  |
| Type              |        | Input |                                                                       |         |           |  |      |                                                                                            |  |  |  |  |
| Comment           |        |       | This message allows the delivery of GPS UTC assistance to a receiver. |         |           |  |      |                                                                                            |  |  |  |  |
|                   |        |       | See the description of AssistNow Online for details.                  |         |           |  |      |                                                                                            |  |  |  |  |
|                   |        |       | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum        |         |           |  |      |                                                                                            |  |  |  |  |
| Message Structure |        |       | 0xB5 0x62 0x13<br>0x00 20<br>see below CK_A CK_B                      |         |           |  |      |                                                                                            |  |  |  |  |
| Payload Contents: |        |       |                                                                       |         |           |  |      |                                                                                            |  |  |  |  |
| Byte Offset       | Number |       | Scaling                                                               | Name    |           |  | Unit | Description                                                                                |  |  |  |  |
|                   | Format |       |                                                                       |         |           |  |      |                                                                                            |  |  |  |  |
| 0                 | U1     |       | -                                                                     | type    |           |  | -    | Message type (0x05 for this type)                                                          |  |  |  |  |
| 1                 | U1     |       | -                                                                     | version |           |  | -    | Message version (0x00 for this version)                                                    |  |  |  |  |
| 2                 | U1[2]  |       | -                                                                     |         | reserved1 |  | -    | Reserved                                                                                   |  |  |  |  |
| 4                 | I4     |       | utcA0<br>2^-30<br>s<br>First parameter of UTC polynomial              |         |           |  |      |                                                                                            |  |  |  |  |
| 8                 | I4     |       | utcA1<br>2^-50<br>s/s<br>Second parameter of UTC polynomial           |         |           |  |      |                                                                                            |  |  |  |  |
| 12                | I1     |       | utcDtLS<br>-<br>s<br>Delta time due to current leap seconds           |         |           |  |      |                                                                                            |  |  |  |  |
| 13                | U1     |       | 2^12                                                                  | utcTot  |           |  | s    | UTC parameters reference time of week                                                      |  |  |  |  |
|                   |        |       |                                                                       |         |           |  |      | (GPS time)                                                                                 |  |  |  |  |

<span id="page-341-0"></span>

#### UBX-MGA-GPS continued

| Byte Offset | Number | Scaling | Name      | Unit  | Description                               |
|-------------|--------|---------|-----------|-------|-------------------------------------------|
|             | Format |         |           |       |                                           |
| 14          | U1     | -       | utcWNt    | weeks | UTC parameters reference week number      |
|             |        |         |           |       | (the 8-bit WNt field)                     |
| 15          | U1     | -       | utcWNlsf  | weeks | Week number at the end of which the       |
|             |        |         |           |       | future leap second becomes effective (the |
|             |        |         |           |       | 8-bit WNLSF field)                        |
| 16          | U1     | -       | utcDn     | days  | Day number at the end of which the future |
|             |        |         |           |       | leap second becomes effective             |
| 17          | I1     | -       | utcDtLSF  | s     | Delta time due to future leap seconds     |
| 18          | U1[2]  | -       | reserved2 | -     | Reserved                                  |

## **32.15.8.5 UBX-MGA-GPS-IONO**

| Message           |        |                                                                               | UBX-MGA-GPS-IONO                                               |         |            |        |         |                                                                                            |  |                     |  |
|-------------------|--------|-------------------------------------------------------------------------------|----------------------------------------------------------------|---------|------------|--------|---------|--------------------------------------------------------------------------------------------|--|---------------------|--|
| Description       |        |                                                                               | GPS ionosphere assistance                                      |         |            |        |         |                                                                                            |  |                     |  |
| Firmware          |        |                                                                               | Supported on:                                                  |         |            |        |         |                                                                                            |  |                     |  |
|                   |        |                                                                               |                                                                |         |            |        |         | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |                     |  |
|                   |        |                                                                               | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                      |         |            |        |         |                                                                                            |  |                     |  |
| Type              |        | Input                                                                         |                                                                |         |            |        |         |                                                                                            |  |                     |  |
| Comment           |        | This message allows the delivery of GPS ionospheric assistance to a receiver. |                                                                |         |            |        |         |                                                                                            |  |                     |  |
|                   |        | See the description of AssistNow Online for details.                          |                                                                |         |            |        |         |                                                                                            |  |                     |  |
|                   |        |                                                                               | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum |         |            |        |         |                                                                                            |  |                     |  |
| Message Structure |        |                                                                               | 0xB5 0x62 0x13                                                 |         | 0x00 16    |        |         |                                                                                            |  | see below CK_A CK_B |  |
| Payload Contents: |        |                                                                               |                                                                |         |            |        |         |                                                                                            |  |                     |  |
| Byte Offset       | Number |                                                                               | Scaling                                                        | Name    |            |        | Unit    | Description                                                                                |  |                     |  |
|                   | Format |                                                                               |                                                                |         |            |        |         |                                                                                            |  |                     |  |
| 0                 | U1     |                                                                               | -                                                              | type    |            |        | -       | Message type (0x06 for this type)                                                          |  |                     |  |
| 1                 | U1     |                                                                               | -                                                              | version |            |        | -       | Message version (0x00 for this version)                                                    |  |                     |  |
| 2                 | U1[2]  |                                                                               | -                                                              |         | reserved1  |        | -       | Reserved                                                                                   |  |                     |  |
| 4                 | I1     |                                                                               | 2^-30                                                          |         | ionoAlpha0 |        | s       | Ionospheric parameter alpha0 [s]                                                           |  |                     |  |
| 5                 | I1     |                                                                               | 2^-27                                                          |         | ionoAlpha1 |        | s/semi  | Ionospheric parameter alpha1 [s/semi                                                       |  |                     |  |
|                   |        |                                                                               |                                                                |         |            |        | circle  | circle]                                                                                    |  |                     |  |
| 6                 | I1     |                                                                               | 2^-24                                                          |         | ionoAlpha2 |        | s/(sem  | Ionospheric parameter alpha2 [s/semi                                                       |  |                     |  |
|                   |        |                                                                               |                                                                |         |            |        | i       | circle^2]                                                                                  |  |                     |  |
|                   |        |                                                                               |                                                                |         |            |        | circle^ |                                                                                            |  |                     |  |
|                   |        |                                                                               |                                                                |         |            |        | 2)      |                                                                                            |  |                     |  |
| 7                 | I1     |                                                                               | 2^-24                                                          |         | ionoAlpha3 |        | s/(sem  | Ionospheric parameter alpha3 [s/semi                                                       |  |                     |  |
|                   |        |                                                                               |                                                                |         |            |        | i       | circle^3]                                                                                  |  |                     |  |
|                   |        |                                                                               |                                                                |         |            |        | circle^ |                                                                                            |  |                     |  |
|                   |        |                                                                               |                                                                |         |            |        | 3)      |                                                                                            |  |                     |  |
| 8                 | I1     |                                                                               | 2^11                                                           |         | ionoBeta0  |        | s       | Ionospheric parameter beta0 [s]                                                            |  |                     |  |
| 9                 | I1     |                                                                               | 2^14                                                           |         |            |        | s/semi  | Ionospheric parameter beta1 [s/semi                                                        |  |                     |  |
|                   |        | ionoBeta1                                                                     |                                                                |         |            | circle | circle] |                                                                                            |  |                     |  |

<span id="page-342-1"></span>

#### UBX-MGA-GPS continued

| Byte Offset | Number | Scaling | Name      | Unit    | Description                         |
|-------------|--------|---------|-----------|---------|-------------------------------------|
|             | Format |         |           |         |                                     |
| 10          | I1     | 2^16    | ionoBeta2 | s/(sem  | Ionospheric parameter beta2 [s/semi |
|             |        |         |           | i       | circle^2]                           |
|             |        |         |           | circle^ |                                     |
|             |        |         |           | 2)      |                                     |
| 11          | I1     | 2^16    | ionoBeta3 | s/(sem  | Ionospheric parameter beta3 [s/semi |
|             |        |         |           | i       | circle^3]                           |
|             |        |         |           | circle^ |                                     |
|             |        |         |           | 3)      |                                     |
| 12          | U1[4]  | -       | reserved2 | -       | Reserved                            |

## <span id="page-342-0"></span>**32.15.9 UBX-MGA-INI (0x13 0x40)**

## **32.15.9.1 UBX-MGA-INI-POS\_XYZ**

| Message           |        |                                 | UBX-MGA-INI-POS_XYZ                                                              |         |         |  |                |                                                                                            |         |                     |  |  |  |
|-------------------|--------|---------------------------------|----------------------------------------------------------------------------------|---------|---------|--|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|--|
| Description       |        |                                 | Initial position assistance                                                      |         |         |  |                |                                                                                            |         |                     |  |  |  |
| Firmware          |        |                                 | Supported on:                                                                    |         |         |  |                |                                                                                            |         |                     |  |  |  |
|                   |        |                                 |                                                                                  |         |         |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |  |
|                   |        |                                 | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                        |         |         |  |                |                                                                                            |         |                     |  |  |  |
| Type              |        | Input                           |                                                                                  |         |         |  |                |                                                                                            |         |                     |  |  |  |
| Comment           |        |                                 |                                                                                  |         |         |  |                | Supplying position assistance that is inaccurate by more than the specified                |         |                     |  |  |  |
|                   |        |                                 | position accuracy, may lead to substantially degraded receiver performance.      |         |         |  |                |                                                                                            |         |                     |  |  |  |
|                   |        |                                 | This message allows the delivery of initial position assistance to a receiver in |         |         |  |                |                                                                                            |         |                     |  |  |  |
|                   |        |                                 | cartesian ECEF coordinates. This message is equivalent to the UBX-MGA-INI        |         |         |  |                |                                                                                            |         |                     |  |  |  |
|                   |        |                                 | POS_LLH message, except for the coordinate system.                               |         |         |  |                |                                                                                            |         |                     |  |  |  |
|                   |        |                                 |                                                                                  |         |         |  |                | See the description of AssistNow Online for details.                                       |         |                     |  |  |  |
|                   |        |                                 | Header                                                                           | Class   | ID      |  | Length (Bytes) |                                                                                            | Payload | Checksum            |  |  |  |
| Message Structure |        |                                 | 0xB5 0x62 0x13                                                                   |         | 0x40 20 |  |                |                                                                                            |         | see below CK_A CK_B |  |  |  |
| Payload Contents: |        |                                 |                                                                                  |         |         |  |                |                                                                                            |         |                     |  |  |  |
| Byte Offset       | Number |                                 | Scaling                                                                          | Name    |         |  | Unit           | Description                                                                                |         |                     |  |  |  |
|                   | Format |                                 |                                                                                  |         |         |  |                |                                                                                            |         |                     |  |  |  |
| 0                 | U1     |                                 | -                                                                                | type    |         |  | -              | Message type (0x00 for this type)                                                          |         |                     |  |  |  |
| 1                 | U1     |                                 | -                                                                                | version |         |  | -              | Message version (0x00 for this version)                                                    |         |                     |  |  |  |
| 2                 | U1[2]  | reserved1<br>-<br>-<br>Reserved |                                                                                  |         |         |  |                |                                                                                            |         |                     |  |  |  |
| 4                 | I4     |                                 | -                                                                                | ecefX   |         |  | cm             | WGS84 ECEF X coordinate                                                                    |         |                     |  |  |  |
| 8                 | I4     |                                 | -                                                                                | ecefY   |         |  | cm             | WGS84 ECEF Y coordinate                                                                    |         |                     |  |  |  |
| 12                | I4     |                                 | ecefZ<br>-<br>cm<br>WGS84 ECEF Z coordinate                                      |         |         |  |                |                                                                                            |         |                     |  |  |  |
| 16                | U4     |                                 | -                                                                                | posAcc  |         |  | cm             | Position accuracy (stddev)                                                                 |         |                     |  |  |  |

<span id="page-343-0"></span>

## **32.15.9.2 UBX-MGA-INI-POS\_LLH**

| Message           |        |                                 | UBX-MGA-INI-POS_LLH                                                              |         |         |  |                |                                                                                            |         |                     |  |  |  |
|-------------------|--------|---------------------------------|----------------------------------------------------------------------------------|---------|---------|--|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|--|
| Description       |        |                                 | Initial position assistance                                                      |         |         |  |                |                                                                                            |         |                     |  |  |  |
| Firmware          |        |                                 | Supported on:                                                                    |         |         |  |                |                                                                                            |         |                     |  |  |  |
|                   |        |                                 |                                                                                  |         |         |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |  |
|                   |        |                                 | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                        |         |         |  |                |                                                                                            |         |                     |  |  |  |
| Type              |        | Input                           |                                                                                  |         |         |  |                |                                                                                            |         |                     |  |  |  |
| Comment           |        |                                 |                                                                                  |         |         |  |                | Supplying position assistance that is inaccurate by more than the specified                |         |                     |  |  |  |
|                   |        |                                 | position accuracy, may lead to substantially degraded receiver performance.      |         |         |  |                |                                                                                            |         |                     |  |  |  |
|                   |        |                                 | This message allows the delivery of initial position assistance to a receiver in |         |         |  |                |                                                                                            |         |                     |  |  |  |
|                   |        |                                 | WGS84 lat/long/alt coordinates. This message is equivalent to the UBX-MGA        |         |         |  |                |                                                                                            |         |                     |  |  |  |
|                   |        |                                 | INI-POS_XYZ message, except for the coordinate system.                           |         |         |  |                |                                                                                            |         |                     |  |  |  |
|                   |        |                                 |                                                                                  |         |         |  |                | See the description of AssistNow Online for details.                                       |         |                     |  |  |  |
|                   |        |                                 | Header                                                                           | Class   | ID      |  | Length (Bytes) |                                                                                            | Payload | Checksum            |  |  |  |
| Message Structure |        |                                 | 0xB5 0x62 0x13                                                                   |         | 0x40 20 |  |                |                                                                                            |         | see below CK_A CK_B |  |  |  |
| Payload Contents: |        |                                 |                                                                                  |         |         |  |                |                                                                                            |         |                     |  |  |  |
| Byte Offset       | Number |                                 | Scaling                                                                          | Name    |         |  | Unit           | Description                                                                                |         |                     |  |  |  |
|                   | Format |                                 |                                                                                  |         |         |  |                |                                                                                            |         |                     |  |  |  |
| 0                 | U1     |                                 | -                                                                                | type    |         |  | -              | Message type (0x01 for this type)                                                          |         |                     |  |  |  |
| 1                 | U1     |                                 | -                                                                                | version |         |  | -              | Message version (0x00 for this version)                                                    |         |                     |  |  |  |
| 2                 | U1[2]  | reserved1<br>-<br>-<br>Reserved |                                                                                  |         |         |  |                |                                                                                            |         |                     |  |  |  |
| 4                 | I4     |                                 | 1e-7                                                                             | lat     |         |  | deg            | WGS84 Latitude                                                                             |         |                     |  |  |  |
| 8                 | I4     |                                 | 1e-7                                                                             | lon     |         |  | deg            | WGS84 Longitude                                                                            |         |                     |  |  |  |
| 12                | I4     |                                 | alt<br>-<br>cm<br>WGS84 Altitude                                                 |         |         |  |                |                                                                                            |         |                     |  |  |  |
| 16                | U4     |                                 | -                                                                                | posAcc  |         |  | cm             | Position accuracy (stddev)                                                                 |         |                     |  |  |  |

## **32.15.9.3 UBX-MGA-INI-TIME\_UTC**

| Message                                                                     |        |        | UBX-MGA-INI-TIME_UTC    |                                           |         |                                        |                |                                                                                            |         |                     |  |  |
|-----------------------------------------------------------------------------|--------|--------|-------------------------|-------------------------------------------|---------|----------------------------------------|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|
| Description                                                                 |        |        | Initial time assistance |                                           |         |                                        |                |                                                                                            |         |                     |  |  |
| Firmware                                                                    |        |        | Supported on:           |                                           |         |                                        |                |                                                                                            |         |                     |  |  |
|                                                                             |        |        |                         |                                           |         |                                        |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |
|                                                                             |        |        |                         | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |         |                                        |                |                                                                                            |         |                     |  |  |
| Type                                                                        |        | Input  |                         |                                           |         |                                        |                |                                                                                            |         |                     |  |  |
| Comment                                                                     |        |        |                         |                                           |         |                                        |                | Supplying time assistance that is inaccurate by more than the specified time               |         |                     |  |  |
| accuracy, may lead to substantially degraded receiver performance.          |        |        |                         |                                           |         |                                        |                |                                                                                            |         |                     |  |  |
| This message allows the delivery of UTC time assistance to a receiver. This |        |        |                         |                                           |         |                                        |                |                                                                                            |         |                     |  |  |
|                                                                             |        |        |                         |                                           |         |                                        |                | message is equivalent to the UBX-MGA-INI-TIME_GNSS message, except for the                 |         |                     |  |  |
|                                                                             |        |        | time base.              |                                           |         |                                        |                |                                                                                            |         |                     |  |  |
|                                                                             |        |        |                         |                                           |         |                                        |                | See the description of AssistNow Online for details.                                       |         |                     |  |  |
|                                                                             |        | Header |                         | Class                                     | ID      |                                        | Length (Bytes) |                                                                                            | Payload | Checksum            |  |  |
| Message Structure                                                           |        |        | 0xB5 0x62 0x13          |                                           | 0x40 24 |                                        |                |                                                                                            |         | see below CK_A CK_B |  |  |
| Payload Contents:                                                           |        |        |                         |                                           |         |                                        |                |                                                                                            |         |                     |  |  |
| Byte Offset                                                                 | Number |        | Scaling                 | Name                                      |         |                                        | Unit           | Description                                                                                |         |                     |  |  |
|                                                                             | Format |        |                         |                                           |         |                                        |                |                                                                                            |         |                     |  |  |
| 0                                                                           | U1     |        | type<br>-               |                                           |         | -<br>Message type (0x10 for this type) |                |                                                                                            |         |                     |  |  |



| Byte Offset | Number | Scaling | Name      | Unit | Description                             |
|-------------|--------|---------|-----------|------|-----------------------------------------|
|             | Format |         |           |      |                                         |
| 1           | U1     | -       | version   | -    | Message version (0x00 for this version) |
| 2           | X1     | -       | ref       | -    | Reference to be used to set time (see   |
|             |        |         |           |      | graphic below)                          |
| 3           | I1     | -       | leapSecs  | s    | Number of leap seconds since 1980 (or   |
|             |        |         |           |      | 0x80 = -128 if unknown)                 |
| 4           | U2     | -       | year      | -    | Year                                    |
| 6           | U1     | -       | month     | -    | Month, starting at 1                    |
| 7           | U1     | -       | day       | -    | Day, starting at 1                      |
| 8           | U1     | -       | hour      | -    | Hour, from 0 to 23                      |
| 9           | U1     | -       | minute    | -    | Minute, from 0 to 59                    |
| 10          | U1     | -       | second    | s    | Seconds, from 0 to 59                   |
| 11          | X1     | -       | bitfield0 | -    | bitfield:                               |
| 12          | U4     | -       | ns        | ns   | Nanoseconds, from 0 to 999,999,999      |
| 16          | U2     | -       | tAccS     | s    | Seconds part of time accuracy           |
| 18          | U1[2]  | -       | reserved1 | -    | Reserved                                |
| 20          | U4     | -       | tAccNs    | ns   | Nanoseconds part of time accuracy, from |
|             |        |         |           |      | 0 to 999,999,999                        |

#### UBX-MGA-INI continued

## <span id="page-344-0"></span>**Bitfield ref**



| Name   | Description                                                                  |
|--------|------------------------------------------------------------------------------|
| source | 0: none, i.e. on receipt of message (will be inaccurate!)                    |
|        | 1: relative to pulse sent to EXTINT0                                         |
|        | 2: relative to pulse sent to EXTINT1                                         |
|        | 3-15: reserved                                                               |
| fall   | use falling edge of EXTINT pulse (default rising) - only if source is EXTINT |
| last   | use last EXTINT pulse (default next pulse) - only if source is EXTINT        |

<span id="page-345-0"></span>

#### **32.15.9.4 UBX-MGA-INI-TIME\_GNSS**

| Message                             |                                           |                                                                                                                     | UBX-MGA-INI-TIME_GNSS                                              |                                   |                                                                                                                                                                                                                              |                                                      |                |                                                                                            |         |                     |  |  |
|-------------------------------------|-------------------------------------------|---------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|-----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|
| Description                         |                                           |                                                                                                                     | Initial time assistance                                            |                                   |                                                                                                                                                                                                                              |                                                      |                |                                                                                            |         |                     |  |  |
| Firmware                            |                                           |                                                                                                                     | Supported on:                                                      |                                   |                                                                                                                                                                                                                              |                                                      |                |                                                                                            |         |                     |  |  |
|                                     |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |
|                                     |                                           |                                                                                                                     | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                          |                                   |                                                                                                                                                                                                                              |                                                      |                |                                                                                            |         |                     |  |  |
| Type                                |                                           | Input                                                                                                               |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                |                                                                                            |         |                     |  |  |
| Comment                             |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                | Supplying time assistance that is inaccurate by more than the specified time               |         |                     |  |  |
|                                     |                                           |                                                                                                                     | accuracy, may lead to substantially degraded receiver performance. |                                   |                                                                                                                                                                                                                              |                                                      |                |                                                                                            |         |                     |  |  |
|                                     |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                | This message allows the delivery of time assistance to a receiver in a chosen              |         |                     |  |  |
|                                     |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                | GNSS timebase. This message is equivalent to the UBX-MGA-INI-TIME_UTC                      |         |                     |  |  |
|                                     |                                           |                                                                                                                     | message, except for the time base.                                 |                                   |                                                                                                                                                                                                                              |                                                      |                |                                                                                            |         |                     |  |  |
|                                     |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              | See the description of AssistNow Online for details. |                |                                                                                            |         |                     |  |  |
|                                     |                                           |                                                                                                                     | Header                                                             | Class                             | ID                                                                                                                                                                                                                           |                                                      | Length (Bytes) |                                                                                            | Payload | Checksum            |  |  |
| Message Structure                   |                                           |                                                                                                                     | 0xB5 0x62 0x13                                                     |                                   | 0x40 24                                                                                                                                                                                                                      |                                                      |                |                                                                                            |         | see below CK_A CK_B |  |  |
| Payload Contents:                   |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                |                                                                                            |         |                     |  |  |
| Byte Offset                         | Number                                    |                                                                                                                     | Scaling                                                            | Name                              |                                                                                                                                                                                                                              |                                                      | Unit           | Description                                                                                |         |                     |  |  |
|                                     | Format                                    |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                |                                                                                            |         |                     |  |  |
| 0                                   | U1                                        |                                                                                                                     | -                                                                  |                                   | type                                                                                                                                                                                                                         |                                                      | -              | Message type (0x11 for this type)                                                          |         |                     |  |  |
| 1                                   | U1                                        |                                                                                                                     | -                                                                  |                                   | version                                                                                                                                                                                                                      |                                                      | -              | Message version (0x00 for this version)                                                    |         |                     |  |  |
| 2                                   | X1                                        |                                                                                                                     | -                                                                  | ref                               |                                                                                                                                                                                                                              |                                                      | -              | Reference to be used to set time (see                                                      |         |                     |  |  |
|                                     |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                | graphic below)                                                                             |         |                     |  |  |
| 3                                   | U1                                        |                                                                                                                     | -                                                                  |                                   | gnssId                                                                                                                                                                                                                       |                                                      | -              | Source of time information. Currently                                                      |         |                     |  |  |
|                                     |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                | supported:                                                                                 |         |                     |  |  |
|                                     |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                | 0: GPS time                                                                                |         |                     |  |  |
|                                     |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                | 2: Galileo time                                                                            |         |                     |  |  |
|                                     |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                | 3: BeiDou time                                                                             |         |                     |  |  |
|                                     |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                | 6: GLONASS time                                                                            |         |                     |  |  |
|                                     |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                | 7: NavIC time                                                                              |         |                     |  |  |
| 4                                   | X1                                        |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      | -              | bitfield:                                                                                  |         |                     |  |  |
|                                     |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                |                                                                                            |         |                     |  |  |
|                                     |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                |                                                                                            |         |                     |  |  |
|                                     |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                |                                                                                            |         |                     |  |  |
|                                     |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                |                                                                                            |         |                     |  |  |
|                                     |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                |                                                                                            |         |                     |  |  |
|                                     |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                |                                                                                            |         |                     |  |  |
|                                     |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                |                                                                                            |         |                     |  |  |
|                                     |                                           |                                                                                                                     |                                                                    |                                   |                                                                                                                                                                                                                              |                                                      |                |                                                                                            |         |                     |  |  |
| 5<br>6<br>8<br>12<br>16<br>18<br>20 | U1<br>U2<br>U4<br>U4<br>U2<br>U1[2]<br>U4 | bitfield0<br>-<br>reserved1<br>-<br>week<br>-<br>tow<br>-<br>ns<br>-<br>tAccS<br>-<br>reserved2<br>-<br>tAccNs<br>- |                                                                    | -<br>-<br>s<br>ns<br>s<br>-<br>ns | Reserved<br>GNSS week number<br>GNSS time of week<br>GNSS time of week, nanosecond part from<br>0 to 999,999,999<br>Seconds part of time accuracy<br>Reserved<br>Nanoseconds part of time accuracy, from<br>0 to 999,999,999 |                                                      |                |                                                                                            |         |                     |  |  |

<span id="page-346-0"></span>

## **Bitfield ref**

<span id="page-346-1"></span>This graphic explains the bits of ref



| Name   | Description                                                                  |
|--------|------------------------------------------------------------------------------|
| source | 0: none, i.e. on receipt of message (will be inaccurate!)                    |
|        | 1: relative to pulse sent to EXTINT0                                         |
|        | 2: relative to pulse sent to EXTINT1                                         |
|        | 3-15: reserved                                                               |
| fall   | use falling edge of EXTINT pulse (default rising) - only if source is EXTINT |
| last   | use last EXTINT pulse (default next pulse) - only if source is EXTINT        |

## **32.15.9.5 UBX-MGA-INI-CLKD**

| Message                                                                   |        |           | UBX-MGA-INI-CLKD                                                               |           |                                           |   |                |                                                                                            |         |                     |  |
|---------------------------------------------------------------------------|--------|-----------|--------------------------------------------------------------------------------|-----------|-------------------------------------------|---|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|
| Description                                                               |        |           | Initial clock drift assistance                                                 |           |                                           |   |                |                                                                                            |         |                     |  |
| Firmware                                                                  |        |           | Supported on:                                                                  |           |                                           |   |                |                                                                                            |         |                     |  |
|                                                                           |        |           |                                                                                |           |                                           |   |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |
|                                                                           |        |           |                                                                                |           | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |   |                |                                                                                            |         |                     |  |
| Type                                                                      |        | Input     |                                                                                |           |                                           |   |                |                                                                                            |         |                     |  |
| Comment                                                                   |        |           | Supplying clock drift assistance that is inaccurate by more than the specified |           |                                           |   |                |                                                                                            |         |                     |  |
|                                                                           |        |           | accuracy, may lead to substantially degraded receiver performance.             |           |                                           |   |                |                                                                                            |         |                     |  |
| This message allows the delivery of clock drift assistance to a receiver. |        |           |                                                                                |           |                                           |   |                |                                                                                            |         |                     |  |
| See the description of AssistNow Online for details.                      |        |           |                                                                                |           |                                           |   |                |                                                                                            |         |                     |  |
|                                                                           |        | Header    |                                                                                | Class     | ID                                        |   | Length (Bytes) |                                                                                            | Payload | Checksum            |  |
| Message Structure                                                         |        |           | 0xB5 0x62 0x13                                                                 |           | 0x40 12                                   |   |                |                                                                                            |         | see below CK_A CK_B |  |
| Payload Contents:                                                         |        |           |                                                                                |           |                                           |   |                |                                                                                            |         |                     |  |
| Byte Offset                                                               | Number |           | Scaling                                                                        | Name      |                                           |   | Unit           | Description                                                                                |         |                     |  |
|                                                                           | Format |           |                                                                                |           |                                           |   |                |                                                                                            |         |                     |  |
| 0                                                                         | U1     |           | -                                                                              | type      |                                           |   | -              | Message type (0x20 for this type)                                                          |         |                     |  |
| 1                                                                         | U1     |           | -                                                                              | version   |                                           |   | -              | Message version (0x00 for this version)                                                    |         |                     |  |
| 2                                                                         | U1[2]  |           | -                                                                              | reserved1 |                                           | - | Reserved       |                                                                                            |         |                     |  |
| 4                                                                         | I4     | clkD<br>- |                                                                                | ns/s      | Clock drift                               |   |                |                                                                                            |         |                     |  |
| 8                                                                         | U4     |           | -                                                                              | clkDAcc   |                                           |   | ns/s           | Clock drift accuracy                                                                       |         |                     |  |

<span id="page-347-0"></span>

#### **32.15.9.6 UBX-MGA-INI-FREQ**

| Message                                 |                  |  | UBX-MGA-INI-FREQ                                                                                                                                                                                                                                                                                        |         |         |          |                                         |                                                                                            |  |                     |  |
|-----------------------------------------|------------------|--|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|---------|----------|-----------------------------------------|--------------------------------------------------------------------------------------------|--|---------------------|--|
| Description                             |                  |  | Initial frequency assistance                                                                                                                                                                                                                                                                            |         |         |          |                                         |                                                                                            |  |                     |  |
| Firmware                                |                  |  | Supported on:<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                                                                                                                                                                                                              |         |         |          |                                         | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |                     |  |
| Type                                    |                  |  | Input                                                                                                                                                                                                                                                                                                   |         |         |          |                                         |                                                                                            |  |                     |  |
| Comment                                 |                  |  | Supplying external frequency assistance that is inaccurate by more than the<br>specified accuracy, may lead to substantially degraded receiver performance.<br>This message allows the delivery of external frequency assistance to a receiver.<br>See the description of AssistNow Online for details. |         |         |          |                                         |                                                                                            |  |                     |  |
| Header<br>Class<br>ID<br>Length (Bytes) |                  |  |                                                                                                                                                                                                                                                                                                         |         | Payload | Checksum |                                         |                                                                                            |  |                     |  |
| Message Structure                       |                  |  | 0xB5 0x62 0x13                                                                                                                                                                                                                                                                                          |         | 0x40 12 |          |                                         |                                                                                            |  | see below CK_A CK_B |  |
| Payload Contents:                       |                  |  |                                                                                                                                                                                                                                                                                                         |         |         |          |                                         |                                                                                            |  |                     |  |
| Byte Offset                             | Number<br>Format |  | Scaling                                                                                                                                                                                                                                                                                                 |         | Name    |          | Unit                                    | Description                                                                                |  |                     |  |
| 0                                       | U1               |  | -                                                                                                                                                                                                                                                                                                       | type    |         |          | -                                       | Message type (0x21 for this type)                                                          |  |                     |  |
| 1                                       | U1               |  | -                                                                                                                                                                                                                                                                                                       | version |         |          | -                                       | Message version (0x00 for this version)                                                    |  |                     |  |
| 2                                       | U1               |  | reserved1<br>-                                                                                                                                                                                                                                                                                          |         | -       | Reserved |                                         |                                                                                            |  |                     |  |
| 3                                       | X1               |  | -                                                                                                                                                                                                                                                                                                       | flags   |         | -        | Frequency reference (see graphic below) |                                                                                            |  |                     |  |
| 4                                       | I4               |  | 1e-2                                                                                                                                                                                                                                                                                                    |         | freq    |          | Hz                                      | Frequency                                                                                  |  |                     |  |
| 8                                       | U4               |  | -                                                                                                                                                                                                                                                                                                       | freqAcc |         |          | ppb                                     | Frequency accuracy                                                                         |  |                     |  |

## <span id="page-347-1"></span>**Bitfield flags**



| Name   | Description                                       |
|--------|---------------------------------------------------|
| source | 0: frequency available on EXTINT0                 |
|        | 1: frequency available on EXTINT1                 |
|        | 2-15: reserved                                    |
| fall   | use falling edge of EXTINT pulse (default rising) |

<span id="page-348-1"></span>

#### **32.15.9.7 UBX-MGA-INI-EOP**

| Message                                                                                    |        |         | UBX-MGA-INI-EOP                           |         |           |   |                                                    |                                                                                            |         |                     |  |  |
|--------------------------------------------------------------------------------------------|--------|---------|-------------------------------------------|---------|-----------|---|----------------------------------------------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|
| Description                                                                                |        |         | Earth orientation parameters assistance   |         |           |   |                                                    |                                                                                            |         |                     |  |  |
| Firmware                                                                                   |        |         | Supported on:                             |         |           |   |                                                    |                                                                                            |         |                     |  |  |
|                                                                                            |        |         |                                           |         |           |   |                                                    | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |
|                                                                                            |        |         | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |         |           |   |                                                    |                                                                                            |         |                     |  |  |
| Type                                                                                       |        | Input   |                                           |         |           |   |                                                    |                                                                                            |         |                     |  |  |
| This message allows the delivery of new earth orientation parameters (EOP) to a<br>Comment |        |         |                                           |         |           |   |                                                    |                                                                                            |         |                     |  |  |
|                                                                                            |        |         |                                           |         |           |   |                                                    | receiver to improve AssistNow Autonomous operation.                                        |         |                     |  |  |
|                                                                                            |        |         | Header                                    | Class   | ID        |   | Length (Bytes)                                     |                                                                                            | Payload | Checksum            |  |  |
| Message Structure                                                                          |        |         | 0xB5 0x62 0x13                            |         | 0x40 72   |   |                                                    |                                                                                            |         | see below CK_A CK_B |  |  |
| Payload Contents:                                                                          |        |         |                                           |         |           |   |                                                    |                                                                                            |         |                     |  |  |
| Byte Offset                                                                                | Number | Scaling |                                           | Name    |           |   | Unit                                               | Description                                                                                |         |                     |  |  |
|                                                                                            | Format |         |                                           |         |           |   |                                                    |                                                                                            |         |                     |  |  |
| 0                                                                                          | U1     |         | -                                         | type    |           |   | -                                                  | Message type (0x30 for this type)                                                          |         |                     |  |  |
| 1                                                                                          | U1     |         | -                                         | version |           |   | -                                                  | Message version (0x00 for this version)                                                    |         |                     |  |  |
| 2                                                                                          | U1[2]  |         | -                                         |         | reserved1 |   | -                                                  | Reserved                                                                                   |         |                     |  |  |
| 4                                                                                          | U2     |         | -                                         | d2kRef  |           | d | reference time (days since 1.1.2000 12.00h<br>UTC) |                                                                                            |         |                     |  |  |
| 6                                                                                          | U2     |         | -                                         | d2kMax  |           |   | d                                                  | expiration time (days since 1.1.2000 12.00h                                                |         |                     |  |  |
|                                                                                            |        |         |                                           |         |           |   |                                                    | UTC)                                                                                       |         |                     |  |  |
| 8                                                                                          | I4     |         | 2^-30                                     | xpP0    |           |   | arcsec                                             | x_p t^0 polynomial term (offset)                                                           |         |                     |  |  |
| 12                                                                                         | I4     |         | 2^-30                                     | xpP1    |           |   | arcsec                                             | x_p t^1 polynomial term (drift)                                                            |         |                     |  |  |
|                                                                                            |        |         |                                           |         |           |   | /d                                                 |                                                                                            |         |                     |  |  |
| 16                                                                                         | I4     |         | 2^-30                                     | ypP0    |           |   | arcsec                                             | y_p t^0 polynomial term (offset)                                                           |         |                     |  |  |
| 20                                                                                         | I4     |         | 2^-30                                     |         | ypP1      |   | arcsec                                             | y_p t^1 polynomial term (drift)                                                            |         |                     |  |  |
|                                                                                            |        |         |                                           |         |           |   | /d                                                 |                                                                                            |         |                     |  |  |
| 24                                                                                         | I4     |         | 2^-25                                     | dUT1    |           |   | s                                                  | dUT1 t^0 polynomial term (offset)                                                          |         |                     |  |  |
| 28                                                                                         | I4     |         | 2^-30                                     | ddUT1   |           |   | s/d                                                | dUT1 t^1 polynomial term (drift)                                                           |         |                     |  |  |
| 32                                                                                         | U1[40] |         | -                                         |         | reserved2 |   | -                                                  | Reserved                                                                                   |         |                     |  |  |

## <span id="page-348-0"></span>**32.15.10 UBX-MGA-QZSS (0x13 0x05)**

## **32.15.10.1 UBX-MGA-QZSS-EPH**

| Message           |                                                  | UBX-MGA-QZSS-EPH                                                                           |    |                                                                              |         |          |  |  |  |  |
|-------------------|--------------------------------------------------|--------------------------------------------------------------------------------------------|----|------------------------------------------------------------------------------|---------|----------|--|--|--|--|
| Description       | QZSS ephemeris assistance                        |                                                                                            |    |                                                                              |         |          |  |  |  |  |
| Firmware          | Supported on:                                    |                                                                                            |    |                                                                              |         |          |  |  |  |  |
|                   |                                                  | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |    |                                                                              |         |          |  |  |  |  |
|                   |                                                  | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |    |                                                                              |         |          |  |  |  |  |
| Type              | Input                                            |                                                                                            |    |                                                                              |         |          |  |  |  |  |
| Comment           |                                                  |                                                                                            |    | This message allows the delivery of QZSS ephemeris assistance to a receiver. |         |          |  |  |  |  |
|                   |                                                  |                                                                                            |    | See the description of AssistNow Online for details.                         |         |          |  |  |  |  |
|                   | Header                                           | Class                                                                                      | ID | Length (Bytes)                                                               | Payload | Checksum |  |  |  |  |
| Message Structure | 0xB5 0x62 0x13<br>0x05 68<br>see below CK_A CK_B |                                                                                            |    |                                                                              |         |          |  |  |  |  |
| Payload Contents: |                                                  |                                                                                            |    |                                                                              |         |          |  |  |  |  |



#### UBX-MGA-QZSS continued

| Byte Offset<br>Number<br>Scaling<br>Name<br>Unit<br>Description<br>Format<br>Byte Offset<br>Number<br>Scaling<br>Name<br>Unit<br>Description<br>Format<br>type<br>0<br>U1<br>-<br>-<br>Message type (0x01 for this type)<br>version<br>1<br>U1<br>-<br>-<br>Message version (0x00 for this version)<br>svId<br>2<br>U1<br>-<br>-<br>QZSS Satellite identifier (see Satellite<br>Numbering), Range 1-5<br>reserved1<br>3<br>U1<br>-<br>-<br>Reserved<br>fitInterval<br>4<br>U1<br>-<br>-<br>Fit interval flag<br>uraIndex<br>5<br>U1<br>-<br>-<br>URA index<br>svHealth<br>6<br>U1<br>-<br>-<br>SV health<br>tgd<br>7<br>I1<br>2^-31<br>s<br>Group delay differential<br>iodc<br>8<br>U2<br>-<br>-<br>IODC<br>toc<br>10<br>U2<br>2^4<br>s<br>Clock data reference time<br>reserved2<br>12<br>U1<br>-<br>-<br>Reserved<br>af2<br>13<br>I1<br>2^-55<br>s/s<br>Time polynomial coefficient 2<br>square<br>d<br>af1<br>14<br>I2<br>2^-43<br>s/s<br>Time polynomial coefficient 1<br>af0<br>16<br>I4<br>2^-31<br>s<br>Time polynomial coefficient 0<br>crs<br>20<br>I2<br>2^-5<br>m<br>Crs<br>deltaN<br>22<br>I2<br>2^-43<br>semi<br>Mean motion difference from computed<br>circles<br>value<br>/s<br>m0<br>24<br>I4<br>2^-31<br>semi<br>Mean anomaly at reference time<br>circles<br>cuc<br>28<br>I2<br>2^-29<br>radian<br>Amp of cosine harmonic corr term to arg<br>s<br>of lat<br>cus<br>30<br>I2<br>2^-29<br>radian<br>Amp of sine harmonic corr term to arg of<br>s<br>lat<br>e<br>32<br>U4<br>2^-33<br>-<br>eccentricity<br>sqrtA<br>36<br>U4<br>2^-19<br>m^0.5<br>Square root of the semi-major axis A<br>toe<br>40<br>U2<br>2^4<br>s<br>Reference time of ephemeris<br>cic<br>42<br>I2<br>2^-29<br>radian<br>Amp of cos harmonic corr term to angle of<br>s<br>inclination<br>omega0<br>44<br>I4<br>2^-31<br>semi<br>Long of asc node of orbit plane at weekly<br>circles<br>epoch<br>cis<br>48<br>I2<br>2^-29<br>radian<br>Amp of sine harmonic corr term to angle<br>s<br>of inclination<br>crc<br>50<br>I2<br>2^-5<br>m<br>Amp of cosine harmonic corr term to orbit<br>radius<br>i0<br>52<br>I4<br>2^-31<br>semi<br>Inclination angle at reference time<br>circles<br>omega<br>56<br>I4<br>2^-31<br>semi<br>Argument of perigee<br>circles |  |  |  |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--|--|--|
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  |  |  |

<span id="page-350-0"></span>

#### UBX-MGA-QZSS continued

| Byte Offset | Number | Scaling | Name      | Unit    | Description               |
|-------------|--------|---------|-----------|---------|---------------------------|
|             | Format |         |           |         |                           |
| 60          | I4     | 2^-43   | omegaDot  | semi    | Rate of right ascension   |
|             |        |         |           | circles |                           |
|             |        |         |           | /s      |                           |
| 64          | I2     | 2^-43   | idot      | semi    | Rate of inclination angle |
|             |        |         |           | circles |                           |
|             |        |         |           | /s      |                           |
| 66          | U1[2]  | -       | reserved3 | -       | Reserved                  |

#### **32.15.10.2 UBX-MGA-QZSS-ALM**

| Message           |                  |         | UBX-MGA-QZSS-ALM                                                                                                                   |         |          |  |                       |                                                                                            |                                       |                     |  |
|-------------------|------------------|---------|------------------------------------------------------------------------------------------------------------------------------------|---------|----------|--|-----------------------|--------------------------------------------------------------------------------------------|---------------------------------------|---------------------|--|
| Description       |                  |         | QZSS almanac assistance                                                                                                            |         |          |  |                       |                                                                                            |                                       |                     |  |
| Firmware          |                  |         | Supported on:<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                                         |         |          |  |                       | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                                       |                     |  |
| Type              |                  | Input   |                                                                                                                                    |         |          |  |                       |                                                                                            |                                       |                     |  |
| Comment           |                  |         | This message allows the delivery of QZSS almanac assistance to a receiver.<br>See the description of AssistNow Online for details. |         |          |  |                       |                                                                                            |                                       |                     |  |
|                   |                  |         | Header                                                                                                                             | Class   | ID       |  | Length (Bytes)        |                                                                                            | Payload                               | Checksum            |  |
| Message Structure |                  |         | 0xB5 0x62 0x13                                                                                                                     |         | 0x05 36  |  |                       |                                                                                            |                                       | see below CK_A CK_B |  |
| Payload Contents: |                  |         |                                                                                                                                    |         |          |  |                       |                                                                                            |                                       |                     |  |
| Byte Offset       | Number<br>Format | Scaling |                                                                                                                                    | Name    |          |  | Unit                  | Description                                                                                |                                       |                     |  |
| 0                 | U1               |         | -                                                                                                                                  | type    |          |  | -                     | Message type (0x02 for this type)                                                          |                                       |                     |  |
| 1                 | U1               |         | -                                                                                                                                  | version |          |  | -                     | Message version (0x00 for this version)                                                    |                                       |                     |  |
| 2                 | U1               |         | -                                                                                                                                  |         | svId     |  | -                     | QZSS Satellite identifier (see Satellite<br>Numbering), Range 1-5                          |                                       |                     |  |
| 3                 | U1               |         | -                                                                                                                                  |         | svHealth |  | -                     | Almanac SV health information                                                              |                                       |                     |  |
| 4                 | U2               |         | 2^-21                                                                                                                              | e       |          |  | -                     | Almanac eccentricity                                                                       |                                       |                     |  |
| 6                 | U1               |         | -                                                                                                                                  |         | almWNa   |  | week                  | 8-bit WNa field)                                                                           | Reference week number of almanac (the |                     |  |
| 7                 | U1               |         | 2^12                                                                                                                               | toa     |          |  | s                     | Reference time of almanac                                                                  |                                       |                     |  |
| 8                 | I2               |         | 2^-19                                                                                                                              | deltaI  |          |  | semi<br>circles       | Delta inclination angle at reference time                                                  |                                       |                     |  |
| 10                | I2               |         | 2^-38                                                                                                                              |         | omegaDot |  | semi<br>circles<br>/s | Almanac rate of right ascension                                                            |                                       |                     |  |
| 12                | U4               |         | 2^-11                                                                                                                              |         | sqrtA    |  | m^0.5                 | Almanac square root of the semi-major<br>axis A                                            |                                       |                     |  |
| 16                | I4               |         | 2^-23                                                                                                                              | omega0  |          |  | semi<br>circles       | Almanac long of asc node of orbit plane at<br>weekly                                       |                                       |                     |  |
| 20                | I4               |         | 2^-23                                                                                                                              |         | omega    |  | semi<br>circles       | Almanac argument of perigee                                                                |                                       |                     |  |

<span id="page-351-0"></span>

#### UBX-MGA-QZSS continued

| Byte Offset | Number | Scaling | Name      | Unit    | Description                              |
|-------------|--------|---------|-----------|---------|------------------------------------------|
|             | Format |         |           |         |                                          |
| 24          | I4     | 2^-23   | m0        | semi    | Almanac mean anomaly at reference time   |
|             |        |         |           | circles |                                          |
| 28          | I2     | 2^-20   | af0       | s       | Almanac time polynomial coefficient 0 (8 |
|             |        |         |           |         | MSBs)                                    |
| 30          | I2     | 2^-38   | af1       | s/s     | Almanac time polynomial coefficient 1    |
| 32          | U1[4]  | -       | reserved1 | -       | Reserved                                 |

#### **32.15.10.3 UBX-MGA-QZSS-HEALTH**

| Message           |        |       | UBX-MGA-QZSS-HEALTH                                                       |         |                     |  |      |                                                                                            |  |  |  |  |  |  |  |
|-------------------|--------|-------|---------------------------------------------------------------------------|---------|---------------------|--|------|--------------------------------------------------------------------------------------------|--|--|--|--|--|--|--|
| Description       |        |       | QZSS health assistance                                                    |         |                     |  |      |                                                                                            |  |  |  |  |  |  |  |
| Firmware          |        |       | Supported on:                                                             |         |                     |  |      |                                                                                            |  |  |  |  |  |  |  |
|                   |        |       |                                                                           |         |                     |  |      | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |  |  |  |  |  |  |
|                   |        |       | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                 |         |                     |  |      |                                                                                            |  |  |  |  |  |  |  |
| Type              |        | Input |                                                                           |         |                     |  |      |                                                                                            |  |  |  |  |  |  |  |
| Comment           |        |       |                                                                           |         |                     |  |      | This message allows the delivery of QZSS health assistance to a receiver.                  |  |  |  |  |  |  |  |
|                   |        |       |                                                                           |         |                     |  |      | See the description of AssistNow Online for details.                                       |  |  |  |  |  |  |  |
|                   |        |       | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum<br>0x05 12 |         |                     |  |      |                                                                                            |  |  |  |  |  |  |  |
| Message Structure |        |       | 0xB5 0x62 0x13                                                            |         | see below CK_A CK_B |  |      |                                                                                            |  |  |  |  |  |  |  |
| Payload Contents: |        |       |                                                                           |         |                     |  |      |                                                                                            |  |  |  |  |  |  |  |
| Byte Offset       | Number |       | Scaling                                                                   | Name    |                     |  | Unit | Description                                                                                |  |  |  |  |  |  |  |
|                   | Format |       |                                                                           |         |                     |  |      |                                                                                            |  |  |  |  |  |  |  |
| 0                 | U1     |       | -                                                                         | type    |                     |  | -    | Message type (0x04 for this type)                                                          |  |  |  |  |  |  |  |
| 1                 | U1     |       | -                                                                         | version |                     |  | -    | Message version (0x00 for this version)                                                    |  |  |  |  |  |  |  |
| 2                 | U1[2]  |       | -                                                                         |         | reserved1           |  | -    | Reserved                                                                                   |  |  |  |  |  |  |  |
| 4                 | U1[5]  |       | -                                                                         |         | healthCode          |  | -    | Each byte represents a QZSS SV (1-5). The                                                  |  |  |  |  |  |  |  |
|                   |        |       |                                                                           |         |                     |  |      | 6 LSBs of each byte contains the 6 bit                                                     |  |  |  |  |  |  |  |
|                   |        |       |                                                                           |         |                     |  |      | health code from subframes 4/5, data ID =                                                  |  |  |  |  |  |  |  |
|                   |        |       |                                                                           |         |                     |  |      | 3, SV ID = 51                                                                              |  |  |  |  |  |  |  |
| 9                 | U1[3]  |       | -                                                                         |         | reserved2           |  | -    | Reserved                                                                                   |  |  |  |  |  |  |  |

<span id="page-352-0"></span>

## **32.16 UBX-MON (0x0A)**

Monitoring Messages: i.e. Communication Status, Stack Usage, Task Status. Messages in the MON class are used to report the receiver status, such as stack usage, I/O subsystem statistics etc.

## <span id="page-352-1"></span>**32.16.1 UBX-MON-BATCH (0x0A 0x32)**

#### **32.16.1.1 Data batching buffer status**

| Message           |        |        | UBX-MON-BATCH                           |         |               |  |                |                                                                                 |                     |  |          |  |  |  |  |
|-------------------|--------|--------|-----------------------------------------|---------|---------------|--|----------------|---------------------------------------------------------------------------------|---------------------|--|----------|--|--|--|--|
| Description       |        |        | Data batching buffer status             |         |               |  |                |                                                                                 |                     |  |          |  |  |  |  |
| Firmware          |        |        | Supported on:                           |         |               |  |                |                                                                                 |                     |  |          |  |  |  |  |
|                   |        |        |                                         |         |               |  |                | • u-blox 8 / u-blox M8 with protocol version 23.01                              |                     |  |          |  |  |  |  |
| Type              |        |        | Polled                                  |         |               |  |                |                                                                                 |                     |  |          |  |  |  |  |
| Comment           |        |        |                                         |         |               |  |                | This message contains status information about the batching buffer.             |                     |  |          |  |  |  |  |
|                   |        |        |                                         |         |               |  |                | It can be polled and it can also be sent by the receiver as a response to a UBX |                     |  |          |  |  |  |  |
|                   |        |        |                                         |         |               |  |                | LOG-RETRIEVEBATCH message before the UBX-LOG-BATCH messages.                    |                     |  |          |  |  |  |  |
|                   |        |        | See Data Batching for more information. |         |               |  |                |                                                                                 |                     |  |          |  |  |  |  |
|                   |        | Header |                                         | Class   | ID            |  | Length (Bytes) |                                                                                 | Payload             |  | Checksum |  |  |  |  |
| Message Structure |        |        | 0xB5 0x62 0x0A 0x32 12                  |         |               |  |                |                                                                                 | see below CK_A CK_B |  |          |  |  |  |  |
| Payload Contents: |        |        |                                         |         |               |  |                |                                                                                 |                     |  |          |  |  |  |  |
| Byte Offset       | Number |        | Scaling                                 | Name    |               |  | Unit           | Description                                                                     |                     |  |          |  |  |  |  |
|                   | Format |        |                                         |         |               |  |                |                                                                                 |                     |  |          |  |  |  |  |
| 0                 | U1     |        | -                                       | version |               |  | -              | Message version (0x00 for this version)                                         |                     |  |          |  |  |  |  |
| 1                 | U1[3]  |        | -                                       |         | reserved1     |  | -              | Reserved                                                                        |                     |  |          |  |  |  |  |
| 4                 | U2     |        | -                                       |         | fillLevel     |  | -              | Current buffer fill level, i.e. number of                                       |                     |  |          |  |  |  |  |
|                   |        |        |                                         |         |               |  |                | epochs currently stored                                                         |                     |  |          |  |  |  |  |
| 6                 | U2     |        | -                                       |         | dropsAll      |  | -              | Number of dropped epochs since startup                                          |                     |  |          |  |  |  |  |
|                   |        |        |                                         |         |               |  |                | Note: changing the batching configuration                                       |                     |  |          |  |  |  |  |
|                   |        |        |                                         |         |               |  |                | will reset this counter.                                                        |                     |  |          |  |  |  |  |
| 8                 | U2     |        | -                                       |         | dropsSinceMon |  | -              | Number of dropped epochs since last                                             |                     |  |          |  |  |  |  |
|                   |        |        |                                         |         |               |  |                | MON-BATCH message                                                               |                     |  |          |  |  |  |  |
| 10                | U2     |        | -                                       |         | nextMsgCnt    |  | -              | The next retrieved UBX-LOG-BATCH will                                           |                     |  |          |  |  |  |  |
|                   |        |        |                                         |         |               |  |                | have this msgCnt value.                                                         |                     |  |          |  |  |  |  |

<span id="page-353-1"></span>

## <span id="page-353-0"></span>**32.16.2 UBX-MON-GNSS (0x0A 0x28)**

#### **32.16.2.1 Information message major GNSS selection**

| Message           |        |  | UBX-MON-GNSS<br>Information message major GNSS selection |              |             |         |          |                                                                                            |  |                     |  |  |  |  |  |  |
|-------------------|--------|--|----------------------------------------------------------|--------------|-------------|---------|----------|--------------------------------------------------------------------------------------------|--|---------------------|--|--|--|--|--|--|
| Description       |        |  |                                                          |              |             |         |          |                                                                                            |  |                     |  |  |  |  |  |  |
| Firmware          |        |  | Supported on:                                            |              |             |         |          |                                                                                            |  |                     |  |  |  |  |  |  |
|                   |        |  |                                                          |              |             |         |          | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |                     |  |  |  |  |  |  |
|                   |        |  | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                |              |             |         |          |                                                                                            |  |                     |  |  |  |  |  |  |
| Type              |        |  | Polled                                                   |              |             |         |          |                                                                                            |  |                     |  |  |  |  |  |  |
| Comment           |        |  |                                                          |              |             |         |          | This message reports major GNSS selection. It does this by means of bit masks              |  |                     |  |  |  |  |  |  |
|                   |        |  |                                                          |              |             |         |          | in U1 fields. Each bit in a bit mask corresponds to one major GNSS.                        |  |                     |  |  |  |  |  |  |
|                   |        |  | Augmentation systems are not reported.                   |              |             |         |          |                                                                                            |  |                     |  |  |  |  |  |  |
|                   |        |  | Header                                                   | Class        |             | Payload | Checksum |                                                                                            |  |                     |  |  |  |  |  |  |
| Message Structure |        |  | 0xB5 0x62 0x0A 0x28 8                                    |              |             |         |          |                                                                                            |  | see below CK_A CK_B |  |  |  |  |  |  |
| Payload Contents: |        |  |                                                          |              |             |         |          |                                                                                            |  |                     |  |  |  |  |  |  |
| Byte Offset       | Number |  | Scaling                                                  | Name         |             |         | Unit     | Description                                                                                |  |                     |  |  |  |  |  |  |
|                   | Format |  |                                                          |              |             |         |          |                                                                                            |  |                     |  |  |  |  |  |  |
| 0                 | U1     |  | -                                                        | version      |             |         | -        | Message version (0x00 for this version)                                                    |  |                     |  |  |  |  |  |  |
| 1                 | X1     |  | -                                                        |              | supported   |         | -        | A bit mask showing the major GNSS that                                                     |  |                     |  |  |  |  |  |  |
|                   |        |  |                                                          |              |             |         |          | can be supported by this receiver (see                                                     |  |                     |  |  |  |  |  |  |
|                   |        |  |                                                          |              |             |         |          | graphic below)                                                                             |  |                     |  |  |  |  |  |  |
| 2                 | X1     |  | -                                                        |              | defaultGnss |         | -        | A bit mask showing the default major                                                       |  |                     |  |  |  |  |  |  |
|                   |        |  |                                                          |              |             |         |          | GNSS selection. If the default major GNSS                                                  |  |                     |  |  |  |  |  |  |
|                   |        |  |                                                          |              |             |         |          | selection is currently configured in the                                                   |  |                     |  |  |  |  |  |  |
|                   |        |  |                                                          |              |             |         |          | efuse for this receiver, it takes precedence                                               |  |                     |  |  |  |  |  |  |
|                   |        |  |                                                          |              |             |         |          | over the default major GNSS selection                                                      |  |                     |  |  |  |  |  |  |
|                   |        |  |                                                          |              |             |         |          | configured in the executing firmware of                                                    |  |                     |  |  |  |  |  |  |
|                   |        |  |                                                          |              |             |         |          | this receiver. (see graphic below)                                                         |  |                     |  |  |  |  |  |  |
| 3                 | X1     |  | -                                                        | enabled      |             |         | -        | A bit mask showing the current major                                                       |  |                     |  |  |  |  |  |  |
|                   |        |  |                                                          |              |             |         |          | GNSS selection enabled for this receiver                                                   |  |                     |  |  |  |  |  |  |
| 4                 | U1     |  | -                                                        |              |             |         | -        | (see graphic below)<br>Maximum number of concurrent major                                  |  |                     |  |  |  |  |  |  |
|                   |        |  |                                                          | simultaneous |             |         |          | GNSS that can be supported by this                                                         |  |                     |  |  |  |  |  |  |
|                   |        |  |                                                          |              |             |         |          | receiver                                                                                   |  |                     |  |  |  |  |  |  |
| 5                 | U1[3]  |  | -                                                        |              | reserved1   |         | -        | Reserved                                                                                   |  |                     |  |  |  |  |  |  |

## <span id="page-353-2"></span>**Bitfield supported**

This graphic explains the bits of supported





| Name       | Description          |
|------------|----------------------|
| GPSSup     | GPS is supported     |
| GlonassSup | GLONASS is supported |
| BeidouSup  | BeiDou is supported  |
| GalileoSup | Galileo is supported |

## <span id="page-354-0"></span>**Bitfield defaultGnss**

This graphic explains the bits of defaultGnss



| Name       | Description                |
|------------|----------------------------|
| GPSDef     | GPS is default-enabled     |
| GlonassDef | GLONASS is default-enabled |
| BeidouDef  | BeiDou is default-enabled  |
| GalileoDef | Galileo is default-enabled |

## <span id="page-354-1"></span>**Bitfield enabled**

This graphic explains the bits of enabled



| Name       | Description        |
|------------|--------------------|
| GPSEna     | GPS is enabled     |
| GlonassEna | GLONASS is enabled |
| BeidouEna  | BeiDou is enabled  |
| GalileoEna | Galileo is enabled |

<span id="page-355-1"></span>

### <span id="page-355-0"></span>**32.16.3 UBX-MON-HW2 (0x0A 0x0B)**

#### **32.16.3.1 Extended hardware status**

| UBX-MON-HW2<br>Message<br>Extended hardware status |                  |  |                                                                       |                            |            |  |                |                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                     |                     |  |  |  |  |
|----------------------------------------------------|------------------|--|-----------------------------------------------------------------------|----------------------------|------------|--|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------|---------------------|--|--|--|--|
| Description                                        |                  |  |                                                                       |                            |            |  |                |                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                     |                     |  |  |  |  |
| Firmware                                           |                  |  | Supported on:<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01            |                            |            |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,                                                                                                                                                                                                                                                                                    |                                                                                                                     |                     |  |  |  |  |
| Type                                               |                  |  | Periodic/Polled                                                       |                            |            |  |                |                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                     |                     |  |  |  |  |
| Comment                                            |                  |  | Configuration and POST Results.<br>complex signal should be the same. |                            |            |  |                | Status of different aspects of the hardware such as Imbalance, Low-Level<br>The first four parameters of this message represent the complex signal from<br>the RF front end. The following rules of thumb apply:<br>• The smaller the absolute value of the variable ofsI and ofsQ, the better.<br>• Ideally, the magnitude of the I-part (magI) and the Q-part (magQ) of the |                                                                                                                     |                     |  |  |  |  |
|                                                    |                  |  | Header                                                                | Class                      | ID         |  | Length (Bytes) |                                                                                                                                                                                                                                                                                                                                                                               | Payload                                                                                                             | Checksum            |  |  |  |  |
| Message Structure                                  |                  |  | 0xB5 0x62 0x0A 0x0B 28                                                |                            |            |  |                |                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                     | see below CK_A CK_B |  |  |  |  |
| Payload Contents:                                  |                  |  |                                                                       |                            |            |  |                |                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                     |                     |  |  |  |  |
| Byte Offset                                        | Number<br>Format |  | Scaling                                                               | Name                       |            |  | Unit           | Description                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                                     |                     |  |  |  |  |
| 0                                                  | I1               |  | -                                                                     | ofsI                       |            |  | -              |                                                                                                                                                                                                                                                                                                                                                                               | Imbalance of I-part of complex signal,<br>scaled (-128 = max. negative imbalance,<br>127 = max. positive imbalance) |                     |  |  |  |  |
| 1                                                  | U1               |  | -                                                                     | magI                       |            |  | -              | Magnitude of I-part of complex signal,<br>scaled (0 = no signal, 255 = max.<br>magnitude)                                                                                                                                                                                                                                                                                     |                                                                                                                     |                     |  |  |  |  |
| 2                                                  | I1               |  | -                                                                     | ofsQ                       |            |  | -              | Imbalance of Q-part of complex signal,<br>scaled (-128 = max. negative imbalance,<br>127 = max. positive imbalance)                                                                                                                                                                                                                                                           |                                                                                                                     |                     |  |  |  |  |
| 3                                                  | U1               |  | -                                                                     | magQ                       |            |  | -              | Magnitude of Q-part of complex signal,<br>scaled (0 = no signal, 255 = max.<br>magnitude)                                                                                                                                                                                                                                                                                     |                                                                                                                     |                     |  |  |  |  |
| 4                                                  | U1               |  | -                                                                     |                            | cfgSource  |  | -              | Source of low-level configuration<br>(114 = ROM, 111 = OTP, 112 = config pins,<br>102 = flash image)                                                                                                                                                                                                                                                                          |                                                                                                                     |                     |  |  |  |  |
| 5                                                  | U1[3]            |  | -                                                                     |                            | reserved1  |  | -              | Reserved                                                                                                                                                                                                                                                                                                                                                                      |                                                                                                                     |                     |  |  |  |  |
| 8                                                  | U4               |  | -                                                                     |                            | lowLevCfg  |  | -              | Low-level configuration (obsolete in<br>protocol versions greater than 15)                                                                                                                                                                                                                                                                                                    |                                                                                                                     |                     |  |  |  |  |
| 12                                                 | U1[8]            |  | -                                                                     |                            | reserved2  |  | -              | Reserved                                                                                                                                                                                                                                                                                                                                                                      |                                                                                                                     |                     |  |  |  |  |
| 20                                                 | U4               |  | -                                                                     |                            | postStatus |  | -              | POST status word                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                     |                     |  |  |  |  |
| 24                                                 | U1[4]            |  | -                                                                     | reserved3<br>-<br>Reserved |            |  |                |                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                     |                     |  |  |  |  |

<span id="page-356-1"></span>

### <span id="page-356-0"></span>**32.16.4 UBX-MON-HW (0x0A 0x09)**

#### **32.16.4.1 Hardware status**

| Message           |        |  | UBX-MON-HW                                |            |               |  |                                            |                                                                                            |         |                     |  |  |  |  |  |
|-------------------|--------|--|-------------------------------------------|------------|---------------|--|--------------------------------------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|--|--|--|
| Description       |        |  | Hardware status                           |            |               |  |                                            |                                                                                            |         |                     |  |  |  |  |  |
| Firmware          |        |  | Supported on:                             |            |               |  |                                            |                                                                                            |         |                     |  |  |  |  |  |
|                   |        |  |                                           |            |               |  |                                            | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |  |  |  |
|                   |        |  | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |            |               |  |                                            |                                                                                            |         |                     |  |  |  |  |  |
| Type              |        |  | Periodic/polled                           |            |               |  |                                            |                                                                                            |         |                     |  |  |  |  |  |
| Comment           |        |  |                                           |            |               |  |                                            | Status of different aspects of the hardware, such as antenna, PIO/peripheral               |         |                     |  |  |  |  |  |
|                   |        |  |                                           |            |               |  |                                            | pins, noise level, automatic gain control (AGC)                                            |         |                     |  |  |  |  |  |
|                   |        |  | Header                                    | Class      | ID            |  | Length (Bytes)                             |                                                                                            | Payload | Checksum            |  |  |  |  |  |
| Message Structure |        |  | 0xB5 0x62 0x0A 0x09 60                    |            |               |  |                                            |                                                                                            |         | see below CK_A CK_B |  |  |  |  |  |
| Payload Contents: |        |  |                                           |            |               |  |                                            |                                                                                            |         |                     |  |  |  |  |  |
| Byte Offset       | Number |  | Scaling                                   | Name       |               |  | Unit                                       | Description                                                                                |         |                     |  |  |  |  |  |
|                   | Format |  |                                           |            |               |  |                                            |                                                                                            |         |                     |  |  |  |  |  |
| 0                 | X4     |  | -                                         | pinSel     |               |  | -                                          | Mask of pins set as peripheral/PIO                                                         |         |                     |  |  |  |  |  |
| 4                 | X4     |  | -                                         | pinBank    |               |  | -                                          | Mask of pins set as bank A/B                                                               |         |                     |  |  |  |  |  |
| 8                 | X4     |  | -                                         | pinDir     |               |  | -                                          | Mask of pins set as input/output                                                           |         |                     |  |  |  |  |  |
| 12                | X4     |  | -                                         | pinVal     |               |  | -                                          | Mask of pins value low/high                                                                |         |                     |  |  |  |  |  |
| 16                | U2     |  | -                                         | noisePerMS |               |  | -                                          | Noise level as measured by the GPS core                                                    |         |                     |  |  |  |  |  |
| 18                | U2     |  | -                                         | agcCnt     |               |  | -                                          | AGC Monitor, as percentage of maximum                                                      |         |                     |  |  |  |  |  |
|                   |        |  |                                           |            |               |  |                                            | gain,range 0 to 8191 (100%)                                                                |         |                     |  |  |  |  |  |
| 20                | U1     |  | -                                         | aStatus    |               |  | -                                          | Status of the antenna supervisor state                                                     |         |                     |  |  |  |  |  |
|                   |        |  |                                           |            |               |  |                                            | machine (0=INIT, 1=DONTKNOW, 2=OK,                                                         |         |                     |  |  |  |  |  |
|                   |        |  |                                           |            |               |  |                                            | 3=SHORT, 4=OPEN)                                                                           |         |                     |  |  |  |  |  |
| 21                | U1     |  | -                                         | aPower     |               |  | -                                          | Current power status of antenna (0=OFF,                                                    |         |                     |  |  |  |  |  |
|                   |        |  |                                           |            |               |  |                                            | 1=ON, 2=DONTKNOW)                                                                          |         |                     |  |  |  |  |  |
| 22                | X1     |  | -                                         | flags      |               |  | -                                          | Flags (see graphic below)                                                                  |         |                     |  |  |  |  |  |
| 23                | U1     |  | -                                         |            | reserved1     |  | -                                          | Reserved                                                                                   |         |                     |  |  |  |  |  |
| 24                | X4     |  | -                                         |            | usedMask      |  | -                                          | Mask of pins that are used by the virtual                                                  |         |                     |  |  |  |  |  |
|                   |        |  |                                           |            |               |  |                                            | pin manager                                                                                |         |                     |  |  |  |  |  |
| 28                | U1[17] |  | -                                         | VP         |               |  | -                                          | Array of pin mappings for each of the 17                                                   |         |                     |  |  |  |  |  |
|                   |        |  |                                           |            |               |  |                                            | physical pins                                                                              |         |                     |  |  |  |  |  |
| 45                | U1     |  | -                                         |            | cwSuppression |  | -                                          | CW interference suppression level, scaled                                                  |         |                     |  |  |  |  |  |
|                   |        |  |                                           |            |               |  |                                            | (0 = no CW jamming, 255 = strong CW                                                        |         |                     |  |  |  |  |  |
|                   |        |  |                                           |            |               |  |                                            | jamming)                                                                                   |         |                     |  |  |  |  |  |
| 46                | U1[2]  |  | -                                         |            | reserved2     |  | -                                          | Reserved                                                                                   |         |                     |  |  |  |  |  |
| 48                | X4     |  | -                                         | pinIrq     |               |  | -                                          | Mask of pins value using the PIO Irq                                                       |         |                     |  |  |  |  |  |
| 52                | X4     |  | -                                         | pullH<br>- |               |  | Mask of pins value using the PIO pull high |                                                                                            |         |                     |  |  |  |  |  |
|                   |        |  |                                           |            |               |  |                                            | resistor                                                                                   |         |                     |  |  |  |  |  |
| 56                | X4     |  | -                                         | pullL      |               |  | -                                          | Mask of pins value using the PIO pull low                                                  |         |                     |  |  |  |  |  |
|                   |        |  |                                           |            |               |  |                                            | resistor                                                                                   |         |                     |  |  |  |  |  |

<span id="page-357-1"></span>

## <span id="page-357-2"></span>**Bitfield flags**

This graphic explains the bits of flags



| Name         | Description                                                                                             |
|--------------|---------------------------------------------------------------------------------------------------------|
| rtcCalib     | RTC is calibrated                                                                                       |
| safeBoot     | Safeboot mode (0 = inactive, 1 = active)                                                                |
| jammingState | Output from jamming/interference monitor (0 = unknown or feature disabled or flag unavailable, 1 =      |
|              | ok - no significant jamming, 2 = warning - interference visible but fix OK, 3 = critical - interference |
|              | visible and no fix). This flag is deprecated in protocol versions that support UBX-SEC-SIG (version     |
|              | 0x02) and always reported as 0; instead jammingState in UBX-SEC-SIG should be monitored.                |
| xtalAbsent   | RTC xtal has been determined to be absent (not supported in protocol versions less than 18)             |

## <span id="page-357-0"></span>**32.16.5 UBX-MON-IO (0x0A 0x02)**

### **32.16.5.1 I/O system status**

| Message                           |                  |  | UBX-MON-IO                                |         |             |                     |                                                                                            |         |                     |  |  |  |  |  |
|-----------------------------------|------------------|--|-------------------------------------------|---------|-------------|---------------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|--|--|--|--|
| Description                       |                  |  | I/O system status                         |         |             |                     |                                                                                            |         |                     |  |  |  |  |  |
| Firmware                          |                  |  | Supported on:                             |         |             |                     |                                                                                            |         |                     |  |  |  |  |  |
|                                   |                  |  |                                           |         |             |                     | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |  |  |  |  |
|                                   |                  |  | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |         |             |                     |                                                                                            |         |                     |  |  |  |  |  |
| Type                              |                  |  | Periodic/Polled                           |         |             |                     |                                                                                            |         |                     |  |  |  |  |  |
| Comment                           |                  |  |                                           |         |             |                     | The size of the message is determined by the number of ports 'N' the receiver              |         |                     |  |  |  |  |  |
|                                   |                  |  |                                           |         |             |                     | supports, i.e. on u-blox 5 the number of ports is 6.                                       |         |                     |  |  |  |  |  |
|                                   |                  |  | Header                                    | Class   | ID          | Length (Bytes)      |                                                                                            | Payload | Checksum            |  |  |  |  |  |
| Message Structure                 |                  |  | 0xB5 0x62 0x0A 0x02 0 + 20*N              |         |             |                     |                                                                                            |         | see below CK_A CK_B |  |  |  |  |  |
| Payload Contents:                 |                  |  |                                           |         |             |                     |                                                                                            |         |                     |  |  |  |  |  |
| Byte Offset                       |                  |  | Scaling                                   | Name    |             | Unit<br>Description |                                                                                            |         |                     |  |  |  |  |  |
|                                   | Number<br>Format |  |                                           |         |             |                     |                                                                                            |         |                     |  |  |  |  |  |
| Start of repeated block (N times) |                  |  |                                           |         |             |                     |                                                                                            |         |                     |  |  |  |  |  |
| N*20                              | U4               |  | -                                         | rxBytes |             | bytes               | Number of bytes ever received                                                              |         |                     |  |  |  |  |  |
| 4 + 20*N                          | U4               |  | -                                         | txBytes |             | bytes               | Number of bytes ever sent                                                                  |         |                     |  |  |  |  |  |
| 8 + 20*N                          | U2               |  | -                                         |         | parityErrs  | -                   | Number of 100 ms timeslots with parity                                                     |         |                     |  |  |  |  |  |
|                                   |                  |  |                                           |         |             |                     | errors                                                                                     |         |                     |  |  |  |  |  |
| 10 + 20*N                         | U2               |  | -                                         |         | framingErrs | -                   | Number of 100 ms timeslots with framing                                                    |         |                     |  |  |  |  |  |
|                                   |                  |  |                                           |         |             |                     | errors                                                                                     |         |                     |  |  |  |  |  |
| 12 + 20*N                         | U2               |  | -                                         |         | overrunErrs | -                   | Number of 100 ms timeslots with overrun                                                    |         |                     |  |  |  |  |  |
|                                   |                  |  |                                           |         |             |                     | errors                                                                                     |         |                     |  |  |  |  |  |
| 14 + 20*N                         | U2               |  | -                                         |         | breakCond   | -                   | Number of 100 ms timeslots with break                                                      |         |                     |  |  |  |  |  |
|                                   |                  |  |                                           |         |             |                     | conditions                                                                                 |         |                     |  |  |  |  |  |
| 16 + 20*N                         | U1[4]            |  | -                                         |         | reserved1   | -                   | Reserved                                                                                   |         |                     |  |  |  |  |  |
| End of repeated block             |                  |  |                                           |         |             |                     |                                                                                            |         |                     |  |  |  |  |  |

<span id="page-358-2"></span>

## <span id="page-358-0"></span>**32.16.6 UBX-MON-MSGPP (0x0A 0x06)**

#### **32.16.6.1 Message parse and process status**

| Message           |        | UBX-MON-MSGPP<br>Message parse and process status |                                           |         |             |                            |                                    |                                                                                            |  |                     |  |  |  |
|-------------------|--------|---------------------------------------------------|-------------------------------------------|---------|-------------|----------------------------|------------------------------------|--------------------------------------------------------------------------------------------|--|---------------------|--|--|--|
| Description       |        |                                                   |                                           |         |             |                            |                                    |                                                                                            |  |                     |  |  |  |
| Firmware          |        |                                                   | Supported on:                             |         |             |                            |                                    |                                                                                            |  |                     |  |  |  |
|                   |        |                                                   | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |         |             |                            |                                    | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |                     |  |  |  |
| Type              |        |                                                   | Periodic/Polled                           |         |             |                            |                                    |                                                                                            |  |                     |  |  |  |
| Comment           |        | -                                                 |                                           |         |             |                            |                                    |                                                                                            |  |                     |  |  |  |
|                   |        |                                                   | Header                                    | Class   | ID          |                            | Payload                            | Checksum                                                                                   |  |                     |  |  |  |
| Message Structure |        |                                                   | 0xB5 0x62 0x0A 0x06 120                   |         |             |                            |                                    |                                                                                            |  | see below CK_A CK_B |  |  |  |
| Payload Contents: |        |                                                   |                                           |         |             |                            |                                    |                                                                                            |  |                     |  |  |  |
| Byte Offset       | Number |                                                   | Scaling                                   | Name    | Description |                            |                                    |                                                                                            |  |                     |  |  |  |
|                   | Format |                                                   |                                           |         |             |                            |                                    |                                                                                            |  |                     |  |  |  |
| 0                 | U2[8]  |                                                   | -                                         | msg1    |             |                            | msgs                               | Number of successfully parsed messages                                                     |  |                     |  |  |  |
|                   |        |                                                   |                                           |         |             |                            |                                    | for each protocol on port0                                                                 |  |                     |  |  |  |
| 16                | U2[8]  |                                                   | -                                         | msg2    |             |                            | msgs                               | Number of successfully parsed messages                                                     |  |                     |  |  |  |
|                   |        |                                                   |                                           |         |             |                            |                                    | for each protocol on port1                                                                 |  |                     |  |  |  |
| 32                | U2[8]  |                                                   | -                                         | msg3    |             |                            | msgs                               | Number of successfully parsed messages                                                     |  |                     |  |  |  |
|                   |        |                                                   |                                           |         |             |                            |                                    | for each protocol on port2                                                                 |  |                     |  |  |  |
| 48                | U2[8]  |                                                   | -                                         | msg4    |             |                            | msgs                               | Number of successfully parsed messages                                                     |  |                     |  |  |  |
|                   |        |                                                   |                                           |         |             |                            |                                    | for each protocol on port3                                                                 |  |                     |  |  |  |
| 64                | U2[8]  |                                                   | -                                         | msg5    |             |                            | msgs                               | Number of successfully parsed messages                                                     |  |                     |  |  |  |
|                   |        |                                                   |                                           |         |             |                            | for each protocol on port4         |                                                                                            |  |                     |  |  |  |
| 80                | U2[8]  |                                                   | -                                         | msg6    |             |                            | msgs                               | Number of successfully parsed messages                                                     |  |                     |  |  |  |
|                   |        |                                                   |                                           |         |             | for each protocol on port5 |                                    |                                                                                            |  |                     |  |  |  |
| 96                | U4[6]  |                                                   | -                                         | skipped |             |                            | Number skipped bytes for each port |                                                                                            |  |                     |  |  |  |

## <span id="page-358-1"></span>**32.16.7 UBX-MON-PATCH (0x0A 0x27)**

#### **32.16.7.1 Poll request for installed patches**

| Message           | UBX-MON-PATCH                                                                              |               |    |                |         |                     |  |  |  |  |  |  |  |  |  |
|-------------------|--------------------------------------------------------------------------------------------|---------------|----|----------------|---------|---------------------|--|--|--|--|--|--|--|--|--|
| Description       | Poll request for installed patches                                                         |               |    |                |         |                     |  |  |  |  |  |  |  |  |  |
| Firmware          |                                                                                            | Supported on: |    |                |         |                     |  |  |  |  |  |  |  |  |  |
|                   | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |               |    |                |         |                     |  |  |  |  |  |  |  |  |  |
|                   | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |               |    |                |         |                     |  |  |  |  |  |  |  |  |  |
| Type              |                                                                                            | Poll Request  |    |                |         |                     |  |  |  |  |  |  |  |  |  |
| Comment           | -                                                                                          |               |    |                |         |                     |  |  |  |  |  |  |  |  |  |
|                   | Header                                                                                     | Class         | ID | Length (Bytes) | Payload | Checksum            |  |  |  |  |  |  |  |  |  |
| Message Structure | 0xB5 0x62 0x0A 0x27 0                                                                      |               |    |                |         | see below CK_A CK_B |  |  |  |  |  |  |  |  |  |
| No payload        |                                                                                            |               |    |                |         |                     |  |  |  |  |  |  |  |  |  |

<span id="page-359-0"></span>

#### **32.16.7.2 Installed patches**

| Message                                  |                  |                                                                                                       | UBX-MON-PATCH                             |                              |              |  |      |                                                                                                                                                                                                                                                                                                                                  |  |  |  |  |  |  |
|------------------------------------------|------------------|-------------------------------------------------------------------------------------------------------|-------------------------------------------|------------------------------|--------------|--|------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--|--|--|--|--|--|
| Description                              |                  |                                                                                                       | Installed patches<br>Supported on:        |                              |              |  |      |                                                                                                                                                                                                                                                                                                                                  |  |  |  |  |  |  |
| Firmware                                 |                  |                                                                                                       | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |                              |              |  |      | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,                                                                                                                                                                                                                                       |  |  |  |  |  |  |
| Type                                     |                  |                                                                                                       | Polled                                    |                              |              |  |      |                                                                                                                                                                                                                                                                                                                                  |  |  |  |  |  |  |
| Comment                                  |                  |                                                                                                       |                                           |                              |              |  |      | This message reports information about patches installed and currently enabled<br>on the receiver. It does not report on patches installed and then disabled. An<br>enabled patch is considered active when the receiver executes from the code<br>space where the patch resides on. For example, a ROM patch is reported active |  |  |  |  |  |  |
|                                          |                  | only when the system runs from ROM.<br>Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum |                                           |                              |              |  |      |                                                                                                                                                                                                                                                                                                                                  |  |  |  |  |  |  |
| Message Structure                        |                  | 0xB5 0x62 0x0A 0x27 4 + 16*nEntries<br>see below CK_A CK_B                                            |                                           |                              |              |  |      |                                                                                                                                                                                                                                                                                                                                  |  |  |  |  |  |  |
| Payload Contents:                        |                  |                                                                                                       |                                           |                              |              |  |      |                                                                                                                                                                                                                                                                                                                                  |  |  |  |  |  |  |
| Byte Offset                              | Number<br>Format |                                                                                                       | Scaling                                   | Name                         |              |  | Unit | Description                                                                                                                                                                                                                                                                                                                      |  |  |  |  |  |  |
| 0                                        | U2               |                                                                                                       | -                                         | version                      |              |  | -    | Message version (0x0001 for this version)                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |
| 2                                        | U2               |                                                                                                       | -                                         |                              | nEntries     |  | -    | Total number of reported patches                                                                                                                                                                                                                                                                                                 |  |  |  |  |  |  |
| Start of repeated block (nEntries times) |                  |                                                                                                       |                                           |                              |              |  |      |                                                                                                                                                                                                                                                                                                                                  |  |  |  |  |  |  |
| 4 + 16*N                                 | X4               |                                                                                                       | -                                         |                              | patchInfo    |  | -    | Status information about the reported<br>patch (see graphic below)                                                                                                                                                                                                                                                               |  |  |  |  |  |  |
| 8 + 16*N                                 | U4               |                                                                                                       | -                                         | The number of the comparator |              |  |      |                                                                                                                                                                                                                                                                                                                                  |  |  |  |  |  |  |
| 12 + 16*N                                | U4               |                                                                                                       | -                                         |                              | patchAddress |  | -    | The address that is targeted by the patch                                                                                                                                                                                                                                                                                        |  |  |  |  |  |  |
| 16 + 16*N                                | U4               |                                                                                                       | The data that is inserted at the          |                              |              |  |      |                                                                                                                                                                                                                                                                                                                                  |  |  |  |  |  |  |
| End of repeated block                    |                  |                                                                                                       |                                           |                              |              |  |      |                                                                                                                                                                                                                                                                                                                                  |  |  |  |  |  |  |

## <span id="page-359-1"></span>**Bitfield patchInfo**

This graphic explains the bits of patchInfo

|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | v.,          |
|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--------------|
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | ധ<br>Œ.<br>⊣ |

<span id="page-360-2"></span>

| Name      | Description                                                                   |
|-----------|-------------------------------------------------------------------------------|
| activated | 1: the patch is active, 0: otherwise                                          |
| location  | Indicates where the patch is stored. 0: eFuse, 1: ROM, 2: BBR, 3: file system |

## <span id="page-360-0"></span>**32.16.8 UBX-MON-RXBUF (0x0A 0x07)**

#### **32.16.8.1 Receiver buffer status**

| Message           |                                               |                                                    | UBX-MON-RXBUF                                                                              |         |           |                                          |                                     |                                        |  |  |
|-------------------|-----------------------------------------------|----------------------------------------------------|--------------------------------------------------------------------------------------------|---------|-----------|------------------------------------------|-------------------------------------|----------------------------------------|--|--|
| Description       |                                               |                                                    | Receiver buffer status                                                                     |         |           |                                          |                                     |                                        |  |  |
| Firmware          |                                               |                                                    | Supported on:                                                                              |         |           |                                          |                                     |                                        |  |  |
|                   |                                               |                                                    | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |           |                                          |                                     |                                        |  |  |
|                   |                                               |                                                    | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |         |           |                                          |                                     |                                        |  |  |
| Type              |                                               |                                                    | Periodic/Polled                                                                            |         |           |                                          |                                     |                                        |  |  |
| Comment           |                                               | -                                                  |                                                                                            |         |           |                                          |                                     |                                        |  |  |
|                   |                                               | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload |                                                                                            |         |           | Checksum                                 |                                     |                                        |  |  |
| Message Structure | 0xB5 0x62 0x0A 0x07 24<br>see below CK_A CK_B |                                                    |                                                                                            |         |           |                                          |                                     |                                        |  |  |
| Payload Contents: |                                               |                                                    |                                                                                            |         |           |                                          |                                     |                                        |  |  |
| Byte Offset       | Number                                        |                                                    | Scaling                                                                                    | Name    |           |                                          | Unit                                | Description                            |  |  |
|                   | Format                                        |                                                    |                                                                                            |         |           |                                          |                                     |                                        |  |  |
| 0                 | U2[6]                                         |                                                    | -                                                                                          | pending |           | bytes                                    | Number of bytes pending in receiver |                                        |  |  |
|                   |                                               |                                                    |                                                                                            |         |           |                                          | buffer for each target              |                                        |  |  |
| 12<br>U1[6]<br>-  |                                               | usage                                              |                                                                                            |         | %         | Maximum usage receiver buffer during the |                                     |                                        |  |  |
|                   |                                               |                                                    |                                                                                            |         |           |                                          | last sysmon period for each target  |                                        |  |  |
| 18                | U1[6]                                         |                                                    | -                                                                                          |         | peakUsage |                                          | %                                   | Maximum usage receiver buffer for each |  |  |
|                   |                                               |                                                    |                                                                                            |         |           |                                          |                                     | target                                 |  |  |

#### <span id="page-360-1"></span>**32.16.9 UBX-MON-RXR (0x0A 0x21)**

#### **32.16.9.1 Receiver status information**

| Message           |        |                                                                                | UBX-MON-RXR                                                                                |       |    |                          |      |                                           |         |          |
|-------------------|--------|--------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------|-------|----|--------------------------|------|-------------------------------------------|---------|----------|
| Description       |        |                                                                                | Receiver status information                                                                |       |    |                          |      |                                           |         |          |
| Firmware          |        |                                                                                | Supported on:                                                                              |       |    |                          |      |                                           |         |          |
|                   |        |                                                                                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |       |    |                          |      |                                           |         |          |
|                   |        |                                                                                | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |       |    |                          |      |                                           |         |          |
| Type              |        |                                                                                | Output                                                                                     |       |    |                          |      |                                           |         |          |
| Comment           |        | The receiver ready message is sent when the receiver changes from or to backup |                                                                                            |       |    |                          |      |                                           |         |          |
|                   |        |                                                                                | mode.                                                                                      |       |    |                          |      |                                           |         |          |
|                   |        | Header                                                                         |                                                                                            | Class | ID | Length (Bytes)           |      |                                           | Payload | Checksum |
| Message Structure |        |                                                                                | 0xB5 0x62 0x0A 0x21                                                                        |       |    | 1<br>see below CK_A CK_B |      |                                           |         |          |
| Payload Contents: |        |                                                                                |                                                                                            |       |    |                          |      |                                           |         |          |
| Byte Offset       | Number |                                                                                | Scaling                                                                                    | Name  |    |                          | Unit | Description                               |         |          |
|                   | Format |                                                                                |                                                                                            |       |    |                          |      |                                           |         |          |
| 0                 | X1     |                                                                                | -                                                                                          | flags |    |                          | -    | Receiver status flags (see graphic below) |         |          |

<span id="page-361-1"></span>

## **Bitfield flags**

<span id="page-361-2"></span>This graphic explains the bits of flags



| Name  | Description        |
|-------|--------------------|
| awake | not in backup mode |

## <span id="page-361-0"></span>**32.16.10 UBX-MON-SMGR (0x0A 0x2E)**

#### **32.16.10.1 Synchronization manager status**

| Message           |                  |                                                                                                                                                                                           | UBX-MON-SMGR                   |         |           |   |                                                                                     |                                                                                  |                                                                                                                                                         |                     |  |
|-------------------|------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|---------|-----------|---|-------------------------------------------------------------------------------------|----------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------|--|
| Description       |                  |                                                                                                                                                                                           | Synchronization manager status |         |           |   |                                                                                     |                                                                                  |                                                                                                                                                         |                     |  |
| Firmware          |                  | Supported on:<br>• u-blox 8 / u-blox M8 protocol versions 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.<br>2, 20.3, 22, 22.01, 23 and 23.01 (only with Time & Frequency Sync products) |                                |         |           |   |                                                                                     |                                                                                  |                                                                                                                                                         |                     |  |
| Type              |                  |                                                                                                                                                                                           | Periodic/Polled                |         |           |   |                                                                                     |                                                                                  |                                                                                                                                                         |                     |  |
| Comment           |                  | This message reports the status of internal and external oscillators and sources<br>as well as whether GNSS is used for disciplining.                                                     |                                |         |           |   |                                                                                     |                                                                                  |                                                                                                                                                         |                     |  |
|                   |                  |                                                                                                                                                                                           | Header                         | Class   | ID        |   | Length (Bytes)                                                                      |                                                                                  | Payload                                                                                                                                                 | Checksum            |  |
| Message Structure |                  |                                                                                                                                                                                           | 0xB5 0x62 0x0A 0x2E 16         |         |           |   |                                                                                     |                                                                                  |                                                                                                                                                         | see below CK_A CK_B |  |
| Payload Contents: |                  |                                                                                                                                                                                           |                                |         |           |   |                                                                                     |                                                                                  |                                                                                                                                                         |                     |  |
| Byte Offset       | Number<br>Format |                                                                                                                                                                                           | Scaling                        | Name    |           |   | Unit                                                                                | Description                                                                      |                                                                                                                                                         |                     |  |
| 0                 | U1               |                                                                                                                                                                                           | -                              |         | version   |   | -                                                                                   | Message version (0x00 for this version)                                          |                                                                                                                                                         |                     |  |
| 1                 | U1[3]            |                                                                                                                                                                                           | -                              |         | reserved1 |   | -                                                                                   | Reserved                                                                         |                                                                                                                                                         |                     |  |
| 4                 | U4               |                                                                                                                                                                                           | -                              | iTOW    |           |   | ms                                                                                  | Time of the week                                                                 |                                                                                                                                                         |                     |  |
| 8                 | X2               |                                                                                                                                                                                           | -                              | intOsc  |           |   | -                                                                                   | A bit mask, indicating the status of the<br>local oscillator (see graphic below) |                                                                                                                                                         |                     |  |
| 10                | X2               |                                                                                                                                                                                           | -                              | extOsc  |           | - | A bit mask, indicating the status of the<br>external oscillator (see graphic below) |                                                                                  |                                                                                                                                                         |                     |  |
| 12                | U1               |                                                                                                                                                                                           | -                              |         | discSrc   |   | -                                                                                   | 1: GNSS<br>2: EXTINT0<br>3: EXTINT1                                              | Disciplining source identifier:<br>0: internal oscillator<br>4: internal oscillator measured by the host<br>5: external oscillator measured by the host |                     |  |
| 13                | X1               |                                                                                                                                                                                           | -                              | gnss    |           |   | -                                                                                   | A bit mask, indicating the status of the<br>GNSS (see graphic below)             |                                                                                                                                                         |                     |  |
| 14                | X1               |                                                                                                                                                                                           | -                              | extInt0 |           |   | -                                                                                   | A bit mask, indicating the status of the<br>external input 0 (see graphic below) |                                                                                                                                                         |                     |  |
| 15                | X1               |                                                                                                                                                                                           | -                              | extInt1 |           |   | -                                                                                   | A bit mask, indicating the status of the<br>external input 1 (see graphic below) |                                                                                                                                                         |                     |  |



## **Bitfield intOsc**

This graphic explains the bits of intOsc

<span id="page-362-0"></span>

# intOscCalib 1 = oscillator gain is calibrated intOscDisc 1 = signal is disciplined

## <span id="page-362-1"></span>**Bitfield extOsc**

This graphic explains the bits of extOsc



| Name        | Description                          |
|-------------|--------------------------------------|
| extOscState | State of the oscillator:             |
|             | 0: autonomous operation              |
|             | 1: calibration ongoing               |
|             | 2: oscillator is steered by the host |
|             | 3: idle state                        |
| extOscCalib | 1 = oscillator gain is calibrated    |
| extOscDisc  | 1 = signal is disciplined            |

## <span id="page-362-2"></span>**Bitfield gnss**





| Name      | Description         |
|-----------|---------------------|
| gnssAvail | 1 = GNSS is present |

## <span id="page-363-0"></span>**Bitfield extInt0**

This graphic explains the bits of extInt0



| Name          | Description                                                |
|---------------|------------------------------------------------------------|
| extInt0Avail  | 1 = signal present at this input                           |
| extInt0Type   | Source type:                                               |
|               | 0: frequency                                               |
|               | 1: time                                                    |
| extInt0FeedBa | This source is used as feedback of the external oscillator |
| ck            |                                                            |

## <span id="page-363-1"></span>**Bitfield extInt1**

This graphic explains the bits of extInt1



| Name          | Description                                                |
|---------------|------------------------------------------------------------|
| extInt1Avail  | 1 = signal present at this input                           |
| extInt1Type   | Source type:                                               |
|               | 0: frequency                                               |
|               | 1: time                                                    |
| extInt1FeedBa | This source is used as feedback of the external oscillator |
| ck            |                                                            |

<span id="page-364-1"></span>

## <span id="page-364-0"></span>**32.16.11 UBX-MON-SPT (0x0A 0x2F)**

## **32.16.11.1 Sensor production test**

| Message                                                                        |                                                                              |  | UBX-MON-SPT                                             |         |           |                                                                        |                |                                                                                       |         |          |
|--------------------------------------------------------------------------------|------------------------------------------------------------------------------|--|---------------------------------------------------------|---------|-----------|------------------------------------------------------------------------|----------------|---------------------------------------------------------------------------------------|---------|----------|
| Description                                                                    |                                                                              |  | Sensor production test                                  |         |           |                                                                        |                |                                                                                       |         |          |
| Firmware                                                                       |                                                                              |  | Supported on:                                           |         |           |                                                                        |                |                                                                                       |         |          |
|                                                                                |                                                                              |  |                                                         |         |           |                                                                        |                | • u-blox 8 / u-blox M8 protocol versions 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.3, |         |          |
|                                                                                |                                                                              |  | 22, 22.01, 23 and 23.01 (only with ADR or UDR products) |         |           |                                                                        |                |                                                                                       |         |          |
| Type                                                                           |                                                                              |  | Polled                                                  |         |           |                                                                        |                |                                                                                       |         |          |
| Comment                                                                        | This message reports the state of, and measurements made during, sensor self |  |                                                         |         |           |                                                                        |                |                                                                                       |         |          |
|                                                                                |                                                                              |  | tests.                                                  |         |           |                                                                        |                |                                                                                       |         |          |
|                                                                                |                                                                              |  |                                                         |         |           |                                                                        |                | This message can also be used to retrieve information about detected sensor(s)        |         |          |
|                                                                                |                                                                              |  | and driver(s) used.                                     |         |           |                                                                        |                |                                                                                       |         |          |
| This message is only supported if a sensor is directly connected to the u-blox |                                                                              |  |                                                         |         |           |                                                                        |                |                                                                                       |         |          |
| chip. This includes modules that contain IMUs.                                 |                                                                              |  |                                                         |         |           |                                                                        |                |                                                                                       |         |          |
| Note that this message shows the status of the last self-test since sensor     |                                                                              |  |                                                         |         |           |                                                                        |                |                                                                                       |         |          |
|                                                                                |                                                                              |  |                                                         |         |           |                                                                        |                | startup. The self-test results are not stored in non-volatile memory.                 |         |          |
|                                                                                |                                                                              |  | Header                                                  | Class   | ID        |                                                                        | Length (Bytes) |                                                                                       | Payload | Checksum |
| Message Structure                                                              |                                                                              |  |                                                         |         |           | 0xB5 0x62 0x0A 0x2F 4 + 12*numRes + 4*numSensor<br>see below CK_A CK_B |                |                                                                                       |         |          |
| Payload Contents:                                                              |                                                                              |  |                                                         |         |           |                                                                        |                |                                                                                       |         |          |
| Byte Offset                                                                    | Number                                                                       |  | Scaling                                                 | Name    |           |                                                                        | Unit           | Description                                                                           |         |          |
|                                                                                | Format                                                                       |  |                                                         |         |           |                                                                        |                |                                                                                       |         |          |
| 0                                                                              | U1                                                                           |  | -                                                       | version |           |                                                                        | -              | Message version (0x01 for this version)                                               |         |          |
| 1                                                                              | U1                                                                           |  | -                                                       |         | numSensor |                                                                        | -              | number of sensors reported in this                                                    |         |          |
|                                                                                |                                                                              |  |                                                         |         |           |                                                                        |                | message                                                                               |         |          |
| 2                                                                              | U1                                                                           |  | -                                                       | numRes  |           | -                                                                      |                | number of result items reported in this                                               |         |          |
|                                                                                |                                                                              |  |                                                         |         |           |                                                                        |                | message                                                                               |         |          |
| 3                                                                              | U1                                                                           |  | -                                                       |         | reserved1 |                                                                        | -              | Reserved                                                                              |         |          |
| Start of repeated block (numSensor times)                                      |                                                                              |  |                                                         |         |           |                                                                        |                |                                                                                       |         |          |



#### UBX-MON-SPT continued

| Byte Offset | Number | Scaling | Name     | Unit | Description                               |
|-------------|--------|---------|----------|------|-------------------------------------------|
|             | Format |         |          |      |                                           |
| 4 + 4*N     | U1     | -       | sensorId | -    | Sensor ID                                 |
|             |        |         |          |      | The following IDs are defined, others are |
|             |        |         |          |      | reserved:                                 |
|             |        |         |          |      | 1: ST LSM6DS0 6-axis IMU with             |
|             |        |         |          |      | temperature sensor                        |
|             |        |         |          |      | 2: Invensense MPU6500 6-axis IMU with     |
|             |        |         |          |      | temperature sensor                        |
|             |        |         |          |      | 3: Bosch BMI160 6-axis IMU with           |
|             |        |         |          |      | temperature sensor                        |
|             |        |         |          |      | 7: ST LSM6DS3 6-axis IMU with             |
|             |        |         |          |      | temperature sensor                        |
|             |        |         |          |      | 9: Bosch SMI130 6-axis IMU with           |
|             |        |         |          |      | temperature sensor                        |
|             |        |         |          |      | 12: MPU6515, 6-axis inertial sensor from  |
|             |        |         |          |      | Invensense                                |
|             |        |         |          |      | 13: ST LSM6DSL 6-axis IMU with            |
|             |        |         |          |      | temperature sensor                        |
|             |        |         |          |      | 14: SMG130, 3-axis gyroscope with         |
|             |        |         |          |      | temperature sensor from Bosch             |
|             |        |         |          |      | 15: SMI230, 6-axis IMU with temperature   |
|             |        |         |          |      | sensor from Bosch                         |
|             |        |         |          |      | 16: BMI260, 6-axis IMU with temperature   |
|             |        |         |          |      | sensor from Bosch                         |
|             |        |         |          |      | 17: ICM330DLC, 6-axis IMU with            |
|             |        |         |          |      | temperature sensor from ST                |
|             |        |         |          |      | 18: LSM6DSR, 6-axis IMU with 85 deg       |
|             |        |         |          |      | temperature sensor from ST                |
|             |        |         |          |      | 19: ICM42605, 6-axis IMU with 85 deg      |
|             |        |         |          |      | temperature sensor from InvenSense TDK    |
|             |        |         |          |      | 20: IIM42652, 6-axis IMU with 105 deg     |
|             |        |         |          |      | temperature sensor from InvenSense TDK    |
|             |        |         |          |      | 21: BMI320, 6-axis IMU with 85 deg        |
|             |        |         |          |      | temperature sensor from Bosch             |
|             |        |         |          |      | 22: IAM20680HT, 6-axis IMU with 105 deg   |
|             |        |         |          |      | temperature sensor from InvenSense TDK    |
|             |        |         |          |      | 23: LSM6DSOW, 6-axis IMU with 85 deg      |
|             |        |         |          |      | temperature sensor from ST                |
|             |        |         |          |      | Not all sensors are supported in any      |
|             |        |         |          |      | released firmware. Refer to the release   |
|             |        |         |          |      | notes to find out which sensor is         |
|             |        |         |          |      | supported by a certain firmware.          |
| 5 + 4*N     | X1     | -       | drvVer   | -    | Version information (see graphic below)   |



#### UBX-MON-SPT continued

| Byte Offset                            | Number | Scaling | Name        | Unit | Description                                  |
|----------------------------------------|--------|---------|-------------|------|----------------------------------------------|
|                                        | Format |         |             |      |                                              |
| 6 + 4*N                                | U1     | -       | testState   | -    | State of one sensor's test, it can be        |
|                                        |        |         |             |      | 0: test not yet started                      |
|                                        |        |         |             |      | 1: test started but not yet finished         |
|                                        |        |         |             |      | 2: test did not finish due to error during   |
|                                        |        |         |             |      | execution                                    |
|                                        |        |         |             |      | 3: test finished normally, test data is      |
|                                        |        |         |             |      | available                                    |
| 7 + 4*N                                | U1     | -       | drvFileName | -    | 0 if the active driver is loaded from image, |
|                                        |        |         |             |      | last character of the file name if it is     |
|                                        |        |         |             |      | loaded from separate file.                   |
| End of repeated block                  |        |         |             |      |                                              |
| Start of repeated block (numRes times) |        |         |             |      |                                              |
| 4 + 12*N +                             | U2     | -       | sensorIdRes | -    | Sensor ID; eligible values are the same as   |
| 4*numSen                               |        |         |             |      | in sensorIdState field                       |
| sor                                    |        |         |             |      |                                              |
| 6 + 12*N +                             | U2     | -       | sensorType  | -    | Sensor type and axis (if applicable) to      |
| 4*numSen                               |        |         |             |      | which the result refers                      |
| sor                                    |        |         |             |      | The following values are defined, others     |
|                                        |        |         |             |      | are reserved:                                |
|                                        |        |         |             |      | 5: Gyroscope z axis                          |
|                                        |        |         |             |      | 12: Gyroscope temperature                    |
|                                        |        |         |             |      | 13: Gyroscope y axis                         |
|                                        |        |         |             |      | 14: Gyroscope x axis                         |
|                                        |        |         |             |      | 16: Accelerometer x axis                     |
|                                        |        |         |             |      | 17: Accelerometer y axis                     |
|                                        |        |         |             |      | 18: Accelerometer z axis                     |
|                                        |        |         |             |      | 19: Barometer                                |
|                                        |        |         |             |      | 22: Magnetometer x axis                      |
|                                        |        |         |             |      | 23: Magnetometer y axis                      |
|                                        |        |         |             |      | 24: Magnetometer z axis                      |
|                                        |        |         |             |      | 25: Barometer temperature                    |



#### UBX-MON-SPT continued

| Byte Offset           | Number | Scaling | Name      | Unit | Description                                   |
|-----------------------|--------|---------|-----------|------|-----------------------------------------------|
|                       | Format |         |           |      |                                               |
| 8 + 12*N +            | U2     | -       | resType   | -    | The type of result stored in the value field  |
| 4*numSen              |        |         |           |      | 1: Measurement without self-test offset       |
| sor                   |        |         |           |      | (raw and unscaled digital value)              |
|                       |        |         |           |      | 2: Measurement with positive self-test        |
|                       |        |         |           |      | offset (raw and unscaled digital value)       |
|                       |        |         |           |      | 3: Measurement with negative self-test        |
|                       |        |         |           |      | offset (raw and unscaled digital value)       |
|                       |        |         |           |      | 4: Minimum off-to-positive to pass self       |
|                       |        |         |           |      | test, as deduced from on-chip trimming        |
|                       |        |         |           |      | information                                   |
|                       |        |         |           |      | 5: Maximum off-to-positive to pass self       |
|                       |        |         |           |      | test, as deduced from on-chip trimming        |
|                       |        |         |           |      | information                                   |
|                       |        |         |           |      | 6: Minimum negative-to-positive to pass       |
|                       |        |         |           |      | self-test, as deduced from on-chip            |
|                       |        |         |           |      | trimming information                          |
|                       |        |         |           |      | 7: Maximum negative-to-positive to pass       |
|                       |        |         |           |      | self-test, as deduced from on-chip            |
|                       |        |         |           |      | trimming information                          |
|                       |        |         |           |      | 8: Self-test passed; test passed if value = 1 |
|                       |        |         |           |      | and failed if 0. Used if the decision is read |
|                       |        |         |           |      | out from the sensor itself.                   |
| 10 + 12*N +           | U1[2]  | -       | reserved2 | -    | Reserved                                      |
| 4*numSen              |        |         |           |      |                                               |
| sor                   |        |         |           |      |                                               |
| 12 + 12*N +           | I4     | -       | value     | -    | value of the specific test result             |
| 4*numSen              |        |         |           |      |                                               |
| sor                   |        |         |           |      |                                               |
| End of repeated block |        |         |           |      |                                               |

## <span id="page-367-0"></span>**Bitfield drvVer**

This graphic explains the bits of drvVer



<span id="page-368-1"></span>

| Name      | Description          |
|-----------|----------------------|
| drvVerMaj | Driver major version |
| drvVerMin | Driver minor version |

## <span id="page-368-0"></span>**32.16.12 UBX-MON-TXBUF (0x0A 0x08)**

#### **32.16.12.1 Transmitter buffer status**

| Message           |        |   | UBX-MON-TXBUF                             |         |            |          |       |                                                                                            |         |                     |
|-------------------|--------|---|-------------------------------------------|---------|------------|----------|-------|--------------------------------------------------------------------------------------------|---------|---------------------|
| Description       |        |   | Transmitter buffer status                 |         |            |          |       |                                                                                            |         |                     |
| Firmware          |        |   | Supported on:                             |         |            |          |       |                                                                                            |         |                     |
|                   |        |   |                                           |         |            |          |       | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |
|                   |        |   | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |         |            |          |       |                                                                                            |         |                     |
| Type              |        |   | Periodic/Polled                           |         |            |          |       |                                                                                            |         |                     |
| Comment           |        | - |                                           |         |            |          |       |                                                                                            |         |                     |
|                   |        |   | Header<br>Class<br>ID<br>Length (Bytes)   |         |            |          |       |                                                                                            | Payload | Checksum            |
| Message Structure |        |   | 0xB5 0x62 0x0A 0x08 28                    |         |            |          |       |                                                                                            |         | see below CK_A CK_B |
| Payload Contents: |        |   |                                           |         |            |          |       |                                                                                            |         |                     |
| Byte Offset       | Number |   | Scaling                                   | Name    |            |          | Unit  | Description                                                                                |         |                     |
|                   | Format |   |                                           |         |            |          |       |                                                                                            |         |                     |
| 0                 | U2[6]  |   | -                                         | pending |            |          | bytes | Number of bytes pending in transmitter                                                     |         |                     |
|                   |        |   |                                           |         |            |          |       | buffer for each target                                                                     |         |                     |
| 12                | U1[6]  |   | -                                         | usage   |            |          | %     | Maximum usage transmitter buffer during                                                    |         |                     |
|                   |        |   |                                           |         |            |          |       | the last sysmon period for each target                                                     |         |                     |
| 18                | U1[6]  |   | -                                         |         | peakUsage  |          | %     | Maximum usage transmitter buffer for                                                       |         |                     |
|                   |        |   |                                           |         |            |          |       | each target                                                                                |         |                     |
| 24                | U1     |   | -                                         | tUsage  |            |          | %     | Maximum usage of transmitter buffer                                                        |         |                     |
|                   |        |   |                                           |         |            |          |       | during the last sysmon period for all                                                      |         |                     |
|                   |        |   |                                           |         |            |          |       | targets                                                                                    |         |                     |
| 25                | U1     |   | -                                         |         | tPeakusage |          | %     | Maximum usage of transmitter buffer for                                                    |         |                     |
|                   |        |   |                                           |         |            |          |       | all targets                                                                                |         |                     |
| 26                | X1     |   | -                                         | errors  |            |          | -     | Error bitmask (see graphic below)                                                          |         |                     |
| 27                | U1     |   | reserved1<br>-                            |         | -          | Reserved |       |                                                                                            |         |                     |

## <span id="page-368-2"></span>**Bitfield errors**

This graphic explains the bits of errors



<span id="page-369-1"></span>

| Name  | Description                                  |
|-------|----------------------------------------------|
| limit | Buffer limit of corresponding target reached |
| mem   | Memory Allocation error                      |
| alloc | Allocation error (TX buffer full)            |

## <span id="page-369-0"></span>**32.16.13 UBX-MON-VER (0x0A 0x04)**

#### **32.16.13.1 Poll receiver and software version**

| Message           |                                              | UBX-MON-VER                                                                                |    |                |  |         |          |  |  |  |
|-------------------|----------------------------------------------|--------------------------------------------------------------------------------------------|----|----------------|--|---------|----------|--|--|--|
| Description       |                                              | Poll receiver and software version                                                         |    |                |  |         |          |  |  |  |
| Firmware          |                                              | Supported on:                                                                              |    |                |  |         |          |  |  |  |
|                   |                                              | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |    |                |  |         |          |  |  |  |
|                   |                                              | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |    |                |  |         |          |  |  |  |
| Type              |                                              | Poll Request                                                                               |    |                |  |         |          |  |  |  |
| Comment           | -                                            |                                                                                            |    |                |  |         |          |  |  |  |
|                   | Header                                       | Class                                                                                      | ID | Length (Bytes) |  | Payload | Checksum |  |  |  |
| Message Structure | 0xB5 0x62 0x0A 0x04 0<br>see below CK_A CK_B |                                                                                            |    |                |  |         |          |  |  |  |
| No payload        |                                              |                                                                                            |    |                |  |         |          |  |  |  |

## **32.16.13.2 Receiver and software version**

| Message                           |        |   | UBX-MON-VER                                                    |      |           |  |      |                                                                                            |  |                     |  |
|-----------------------------------|--------|---|----------------------------------------------------------------|------|-----------|--|------|--------------------------------------------------------------------------------------------|--|---------------------|--|
| Description                       |        |   | Receiver and software version                                  |      |           |  |      |                                                                                            |  |                     |  |
| Firmware                          |        |   | Supported on:                                                  |      |           |  |      |                                                                                            |  |                     |  |
|                                   |        |   |                                                                |      |           |  |      | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |                     |  |
|                                   |        |   | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                      |      |           |  |      |                                                                                            |  |                     |  |
| Type                              |        |   | Polled                                                         |      |           |  |      |                                                                                            |  |                     |  |
| Comment                           |        | - |                                                                |      |           |  |      |                                                                                            |  |                     |  |
|                                   |        |   | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum |      |           |  |      |                                                                                            |  |                     |  |
| Message Structure                 |        |   | 0xB5 0x62 0x0A 0x04 40 + 30*N                                  |      |           |  |      |                                                                                            |  | see below CK_A CK_B |  |
| Payload Contents:                 |        |   |                                                                |      |           |  |      |                                                                                            |  |                     |  |
| Byte Offset                       | Number |   | Scaling                                                        | Name |           |  | Unit | Description                                                                                |  |                     |  |
|                                   | Format |   |                                                                |      |           |  |      |                                                                                            |  |                     |  |
| 0                                 | CH[30  |   | -                                                              |      | swVersion |  | -    | Nul-terminated software version string.                                                    |  |                     |  |
|                                   | ]      |   |                                                                |      |           |  |      |                                                                                            |  |                     |  |
| 30                                | CH[10] |   | hwVersion<br>-<br>-<br>Nul-terminated hardware version string  |      |           |  |      |                                                                                            |  |                     |  |
| Start of repeated block (N times) |        |   |                                                                |      |           |  |      |                                                                                            |  |                     |  |



#### UBX-MON-VER continued

| Byte Offset           | Number | Scaling | Name      | Unit | Description                                |
|-----------------------|--------|---------|-----------|------|--------------------------------------------|
|                       | Format |         |           |      |                                            |
| 40 + 30*N             | CH[30  | -       | extension | -    | Extended software information strings.     |
|                       | ]      |         |           |      | A series of nul-terminated strings. Each   |
|                       |        |         |           |      | extension field is 30 characters long and  |
|                       |        |         |           |      | contains varying software information.     |
|                       |        |         |           |      | Not all extension fields may appear.       |
|                       |        |         |           |      | Examples of reported information: the      |
|                       |        |         |           |      | software version string of the underlying  |
|                       |        |         |           |      | ROM (when the receiver's firmware is       |
|                       |        |         |           |      | running from flash), the firmware version, |
|                       |        |         |           |      | the supported protocol version, the        |
|                       |        |         |           |      | module identifier, the flash information   |
|                       |        |         |           |      | structure (FIS) file information, the      |
|                       |        |         |           |      | supported major GNSS, the supported        |
|                       |        |         |           |      | augmentation systems.                      |
|                       |        |         |           |      | See Firmware and protocol versions for     |
|                       |        |         |           |      | details.                                   |
| End of repeated block |        |         |           |      |                                            |

<span id="page-371-0"></span>

## **32.17 UBX-NAV (0x01)**

Navigation Results Messages: i.e. Position, Speed, Time, Acceleration, Heading, DOP, SVs used. Messages in the NAV class are used to output navigation data such as position, altitude and velocity in a number of formats. Additionally, status flags and accuracy figures are output. The messages are generated with the configured navigation/measurement rate.

## <span id="page-371-1"></span>**32.17.1 UBX-NAV-AOPSTATUS (0x01 0x60)**

#### **32.17.1.1 AssistNow Autonomous status**

| Message           |        |                                                                             | UBX-NAV-AOPSTATUS                                                              |        |   |                                        |          |                                                                                            |                     |  |  |  |
|-------------------|--------|-----------------------------------------------------------------------------|--------------------------------------------------------------------------------|--------|---|----------------------------------------|----------|--------------------------------------------------------------------------------------------|---------------------|--|--|--|
| Description       |        |                                                                             | AssistNow Autonomous status                                                    |        |   |                                        |          |                                                                                            |                     |  |  |  |
| Firmware          |        |                                                                             | Supported on:                                                                  |        |   |                                        |          |                                                                                            |                     |  |  |  |
|                   |        |                                                                             |                                                                                |        |   |                                        |          | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                     |  |  |  |
|                   |        |                                                                             | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                      |        |   |                                        |          |                                                                                            |                     |  |  |  |
| Type              |        |                                                                             | Periodic/Polled                                                                |        |   |                                        |          |                                                                                            |                     |  |  |  |
| Comment           |        |                                                                             |                                                                                |        |   |                                        |          | This message provides information on the status of the AssistNow Autonomous                |                     |  |  |  |
|                   |        |                                                                             | subsystem on the receiver. For example, a host application can determine the   |        |   |                                        |          |                                                                                            |                     |  |  |  |
|                   |        | optimal time to shut down the receiver by monitoring the status field for a |                                                                                |        |   |                                        |          |                                                                                            |                     |  |  |  |
|                   |        |                                                                             | steady 0. See the chapter AssistNow Autonomous in the receiver description for |        |   |                                        |          |                                                                                            |                     |  |  |  |
|                   |        | details on this feature.                                                    |                                                                                |        |   |                                        |          |                                                                                            |                     |  |  |  |
|                   |        | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload                          |                                                                                |        |   |                                        |          | Checksum                                                                                   |                     |  |  |  |
| Message Structure |        |                                                                             | 0xB5 0x62 0x01 0x60 16                                                         |        |   |                                        |          |                                                                                            | see below CK_A CK_B |  |  |  |
| Payload Contents: |        |                                                                             |                                                                                |        |   |                                        |          |                                                                                            |                     |  |  |  |
| Byte Offset       | Number |                                                                             | Scaling                                                                        | Name   |   |                                        | Unit     | Description                                                                                |                     |  |  |  |
|                   | Format |                                                                             |                                                                                |        |   |                                        |          |                                                                                            |                     |  |  |  |
| 0                 | U4     |                                                                             | -                                                                              | iTOW   |   |                                        | ms       | GPS time of week of the navigation epoch.                                                  |                     |  |  |  |
|                   |        |                                                                             |                                                                                |        |   |                                        |          | See the description of iTOW for details.                                                   |                     |  |  |  |
| 4                 | U1     |                                                                             | -                                                                              | aopCfg |   |                                        | -        | AssistNow Autonomous configuration                                                         |                     |  |  |  |
|                   |        |                                                                             |                                                                                |        |   |                                        |          | (see graphic below)                                                                        |                     |  |  |  |
| 5                 | U1     | status<br>-                                                                 |                                                                                |        | - | AssistNow Autonomous subsystem is idle |          |                                                                                            |                     |  |  |  |
|                   |        |                                                                             |                                                                                |        |   |                                        |          | (0) or running (not 0)                                                                     |                     |  |  |  |
| 6                 | U1[10] | reserved1<br>-                                                              |                                                                                |        |   | -                                      | Reserved |                                                                                            |                     |  |  |  |

## <span id="page-371-2"></span>**Bitfield aopCfg**



<span id="page-372-1"></span>

| Name   | Description      |
|--------|------------------|
| useAOP | AOP enabled flag |

## <span id="page-372-0"></span>**32.17.2 UBX-NAV-ATT (0x01 0x05)**

## **32.17.2.1 Attitude solution**

| Message           |                                                                    |                                                                               | UBX-NAV-ATT                                             |            |           |     |                                              |                                                                                       |  |          |  |
|-------------------|--------------------------------------------------------------------|-------------------------------------------------------------------------------|---------------------------------------------------------|------------|-----------|-----|----------------------------------------------|---------------------------------------------------------------------------------------|--|----------|--|
| Description       |                                                                    |                                                                               | Attitude solution                                       |            |           |     |                                              |                                                                                       |  |          |  |
| Firmware          |                                                                    |                                                                               | Supported on:                                           |            |           |     |                                              |                                                                                       |  |          |  |
|                   |                                                                    |                                                                               |                                                         |            |           |     |                                              | • u-blox 8 / u-blox M8 protocol versions 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.3, |  |          |  |
|                   |                                                                    |                                                                               | 22, 22.01, 23 and 23.01 (only with ADR or UDR products) |            |           |     |                                              |                                                                                       |  |          |  |
| Type              |                                                                    |                                                                               | Periodic/Polled                                         |            |           |     |                                              |                                                                                       |  |          |  |
| Comment           |                                                                    | This message outputs the attitude solution as roll, pitch and heading angles. |                                                         |            |           |     |                                              |                                                                                       |  |          |  |
|                   |                                                                    |                                                                               |                                                         |            |           |     |                                              | More details about vehicle attitude can be found in the Vehicle Attitude Output       |  |          |  |
|                   |                                                                    |                                                                               | (ADR) section for ADR products.                         |            |           |     |                                              |                                                                                       |  |          |  |
|                   |                                                                    |                                                                               |                                                         |            |           |     |                                              | More details about vehicle attitude can be found in the Vehicle Attitude Output       |  |          |  |
|                   |                                                                    |                                                                               | (UDR) section for UDR products.                         |            |           |     |                                              |                                                                                       |  |          |  |
|                   |                                                                    |                                                                               | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload      |            |           |     |                                              |                                                                                       |  | Checksum |  |
|                   | 0xB5 0x62 0x01 0x05 32<br>see below CK_A CK_B<br>Message Structure |                                                                               |                                                         |            |           |     |                                              |                                                                                       |  |          |  |
| Payload Contents: |                                                                    |                                                                               |                                                         |            |           |     |                                              |                                                                                       |  |          |  |
| Byte Offset       | Number                                                             |                                                                               | Scaling                                                 | Name       |           |     | Unit                                         | Description                                                                           |  |          |  |
|                   | Format                                                             |                                                                               |                                                         |            |           |     |                                              |                                                                                       |  |          |  |
| 0                 | U4                                                                 |                                                                               | -                                                       | iTOW       |           |     | ms                                           | GPS time of week of the navigation epoch.                                             |  |          |  |
|                   |                                                                    |                                                                               |                                                         |            |           |     |                                              | See the description of iTOW for details.                                              |  |          |  |
| 4                 | U1                                                                 |                                                                               | -                                                       | version    |           |     | -                                            | Message version (0x00 for this version)                                               |  |          |  |
| 5                 | U1[3]                                                              |                                                                               | -                                                       |            | reserved1 |     | -                                            | Reserved                                                                              |  |          |  |
| 8                 | I4                                                                 |                                                                               | 1e-5                                                    | roll       |           |     | deg                                          | Vehicle roll.                                                                         |  |          |  |
| 12                | I4                                                                 |                                                                               | 1e-5                                                    | pitch      |           |     | deg                                          | Vehicle pitch.                                                                        |  |          |  |
| 16                | I4                                                                 |                                                                               | 1e-5                                                    | heading    |           |     | deg                                          | Vehicle heading.                                                                      |  |          |  |
| 20                | U4                                                                 |                                                                               | 1e-5                                                    | accRoll    |           |     | deg                                          | Vehicle roll accuracy (if null, roll angle is                                         |  |          |  |
|                   |                                                                    |                                                                               |                                                         |            |           |     |                                              | not available).                                                                       |  |          |  |
| 24                | U4                                                                 |                                                                               | accPitch<br>1e-5                                        |            |           | deg | Vehicle pitch accuracy (if null, pitch angle |                                                                                       |  |          |  |
|                   |                                                                    |                                                                               |                                                         |            |           |     |                                              | is not available).                                                                    |  |          |  |
| 28                | U4                                                                 |                                                                               | 1e-5                                                    | accHeading |           | deg | Vehicle heading accuracy (if null, heading   |                                                                                       |  |          |  |
|                   |                                                                    |                                                                               |                                                         |            |           |     |                                              | angle is not available).                                                              |  |          |  |

<span id="page-373-2"></span>

## <span id="page-373-0"></span>**32.17.3 UBX-NAV-CLOCK (0x01 0x22)**

#### **32.17.3.1 Clock solution**

| Message           |        |   | UBX-NAV-CLOCK                                                                              |      |      |  |      |                                           |  |  |  |
|-------------------|--------|---|--------------------------------------------------------------------------------------------|------|------|--|------|-------------------------------------------|--|--|--|
| Description       |        |   | Clock solution                                                                             |      |      |  |      |                                           |  |  |  |
| Firmware          |        |   | Supported on:                                                                              |      |      |  |      |                                           |  |  |  |
|                   |        |   | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |      |      |  |      |                                           |  |  |  |
|                   |        |   | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |      |      |  |      |                                           |  |  |  |
| Type              |        |   | Periodic/Polled                                                                            |      |      |  |      |                                           |  |  |  |
| Comment           |        | - |                                                                                            |      |      |  |      |                                           |  |  |  |
|                   |        |   | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum                             |      |      |  |      |                                           |  |  |  |
| Message Structure |        |   | 0xB5 0x62 0x01 0x22 20<br>see below CK_A CK_B                                              |      |      |  |      |                                           |  |  |  |
| Payload Contents: |        |   |                                                                                            |      |      |  |      |                                           |  |  |  |
| Byte Offset       | Number |   | Scaling                                                                                    | Name |      |  | Unit | Description                               |  |  |  |
|                   | Format |   |                                                                                            |      |      |  |      |                                           |  |  |  |
| 0                 | U4     |   | -                                                                                          | iTOW |      |  | ms   | GPS time of week of the navigation epoch. |  |  |  |
|                   |        |   |                                                                                            |      |      |  |      | See the description of iTOW for details.  |  |  |  |
| 4                 | I4     |   | -                                                                                          |      | clkB |  | ns   | Clock bias                                |  |  |  |
| 8                 | I4     |   | -                                                                                          |      | clkD |  | ns/s | Clock drift                               |  |  |  |
| 12                | U4     |   | -                                                                                          |      | tAcc |  | ns   | Time accuracy estimate                    |  |  |  |
| 16                | U4     |   | fAcc<br>-                                                                                  |      |      |  | ps/s | Frequency accuracy estimate               |  |  |  |

## <span id="page-373-1"></span>**32.17.4 UBX-NAV-COV (0x01 0x36)**

#### **32.17.4.1 Covariance matrices**

| Message           |        |                                                    | UBX-NAV-COV                                                                                                                                                                                                                                                                            |           |             |     |                                       |                                           |  |                     |  |
|-------------------|--------|----------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------|-------------|-----|---------------------------------------|-------------------------------------------|--|---------------------|--|
| Description       |        |                                                    | Covariance matrices                                                                                                                                                                                                                                                                    |           |             |     |                                       |                                           |  |                     |  |
| Firmware          |        |                                                    | Supported on:                                                                                                                                                                                                                                                                          |           |             |     |                                       |                                           |  |                     |  |
|                   |        |                                                    | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                                                                                                                |           |             |     |                                       |                                           |  |                     |  |
| Type              |        |                                                    | Periodic/Polled                                                                                                                                                                                                                                                                        |           |             |     |                                       |                                           |  |                     |  |
| Comment           |        |                                                    | This message outputs the covariance matrices for the position and velocity<br>solutions in the topocentric coordinate system defined as the local-level North<br>(N), East (E), Down (D) frame. As the covariance matrices are symmetric, only<br>the upper triangular part is output. |           |             |     |                                       |                                           |  |                     |  |
|                   |        | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload |                                                                                                                                                                                                                                                                                        |           |             |     |                                       | Checksum                                  |  |                     |  |
| Message Structure |        |                                                    | 0xB5 0x62 0x01 0x36 64                                                                                                                                                                                                                                                                 |           |             |     |                                       |                                           |  | see below CK_A CK_B |  |
| Payload Contents: |        |                                                    |                                                                                                                                                                                                                                                                                        |           |             |     |                                       |                                           |  |                     |  |
| Byte Offset       | Number |                                                    | Scaling                                                                                                                                                                                                                                                                                | Name      |             |     | Unit                                  | Description                               |  |                     |  |
|                   | Format |                                                    |                                                                                                                                                                                                                                                                                        |           |             |     |                                       |                                           |  |                     |  |
| 0                 | U4     |                                                    | -                                                                                                                                                                                                                                                                                      | iTOW      |             |     | ms                                    | GPS time of week of the navigation epoch. |  |                     |  |
|                   |        |                                                    |                                                                                                                                                                                                                                                                                        |           |             |     |                                       | See the description of iTOW for details.  |  |                     |  |
| 4                 | U1     |                                                    | -                                                                                                                                                                                                                                                                                      | version   |             |     | -                                     | Message version (0x00 for this version)   |  |                     |  |
| 5                 | U1     |                                                    | -                                                                                                                                                                                                                                                                                      |           | posCovValid |     | -                                     | Position covariance matrix validity flag  |  |                     |  |
| 6                 | U1     |                                                    | -                                                                                                                                                                                                                                                                                      |           | velCovValid |     | -                                     | Velocity covariance matrix validity flag  |  |                     |  |
| 7                 | U1[9]  |                                                    | -                                                                                                                                                                                                                                                                                      | reserved1 |             | -   | Reserved                              |                                           |  |                     |  |
| 16                | R4     | posCovNN<br>-                                      |                                                                                                                                                                                                                                                                                        |           |             | m^2 | Position covariance matrix value p_NN |                                           |  |                     |  |

<span id="page-374-1"></span>

#### UBX-NAV-COV continued

| Byte Offset | Number | Scaling | Name     | Unit  | Description                           |
|-------------|--------|---------|----------|-------|---------------------------------------|
|             | Format |         |          |       |                                       |
| 20          | R4     | -       | posCovNE | m^2   | Position covariance matrix value p_NE |
| 24          | R4     | -       | posCovND | m^2   | Position covariance matrix value p_ND |
| 28          | R4     | -       | posCovEE | m^2   | Position covariance matrix value p_EE |
| 32          | R4     | -       | posCovED | m^2   | Position covariance matrix value p_ED |
| 36          | R4     | -       | posCovDD | m^2   | Position covariance matrix value p_DD |
| 40          | R4     | -       | velCovNN | m^2/s | Velocity covariance matrix value v_NN |
|             |        |         |          | ^2    |                                       |
| 44          | R4     | -       | velCovNE | m^2/s | Velocity covariance matrix value v_NE |
|             |        |         |          | ^2    |                                       |
| 48          | R4     | -       | velCovND | m^2/s | Velocity covariance matrix value v_ND |
|             |        |         |          | ^2    |                                       |
| 52          | R4     | -       | velCovEE | m^2/s | Velocity covariance matrix value v_EE |
|             |        |         |          | ^2    |                                       |
| 56          | R4     | -       | velCovED | m^2/s | Velocity covariance matrix value v_ED |
|             |        |         |          | ^2    |                                       |
| 60          | R4     | -       | velCovDD | m^2/s | Velocity covariance matrix value v_DD |
|             |        |         |          | ^2    |                                       |

#### <span id="page-374-0"></span>**32.17.5 UBX-NAV-DGPS (0x01 0x31)**

## **32.17.5.1 DGPS data used for NAV**

| Message           |        |             | UBX-NAV-DGPS                                                               |        |            |                              |      |                                                                                            |  |          |
|-------------------|--------|-------------|----------------------------------------------------------------------------|--------|------------|------------------------------|------|--------------------------------------------------------------------------------------------|--|----------|
| Description       |        |             | DGPS data used for NAV                                                     |        |            |                              |      |                                                                                            |  |          |
| Firmware          |        |             | Supported on:                                                              |        |            |                              |      |                                                                                            |  |          |
|                   |        |             |                                                                            |        |            |                              |      | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |          |
|                   |        |             | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                  |        |            |                              |      |                                                                                            |  |          |
| Type              |        |             | Periodic/Polled                                                            |        |            |                              |      |                                                                                            |  |          |
| Comment           |        |             | This message outputs the DGPS correction data that has been applied to the |        |            |                              |      |                                                                                            |  |          |
|                   |        |             |                                                                            |        |            |                              |      | current NAV Solution. See also the notes on the RTCM protocol.                             |  |          |
|                   |        |             | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload                         |        |            |                              |      |                                                                                            |  | Checksum |
| Message Structure |        |             | 0xB5 0x62 0x01 0x31<br>16 + 12*numCh<br>see below CK_A CK_B                |        |            |                              |      |                                                                                            |  |          |
| Payload Contents: |        |             |                                                                            |        |            |                              |      |                                                                                            |  |          |
| Byte Offset       | Number |             | Scaling                                                                    | Name   |            |                              | Unit | Description                                                                                |  |          |
|                   | Format |             |                                                                            |        |            |                              |      |                                                                                            |  |          |
| 0                 | U4     |             | -                                                                          | iTOW   |            |                              | ms   | GPS time of week of the navigation epoch.                                                  |  |          |
|                   |        |             |                                                                            |        |            |                              |      | See the description of iTOW for details.                                                   |  |          |
| 4                 | I4     |             | -                                                                          | age    |            |                              | ms   | Age of newest correction data                                                              |  |          |
| 8                 | I2     |             | -                                                                          | baseId |            |                              | -    | DGPS base station identifier                                                               |  |          |
| 10                | I2     |             | -                                                                          |        | baseHealth |                              | -    | DGPS base station health status                                                            |  |          |
| 12                | U1     |             | -                                                                          | numCh  |            |                              | -    | Number of channels for which correction                                                    |  |          |
|                   |        |             |                                                                            |        |            |                              |      | data is following                                                                          |  |          |
| 13                | U1     | status<br>- |                                                                            |        | -          | DGPS correction type status: |      |                                                                                            |  |          |
|                   |        |             |                                                                            |        |            |                              |      | 0x00: none                                                                                 |  |          |
|                   |        |             |                                                                            |        |            |                              |      | 0x01: PR+PRR correction                                                                    |  |          |

<span id="page-375-1"></span>

UBX-NAV-DGPS continued

| Byte Offset                           | Number                | Scaling | Name      | Unit | Description                           |  |  |
|---------------------------------------|-----------------------|---------|-----------|------|---------------------------------------|--|--|
|                                       | Format                |         |           |      |                                       |  |  |
| 14                                    | U1[2]                 | -       | reserved1 | -    | Reserved                              |  |  |
| Start of repeated block (numCh times) |                       |         |           |      |                                       |  |  |
| 16 + 12*N                             | U1                    | -       | svid      | -    | Satellite ID                          |  |  |
| 17 + 12*N                             | X1                    | -       | flags     | -    | Channel number and usage (see graphic |  |  |
|                                       |                       |         |           |      | below)                                |  |  |
| 18 + 12*N                             | U2                    | -       | ageC      | ms   | Age of latest correction data         |  |  |
| 20 + 12*N                             | R4                    | -       | prc       | m    | Pseudorange correction                |  |  |
| 24 + 12*N                             | R4                    | -       | prrc      | m/s  | Pseudorange rate correction           |  |  |
|                                       | End of repeated block |         |           |      |                                       |  |  |

## <span id="page-375-2"></span>**Bitfield flags**

This graphic explains the bits of flags



| Name     | Description                                                                                        |
|----------|----------------------------------------------------------------------------------------------------|
| channel  | GPS channel number this SV is on. Channel numbers in the firmware greater than 15 are displayed as |
|          | having channel number 15                                                                           |
| dgpsUsed | 1 = DGPS used for this SV                                                                          |

## <span id="page-375-0"></span>**32.17.6 UBX-NAV-DOP (0x01 0x04)**

#### **32.17.6.1 Dilution of precision**

| Message           |        |        | UBX-NAV-DOP                                                                           |       |      |  |                |                                                                                            |         |                     |
|-------------------|--------|--------|---------------------------------------------------------------------------------------|-------|------|--|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|
| Description       |        |        | Dilution of precision                                                                 |       |      |  |                |                                                                                            |         |                     |
| Firmware          |        |        | Supported on:                                                                         |       |      |  |                |                                                                                            |         |                     |
|                   |        |        |                                                                                       |       |      |  |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |
|                   |        |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                             |       |      |  |                |                                                                                            |         |                     |
| Type              |        |        | Periodic/Polled                                                                       |       |      |  |                |                                                                                            |         |                     |
| Comment           |        |        | • DOP values are dimensionless.                                                       |       |      |  |                |                                                                                            |         |                     |
|                   |        |        | • All DOP values are scaled by a factor of 100. If the unit transmits a value of e.g. |       |      |  |                |                                                                                            |         |                     |
|                   |        |        | 156, the DOP value is 1.56.                                                           |       |      |  |                |                                                                                            |         |                     |
|                   |        | Header |                                                                                       | Class | ID   |  | Length (Bytes) |                                                                                            | Payload | Checksum            |
| Message Structure |        |        | 0xB5 0x62 0x01 0x04 18                                                                |       |      |  |                |                                                                                            |         | see below CK_A CK_B |
| Payload Contents: |        |        |                                                                                       |       |      |  |                |                                                                                            |         |                     |
| Byte Offset       | Number |        | Scaling                                                                               | Name  |      |  | Unit           | Description                                                                                |         |                     |
|                   | Format |        |                                                                                       |       |      |  |                |                                                                                            |         |                     |
| 0                 | U4     |        | -                                                                                     |       | iTOW |  | ms             | GPS time of week of the navigation epoch.                                                  |         |                     |
|                   |        |        |                                                                                       |       |      |  |                | See the description of iTOW for details.                                                   |         |                     |
| 4                 | U2     |        | 0.01                                                                                  | gDOP  |      |  | -              | Geometric DOP                                                                              |         |                     |

<span id="page-376-1"></span>

#### UBX-NAV-DOP continued

| Byte Offset | Number | Scaling | Name | Unit | Description    |
|-------------|--------|---------|------|------|----------------|
|             | Format |         |      |      |                |
| 6           | U2     | 0.01    | pDOP | -    | Position DOP   |
| 8           | U2     | 0.01    | tDOP | -    | Time DOP       |
| 10          | U2     | 0.01    | vDOP | -    | Vertical DOP   |
| 12          | U2     | 0.01    | hDOP | -    | Horizontal DOP |
| 14          | U2     | 0.01    | nDOP | -    | Northing DOP   |
| 16          | U2     | 0.01    | eDOP | -    | Easting DOP    |

## <span id="page-376-0"></span>**32.17.7 UBX-NAV-EELL (0x01 0x3d)**

#### **32.17.7.1 Position error ellipse parameters**

| Message           |        |        | UBX-NAV-EELL                      |         |               |                     |                |                                                                                       |         |          |  |
|-------------------|--------|--------|-----------------------------------|---------|---------------|---------------------|----------------|---------------------------------------------------------------------------------------|---------|----------|--|
| Description       |        |        | Position error ellipse parameters |         |               |                     |                |                                                                                       |         |          |  |
| Firmware          |        |        | Supported on:                     |         |               |                     |                |                                                                                       |         |          |  |
|                   |        |        |                                   |         |               |                     |                | • u-blox 8 / u-blox M8 protocol versions 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.3, 22, |         |          |  |
|                   |        |        |                                   |         |               |                     |                | 22.01, 23 and 23.01 (only with ADR products)                                          |         |          |  |
| Type              |        |        | Periodic/Polled                   |         |               |                     |                |                                                                                       |         |          |  |
| Comment           |        |        |                                   |         |               |                     |                | This message outputs the error ellipse parameters for the position solutions.         |         |          |  |
|                   |        | Header |                                   | Class   | ID            |                     | Length (Bytes) |                                                                                       | Payload | Checksum |  |
| Message Structure |        |        | 0xB5 0x62 0x01 0x3d 16            |         |               | see below CK_A CK_B |                |                                                                                       |         |          |  |
| Payload Contents: |        |        |                                   |         |               |                     |                |                                                                                       |         |          |  |
| Byte Offset       | Number |        | Scaling                           | Name    |               |                     | Unit           | Description                                                                           |         |          |  |
|                   | Format |        |                                   |         |               |                     |                |                                                                                       |         |          |  |
| 0                 | U4     |        | -                                 | iTOW    |               |                     | ms             | GPS time of week of the navigation epoch.                                             |         |          |  |
|                   |        |        |                                   |         |               |                     |                | See the description of iTOW for details.                                              |         |          |  |
| 4                 | U1     |        | -                                 | version |               |                     | -              | Message version (0x00 for this version)                                               |         |          |  |
| 5                 | U1     |        | -                                 |         | reserved1     |                     | -              | Reserved                                                                              |         |          |  |
| 6                 | U2     |        | 1e-2                              |         | errEllipseOri |                     | deg            | Orientation of semi-major axis of error                                               |         |          |  |
|                   |        |        |                                   | ent     |               |                     |                | ellipse (degrees from true north)                                                     |         |          |  |
| 8                 | U4     | -      |                                   |         | errEllipseMaj |                     | mm             | Semi-major axis of error ellipse                                                      |         |          |  |
|                   |        |        | or                                |         |               |                     |                |                                                                                       |         |          |  |
| 12                | U4     |        | -                                 |         | errEllipseMin |                     | mm             | Semi-minor axis of error ellipse                                                      |         |          |  |
|                   |        |        |                                   | or      |               |                     |                |                                                                                       |         |          |  |

<span id="page-377-2"></span>

## <span id="page-377-0"></span>**32.17.8 UBX-NAV-EOE (0x01 0x61)**

#### **32.17.8.1 End of epoch**

| Message                                                                         |        |        |                                                                           | UBX-NAV-EOE |    |    |                                           |                                                                                         |         |                     |  |
|---------------------------------------------------------------------------------|--------|--------|---------------------------------------------------------------------------|-------------|----|----|-------------------------------------------|-----------------------------------------------------------------------------------------|---------|---------------------|--|
| Description                                                                     |        |        | End of epoch                                                              |             |    |    |                                           |                                                                                         |         |                     |  |
| Firmware                                                                        |        |        | Supported on:                                                             |             |    |    |                                           |                                                                                         |         |                     |  |
|                                                                                 |        |        |                                                                           |             |    |    |                                           | • u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20. |         |                     |  |
|                                                                                 |        |        | 3, 22, 22.01, 23 and 23.01                                                |             |    |    |                                           |                                                                                         |         |                     |  |
| Type                                                                            |        |        | Periodic                                                                  |             |    |    |                                           |                                                                                         |         |                     |  |
| Comment                                                                         |        |        | This message is intended to be used as a marker to collect all navigation |             |    |    |                                           |                                                                                         |         |                     |  |
| messages of an epoch. It is output after all enabled NAV class messages (except |        |        |                                                                           |             |    |    |                                           |                                                                                         |         |                     |  |
|                                                                                 |        |        |                                                                           |             |    |    |                                           | UBX-NAV-HNR) and after all enabled NMEA messages.                                       |         |                     |  |
|                                                                                 |        | Header |                                                                           | Class       | ID |    | Length (Bytes)                            |                                                                                         | Payload | Checksum            |  |
| Message Structure                                                               |        |        | 0xB5 0x62 0x01 0x61                                                       |             |    | 4  |                                           |                                                                                         |         | see below CK_A CK_B |  |
| Payload Contents:                                                               |        |        |                                                                           |             |    |    |                                           |                                                                                         |         |                     |  |
| Byte Offset                                                                     | Number |        | Scaling                                                                   | Name        |    |    | Unit                                      | Description                                                                             |         |                     |  |
|                                                                                 | Format |        |                                                                           |             |    |    |                                           |                                                                                         |         |                     |  |
| 0                                                                               | U4     |        | -                                                                         | iTOW        |    | ms | GPS time of week of the navigation epoch. |                                                                                         |         |                     |  |
|                                                                                 |        |        |                                                                           |             |    |    |                                           | See the description of iTOW for details.                                                |         |                     |  |

## <span id="page-377-1"></span>**32.17.9 UBX-NAV-GEOFENCE (0x01 0x39)**

## **32.17.9.1 Geofencing status**

| Message           |        |                                                            | UBX-NAV-GEOFENCE                                                              |         |                     |  |                                              |                                                                                         |         |          |
|-------------------|--------|------------------------------------------------------------|-------------------------------------------------------------------------------|---------|---------------------|--|----------------------------------------------|-----------------------------------------------------------------------------------------|---------|----------|
| Description       |        |                                                            | Geofencing status                                                             |         |                     |  |                                              |                                                                                         |         |          |
| Firmware          |        |                                                            | Supported on:                                                                 |         |                     |  |                                              |                                                                                         |         |          |
|                   |        |                                                            |                                                                               |         |                     |  |                                              | • u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20. |         |          |
|                   |        |                                                            | 3, 22, 22.01, 23 and 23.01                                                    |         |                     |  |                                              |                                                                                         |         |          |
| Type              |        |                                                            | Periodic/Polled                                                               |         |                     |  |                                              |                                                                                         |         |          |
| Comment           |        |                                                            | This message outputs the evaluated states of all configured geofences for the |         |                     |  |                                              |                                                                                         |         |          |
|                   |        |                                                            | current epoch's position.                                                     |         |                     |  |                                              |                                                                                         |         |          |
|                   |        |                                                            |                                                                               |         |                     |  |                                              | See the Geofencing description for feature details.                                     |         |          |
|                   |        |                                                            | Header                                                                        | Class   | ID                  |  | Length (Bytes)                               |                                                                                         | Payload | Checksum |
| Message Structure |        | 0xB5 0x62 0x01 0x39 8 + 2*numFences<br>see below CK_A CK_B |                                                                               |         |                     |  |                                              |                                                                                         |         |          |
| Payload Contents: |        |                                                            |                                                                               |         |                     |  |                                              |                                                                                         |         |          |
| Byte Offset       | Number |                                                            | Scaling                                                                       | Name    |                     |  | Unit                                         | Description                                                                             |         |          |
|                   | Format |                                                            |                                                                               |         |                     |  |                                              |                                                                                         |         |          |
| 0                 | U4     |                                                            | -                                                                             | iTOW    |                     |  | ms                                           | GPS time of week of the navigation epoch.                                               |         |          |
|                   |        |                                                            |                                                                               |         |                     |  |                                              | See the description of iTOW for details.                                                |         |          |
| 4                 | U1     |                                                            | -                                                                             | version |                     |  | -                                            | Message version (0x00 for this version)                                                 |         |          |
| 5                 | U1     |                                                            | -                                                                             | status  |                     |  | -                                            | Geofencing status                                                                       |         |          |
|                   |        |                                                            |                                                                               |         |                     |  | 0 - Geofencing not available or not reliable |                                                                                         |         |          |
|                   |        |                                                            |                                                                               |         |                     |  | 1 - Geofencing active                        |                                                                                         |         |          |
| 6                 | U1     | numFences<br>-                                             |                                                                               | -       | Number of geofences |  |                                              |                                                                                         |         |          |

<span id="page-378-1"></span>

#### UBX-NAV-GEOFENCE continued

| Byte Offset                               | Number | Scaling | Name      | Unit | Description                        |  |  |  |
|-------------------------------------------|--------|---------|-----------|------|------------------------------------|--|--|--|
|                                           | Format |         |           |      |                                    |  |  |  |
| 7                                         | U1     | -       | combState | -    | Combined (logical OR) state of all |  |  |  |
|                                           |        |         |           |      | geofences                          |  |  |  |
|                                           |        |         |           |      | 0 - Unknown                        |  |  |  |
|                                           |        |         |           |      | 1 - Inside                         |  |  |  |
|                                           |        |         |           |      | 2 - Outside                        |  |  |  |
| Start of repeated block (numFences times) |        |         |           |      |                                    |  |  |  |
| 8 + 2*N                                   | U1     | -       | state     | -    | Geofence state                     |  |  |  |
|                                           |        |         |           |      | 0 - Unknown                        |  |  |  |
|                                           |        |         |           |      | 1 - Inside                         |  |  |  |
|                                           |        |         |           |      | 2 - Outside                        |  |  |  |
| 9 + 2*N                                   | U1     | -       | id        | -    | Geofence ID (0 = not available)    |  |  |  |
| End of repeated block                     |        |         |           |      |                                    |  |  |  |

#### <span id="page-378-0"></span>**32.17.10 UBX-NAV-HPPOSECEF (0x01 0x13)**

#### **32.17.10.1 High precision position solution in ECEF**

| Message           |        |        | UBX-NAV-HPPOSECEF                        |         |           |    |                   |                                                                         |                     |  |          |
|-------------------|--------|--------|------------------------------------------|---------|-----------|----|-------------------|-------------------------------------------------------------------------|---------------------|--|----------|
| Description       |        |        | High precision position solution in ECEF |         |           |    |                   |                                                                         |                     |  |          |
| Firmware          |        |        | Supported on:                            |         |           |    |                   |                                                                         |                     |  |          |
|                   |        |        |                                          |         |           |    |                   | • u-blox 8 / u-blox M8 protocol versions 20.01, 20.1, 20.2 and 20.3     |                     |  |          |
| Type              |        |        | Periodic/Polled                          |         |           |    |                   |                                                                         |                     |  |          |
| Comment           |        |        |                                          |         |           |    |                   | See important comments concerning validity of position given in section |                     |  |          |
|                   |        |        | Navigation Output Filters.               |         |           |    |                   |                                                                         |                     |  |          |
|                   |        | Header |                                          | Class   | ID        |    | Length (Bytes)    |                                                                         | Payload             |  | Checksum |
| Message Structure |        |        | 0xB5 0x62 0x01 0x13                      |         |           | 28 |                   |                                                                         | see below CK_A CK_B |  |          |
| Payload Contents: |        |        |                                          |         |           |    |                   |                                                                         |                     |  |          |
| Byte Offset       | Number |        | Scaling                                  | Name    |           |    | Unit              | Description                                                             |                     |  |          |
|                   | Format |        |                                          |         |           |    |                   |                                                                         |                     |  |          |
| 0                 | U1     |        | -                                        | version |           |    | -                 | Message version (0x00 for this version)                                 |                     |  |          |
| 1                 | U1[3]  |        | -                                        |         | reserved1 |    | -                 | Reserved                                                                |                     |  |          |
| 4                 | U4     |        | -                                        | iTOW    |           |    | ms                | GPS time of week of the navigation epoch.                               |                     |  |          |
|                   |        |        |                                          |         |           |    |                   | See the description of iTOW for details.                                |                     |  |          |
| 8                 | I4     |        | -                                        | ecefX   |           |    | cm                | ECEF X coordinate                                                       |                     |  |          |
| 12                | I4     |        | -                                        | ecefY   |           |    | cm                | ECEF Y coordinate                                                       |                     |  |          |
| 16                | I4     |        | -                                        | ecefZ   |           |    | cm                | ECEF Z coordinate                                                       |                     |  |          |
| 20                | I1     |        | 0.1                                      | ecefXHp |           |    | mm                | High precision component of ECEF X                                      |                     |  |          |
|                   |        |        |                                          |         |           |    |                   | coordinate. Must be in the range of -99                                 |                     |  |          |
|                   |        |        |                                          |         |           |    |                   | +99. Precise coordinate in cm = ecefX +                                 |                     |  |          |
|                   |        |        |                                          |         |           |    | (ecefXHp * 1e-2). |                                                                         |                     |  |          |
| 21                | I1     |        | 0.1                                      | ecefYHp |           |    | mm                | High precision component of ECEF Y                                      |                     |  |          |
|                   |        |        |                                          |         |           |    |                   | coordinate. Must be in the range of -99                                 |                     |  |          |
|                   |        |        |                                          |         |           |    |                   | +99. Precise coordinate in cm = ecefY +                                 |                     |  |          |
|                   |        |        |                                          |         |           |    |                   | (ecefYHp * 1e-2).                                                       |                     |  |          |

<span id="page-379-1"></span>

UBX-NAV-HPPOSECEF continued

| Byte Offset | Number | Scaling | Name    | Unit | Description                             |
|-------------|--------|---------|---------|------|-----------------------------------------|
|             | Format |         |         |      |                                         |
| 22          | I1     | 0.1     | ecefZHp | mm   | High precision component of ECEF Z      |
|             |        |         |         |      | coordinate. Must be in the range of -99 |
|             |        |         |         |      | +99. Precise coordinate in cm = ecefZ + |
|             |        |         |         |      | (ecefZHp * 1e-2).                       |
| 23          | X1     | -       | flags   | -    | Additional flags (see graphic below)    |
| 24          | U4     | 0.1     | pAcc    | mm   | Position Accuracy Estimate              |

## <span id="page-379-2"></span>**Bitfield flags**

This graphic explains the bits of flags



| Name        | Description                                                   |
|-------------|---------------------------------------------------------------|
| invalidEcef | 1 = Invalid ecefX, ecefY, ecefZ, ecefXHp, ecefYHp and ecefZHp |

## <span id="page-379-0"></span>**32.17.11 UBX-NAV-HPPOSLLH (0x01 0x14)**

## **32.17.11.1 High precision geodetic position solution**

| Message           |        |                                                                | UBX-NAV-HPPOSLLH                                                                |         |           |     |                                           |                                                                         |  |                     |
|-------------------|--------|----------------------------------------------------------------|---------------------------------------------------------------------------------|---------|-----------|-----|-------------------------------------------|-------------------------------------------------------------------------|--|---------------------|
| Description       |        |                                                                | High precision geodetic position solution                                       |         |           |     |                                           |                                                                         |  |                     |
| Firmware          |        |                                                                | Supported on:                                                                   |         |           |     |                                           |                                                                         |  |                     |
|                   |        |                                                                |                                                                                 |         |           |     |                                           | • u-blox 8 / u-blox M8 protocol versions 20.01, 20.1, 20.2 and 20.3     |  |                     |
| Type              |        |                                                                | Periodic/Polled                                                                 |         |           |     |                                           |                                                                         |  |                     |
| Comment           |        |                                                                |                                                                                 |         |           |     |                                           | See important comments concerning validity of position given in section |  |                     |
|                   |        |                                                                | Navigation Output Filters.                                                      |         |           |     |                                           |                                                                         |  |                     |
|                   |        |                                                                | This message outputs the Geodetic position with high precision in the currently |         |           |     |                                           |                                                                         |  |                     |
|                   |        |                                                                | selected ellipsoid. The default is the WGS84 Ellipsoid, but can be changed with |         |           |     |                                           |                                                                         |  |                     |
|                   |        |                                                                | the message UBX-CFG-DAT.                                                        |         |           |     |                                           |                                                                         |  |                     |
|                   |        | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum |                                                                                 |         |           |     |                                           |                                                                         |  |                     |
| Message Structure |        |                                                                | 0xB5 0x62 0x01 0x14                                                             |         |           | 36  |                                           |                                                                         |  | see below CK_A CK_B |
| Payload Contents: |        |                                                                |                                                                                 |         |           |     |                                           |                                                                         |  |                     |
| Byte Offset       | Number |                                                                | Scaling                                                                         | Name    |           |     | Unit                                      | Description                                                             |  |                     |
|                   | Format |                                                                |                                                                                 |         |           |     |                                           |                                                                         |  |                     |
| 0                 | U1     |                                                                | -                                                                               | version |           |     | -                                         | Message version (0x00 for this version)                                 |  |                     |
| 1                 | U1[2]  |                                                                | -                                                                               |         | reserved1 |     | -                                         | Reserved                                                                |  |                     |
| 3                 | X1     |                                                                | -                                                                               | flags   |           |     | -                                         | Additional flags (see graphic below)                                    |  |                     |
| 4                 | U4     |                                                                | -                                                                               | iTOW    |           | ms  | GPS time of week of the navigation epoch. |                                                                         |  |                     |
|                   |        |                                                                |                                                                                 |         |           |     | See the description of iTOW for details.  |                                                                         |  |                     |
| 8                 | I4     |                                                                | 1e-7                                                                            | lon     |           |     | deg                                       | Longitude                                                               |  |                     |
| 12                | I4     | 1e-7                                                           |                                                                                 | lat     |           | deg | Latitude                                  |                                                                         |  |                     |



UBX-NAV-HPPOSLLH continued

| Byte Offset | Number | Scaling | Name     | Unit | Description                                    |
|-------------|--------|---------|----------|------|------------------------------------------------|
|             | Format |         |          |      |                                                |
| 16          | I4     | -       | height   | mm   | Height above ellipsoid.                        |
| 20          | I4     | -       | hMSL     | mm   | Height above mean sea level                    |
| 24          | I1     | 1e-9    | lonHp    | deg  | High precision component of longitude.         |
|             |        |         |          |      | Must be in the range -99+99. Precise           |
|             |        |         |          |      | longitude in deg * 1e-7 = lon + (lonHp * 1e    |
|             |        |         |          |      | 2).                                            |
| 25          | I1     | 1e-9    | latHp    | deg  | High precision component of latitude.          |
|             |        |         |          |      | Must be in the range -99+99. Precise           |
|             |        |         |          |      | latitude in deg * 1e-7 = lat + (latHp * 1e-2). |
| 26          | I1     | 0.1     | heightHp | mm   | High precision component of height above       |
|             |        |         |          |      | ellipsoid. Must be in the range -9+9.          |
|             |        |         |          |      | Precise height in mm = height + (heightHp      |
|             |        |         |          |      | * 0.1).                                        |
| 27          | I1     | 0.1     | hMSLHp   | mm   | High precision component of height above       |
|             |        |         |          |      | mean sea level. Must be in range -9+9.         |
|             |        |         |          |      | Precise height in mm = hMSL + (hMSLHp *        |
|             |        |         |          |      | 0.1)                                           |
| 28          | U4     | 0.1     | hAcc     | mm   | Horizontal accuracy estimate                   |
| 32          | U4     | 0.1     | vAcc     | mm   | Vertical accuracy estimate                     |

## <span id="page-380-0"></span>**Bitfield flags**



| Name       | Description                                                           |
|------------|-----------------------------------------------------------------------|
| invalidLlh | 1 = Invalid lon, lat, height, hMSL, lonHp, latHp, heightHp and hMSLHp |

<span id="page-381-1"></span>

## <span id="page-381-0"></span>**32.17.12 UBX-NAV-NMI (0x01 0x28)**

#### **32.17.12.1 Navigation message cross-check information**

| Message           |        | UBX-NAV-NMI            |                 |             |   |                                         |                                                                          |                                          |          |  |  |
|-------------------|--------|------------------------|-----------------|-------------|---|-----------------------------------------|--------------------------------------------------------------------------|------------------------------------------|----------|--|--|
| Description       |        |                        |                 |             |   |                                         | Navigation message cross-check information                               |                                          |          |  |  |
| Firmware          |        | Supported on:          |                 |             |   |                                         |                                                                          |                                          |          |  |  |
|                   |        |                        |                 |             |   |                                         | • u-blox 8 / u-blox M8 with protocol version 22.01                       |                                          |          |  |  |
| Type              |        | Periodic/Polled        |                 |             |   |                                         |                                                                          |                                          |          |  |  |
| Comment           |        |                        |                 |             |   |                                         | Information about the validity of received satellite navigation payload. |                                          |          |  |  |
|                   |        | Header                 | Class           | ID          |   | Length (Bytes)                          |                                                                          | Payload                                  | Checksum |  |  |
| Message Structure |        | 0xB5 0x62 0x01 0x28 16 |                 |             |   | see below CK_A CK_B                     |                                                                          |                                          |          |  |  |
| Payload Contents: |        |                        |                 |             |   |                                         |                                                                          |                                          |          |  |  |
| Byte Offset       | Number | Scaling                | Name            |             |   | Unit                                    | Description                                                              |                                          |          |  |  |
|                   | Format |                        |                 |             |   |                                         |                                                                          |                                          |          |  |  |
| 0                 | U4     | -                      | iTOW            |             |   | ms                                      | GPS time of week of the navigation epoch.                                |                                          |          |  |  |
|                   |        |                        |                 |             |   |                                         |                                                                          | See the description of iTOW for details. |          |  |  |
| 4                 | U1     | -                      | version         |             | - | Message version (0x01 for this version) |                                                                          |                                          |          |  |  |
| 5                 | U1[4]  | -                      |                 | reserved1   |   | -                                       | Reserved                                                                 |                                          |          |  |  |
| 9                 | X1     | -                      |                 | gpsNmiFlags |   | -                                       | GPS navigation message cross-check                                       |                                          |          |  |  |
|                   |        |                        |                 |             |   |                                         | information flags. (see graphic below)                                   |                                          |          |  |  |
| 10                | X1     | -                      |                 | gpsLsFlags  |   | -                                       | GPS leap second cross-check information                                  |                                          |          |  |  |
|                   |        |                        |                 |             |   |                                         | flags. (see graphic below)                                               |                                          |          |  |  |
| 11                | X1     | -                      |                 | galNmiFlags |   | -                                       | Galileo navigation message cross-check                                   |                                          |          |  |  |
|                   |        |                        |                 |             |   |                                         | information flags. (see graphic below)                                   |                                          |          |  |  |
| 12                | X1     | -                      |                 | galLsFlags  |   | -                                       | Galileo leap second cross-check                                          |                                          |          |  |  |
|                   |        |                        |                 |             |   |                                         | information flags. (see graphic below)                                   |                                          |          |  |  |
| 13                | X1     | -                      |                 | bdsNmiFlags |   | -                                       | BeiDou navigation message cross-check                                    |                                          |          |  |  |
|                   |        |                        |                 |             |   |                                         | information flags. (see graphic below)                                   |                                          |          |  |  |
| 14                | X1     |                        | bdsLsFlags<br>- |             | - | BeiDou leap second cross-check          |                                                                          |                                          |          |  |  |
|                   |        |                        |                 |             |   |                                         | information flags. (see graphic below)                                   |                                          |          |  |  |
| 15                | X1     | -                      |                 | gloNmiFlags |   | -                                       | GLONASS navigation message cross                                         |                                          |          |  |  |
|                   |        |                        |                 |             |   |                                         | check information flags. (see graphic                                    |                                          |          |  |  |
|                   |        |                        |                 |             |   |                                         | below)                                                                   |                                          |          |  |  |

## <span id="page-381-2"></span>**Bitfield gpsNmiFlags**





| Name          | Description                                  |
|---------------|----------------------------------------------|
| wnoCheckedGPS | 1 = week number check performed.             |
| wnoInvalidGPS | 1 = week number invalid.                     |
| UTCORefChecke | 1 = GPS UTCO reference time check performed. |
| dGPS          |                                              |
| UTCORefInvali | 1 = GPS UTCO reference time invalid.         |
| dGPS          |                                              |

## <span id="page-382-0"></span>**Bitfield gpsLsFlags**

This graphic explains the bits of gpsLsFlags



| Name        | Description                          |
|-------------|--------------------------------------|
| lsValGPS    | 1 = Leap second value out of range.  |
| dnRangeGPS  | 1 = Day number value out of range.   |
| totRangeGPS | 1 = Data reference TOW out of range. |
| lsEventGPS  | 1 = Unexpected leap second event.    |
| recNowGPS   | 1 = Data received this epoch.        |

## <span id="page-382-1"></span>**Bitfield galNmiFlags**



| Name          | Description                      |
|---------------|----------------------------------|
| wnoCheckedGAL | 1 = week number check performed. |
| wnoInvalidGAL | 1 = week number invalid.         |



## **Bitfield galLsFlags**

<span id="page-383-0"></span>This graphic explains the bits of galLsFlags



| Name        | Description                          |
|-------------|--------------------------------------|
| lsValGAL    | 1 = Leap second value out of range.  |
| dnRangeGAL  | 1 = Day number value out of range.   |
| totRangeGAL | 1 = Data reference TOW out of range. |
| lsEventGAL  | 1 = Unexpected leap second event.    |
| recNowGAL   | 1 = Data received this epoch.        |

## <span id="page-383-1"></span>**Bitfield bdsNmiFlags**

This graphic explains the bits of bdsNmiFlags



| Name          | Description                      |
|---------------|----------------------------------|
| wnoCheckedBDS | 1 = week number check performed. |
| wnoInvalidBDS | 1 = week number invalid.         |

## <span id="page-383-2"></span>**Bitfield bdsLsFlags**



<span id="page-384-1"></span>

| Name        | Description                          |
|-------------|--------------------------------------|
| lsValBDS    | 1 = Leap second value out of range.  |
| dnRangeBDS  | 1 = Day number value out of range.   |
| totRangeBDS | 1 = Data reference TOW out of range. |
| lsEventBDS  | 1 = Unexpected leap second event.    |
| recNowBDS   | 1 = Data received this epoch.        |

## <span id="page-384-2"></span>**Bitfield gloNmiFlags**

This graphic explains the bits of gloNmiFlags



| Name          | Description                      |
|---------------|----------------------------------|
| wnoCheckedGLO | 1 = week number check performed. |
| wnoInvalidGLO | 1 = week number invalid.         |

## <span id="page-384-0"></span>**32.17.13 UBX-NAV-ODO (0x01 0x09)**

## **32.17.13.1 Odometer solution**

| Message                   |        |                                                                                                                                         | UBX-NAV-ODO                              |                        |                                  |                |      |                                                                                |                                         |                     |  |
|---------------------------|--------|-----------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|------------------------|----------------------------------|----------------|------|--------------------------------------------------------------------------------|-----------------------------------------|---------------------|--|
| Description               |        |                                                                                                                                         | Odometer solution                        |                        |                                  |                |      |                                                                                |                                         |                     |  |
| Supported on:<br>Firmware |        |                                                                                                                                         |                                          |                        |                                  |                |      |                                                                                |                                         |                     |  |
|                           |        | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |                                          |                        |                                  |                |      |                                                                                |                                         |                     |  |
| Type                      |        |                                                                                                                                         | Periodic/Polled                          |                        |                                  |                |      |                                                                                |                                         |                     |  |
| Comment                   |        |                                                                                                                                         |                                          |                        |                                  |                |      | This message outputs the traveled distance since last reset (see UBX-NAV       |                                         |                     |  |
|                           |        |                                                                                                                                         |                                          |                        |                                  |                |      | RESETODO) together with an associated estimated accuracy and the total         |                                         |                     |  |
|                           |        |                                                                                                                                         |                                          |                        |                                  |                |      | cumulated ground distance (can only be reset by a cold start of the receiver). |                                         |                     |  |
|                           |        | Header                                                                                                                                  |                                          | Class                  | ID                               | Length (Bytes) |      |                                                                                | Payload                                 | Checksum            |  |
| Message Structure         |        |                                                                                                                                         |                                          | 0xB5 0x62 0x01 0x09 20 |                                  |                |      |                                                                                |                                         | see below CK_A CK_B |  |
| Payload Contents:         |        |                                                                                                                                         |                                          |                        |                                  |                |      |                                                                                |                                         |                     |  |
| Byte Offset               | Number |                                                                                                                                         | Scaling                                  |                        | Name                             |                | Unit | Description                                                                    |                                         |                     |  |
|                           | Format |                                                                                                                                         |                                          |                        |                                  |                |      |                                                                                |                                         |                     |  |
| 0                         | U1     |                                                                                                                                         | -                                        | version                |                                  |                | -    |                                                                                | Message version (0x00 for this version) |                     |  |
| 1                         | U1[3]  |                                                                                                                                         | -                                        |                        | reserved1                        |                | -    | Reserved                                                                       |                                         |                     |  |
| 4                         | U4     |                                                                                                                                         | -                                        | iTOW                   |                                  |                | ms   | GPS time of week of the navigation epoch.                                      |                                         |                     |  |
|                           |        |                                                                                                                                         | See the description of iTOW for details. |                        |                                  |                |      |                                                                                |                                         |                     |  |
| 8                         | U4     | distance<br>-                                                                                                                           |                                          | m                      | Ground distance since last reset |                |      |                                                                                |                                         |                     |  |
| 12                        | U4     |                                                                                                                                         | -                                        |                        | totalDistance                    |                | m    | Total cumulative ground distance                                               |                                         |                     |  |
| 16                        | U4     |                                                                                                                                         | -                                        | distanceStd            |                                  |                | m    | Ground distance accuracy (1-sigma)                                             |                                         |                     |  |

<span id="page-385-1"></span>

## <span id="page-385-0"></span>**32.17.14 UBX-NAV-ORB (0x01 0x34)**

#### **32.17.14.1 GNSS orbit database info**

| Message                               |        | UBX-NAV-ORB        |                                                                                            |         |                                         |                                       |                |                                              |         |                     |  |
|---------------------------------------|--------|--------------------|--------------------------------------------------------------------------------------------|---------|-----------------------------------------|---------------------------------------|----------------|----------------------------------------------|---------|---------------------|--|
| Description                           |        |                    | GNSS orbit database info                                                                   |         |                                         |                                       |                |                                              |         |                     |  |
| Firmware                              |        | Supported on:      |                                                                                            |         |                                         |                                       |                |                                              |         |                     |  |
|                                       |        |                    | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                                         |                                       |                |                                              |         |                     |  |
|                                       |        |                    | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |         |                                         |                                       |                |                                              |         |                     |  |
| Type                                  |        | Periodic/Polled    |                                                                                            |         |                                         |                                       |                |                                              |         |                     |  |
| Comment                               |        |                    |                                                                                            |         |                                         |                                       |                | Status of the GNSS orbit database knowledge. |         |                     |  |
|                                       |        |                    | Header                                                                                     | Class   | ID                                      |                                       | Length (Bytes) |                                              | Payload | Checksum            |  |
| Message Structure                     |        |                    | 0xB5 0x62 0x01 0x34 8 + 6*numSv                                                            |         |                                         |                                       |                |                                              |         | see below CK_A CK_B |  |
| Payload Contents:                     |        |                    |                                                                                            |         |                                         |                                       |                |                                              |         |                     |  |
| Byte Offset                           | Number |                    | Scaling                                                                                    | Name    |                                         |                                       | Unit           | Description                                  |         |                     |  |
|                                       | Format |                    |                                                                                            |         |                                         |                                       |                |                                              |         |                     |  |
| 0                                     | U4     |                    | -                                                                                          | iTOW    |                                         |                                       | ms             | GPS time of week of the navigation epoch.    |         |                     |  |
|                                       |        |                    |                                                                                            |         |                                         |                                       |                | See the description of iTOW for details.     |         |                     |  |
| 4                                     | U1     |                    | -                                                                                          | version |                                         |                                       | -              | Message version (0x01 for this version)      |         |                     |  |
| 5                                     | U1     |                    | -                                                                                          | numSv   |                                         |                                       | -              | Number of SVs in the database                |         |                     |  |
| 6                                     | U1[2]  |                    | -                                                                                          |         | reserved1                               |                                       | -              | Reserved                                     |         |                     |  |
| Start of repeated block (numSv times) |        |                    |                                                                                            |         |                                         |                                       |                |                                              |         |                     |  |
| 8 + 6*N                               | U1     |                    | -                                                                                          | gnssId  |                                         |                                       | -              | GNSS ID                                      |         |                     |  |
| 9 + 6*N                               | U1     |                    | -                                                                                          | svId    |                                         |                                       | -              | Satellite ID                                 |         |                     |  |
| 10 + 6*N                              | X1     | svFlag<br>-        |                                                                                            | -       |                                         | Information Flags (see graphic below) |                |                                              |         |                     |  |
| 11 + 6*N                              | X1     |                    | -                                                                                          | eph     |                                         |                                       | -              | Ephemeris data (see graphic below)           |         |                     |  |
| 12 + 6*N                              | X1     |                    | -                                                                                          | alm     |                                         |                                       | -              | Almanac data (see graphic below)             |         |                     |  |
| 13 + 6*N                              | X1     | otherOrb<br>-<br>- |                                                                                            |         | Other orbit data available (see graphic |                                       |                |                                              |         |                     |  |
|                                       |        |                    |                                                                                            |         |                                         |                                       |                | below)                                       |         |                     |  |
| End of repeated block                 |        |                    |                                                                                            |         |                                         |                                       |                |                                              |         |                     |  |

<span id="page-385-2"></span>**Bitfield svFlag**





| Name       | Description             |
|------------|-------------------------|
| health     | SV health:              |
|            | 0: unknown              |
|            | 1: healthy              |
|            | 2: not healty           |
| visibility | SV health:              |
|            | 0: unknown              |
|            | 1: below horizon        |
|            | 2: above horizon        |
|            | 3: above elevation mask |

## <span id="page-386-0"></span>**Bitfield eph**

This graphic explains the bits of eph



| Name         | Description                                                                      |  |  |  |  |  |  |  |  |
|--------------|----------------------------------------------------------------------------------|--|--|--|--|--|--|--|--|
| ephUsability | How long the receiver will be able to use the stored ephemeris data from now on: |  |  |  |  |  |  |  |  |
|              | 31: The usability period is unknown                                              |  |  |  |  |  |  |  |  |
|              | 30: The usability period is more than 450 minutes                                |  |  |  |  |  |  |  |  |
|              | 30 > n > 0: The usability period is between (n-1)*15 and n*15 minutes            |  |  |  |  |  |  |  |  |
|              | 0: Ephemeris can no longer be used                                               |  |  |  |  |  |  |  |  |
| ephSource    | 0: not available                                                                 |  |  |  |  |  |  |  |  |
|              | 1: GNSS transmission                                                             |  |  |  |  |  |  |  |  |
|              | 2: external aiding                                                               |  |  |  |  |  |  |  |  |
|              | 3-7: other                                                                       |  |  |  |  |  |  |  |  |

## <span id="page-386-1"></span>**Bitfield alm**





| Name         | Description                                                                    |  |  |  |  |  |  |  |  |
|--------------|--------------------------------------------------------------------------------|--|--|--|--|--|--|--|--|
| almUsability | How long the receiver will be able to use the stored almanac data from now on: |  |  |  |  |  |  |  |  |
|              | 31: The usability period is unknown                                            |  |  |  |  |  |  |  |  |
|              | 30: The usability period is more than 30 days                                  |  |  |  |  |  |  |  |  |
|              | 30 > n > 0: The usability period is between n-1 and n days                     |  |  |  |  |  |  |  |  |
|              | 0: Almanac can no longer be used                                               |  |  |  |  |  |  |  |  |
| almSource    | 0: not available                                                               |  |  |  |  |  |  |  |  |
|              | 1: GNSS transmission                                                           |  |  |  |  |  |  |  |  |
|              | 2: external aiding                                                             |  |  |  |  |  |  |  |  |
|              | 3-7: other                                                                     |  |  |  |  |  |  |  |  |

## <span id="page-387-0"></span>**Bitfield otherOrb**

This graphic explains the bits of otherOrb



| Name          | Description                                                           |  |  |  |  |  |  |
|---------------|-----------------------------------------------------------------------|--|--|--|--|--|--|
| anoAopUsabili | How long the receiver will be able to use the orbit data from now on: |  |  |  |  |  |  |
| ty            | 31: The usability period is unknown                                   |  |  |  |  |  |  |
|               | 30: The usability period is more than 30 days                         |  |  |  |  |  |  |
|               | 30 > n > 0: The usability period is between n-1 and n days            |  |  |  |  |  |  |
|               | 0: Data can no longer be used                                         |  |  |  |  |  |  |
| type          | Type of orbit data:                                                   |  |  |  |  |  |  |
|               | 0: No orbit data available                                            |  |  |  |  |  |  |
|               | 1: AssistNow Offline data                                             |  |  |  |  |  |  |
|               | 2: AssistNow Autonomous data                                          |  |  |  |  |  |  |
|               | 3-7: Other orbit data                                                 |  |  |  |  |  |  |

<span id="page-388-2"></span>

## <span id="page-388-0"></span>**32.17.15 UBX-NAV-POSECEF (0x01 0x01)**

#### **32.17.15.1 Position solution in ECEF**

| UBX-NAV-POSECEF<br>Message               |                                           |                                                                                            |                            |             |                                          |      |                |                                                                         |         |                     |  |
|------------------------------------------|-------------------------------------------|--------------------------------------------------------------------------------------------|----------------------------|-------------|------------------------------------------|------|----------------|-------------------------------------------------------------------------|---------|---------------------|--|
| Position solution in ECEF<br>Description |                                           |                                                                                            |                            |             |                                          |      |                |                                                                         |         |                     |  |
| Firmware                                 |                                           |                                                                                            | Supported on:              |             |                                          |      |                |                                                                         |         |                     |  |
|                                          |                                           | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                            |             |                                          |      |                |                                                                         |         |                     |  |
|                                          | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |                                                                                            |                            |             |                                          |      |                |                                                                         |         |                     |  |
| Periodic/Polled<br>Type                  |                                           |                                                                                            |                            |             |                                          |      |                |                                                                         |         |                     |  |
| Comment                                  |                                           |                                                                                            |                            |             |                                          |      |                | See important comments concerning validity of position given in section |         |                     |  |
|                                          |                                           |                                                                                            | Navigation Output Filters. |             |                                          |      |                |                                                                         |         |                     |  |
|                                          |                                           |                                                                                            | Header                     | Class<br>ID |                                          |      | Length (Bytes) |                                                                         | Payload | Checksum            |  |
| Message Structure                        |                                           |                                                                                            | 0xB5 0x62 0x01 0x01 20     |             |                                          |      |                |                                                                         |         | see below CK_A CK_B |  |
| Payload Contents:                        |                                           |                                                                                            |                            |             |                                          |      |                |                                                                         |         |                     |  |
| Byte Offset                              | Number                                    |                                                                                            | Scaling                    | Name        |                                          | Unit | Description    |                                                                         |         |                     |  |
|                                          | Format                                    |                                                                                            |                            |             |                                          |      |                |                                                                         |         |                     |  |
| 0                                        | U4                                        |                                                                                            | -                          |             | iTOW                                     |      | ms             | GPS time of week of the navigation epoch.                               |         |                     |  |
|                                          |                                           |                                                                                            |                            |             |                                          |      |                | See the description of iTOW for details.                                |         |                     |  |
| 4                                        | I4                                        | -                                                                                          |                            | ecefX       |                                          |      | cm             | ECEF X coordinate                                                       |         |                     |  |
| 8                                        | I4                                        | -                                                                                          |                            |             | ecefY                                    |      | cm             | ECEF Y coordinate                                                       |         |                     |  |
| 12                                       | I4                                        |                                                                                            | -                          |             | ecefZ                                    |      | cm             | ECEF Z coordinate                                                       |         |                     |  |
| 16                                       | U4                                        |                                                                                            | -                          |             | pAcc<br>cm<br>Position Accuracy Estimate |      |                |                                                                         |         |                     |  |

## <span id="page-388-1"></span>**32.17.16 UBX-NAV-POSLLH (0x01 0x02)**

#### **32.17.16.1 Geodetic position solution**

| Message                                                                                    |        |                                                                                 | UBX-NAV-POSLLH                                                              |                                                         |                                          |                |      |                                                                         |         |                     |  |  |
|--------------------------------------------------------------------------------------------|--------|---------------------------------------------------------------------------------|-----------------------------------------------------------------------------|---------------------------------------------------------|------------------------------------------|----------------|------|-------------------------------------------------------------------------|---------|---------------------|--|--|
| Description                                                                                |        |                                                                                 | Geodetic position solution                                                  |                                                         |                                          |                |      |                                                                         |         |                     |  |  |
| Supported on:<br>Firmware                                                                  |        |                                                                                 |                                                                             |                                                         |                                          |                |      |                                                                         |         |                     |  |  |
| • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |        |                                                                                 |                                                                             |                                                         |                                          |                |      |                                                                         |         |                     |  |  |
|                                                                                            |        |                                                                                 | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                   |                                                         |                                          |                |      |                                                                         |         |                     |  |  |
| Type                                                                                       |        |                                                                                 | Periodic/Polled                                                             |                                                         |                                          |                |      |                                                                         |         |                     |  |  |
| Comment                                                                                    |        |                                                                                 |                                                                             |                                                         |                                          |                |      | See important comments concerning validity of position given in section |         |                     |  |  |
|                                                                                            |        |                                                                                 | Navigation Output Filters.                                                  |                                                         |                                          |                |      |                                                                         |         |                     |  |  |
|                                                                                            |        | This message outputs the Geodetic position in the currently selected ellipsoid. |                                                                             |                                                         |                                          |                |      |                                                                         |         |                     |  |  |
|                                                                                            |        |                                                                                 | The default is the WGS84 Ellipsoid, but can be changed with the message UBX |                                                         |                                          |                |      |                                                                         |         |                     |  |  |
|                                                                                            |        |                                                                                 | CFG-DAT.                                                                    |                                                         |                                          |                |      |                                                                         |         |                     |  |  |
|                                                                                            |        | Header                                                                          |                                                                             | Class                                                   | ID                                       | Length (Bytes) |      |                                                                         | Payload | Checksum            |  |  |
| Message Structure                                                                          |        | 0xB5 0x62 0x01 0x02 28                                                          |                                                                             |                                                         |                                          |                |      |                                                                         |         | see below CK_A CK_B |  |  |
| Payload Contents:                                                                          |        |                                                                                 |                                                                             |                                                         |                                          |                |      |                                                                         |         |                     |  |  |
| Byte Offset                                                                                | Number |                                                                                 | Scaling                                                                     | Name                                                    |                                          |                | Unit | Description                                                             |         |                     |  |  |
|                                                                                            | Format |                                                                                 |                                                                             |                                                         |                                          |                |      |                                                                         |         |                     |  |  |
| 0                                                                                          | U4     |                                                                                 | -                                                                           | iTOW<br>ms<br>GPS time of week of the navigation epoch. |                                          |                |      |                                                                         |         |                     |  |  |
|                                                                                            |        |                                                                                 |                                                                             |                                                         | See the description of iTOW for details. |                |      |                                                                         |         |                     |  |  |
| 4                                                                                          | I4     |                                                                                 | 1e-7                                                                        | lon                                                     |                                          |                | deg  | Longitude                                                               |         |                     |  |  |
| 8                                                                                          | I4     |                                                                                 | 1e-7                                                                        | lat                                                     |                                          |                | deg  | Latitude                                                                |         |                     |  |  |

12 I4 - height mm Height above ellipsoid

<span id="page-389-1"></span>

UBX-NAV-POSLLH continued

| Byte Offset | Number | Scaling | Name | Unit | Description                  |
|-------------|--------|---------|------|------|------------------------------|
|             | Format |         |      |      |                              |
| 16          | I4     | -       | hMSL | mm   | Height above mean sea level  |
| 20          | U4     | -       | hAcc | mm   | Horizontal accuracy estimate |
| 24          | U4     | -       | vAcc | mm   | Vertical accuracy estimate   |

### <span id="page-389-0"></span>**32.17.17 UBX-NAV-PVT (0x01 0x07)**

#### **32.17.17.1 Navigation position velocity time solution**

| Message           |         |            | UBX-NAV-PVT                                |         |       |    |                                           |                                                                                            |                                           |                     |  |  |  |
|-------------------|---------|------------|--------------------------------------------|---------|-------|----|-------------------------------------------|--------------------------------------------------------------------------------------------|-------------------------------------------|---------------------|--|--|--|
| Description       |         |            | Navigation position velocity time solution |         |       |    |                                           |                                                                                            |                                           |                     |  |  |  |
| Firmware          |         |            | Supported on:                              |         |       |    |                                           |                                                                                            |                                           |                     |  |  |  |
|                   |         |            |                                            |         |       |    |                                           | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                                           |                     |  |  |  |
|                   |         |            | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01  |         |       |    |                                           |                                                                                            |                                           |                     |  |  |  |
| Type              |         |            | Periodic/Polled                            |         |       |    |                                           |                                                                                            |                                           |                     |  |  |  |
| Comment           |         |            |                                            |         |       |    |                                           | This message combines position, velocity and time solution, including accuracy             |                                           |                     |  |  |  |
|                   |         |            | figures.                                   |         |       |    |                                           |                                                                                            |                                           |                     |  |  |  |
|                   |         |            |                                            |         |       |    |                                           | Note that during a leap second there may be more or less than 60 seconds in a              |                                           |                     |  |  |  |
|                   |         | minute.    |                                            |         |       |    |                                           |                                                                                            |                                           |                     |  |  |  |
|                   |         |            |                                            |         |       |    |                                           | See the description of leap seconds for details.                                           |                                           |                     |  |  |  |
|                   |         | Header     |                                            | Class   | ID    |    | Length (Bytes)                            |                                                                                            | Payload                                   | Checksum            |  |  |  |
| Message Structure |         |            | 0xB5 0x62 0x01 0x07 92                     |         |       |    |                                           |                                                                                            |                                           | see below CK_A CK_B |  |  |  |
| Payload Contents: |         |            |                                            |         |       |    |                                           |                                                                                            |                                           |                     |  |  |  |
| Byte Offset       | Number  |            | Scaling                                    | Name    |       |    | Unit                                      | Description                                                                                |                                           |                     |  |  |  |
|                   | Format  |            |                                            |         |       |    |                                           |                                                                                            |                                           |                     |  |  |  |
| 0                 | U4      | iTOW<br>-  |                                            |         |       | ms | GPS time of week of the navigation epoch. |                                                                                            |                                           |                     |  |  |  |
|                   |         |            |                                            |         |       |    |                                           | See the description of iTOW for details.                                                   |                                           |                     |  |  |  |
| 4                 | U2      |            | -                                          | year    |       |    | y                                         | Year (UTC)                                                                                 |                                           |                     |  |  |  |
| 6                 | U1      |            | -                                          |         | month |    |                                           | Month, range 112 (UTC)                                                                     |                                           |                     |  |  |  |
| 7                 | U1      |            | -                                          | day     |       |    | d                                         | Day of month, range 131 (UTC)                                                              |                                           |                     |  |  |  |
| 8                 | U1      |            | -                                          | hour    |       |    | h                                         | Hour of day, range 023 (UTC)                                                               |                                           |                     |  |  |  |
| 9                 | U1      |            | -                                          | min     |       |    | min                                       | Minute of hour, range 059 (UTC)                                                            |                                           |                     |  |  |  |
| 10                | U1      |            | -                                          | sec     |       |    | s                                         | Seconds of minute, range 060 (UTC)                                                         |                                           |                     |  |  |  |
| 11                | X1      |            | -                                          | valid   |       |    | -                                         | Validity flags (see graphic below)                                                         |                                           |                     |  |  |  |
| 12                | U4      |            | -                                          | tAcc    |       |    | ns                                        | Time accuracy estimate (UTC)                                                               |                                           |                     |  |  |  |
| 16                | I4      |            | -                                          | nano    |       |    | ns                                        | Fraction of second, range -1e9  1e9 (UTC)                                                  |                                           |                     |  |  |  |
| 20                | U1      |            | -                                          | fixType |       |    | -                                         | GNSSfix Type:                                                                              |                                           |                     |  |  |  |
|                   |         |            |                                            |         |       |    |                                           | 0: no fix                                                                                  |                                           |                     |  |  |  |
|                   |         |            |                                            |         |       |    |                                           | 1: dead reckoning only                                                                     |                                           |                     |  |  |  |
|                   |         |            |                                            |         |       |    |                                           | 2: 2D-fix                                                                                  |                                           |                     |  |  |  |
|                   |         |            |                                            |         |       |    |                                           | 3: 3D-fix                                                                                  |                                           |                     |  |  |  |
|                   |         |            |                                            |         |       |    |                                           | 4: GNSS + dead reckoning combined                                                          |                                           |                     |  |  |  |
|                   |         |            |                                            |         |       |    |                                           | 5: time only fix                                                                           |                                           |                     |  |  |  |
| 21                | X1      | flags<br>- |                                            |         |       |    | -                                         | Fix status flags (see graphic below)                                                       |                                           |                     |  |  |  |
| 22                | X1      |            | -                                          | flags2  |       | -  |                                           | Additional flags (see graphic below)                                                       |                                           |                     |  |  |  |
| 23                | U1<br>- |            |                                            | numSV   |       |    | -                                         |                                                                                            | Number of satellites used in Nav Solution |                     |  |  |  |



| Byte Offset | Number | Scaling | Name      | Unit | Description                                  |
|-------------|--------|---------|-----------|------|----------------------------------------------|
|             | Format |         |           |      |                                              |
| 24          | I4     | 1e-7    | lon       | deg  | Longitude                                    |
| 28          | I4     | 1e-7    | lat       | deg  | Latitude                                     |
| 32          | I4     | -       | height    | mm   | Height above ellipsoid                       |
| 36          | I4     | -       | hMSL      | mm   | Height above mean sea level                  |
| 40          | U4     | -       | hAcc      | mm   | Horizontal accuracy estimate                 |
| 44          | U4     | -       | vAcc      | mm   | Vertical accuracy estimate                   |
| 48          | I4     | -       | velN      | mm/s | NED north velocity                           |
| 52          | I4     | -       | velE      | mm/s | NED east velocity                            |
| 56          | I4     | -       | velD      | mm/s | NED down velocity                            |
| 60          | I4     | -       | gSpeed    | mm/s | Ground Speed (2-D)                           |
| 64          | I4     | 1e-5    | headMot   | deg  | Heading of motion (2-D)                      |
| 68          | U4     | -       | sAcc      | mm/s | Speed accuracy estimate                      |
| 72          | U4     | 1e-5    | headAcc   | deg  | Heading accuracy estimate (both motion       |
|             |        |         |           |      | and vehicle)                                 |
| 76          | U2     | 0.01    | pDOP      | -    | Position DOP                                 |
| 78          | X2     | -       | flags3    | -    | Additional flags (see graphic below)         |
| 80          | U1[4]  | -       | reserved1 | -    | Reserved                                     |
| 84          | I4     | 1e-5    | headVeh   | deg  | Heading of vehicle (2-D), this is only valid |
|             |        |         |           |      | when headVehValid is set, otherwise the      |
|             |        |         |           |      | output is set to the heading of motion       |
| 88          | I2     | 1e-2    | magDec    | deg  | Magnetic declination. Only supported in      |
|             |        |         |           |      | ADR 4.10 and later.                          |
| 90          | U2     | 1e-2    | magAcc    | deg  | Magnetic declination accuracy. Only          |
|             |        |         |           |      | supported in ADR 4.10 and later.             |

#### UBX-NAV-PVT continued

## <span id="page-390-0"></span>**Bitfield valid**

This graphic explains the bits of valid





| Name          | Description                                                                                           |
|---------------|-------------------------------------------------------------------------------------------------------|
| validDate     | 1 = valid UTC Date (see Time Validity section for details)                                            |
| validTime     | 1 = valid UTC time of day (see Time Validity section for details)                                     |
| fullyResolved | 1 = UTC time of day has been fully resolved (no seconds uncertainty). Cannot be used to check if time |
|               | is completely solved.                                                                                 |
| validMag      | 1 = valid magnetic declination                                                                        |

## <span id="page-391-0"></span>**Bitfield flags**

This graphic explains the bits of flags

| 6        |             |          | 2 |          |           |  |
|----------|-------------|----------|---|----------|-----------|--|
| carrSoln | eadVervalid | psmState |   | diffSoln | gnssFixOK |  |

| Name         | Description                                                                        |
|--------------|------------------------------------------------------------------------------------|
| gnssFixOK    | 1 = valid fix (i.e within DOP & accuracy masks)                                    |
| diffSoln     | 1 = differential corrections were applied                                          |
| headVehValid | 1 = heading of vehicle is valid, only set if the receiver is in sensor fusion mode |
| carrSoln     | Carrier phase range solution status:                                               |
|              | 0: no carrier phase range solution                                                 |
|              | 1: carrier phase range solution with floating ambiguities                          |
|              | 2: carrier phase range solution with fixed ambiguities                             |
|              | (not supported in protocol versions less than 20)                                  |

## <span id="page-391-1"></span>**Bitfield flags2**





| Name          | Description                                                                                              |
|---------------|----------------------------------------------------------------------------------------------------------|
| confirmedAvai | 1 = information about UTC Date and Time of Day validity confirmation is available (see Time Validity     |
|               | section for details)                                                                                     |
|               | This flag is only supported in Protocol Versions 19.00, 19.10, 20.10, 20.20, 20.30, 22.00, 23.00, 23.01, |
|               | 27 and 28.                                                                                               |
| confirmedDate | 1 = UTC Date validity could be confirmed (see Time Validity section for details)                         |
| confirmedTime | 1 = UTC Time of Day could be confirmed (see Time Validity section for details)                           |

## <span id="page-392-0"></span>**Bitfield flags3**



| Name          | Description                                                |
|---------------|------------------------------------------------------------|
| invalidLlh    | 1 = Invalid lon, lat, height and hMSL                      |
| lastCorrectio | Age of the most recently received differential correction: |
| nAge          | 0: Not available                                           |
|               | 1: Age between 0 and 1 second                              |
|               | 2: Age between 1 (inclusive) and 2 seconds                 |
|               | 3: Age between 2 (inclusive) and 5 seconds                 |
|               | 4: Age between 5 (inclusive) and 10 seconds                |
|               | 5: Age between 10 (inclusive) and 15 seconds               |
|               | 6: Age between 15 (inclusive) and 20 seconds               |
|               | 7: Age between 20 (inclusive) and 30 seconds               |
|               | 8: Age between 30 (inclusive) and 45 seconds               |
|               | 9: Age between 45 (inclusive) and 60 seconds               |
|               | 10: Age between 60 (inclusive) and 90 seconds              |
|               | 11: Age between 90 (inclusive) and 120 seconds             |
|               | >=12: Age greater or equal than 120 seconds                |

<span id="page-393-1"></span>

## <span id="page-393-0"></span>**32.17.18 UBX-NAV-RELPOSNED (0x01 0x3C)**

### **32.17.18.1 Relative positioning information in NED frame**

| Message           |        | UBX-NAV-RELPOSNED                                                                 |              |           |  |                |                                                                                     |                                     |                     |  |  |  |  |
|-------------------|--------|-----------------------------------------------------------------------------------|--------------|-----------|--|----------------|-------------------------------------------------------------------------------------|-------------------------------------|---------------------|--|--|--|--|
| Description       |        |                                                                                   |              |           |  |                | Relative positioning information in NED frame                                       |                                     |                     |  |  |  |  |
| Firmware          |        | Supported on:                                                                     |              |           |  |                |                                                                                     |                                     |                     |  |  |  |  |
|                   |        |                                                                                   |              |           |  |                | • u-blox 8 / u-blox M8 protocol versions 20, 20.01, 20.1, 20.2, 20.3, 22, 22.01, 23 |                                     |                     |  |  |  |  |
|                   |        |                                                                                   |              |           |  |                | and 23.01 (only with High Precision GNSS products)                                  |                                     |                     |  |  |  |  |
| Type              |        | Periodic/Polled                                                                   |              |           |  |                |                                                                                     |                                     |                     |  |  |  |  |
| Comment           |        |                                                                                   |              |           |  |                | The NED frame is defined as the local topological system at the reference           |                                     |                     |  |  |  |  |
|                   |        |                                                                                   |              |           |  |                | station. The relative position vector components in this message, along with        |                                     |                     |  |  |  |  |
|                   |        | their associated accuracies, are given in that local topological system.          |              |           |  |                |                                                                                     |                                     |                     |  |  |  |  |
|                   |        | This message contains the relative position vector from the Reference Station     |              |           |  |                |                                                                                     |                                     |                     |  |  |  |  |
|                   |        | to the Rover, including accuracy figures, in the local topological system defined |              |           |  |                |                                                                                     |                                     |                     |  |  |  |  |
|                   |        | at the reference station                                                          |              |           |  |                |                                                                                     |                                     |                     |  |  |  |  |
|                   |        | Header                                                                            | Class        | ID        |  | Length (Bytes) |                                                                                     | Payload                             | Checksum            |  |  |  |  |
| Message Structure |        | 0xB5 0x62 0x01 0x3C 40                                                            |              |           |  |                |                                                                                     |                                     | see below CK_A CK_B |  |  |  |  |
| Payload Contents: |        |                                                                                   |              |           |  |                |                                                                                     |                                     |                     |  |  |  |  |
| Byte Offset       | Number | Scaling<br>Name                                                                   |              |           |  | Unit           | Description                                                                         |                                     |                     |  |  |  |  |
|                   | Format |                                                                                   |              |           |  |                |                                                                                     |                                     |                     |  |  |  |  |
| 0                 | U1     | -                                                                                 |              | version   |  |                | Message version (0x00 for this version)                                             |                                     |                     |  |  |  |  |
| 1                 | U1     | -                                                                                 |              | reserved1 |  |                | Reserved                                                                            |                                     |                     |  |  |  |  |
| 2                 | U2     | -                                                                                 | refStationId |           |  | -              | Reference Station ID. Must be in the range                                          |                                     |                     |  |  |  |  |
|                   |        |                                                                                   |              |           |  |                | 04095                                                                               |                                     |                     |  |  |  |  |
| 4                 | U4     | -                                                                                 | iTOW         |           |  | ms             | GPS time of week of the navigation epoch.                                           |                                     |                     |  |  |  |  |
|                   |        |                                                                                   |              |           |  |                | See the description of iTOW for details.                                            |                                     |                     |  |  |  |  |
| 8                 | I4     | -                                                                                 | relPosN      |           |  | cm             | North component of relative position                                                |                                     |                     |  |  |  |  |
|                   |        |                                                                                   |              |           |  |                | vector                                                                              |                                     |                     |  |  |  |  |
| 12                | I4     | -                                                                                 | relPosE      |           |  | cm             | East component of relative position vector                                          |                                     |                     |  |  |  |  |
| 16                | I4     | -                                                                                 | relPosD      |           |  | cm             |                                                                                     | Down component of relative position |                     |  |  |  |  |
|                   |        |                                                                                   |              |           |  |                | vector                                                                              |                                     |                     |  |  |  |  |
| 20                | I1     | 0.1                                                                               |              | relPosHPN |  | mm             | High-precision North component of                                                   |                                     |                     |  |  |  |  |
|                   |        |                                                                                   |              |           |  |                | relative position vector.                                                           |                                     |                     |  |  |  |  |
|                   |        |                                                                                   |              |           |  |                | Must be in the range -99 to +99.                                                    |                                     |                     |  |  |  |  |
|                   |        |                                                                                   |              |           |  |                | The full North component of the relative                                            |                                     |                     |  |  |  |  |
|                   |        |                                                                                   |              |           |  |                | position vector, in units of cm, is given by                                        |                                     |                     |  |  |  |  |
|                   |        |                                                                                   |              |           |  |                | relPosN + (relPosHPN * 1e-2)                                                        |                                     |                     |  |  |  |  |
| 21                | I1     | 0.1                                                                               |              | relPosHPE |  | mm             | High-precision East component of relative                                           |                                     |                     |  |  |  |  |
|                   |        |                                                                                   |              |           |  |                | position vector.                                                                    |                                     |                     |  |  |  |  |
|                   |        |                                                                                   |              |           |  |                | Must be in the range -99 to +99.                                                    |                                     |                     |  |  |  |  |
|                   |        |                                                                                   |              |           |  |                | The full East component of the relative                                             |                                     |                     |  |  |  |  |
|                   |        |                                                                                   |              |           |  |                | position vector, in units of cm, is given by                                        |                                     |                     |  |  |  |  |
|                   |        |                                                                                   |              |           |  |                | relPosE + (relPosHPE * 1e-2)                                                        |                                     |                     |  |  |  |  |



UBX-NAV-RELPOSNED continued

| Byte Offset | Number | Scaling | Name      | Unit | Description                                  |
|-------------|--------|---------|-----------|------|----------------------------------------------|
|             | Format |         |           |      |                                              |
| 22          | I1     | 0.1     | relPosHPD | mm   | High-precision Down component of             |
|             |        |         |           |      | relative position vector.                    |
|             |        |         |           |      | Must be in the range -99 to +99.             |
|             |        |         |           |      | The full Down component of the relative      |
|             |        |         |           |      | position vector, in units of cm, is given by |
|             |        |         |           |      | relPosD + (relPosHPD * 1e-2)                 |
| 23          | U1     | -       | reserved2 | -    | Reserved                                     |
| 24          | U4     | 0.1     | accN      | mm   | Accuracy of relative position North          |
|             |        |         |           |      | component                                    |
| 28          | U4     | 0.1     | accE      | mm   | Accuracy of relative position East           |
|             |        |         |           |      | component                                    |
| 32          | U4     | 0.1     | accD      | mm   | Accuracy of relative position Down           |
|             |        |         |           |      | component                                    |
| 36          | X4     | -       | flags     | -    | Flags (see graphic below)                    |

## <span id="page-394-0"></span>**Bitfield flags**

|  |  |  |  |  |  |  |  |  |  |  |  |                                            | 6                                      | 5                                               | 4                     | R. | ∍<br><u> </u>                                           |                                                                            |                              |
|--|--|--|--|--|--|--|--|--|--|--|--|--------------------------------------------|----------------------------------------|-------------------------------------------------|-----------------------|----|---------------------------------------------------------|----------------------------------------------------------------------------|------------------------------|
|  |  |  |  |  |  |  |  |  |  |  |  | 8<br>$\mathbf{r}$<br>동<br>ö<br>⋷<br>↬<br>Φ | 8<br>İ<br>᠆<br>5<br>ັ<br>o.<br>ω.<br>Φ | 꾣<br>$\overline{a}$<br>š<br>틂<br>$\overline{a}$ | 드<br>ö<br>Ø<br>怎<br>٥ |    | 꼮<br>ಕ<br>≫<br>8<br>ā<br>$\overline{\phantom{0}}$<br>Ф. | $\overline{\phantom{0}}$<br>ö<br>s<br><u> </u><br>↬<br>$\overline{a}$<br>ా | ğ<br>$\overline{a}$<br>gnssF |

| Name        | Description                                                                                          |
|-------------|------------------------------------------------------------------------------------------------------|
| gnssFixOK   | A valid fix (i.e within DOP & accuracy masks)                                                        |
| diffSoln    | 1 if differential corrections were applied                                                           |
| relPosValid | 1 if relative position components and accuracies are valid                                           |
| carrSoln    | Carrier phase range solution status:                                                                 |
|             | 0 = no carrier phase range solution                                                                  |
|             | 1 = carrier phase range solution with floating ambiguities                                           |
|             | 2 = carrier phase range solution with fixed ambiguities                                              |
| isMoving    | 1 if the receiver is operating in moving baseline mode (not supported in protocol versions less than |
|             | 20.3)                                                                                                |
| refPosMiss  | 1 if extrapolated reference position was used to compute moving baseline solution this epoch (not    |
|             | supported in protocol versions less than 20.3)                                                       |
| refObsMiss  | 1 if extrapolated reference observations were used to compute moving baseline solution this epoch    |
|             | (not supported in protocol versions less than 20.3)                                                  |
|             |                                                                                                      |

<span id="page-395-2"></span>

## <span id="page-395-0"></span>**32.17.19 UBX-NAV-RESETODO (0x01 0x10)**

#### **32.17.19.1 Reset odometer**

| Message           | UBX-NAV-RESETODO                                                                           |                |    |                                                                             |         |          |  |  |  |  |  |  |  |
|-------------------|--------------------------------------------------------------------------------------------|----------------|----|-----------------------------------------------------------------------------|---------|----------|--|--|--|--|--|--|--|
| Description       |                                                                                            | Reset odometer |    |                                                                             |         |          |  |  |  |  |  |  |  |
| Firmware          | Supported on:                                                                              |                |    |                                                                             |         |          |  |  |  |  |  |  |  |
|                   | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                |    |                                                                             |         |          |  |  |  |  |  |  |  |
|                   | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |                |    |                                                                             |         |          |  |  |  |  |  |  |  |
| Type              | Command                                                                                    |                |    |                                                                             |         |          |  |  |  |  |  |  |  |
| Comment           |                                                                                            |                |    | This message resets the traveled distance computed by the odometer (see UBX |         |          |  |  |  |  |  |  |  |
|                   | NAV-ODO).                                                                                  |                |    |                                                                             |         |          |  |  |  |  |  |  |  |
|                   |                                                                                            |                |    | UBX-ACK-ACK or UBX-ACK-NAK are returned to indicate success or failure.     |         |          |  |  |  |  |  |  |  |
|                   | Header                                                                                     | Class          | ID | Length (Bytes)                                                              | Payload | Checksum |  |  |  |  |  |  |  |
| Message Structure | 0xB5 0x62 0x01 0x10 0<br>see below CK_A CK_B                                               |                |    |                                                                             |         |          |  |  |  |  |  |  |  |
| No payload        |                                                                                            |                |    |                                                                             |         |          |  |  |  |  |  |  |  |

#### <span id="page-395-1"></span>**32.17.20 UBX-NAV-SAT (0x01 0x35)**

## **32.17.20.1 Satellite information**

| Message                                                | UBX-NAV-SAT |                                                                                 |                                                                                     |         |           |  |      |                                                                                            |                     |  |  |  |  |
|--------------------------------------------------------|-------------|---------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|---------|-----------|--|------|--------------------------------------------------------------------------------------------|---------------------|--|--|--|--|
| Description                                            |             |                                                                                 | Satellite information                                                               |         |           |  |      |                                                                                            |                     |  |  |  |  |
| Firmware                                               |             |                                                                                 | Supported on:                                                                       |         |           |  |      |                                                                                            |                     |  |  |  |  |
|                                                        |             |                                                                                 |                                                                                     |         |           |  |      | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                     |  |  |  |  |
|                                                        |             |                                                                                 | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                           |         |           |  |      |                                                                                            |                     |  |  |  |  |
| Type                                                   |             |                                                                                 | Periodic/Polled                                                                     |         |           |  |      |                                                                                            |                     |  |  |  |  |
| Comment                                                |             | This message displays information about SVs that are either known to be visible |                                                                                     |         |           |  |      |                                                                                            |                     |  |  |  |  |
|                                                        |             |                                                                                 | or currently tracked by the receiver. All signal related information corresponds to |         |           |  |      |                                                                                            |                     |  |  |  |  |
|                                                        |             |                                                                                 |                                                                                     |         |           |  |      | the subset of signals specified in Signal Identifiers.                                     |                     |  |  |  |  |
| Header<br>Class<br>ID<br>Length (Bytes)<br>Payload     |             |                                                                                 |                                                                                     |         |           |  |      |                                                                                            | Checksum            |  |  |  |  |
| 0xB5 0x62 0x01 0x35 8 + 12*numSvs<br>Message Structure |             |                                                                                 |                                                                                     |         |           |  |      |                                                                                            | see below CK_A CK_B |  |  |  |  |
| Payload Contents:                                      |             |                                                                                 |                                                                                     |         |           |  |      |                                                                                            |                     |  |  |  |  |
| Byte Offset                                            | Number      |                                                                                 | Scaling                                                                             | Name    |           |  | Unit | Description                                                                                |                     |  |  |  |  |
|                                                        | Format      |                                                                                 |                                                                                     |         |           |  |      |                                                                                            |                     |  |  |  |  |
| 0                                                      | U4          |                                                                                 | -                                                                                   | iTOW    |           |  | ms   | GPS time of week of the navigation epoch.                                                  |                     |  |  |  |  |
|                                                        |             |                                                                                 |                                                                                     |         |           |  |      | See the description of iTOW for details.                                                   |                     |  |  |  |  |
| 4                                                      | U1          |                                                                                 | -                                                                                   | version |           |  | -    | Message version (0x01 for this version)                                                    |                     |  |  |  |  |
| 5                                                      | U1          |                                                                                 | -                                                                                   | numSvs  |           |  | -    | Number of satellites                                                                       |                     |  |  |  |  |
| 6                                                      | U1[2]       |                                                                                 | -                                                                                   |         | reserved1 |  | -    | Reserved                                                                                   |                     |  |  |  |  |
| Start of repeated block (numSvs times)                 |             |                                                                                 |                                                                                     |         |           |  |      |                                                                                            |                     |  |  |  |  |
| 8 + 12*N                                               | U1          |                                                                                 | -                                                                                   | gnssId  |           |  | -    | GNSS identifier (see Satellite Numbering)                                                  |                     |  |  |  |  |
|                                                        |             |                                                                                 |                                                                                     |         |           |  |      | for assignment                                                                             |                     |  |  |  |  |
| svId<br>9 + 12*N<br>U1<br>-                            |             |                                                                                 |                                                                                     |         |           |  | -    | Satellite identifier (see Satellite                                                        |                     |  |  |  |  |
|                                                        |             |                                                                                 |                                                                                     |         |           |  |      | Numbering) for assignment                                                                  |                     |  |  |  |  |
| 10 + 12*N                                              | U1          |                                                                                 | -                                                                                   | cno     |           |  | dBHz | Carrier to noise ratio (signal strength)                                                   |                     |  |  |  |  |
| 11 + 12*N<br>I1                                        |             |                                                                                 | -                                                                                   | elev    |           |  | deg  | Elevation (range: +/-90), unknown if out of                                                |                     |  |  |  |  |
|                                                        |             |                                                                                 |                                                                                     |         |           |  |      | range                                                                                      |                     |  |  |  |  |



#### UBX-NAV-SAT continued

| Byte Offset           | Number | Scaling | Name  | Unit | Description                       |  |
|-----------------------|--------|---------|-------|------|-----------------------------------|--|
|                       | Format |         |       |      |                                   |  |
| 12 + 12*N             | I2     | -       | azim  | deg  | Azimuth (range 0-360), unknown if |  |
|                       |        |         |       |      | elevation is out of range         |  |
| 14 + 12*N             | I2     | 0.1     | prRes | m    | Pseudorange residual              |  |
| 16 + 12*N             | X4     | -       | flags | -    | Bitmask (see graphic below)       |  |
| End of repeated block |        |         |       |      |                                   |  |

## <span id="page-396-0"></span>**Bitfield flags**

| 22<br>21<br>23                                                                    | 20<br>19<br>18                                                                                                            | 16                                                         | 13<br>9<br>l 12<br>10.<br>14<br>11                                                                                                                                                                                                              | 8<br>5<br>4<br>6                                       | з                                                                        |
|-----------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|--------------------------------------------------------------------------|
| σ<br>o<br>8<br>8<br>8<br>ō<br>o<br>မ္က<br>၌<br>ō<br>$\overline{\phantom{0}}$<br>٥ | ਠ<br>ਠ<br>۰<br>8<br>8<br>v<br>ø<br>ō<br>۰<br>۰<br>ാ<br>്<br>≂<br>ø<br>효<br>↵<br>Æ,<br>$\overline{\phantom{0}}$<br>ø<br>45 | ਠ<br>ਠ<br>3<br>v<br>o<br>۰<br>$\circ$<br>ဠိ<br>ø<br>ඟ<br>용 | Φ<br>$\overline{\phantom{0}}$<br>$\overline{\phantom{0}}$<br>$\overline{\phantom{0}}$<br>$\overline{\phantom{0}}$<br>$\mathbf{\dot{a}}$<br>İ<br>Ė<br>$\mathbf{\ddot{}}$<br>伵<br>Æ5<br>呕<br>呕<br>aopA<br>훟<br>anoA<br>Ξ<br>Ø<br>↵<br>ಸ<br>Φ<br>Ė | ⊣<br>4U<br>ں<br>smoot<br>Ž<br><u> ட</u><br>́<br>i<br>ರ | ਠ<br>8<br>Į<br>€<br>ø<br>$\overline{a}$<br>$\overline{\phantom{0}}$<br>耍 |

| Name        | Description                                                                                     |
|-------------|-------------------------------------------------------------------------------------------------|
| qualityInd  | Signal quality indicator:                                                                       |
|             | 0: no signal                                                                                    |
|             | 1: searching signal                                                                             |
|             | 2: signal acquired                                                                              |
|             | 3: signal detected but unusable                                                                 |
|             | 4: code locked and time synchronized                                                            |
|             | 5, 6, 7: code and carrier locked and time synchronized                                          |
|             | Note: Since IMES signals are not time synchronized, a channel tracking an IMES signal can never |
|             | reach a quality indicator value of higher than 3.                                               |
| svUsed      | 1 = Signal in the subset specified in Signal Identifiers is currently being used for navigation |
| health      | Signal health flag:                                                                             |
|             | 0: unknown                                                                                      |
|             | 1: healthy                                                                                      |
|             | 2: unhealthy                                                                                    |
| diffCorr    | 1 = differential correction data is available for this SV                                       |
| smoothed    | 1 = carrier smoothed pseudorange used                                                           |
| orbitSource | Orbit source:                                                                                   |
|             | 0: no orbit information is available for this SV                                                |
|             | 1: ephemeris is used                                                                            |
|             | 2: almanac is used                                                                              |
|             | 3: AssistNow Offline orbit is used                                                              |
|             | 4: AssistNow Autonomous orbit is used                                                           |
|             | 5, 6, 7: other orbit information is used                                                        |
| ephAvail    | 1 = ephemeris is available for this SV                                                          |
| almAvail    | 1 = almanac is available for this SV                                                            |
| anoAvail    | 1 = AssistNow Offline data is available for this SV                                             |

<span id="page-397-1"></span>

Bitfield flags Description continued

| Name          | Description                                                                                             |
|---------------|---------------------------------------------------------------------------------------------------------|
| aopAvail      | 1 = AssistNow Autonomous data is available for this SV                                                  |
| sbasCorrUsed  | 1 = SBAS corrections have been used for a signal in the subset specified in Signal Identifiers          |
| rtcmCorrUsed  | 1 = RTCM corrections have been used for a signal in the subset specified in Signal Identifiers          |
| slasCorrUsed  | 1 = QZSS SLAS corrections have been used for a signal in the subset specified in Signal Identifiers     |
| spartnCorrUse | 1 = SPARTN corrections have been used for a signal in the subset specified in Signal Identifiers        |
| d             |                                                                                                         |
| prCorrUsed    | 1 = Pseudorange corrections have been used for a signal in the subset specified in Signal Identifiers   |
| crCorrUsed    | 1 = Carrier range corrections have been used for a signal in the subset specified in Signal Identifiers |
| doCorrUsed    | 1 = Range rate (Doppler) corrections have been used for a signal in the subset specified in Signal      |
|               | Identifiers                                                                                             |
| clasCorrUsed  | 1 = CLAS corrections have been used for a signal in the subset specified in Signal Identifiers          |

## <span id="page-397-0"></span>**32.17.21 UBX-NAV-SBAS (0x01 0x32)**

## **32.17.21.1 SBAS status data**

| Message           |        |                                                                                            | UBX-NAV-SBAS                              |         |    |   |                     |                                                        |                                           |                     |  |
|-------------------|--------|--------------------------------------------------------------------------------------------|-------------------------------------------|---------|----|---|---------------------|--------------------------------------------------------|-------------------------------------------|---------------------|--|
| Description       |        | SBAS status data                                                                           |                                           |         |    |   |                     |                                                        |                                           |                     |  |
| Firmware          |        |                                                                                            | Supported on:                             |         |    |   |                     |                                                        |                                           |                     |  |
|                   |        | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |                                           |         |    |   |                     |                                                        |                                           |                     |  |
|                   |        |                                                                                            | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |         |    |   |                     |                                                        |                                           |                     |  |
| Type              |        |                                                                                            | Periodic/Polled                           |         |    |   |                     |                                                        |                                           |                     |  |
| Comment           |        |                                                                                            |                                           |         |    |   |                     | This message outputs the status of the SBAS sub system |                                           |                     |  |
|                   |        |                                                                                            | Header                                    | Class   | ID |   | Length (Bytes)      |                                                        | Payload                                   | Checksum            |  |
| Message Structure |        |                                                                                            | 0xB5 0x62 0x01 0x32 12 + 12*cnt           |         |    |   |                     |                                                        |                                           | see below CK_A CK_B |  |
| Payload Contents: |        |                                                                                            |                                           |         |    |   |                     |                                                        |                                           |                     |  |
| Byte Offset       | Number |                                                                                            | Scaling                                   | Name    |    |   | Unit                | Description                                            |                                           |                     |  |
|                   | Format |                                                                                            |                                           |         |    |   |                     |                                                        |                                           |                     |  |
| 0                 | U4     |                                                                                            | -                                         | iTOW    |    |   | ms                  |                                                        | GPS time of week of the navigation epoch. |                     |  |
|                   |        |                                                                                            |                                           |         |    |   |                     | See the description of iTOW for details.               |                                           |                     |  |
| 4                 | U1     |                                                                                            | -                                         | geo     |    |   | -                   | PRN Number of the GEO where correction                 |                                           |                     |  |
|                   |        |                                                                                            |                                           |         |    |   |                     | and integrity data is used from                        |                                           |                     |  |
| 5                 | U1     |                                                                                            | mode<br>-                                 |         |    | - | SBAS Mode           |                                                        |                                           |                     |  |
|                   |        |                                                                                            |                                           |         |    |   |                     | 0 Disabled                                             |                                           |                     |  |
|                   |        |                                                                                            |                                           |         |    |   | 1 Enabled integrity |                                                        |                                           |                     |  |
|                   |        |                                                                                            |                                           |         |    |   |                     | 3 Enabled test mode                                    |                                           |                     |  |
| 6                 | I1     |                                                                                            | -                                         | sys     |    |   | -                   | SBAS System (WAAS/EGNOS/)                              |                                           |                     |  |
|                   |        |                                                                                            |                                           |         |    |   |                     | -1 Unknown                                             |                                           |                     |  |
|                   |        |                                                                                            |                                           |         |    |   |                     | 0 WAAS                                                 |                                           |                     |  |
|                   |        |                                                                                            |                                           |         |    |   |                     | 1 EGNOS                                                |                                           |                     |  |
|                   |        |                                                                                            |                                           |         |    |   |                     | 2 MSAS                                                 |                                           |                     |  |
|                   |        |                                                                                            |                                           |         |    |   |                     | 3 GAGAN                                                |                                           |                     |  |
|                   |        |                                                                                            |                                           |         |    |   |                     | 16 GPS                                                 |                                           |                     |  |
| 7                 | X1     |                                                                                            | -                                         | service |    |   | -                   | SBAS Services available (see graphic                   |                                           |                     |  |
|                   |        |                                                                                            |                                           |         |    |   |                     | below)                                                 |                                           |                     |  |
| 8                 | U1     |                                                                                            | -                                         | cnt     |    |   | -                   | Number of SV data following                            |                                           |                     |  |



UBX-NAV-SBAS continued

| Byte Offset                         | Number | Scaling | Name        | Unit | Description                           |
|-------------------------------------|--------|---------|-------------|------|---------------------------------------|
|                                     | Format |         |             |      |                                       |
| 9                                   | X1     | -       | statusFlags | -    | SBAS status flags (see graphic below) |
| 10                                  | U1[2]  | -       | reserved1   | -    | Reserved                              |
| Start of repeated block (cnt times) |        |         |             |      |                                       |
| 12 + 12*N                           | U1     | -       | svid        | -    | SV ID                                 |
| 13 + 12*N                           | U1     | -       | reserved2   | -    | Reserved                              |
| 14 + 12*N                           | U1     | -       | udre        | -    | Monitoring status                     |
| 15 + 12*N                           | U1     | -       | svSys       | -    | System (WAAS/EGNOS/)                  |
|                                     |        |         |             |      | same as SYS                           |
| 16 + 12*N                           | U1     | -       | svService   | -    | Services available                    |
|                                     |        |         |             |      | same as SERVICE                       |
| 17 + 12*N                           | U1     | -       | reserved3   | -    | Reserved                              |
| 18 + 12*N                           | I2     | -       | prc         | cm   | Pseudo Range correction in [cm]       |
| 20 + 12*N                           | U1[2]  | -       | reserved4   | -    | Reserved                              |
| 22 + 12*N                           | I2     | -       | ic          | cm   | Ionosphere correction in [cm]         |
| End of repeated block               |        |         |             |      |                                       |

<span id="page-398-0"></span>**Bitfield service**

This graphic explains the bits of service



| Name        | Description                                     |
|-------------|-------------------------------------------------|
| Ranging     | GEO may be used as ranging source               |
| Corrections | GEO is providing correction data                |
| Integrity   | GEO is providing integrity                      |
| Testmode    | GEO is in test mode                             |
| Bad         | Problem with signal or broadcast data indicated |

## <span id="page-398-1"></span>**Bitfield statusFlags**



<span id="page-399-1"></span>

| Name          | Description                                                                        |
|---------------|------------------------------------------------------------------------------------|
| integrityUsed | SBAS integrity used                                                                |
|               | 0 = Unknown                                                                        |
|               | 1 = Integrity information is not available or SBAS integrity is not enabled        |
|               | 2 = Receiver uses only GPS satellites for which integrity information is available |

### <span id="page-399-0"></span>**32.17.22 UBX-NAV-SLAS (0x01 0x42)**

#### **32.17.22.1 QZSS L1S SLAS status data**

| Message                             |                  |      | UBX-NAV-SLAS              |             |                                |                                     |                                         |                                                                 |                                    |                     |  |  |
|-------------------------------------|------------------|------|---------------------------|-------------|--------------------------------|-------------------------------------|-----------------------------------------|-----------------------------------------------------------------|------------------------------------|---------------------|--|--|
| Description                         |                  |      | QZSS L1S SLAS status data |             |                                |                                     |                                         |                                                                 |                                    |                     |  |  |
| Firmware                            |                  |      | Supported on:             |             |                                |                                     |                                         |                                                                 |                                    |                     |  |  |
|                                     |                  |      |                           |             |                                |                                     |                                         | • u-blox 8 / u-blox M8 with protocol version 19.2               |                                    |                     |  |  |
| Type                                |                  |      | Periodic/Polled           |             |                                |                                     |                                         |                                                                 |                                    |                     |  |  |
| Comment                             |                  |      |                           |             |                                |                                     |                                         | This message outputs the status of the QZSS L1S SLAS sub system |                                    |                     |  |  |
|                                     |                  |      | Header                    | Class<br>ID |                                |                                     | Length (Bytes)                          | Payload<br>Checksum                                             |                                    |                     |  |  |
| Message Structure                   |                  |      |                           |             | 0xB5 0x62 0x01 0x42 20 + 8*cnt |                                     |                                         |                                                                 |                                    | see below CK_A CK_B |  |  |
| Payload Contents:                   |                  |      |                           |             |                                |                                     |                                         |                                                                 |                                    |                     |  |  |
| Byte Offset                         | Number<br>Format |      | Scaling                   | Name        |                                |                                     | Unit                                    | Description                                                     |                                    |                     |  |  |
| 0                                   | U4               |      | -                         | iTOW        |                                |                                     | ms                                      | GPS time of week of the navigation epoch.                       |                                    |                     |  |  |
|                                     |                  |      |                           |             |                                |                                     |                                         | See the description of iTOW for details.                        |                                    |                     |  |  |
| 4                                   | U1               |      | -                         | version     |                                |                                     | -                                       | Message version (0x00 for this version)                         |                                    |                     |  |  |
| 5                                   | U1[3]            |      | -                         |             | reserved1                      |                                     | -                                       | Reserved                                                        |                                    |                     |  |  |
| 8                                   | I4               | 1e-3 |                           | gmsLon      |                                | deg                                 | Longitude of the used ground monitoring |                                                                 |                                    |                     |  |  |
|                                     |                  |      |                           |             |                                |                                     | station                                 |                                                                 |                                    |                     |  |  |
| 12                                  | I4               | 1e-3 |                           | gmsLat      |                                |                                     | deg                                     | Latitude of the used ground monitoring                          |                                    |                     |  |  |
|                                     |                  |      |                           |             |                                |                                     |                                         | station                                                         |                                    |                     |  |  |
| 16                                  | U1               |      | -                         |             | gmsCode                        |                                     | -                                       |                                                                 | Code of the used ground monitoring |                     |  |  |
|                                     |                  |      |                           |             |                                |                                     | station according to the QZSS SLAS      |                                                                 |                                    |                     |  |  |
|                                     |                  |      |                           |             |                                |                                     | Interface Specification, available from |                                                                 |                                    |                     |  |  |
|                                     |                  |      |                           |             |                                |                                     |                                         | qzss.go.jp/en/                                                  |                                    |                     |  |  |
| 17                                  | U1               |      | -                         |             | qzssSvId                       |                                     | -                                       | Satellite identifier of the QZS/GEO whose                       |                                    |                     |  |  |
|                                     |                  |      |                           |             |                                |                                     |                                         | correction data is used (see Satellite                          |                                    |                     |  |  |
|                                     |                  |      |                           |             | serviceFlags                   |                                     |                                         | Numbering)                                                      |                                    |                     |  |  |
| 18                                  | X1               |      | -                         |             |                                |                                     | -                                       | Flags regarding SLAS service (see graphic<br>below)             |                                    |                     |  |  |
| 19                                  | U1               |      | -                         | cnt         |                                |                                     | -                                       | Number of pseudorange corrections                               |                                    |                     |  |  |
|                                     |                  |      |                           |             |                                |                                     |                                         | following                                                       |                                    |                     |  |  |
| Start of repeated block (cnt times) |                  |      |                           |             |                                |                                     |                                         |                                                                 |                                    |                     |  |  |
| 20 + 8*N                            | U1               |      | -                         | gnssId      |                                |                                     | -                                       | GNSS identifier (see Satellite Numbering)                       |                                    |                     |  |  |
| 21 + 8*N                            | U1               |      | svId<br>-                 |             | -                              | Satellite identifier (see Satellite |                                         |                                                                 |                                    |                     |  |  |
|                                     |                  |      |                           |             |                                |                                     |                                         | Numbering)                                                      |                                    |                     |  |  |
| 22 + 8*N                            | U1               |      | -                         |             | reserved2                      |                                     | -                                       | Reserved                                                        |                                    |                     |  |  |
| 23 + 8*N                            | U1[3]            |      | -                         |             | reserved3                      |                                     | -                                       | Reserved                                                        |                                    |                     |  |  |
| 26 + 8*N                            | I2               |      | -                         | prc         |                                |                                     | cm                                      | Pseudorange correction                                          |                                    |                     |  |  |
| End of repeated block               |                  |      |                           |             |                                |                                     |                                         |                                                                 |                                    |                     |  |  |

<span id="page-400-1"></span>

## **Bitfield serviceFlags**

<span id="page-400-2"></span>This graphic explains the bits of serviceFlags



| Name          | Description                                |
|---------------|--------------------------------------------|
| gmsAvailable  | 1 = Ground monitoring station available    |
| qzssSvAvailab | 1 = Correction providing QZSS SV available |
| le            |                                            |
| testMode      | 1 = Currently used QZSS SV in test mode    |

## <span id="page-400-0"></span>**32.17.23 UBX-NAV-SOL (0x01 0x06)**

## **32.17.23.1 Navigation solution information**

| Message           |        |        | UBX-NAV-SOL                               |       |    |                                         |                |                                                                                            |         |                     |
|-------------------|--------|--------|-------------------------------------------|-------|----|-----------------------------------------|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|
| Description       |        |        | Navigation solution information           |       |    |                                         |                |                                                                                            |         |                     |
| Firmware          |        |        | Supported on:                             |       |    |                                         |                |                                                                                            |         |                     |
|                   |        |        |                                           |       |    |                                         |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |
|                   |        |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |       |    |                                         |                |                                                                                            |         |                     |
| Type              |        |        | Periodic/Polled                           |       |    |                                         |                |                                                                                            |         |                     |
| Comment           |        |        |                                           |       |    |                                         |                | This message combines position, velocity and time solution in ECEF, including              |         |                     |
|                   |        |        | accuracy figures.                         |       |    |                                         |                |                                                                                            |         |                     |
|                   |        |        |                                           |       |    |                                         |                | This message has only been retained for backwards compatibility; users are                 |         |                     |
|                   |        |        |                                           |       |    |                                         |                | recommended to use the UBX-NAV-PVT message in preference.                                  |         |                     |
|                   |        | Header |                                           | Class | ID |                                         | Length (Bytes) |                                                                                            | Payload | Checksum            |
| Message Structure |        |        | 0xB5 0x62 0x01 0x06 52                    |       |    |                                         |                |                                                                                            |         | see below CK_A CK_B |
| Payload Contents: |        |        |                                           |       |    |                                         |                |                                                                                            |         |                     |
| Byte Offset       | Number |        | Scaling                                   | Name  |    |                                         | Unit           | Description                                                                                |         |                     |
|                   | Format |        |                                           |       |    |                                         |                |                                                                                            |         |                     |
| 0                 | U4     |        | -                                         | iTOW  |    |                                         | ms             | GPS time of week of the navigation epoch.                                                  |         |                     |
|                   |        |        |                                           |       |    |                                         |                | See the description of iTOW for details.                                                   |         |                     |
| 4                 | I4     |        | -                                         | fTOW  |    |                                         | ns             | Fractional part of iTOW (range: +/-                                                        |         |                     |
|                   |        |        |                                           |       |    |                                         |                | 500000).                                                                                   |         |                     |
|                   |        |        |                                           |       |    | The precise GPS time of week in seconds |                |                                                                                            |         |                     |
|                   |        |        |                                           |       |    |                                         | is:            |                                                                                            |         |                     |
|                   |        |        |                                           |       |    |                                         |                | (iTOW * 1e-3) + (fTOW * 1e-9)                                                              |         |                     |
| 8                 | I2     |        | -                                         | week  |    |                                         | weeks          | GPS week number of the navigation epoch                                                    |         |                     |



#### UBX-NAV-SOL continued

| Byte Offset | Number | Scaling | Name      | Unit | Description                          |
|-------------|--------|---------|-----------|------|--------------------------------------|
|             | Format |         |           |      |                                      |
| 10          | U1     | -       | gpsFix    | -    | GPSfix Type, range 05                |
|             |        |         |           |      | 0x00 = No Fix                        |
|             |        |         |           |      | 0x01 = Dead Reckoning only           |
|             |        |         |           |      | 0x02 = 2D-Fix                        |
|             |        |         |           |      | 0x03 = 3D-Fix                        |
|             |        |         |           |      | 0x04 = GPS + dead reckoning combined |
|             |        |         |           |      | 0x05 = Time only fix                 |
|             |        |         |           |      | 0x060xff: reserved                   |
| 11          | X1     | -       | flags     | -    | Fix Status Flags (see graphic below) |
| 12          | I4     | -       | ecefX     | cm   | ECEF X coordinate                    |
| 16          | I4     | -       | ecefY     | cm   | ECEF Y coordinate                    |
| 20          | I4     | -       | ecefZ     | cm   | ECEF Z coordinate                    |
| 24          | U4     | -       | pAcc      | cm   | 3D Position Accuracy Estimate        |
| 28          | I4     | -       | ecefVX    | cm/s | ECEF X velocity                      |
| 32          | I4     | -       | ecefVY    | cm/s | ECEF Y velocity                      |
| 36          | I4     | -       | ecefVZ    | cm/s | ECEF Z velocity                      |
| 40          | U4     | -       | sAcc      | cm/s | Speed Accuracy Estimate              |
| 44          | U2     | 0.01    | pDOP      | -    | Position DOP                         |
| 46          | U1     | -       | reserved1 | -    | Reserved                             |
| 47          | U1     | -       | numSV     | -    | Number of SVs used in Nav Solution   |
| 48          | U1[4]  | -       | reserved2 | -    | Reserved                             |

## <span id="page-401-0"></span>**Bitfield flags**



| Name     | Description                                                                     |
|----------|---------------------------------------------------------------------------------|
| GPSfixOK | 1 = Fix within limits (e.g. DOP & accuracy)                                     |
| DiffSoln | 1 = DGPS used                                                                   |
| WKNSET   | 1 = Valid GPS week number (see Time Validity section for details)               |
| TOWSET   | 1 = Valid GPS time of week (iTOW & fTOW, see Time Validity section for details) |

<span id="page-402-1"></span>

## <span id="page-402-0"></span>**32.17.24 UBX-NAV-STATUS (0x01 0x03)**

### **32.17.24.1 Receiver navigation status**

| Message           |                  |             | UBX-NAV-STATUS                                                                                                                                           |         |                                                                                                                                                                                                                                                                                               |  |                |                                                                                       |                                                                    |                     |  |
|-------------------|------------------|-------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|---------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--|----------------|---------------------------------------------------------------------------------------|--------------------------------------------------------------------|---------------------|--|
| Description       |                  |             | Receiver navigation status                                                                                                                               |         |                                                                                                                                                                                                                                                                                               |  |                |                                                                                       |                                                                    |                     |  |
| Firmware          |                  |             | Supported on:<br>• u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |         |                                                                                                                                                                                                                                                                                               |  |                |                                                                                       |                                                                    |                     |  |
| Type              |                  |             | Periodic/Polled                                                                                                                                          |         |                                                                                                                                                                                                                                                                                               |  |                |                                                                                       |                                                                    |                     |  |
| Comment           |                  |             | See important comments concerning validity of position given in section<br>Navigation Output Filters.                                                    |         |                                                                                                                                                                                                                                                                                               |  |                |                                                                                       |                                                                    |                     |  |
|                   |                  |             | Header                                                                                                                                                   | Class   | ID                                                                                                                                                                                                                                                                                            |  | Length (Bytes) |                                                                                       | Payload                                                            | Checksum            |  |
| Message Structure |                  |             | 0xB5 0x62 0x01 0x03 16                                                                                                                                   |         |                                                                                                                                                                                                                                                                                               |  |                |                                                                                       |                                                                    | see below CK_A CK_B |  |
| Payload Contents: |                  |             |                                                                                                                                                          |         |                                                                                                                                                                                                                                                                                               |  |                |                                                                                       |                                                                    |                     |  |
| Byte Offset       | Number<br>Format |             | Scaling                                                                                                                                                  | Name    |                                                                                                                                                                                                                                                                                               |  | Unit           | Description                                                                           |                                                                    |                     |  |
| 0                 | U4               |             | -                                                                                                                                                        | iTOW    |                                                                                                                                                                                                                                                                                               |  | ms             | GPS time of week of the navigation epoch.<br>See the description of iTOW for details. |                                                                    |                     |  |
| 4                 | U1               | gpsFix<br>- |                                                                                                                                                          | -       | GPSfix Type, this value does not qualify a<br>fix as valid and within the limits. See note<br>on flag gpsFixOk below.<br>0x00 = no fix<br>0x01 = dead reckoning only<br>0x02 = 2D-fix<br>0x03 = 3D-fix<br>0x04 = GPS + dead reckoning combined<br>0x05 = Time only fix<br>0x060xff = reserved |  |                |                                                                                       |                                                                    |                     |  |
| 5                 | X1               |             | -                                                                                                                                                        | flags   |                                                                                                                                                                                                                                                                                               |  | -              | Navigation Status Flags (see graphic<br>below)                                        |                                                                    |                     |  |
| 6                 | X1               |             | -                                                                                                                                                        | fixStat |                                                                                                                                                                                                                                                                                               |  | -              | Fix Status Information (see graphic below)                                            |                                                                    |                     |  |
| 7                 | X1               |             | -                                                                                                                                                        | flags2  |                                                                                                                                                                                                                                                                                               |  | -              |                                                                                       | further information about navigation<br>output (see graphic below) |                     |  |
| 8                 | U4               |             | -                                                                                                                                                        | ttff    |                                                                                                                                                                                                                                                                                               |  | ms             | Time to first fix (millisecond time tag)                                              |                                                                    |                     |  |
| 12                | U4               |             | -                                                                                                                                                        | msss    |                                                                                                                                                                                                                                                                                               |  | ms             | Milliseconds since Startup / Reset                                                    |                                                                    |                     |  |

## <span id="page-402-2"></span>**Bitfield flags**





| Name     | Description                                                    |
|----------|----------------------------------------------------------------|
| gpsFixOk | 1 = position and velocity valid and within DOP and ACC Masks.  |
| diffSoln | 1 = differential corrections were applied                      |
| wknSet   | 1 = Week Number valid (see Time Validity section for details)  |
| towSet   | 1 = Time of Week valid (see Time Validity section for details) |

## <span id="page-403-0"></span>**Bitfield fixStat**

This graphic explains the bits of fixStat

| 6           |  |  |              |          |
|-------------|--|--|--------------|----------|
| mapMatching |  |  | arrSolnValid | diffCorr |

| Name          | Description                                                                                      |
|---------------|--------------------------------------------------------------------------------------------------|
| diffCorr      | 1 = differential corrections available                                                           |
| carrSolnValid | 1 = valid carrSoln                                                                               |
| mapMatching   | map matching status:                                                                             |
|               | 00: none                                                                                         |
|               | 01: valid but not used, i.e. map matching data was received, but was too old                     |
|               | 10: valid and used, map matching data was applied                                                |
|               | 11: valid and used, map matching data was applied. In case of sensor unavailability map matching |
|               | data enables dead reckoning. This requires map matched latitude/longitude or heading data.       |

## <span id="page-403-1"></span>**Bitfield flags2**



<span id="page-404-1"></span>

| Name          | Description                                                                                            |
|---------------|--------------------------------------------------------------------------------------------------------|
| psmState      | power save mode state                                                                                  |
|               | 0: ACQUISITION [or when psm disabled]                                                                  |
|               | 1: TRACKING                                                                                            |
|               | 2: POWER OPTIMIZED TRACKING                                                                            |
|               | 3: INACTIVE                                                                                            |
| spoofDetState | Spoofing detection state (not supported in protocol versions less than 18)                             |
|               | 0: Unknown or deactivated                                                                              |
|               | 1: No spoofing indicated                                                                               |
|               | 2: Spoofing indicated                                                                                  |
|               | 3: Multiple spoofing indications                                                                       |
|               | Note that the spoofing state value only reflects the detector state for the current navigation epoch.  |
|               | As spoofing can be detected most easily at the transition from real signal to spoofing signal, this is |
|               | also where the detector is triggered the most. I.e. a value of 1 - No spoofing indicated does not mean |
|               | that the receiver is not spoofed, it simply states that the detector was not triggered in this epoch.  |
| carrSoln      | Carrier phase range solution status:                                                                   |
|               | 0: no carrier phase range solution                                                                     |
|               | 1: carrier phase range solution with floating ambiguities                                              |
|               | 2: carrier phase range solution with fixed ambiguities                                                 |

## <span id="page-404-0"></span>**32.17.25 UBX-NAV-SVINFO (0x01 0x30)**

#### **32.17.25.1 Space vehicle information**

| Message                               |        | UBX-NAV-SVINFO                               |       |             |  |                                                         |                                                                                            |         |          |
|---------------------------------------|--------|----------------------------------------------|-------|-------------|--|---------------------------------------------------------|--------------------------------------------------------------------------------------------|---------|----------|
| Description                           |        | Space vehicle information                    |       |             |  |                                                         |                                                                                            |         |          |
| Firmware                              |        | Supported on:                                |       |             |  |                                                         |                                                                                            |         |          |
|                                       |        |                                              |       |             |  |                                                         | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |          |
|                                       |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01    |       |             |  |                                                         |                                                                                            |         |          |
| Type                                  |        | Periodic/Polled                              |       |             |  |                                                         |                                                                                            |         |          |
| Comment                               |        | Information about satellites used or visible |       |             |  |                                                         |                                                                                            |         |          |
|                                       |        |                                              |       |             |  |                                                         | This message has only been retained for backwards compatibility; users are                 |         |          |
|                                       |        |                                              |       |             |  |                                                         | recommended to use the UBX-NAV-SAT message in preference.                                  |         |          |
|                                       |        | Header                                       | Class | ID          |  | Length (Bytes)                                          |                                                                                            | Payload | Checksum |
| Message Structure                     |        |                                              |       |             |  | 0xB5 0x62 0x01 0x30 8 + 12*numCh<br>see below CK_A CK_B |                                                                                            |         |          |
| Payload Contents:                     |        |                                              |       |             |  |                                                         |                                                                                            |         |          |
| Byte Offset                           | Number | Scaling                                      | Name  |             |  | Unit                                                    | Description                                                                                |         |          |
|                                       | Format |                                              |       |             |  |                                                         |                                                                                            |         |          |
| 0                                     | U4     | -                                            |       | iTOW        |  | ms                                                      | GPS time of week of the navigation epoch.                                                  |         |          |
|                                       |        |                                              |       |             |  |                                                         | See the description of iTOW for details.                                                   |         |          |
| 4                                     | U1     | -                                            | numCh |             |  | -                                                       | Number of channels                                                                         |         |          |
| 5                                     | X1     | -                                            |       | globalFlags |  | -                                                       | Bitmask (see graphic below)                                                                |         |          |
| 6                                     | U1[2]  | -                                            |       | reserved1   |  | -                                                       | Reserved                                                                                   |         |          |
| Start of repeated block (numCh times) |        |                                              |       |             |  |                                                         |                                                                                            |         |          |
| 8 + 12*N                              | U1     | -                                            | chn   |             |  | -                                                       | Channel number, 255 for SVs not                                                            |         |          |
|                                       |        |                                              |       |             |  |                                                         | assigned to a channel                                                                      |         |          |
| 9 + 12*N                              | U1     | -                                            | svid  |             |  | -                                                       | Satellite ID, see Satellite Numbering for                                                  |         |          |
|                                       |        |                                              |       |             |  |                                                         | assignment                                                                                 |         |          |



#### UBX-NAV-SVINFO continued

| Byte Offset | Number | Scaling | Name    | Unit | Description                              |
|-------------|--------|---------|---------|------|------------------------------------------|
|             | Format |         |         |      |                                          |
| 10 + 12*N   | X1     | -       | flags   | -    | Bitmask (see graphic below)              |
| 11 + 12*N   | X1     | -       | quality | -    | Bitfield (see graphic below)             |
| 12 + 12*N   | U1     | -       | cno     | dBHz | Carrier to Noise Ratio (Signal Strength) |
| 13 + 12*N   | I1     | -       | elev    | deg  | Elevation in integer degrees             |
| 14 + 12*N   | I2     | -       | azim    | deg  | Azimuth in integer degrees               |
| 16 + 12*N   | I4     | -       | prRes   | cm   | Pseudo range residual in centimeters     |
|             |        |         |         |      |                                          |

<span id="page-405-0"></span>End of repeated block

## **Bitfield globalFlags**

This graphic explains the bits of globalFlags



| Name    | Description              |  |  |  |  |  |  |  |
|---------|--------------------------|--|--|--|--|--|--|--|
| chipGen | Chip hardware generation |  |  |  |  |  |  |  |
|         | 0: Antaris, Antaris 4    |  |  |  |  |  |  |  |
|         | 1: u-blox 5              |  |  |  |  |  |  |  |
|         | 2: u-blox 6              |  |  |  |  |  |  |  |
|         | 3: u-blox 7              |  |  |  |  |  |  |  |
|         | 4: u-blox 8 / u-blox M8  |  |  |  |  |  |  |  |

## <span id="page-405-1"></span>**Bitfield flags**

|          |          | 5        |         |          |          |                 | û      |
|----------|----------|----------|---------|----------|----------|-----------------|--------|
| smoothed | priatAop | prbitAlm | mealthy | prbitEph | bitAvail | <b>diffCorr</b> | svUsed |

| Name       | Description                                                       |
|------------|-------------------------------------------------------------------|
| svUsed     | SV is used for navigation                                         |
| diffCorr   | Differential correction data is available for this SV             |
| orbitAvail | Orbit information is available for this SV (Ephemeris or Almanac) |
| orbitEph   | Orbit information is Ephemeris                                    |
| unhealthy  | SV is unhealthy / shall not be used                               |
| orbitAlm   | Orbit information is Almanac Plus                                 |
| orbitAop   | Orbit information is AssistNow Autonomous                         |
| smoothed   | Carrier smoothed pseudorange used                                 |

<span id="page-406-1"></span>

## **Bitfield quality**

<span id="page-406-2"></span>This graphic explains the bits of quality



| Name               | Description                                                                                           |  |  |  |  |  |  |
|--------------------|-------------------------------------------------------------------------------------------------------|--|--|--|--|--|--|
| qualityInd         | Signal Quality indicator (range 07). The following list shows the meaning of the different QI values: |  |  |  |  |  |  |
|                    | 0: no signal                                                                                          |  |  |  |  |  |  |
|                    | 1: searching signal                                                                                   |  |  |  |  |  |  |
| 2: signal acquired |                                                                                                       |  |  |  |  |  |  |
|                    | 3: signal detected but unusable                                                                       |  |  |  |  |  |  |
|                    | 4: code locked and time synchronized                                                                  |  |  |  |  |  |  |
|                    | 5, 6, 7: code and carrier locked and time synchronized                                                |  |  |  |  |  |  |
|                    | Note: Since IMES signals are not time synchronized, a channel tracking an IMES signal can never       |  |  |  |  |  |  |
|                    | reach a quality indicator value of higher than 3.                                                     |  |  |  |  |  |  |

#### <span id="page-406-0"></span>**32.17.26 UBX-NAV-SVIN (0x01 0x3B)**

#### **32.17.26.1 Survey-in data**

| Message           |               |  | UBX-NAV-SVIN                  |         |           |    |                                        |                                                                                    |         |                     |
|-------------------|---------------|--|-------------------------------|---------|-----------|----|----------------------------------------|------------------------------------------------------------------------------------|---------|---------------------|
| Description       |               |  | Survey-in data                |         |           |    |                                        |                                                                                    |         |                     |
| Firmware          | Supported on: |  |                               |         |           |    |                                        |                                                                                    |         |                     |
|                   |               |  |                               |         |           |    |                                        | • u-blox 8 / u-blox M8 protocol versions 20, 20.01, 20.1, 20.2 and 20.3 (only with |         |                     |
|                   |               |  | High Precision GNSS products) |         |           |    |                                        |                                                                                    |         |                     |
| Type              |               |  | Periodic/Polled               |         |           |    |                                        |                                                                                    |         |                     |
| Comment           |               |  |                               |         |           |    |                                        | This message contains information about survey-in parameters.                      |         |                     |
|                   |               |  | Header                        | Class   | ID        |    | Length (Bytes)                         |                                                                                    | Payload | Checksum            |
| Message Structure |               |  | 0xB5 0x62 0x01 0x3B 40        |         |           |    |                                        |                                                                                    |         | see below CK_A CK_B |
| Payload Contents: |               |  |                               |         |           |    |                                        |                                                                                    |         |                     |
| Byte Offset       | Number        |  | Scaling                       | Name    |           |    | Unit                                   | Description                                                                        |         |                     |
|                   | Format        |  |                               |         |           |    |                                        |                                                                                    |         |                     |
| 0                 | U1            |  | -                             | version |           |    | -                                      | Message version (0x00 for this version)                                            |         |                     |
| 1                 | U1[3]         |  | -                             |         | reserved1 |    | -                                      | Reserved                                                                           |         |                     |
| 4                 | U4            |  | -                             | iTOW    |           |    | ms                                     | GPS time of week of the navigation epoch.                                          |         |                     |
|                   |               |  |                               |         |           |    |                                        | See the description of iTOW for details.                                           |         |                     |
| 8                 | U4            |  | -                             | dur     |           |    | s                                      | Passed survey-in observation time                                                  |         |                     |
| 12                | I4            |  | -                             | meanX   |           |    | cm                                     | Current survey-in mean position ECEF X                                             |         |                     |
|                   |               |  |                               |         |           |    |                                        | coordinate                                                                         |         |                     |
| 16                | I4<br>-       |  |                               | meanY   |           | cm | Current survey-in mean position ECEF Y |                                                                                    |         |                     |
|                   |               |  |                               |         |           |    | coordinate                             |                                                                                    |         |                     |
| 20                | I4            |  | -                             | meanZ   |           |    | cm                                     | Current survey-in mean position ECEF Z                                             |         |                     |
|                   |               |  |                               |         |           |    |                                        | coordinate                                                                         |         |                     |

<span id="page-407-1"></span>

#### UBX-NAV-SVIN continued

| Byte Offset | Number | Scaling | Name      | Unit | Description                                  |
|-------------|--------|---------|-----------|------|----------------------------------------------|
|             | Format |         |           |      |                                              |
| 24          | I1     | -       | meanXHP   | 0.1_ | Current high-precision survey-in mean        |
|             |        |         |           | mm   | position ECEF X coordinate. Must be in the   |
|             |        |         |           |      | range -99+99.                                |
|             |        |         |           |      | The current survey-in mean position ECEF     |
|             |        |         |           |      | X coordinate, in units of cm, is given by    |
|             |        |         |           |      | meanX + (0.01 * meanXHP)                     |
| 25          | I1     | -       | meanYHP   | 0.1_ | Current high-precision survey-in mean        |
|             |        |         |           | mm   | position ECEF Y coordinate. Must be in       |
|             |        |         |           |      | the range -99+99.                            |
|             |        |         |           |      | The current survey-in mean position ECEF     |
|             |        |         |           |      | Y coordinate, in units of cm, is given by    |
|             |        |         |           |      | meanY + (0.01 * meanYHP)                     |
| 26          | I1     | -       | meanZHP   | 0.1_ | Current high-precision survey-in mean        |
|             |        |         |           | mm   | position ECEF Z coordinate. Must be in       |
|             |        |         |           |      | the range -99+99.                            |
|             |        |         |           |      | The current survey-in mean position ECEF     |
|             |        |         |           |      | Z coordinate, in units of cm, is given by    |
|             |        |         |           |      | meanZ + (0.01 * meanZHP)                     |
| 27          | U1     | -       | reserved2 | -    | Reserved                                     |
| 28          | U4     | -       | meanAcc   | 0.1_ | Current survey-in mean position accuracy     |
|             |        |         |           | mm   |                                              |
| 32          | U4     | -       | obs       | -    | Number of position observations used         |
|             |        |         |           |      | during survey-in                             |
| 36          | U1     | -       | valid     | -    | Survey-in position validity flag, 1 = valid, |
|             |        |         |           |      | otherwise 0                                  |
| 37          | U1     | -       | active    | -    | Survey-in in progress flag, 1 = in-progress, |
|             |        |         |           |      | otherwise 0                                  |
| 38          | U1[2]  | -       | reserved3 | -    | Reserved                                     |

## <span id="page-407-0"></span>**32.17.27 UBX-NAV-TIMEBDS (0x01 0x24)**

## **32.17.27.1 BeiDou time solution**

| Message           | UBX-NAV-TIMEBDS               |                                               |    |                                                                                         |         |          |  |  |  |  |
|-------------------|-------------------------------|-----------------------------------------------|----|-----------------------------------------------------------------------------------------|---------|----------|--|--|--|--|
| Description       |                               | BeiDou time solution                          |    |                                                                                         |         |          |  |  |  |  |
| Firmware          | Supported on:                 |                                               |    |                                                                                         |         |          |  |  |  |  |
|                   |                               |                                               |    | • u-blox 8 / u-blox M8 protocol versions 17, 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, |         |          |  |  |  |  |
|                   | 20.3, 22, 22.01, 23 and 23.01 |                                               |    |                                                                                         |         |          |  |  |  |  |
| Type              | Periodic/Polled               |                                               |    |                                                                                         |         |          |  |  |  |  |
| Comment           |                               |                                               |    | This message reports the precise BDS time of the most recent navigation                 |         |          |  |  |  |  |
|                   |                               |                                               |    | solution including validity flags and an accuracy estimate.                             |         |          |  |  |  |  |
|                   | Header                        | Class                                         | ID | Length (Bytes)                                                                          | Payload | Checksum |  |  |  |  |
| Message Structure |                               | 0xB5 0x62 0x01 0x24 20<br>see below CK_A CK_B |    |                                                                                         |         |          |  |  |  |  |
| Payload Contents: |                               |                                               |    |                                                                                         |         |          |  |  |  |  |

<span id="page-408-1"></span>

#### UBX-NAV-TIMEBDS continued

| Byte Offset | Number | Scaling | Name  | Unit | Description                               |
|-------------|--------|---------|-------|------|-------------------------------------------|
|             | Format |         |       |      |                                           |
| Byte Offset | Number | Scaling | Name  | Unit | Description                               |
|             | Format |         |       |      |                                           |
| 0           | U4     | -       | iTOW  | ms   | GPS time of week of the navigation epoch. |
|             |        |         |       |      | See the description of iTOW for details.  |
| 4           | U4     | -       | SOW   | s    | BDS time of week (rounded to seconds)     |
| 8           | I4     | -       | fSOW  | ns   | Fractional part of SOW (range: +/-        |
|             |        |         |       |      | 500000000).                               |
|             |        |         |       |      | The precise BDS time of week in seconds   |
|             |        |         |       |      | is:                                       |
|             |        |         |       |      | SOW + fSOW * 1e-9                         |
| 12          | I2     | -       | week  | -    | BDS week number of the navigation epoch   |
| 14          | I1     | -       | leapS | s    | BDS leap seconds (BDS-UTC)                |
| 15          | X1     | -       | valid | -    | Validity Flags (see graphic below)        |
| 16          | U4     | -       | tAcc  | ns   | Time Accuracy Estimate                    |

## <span id="page-408-2"></span>**Bitfield valid**

This graphic explains the bits of valid



| Name       | Description                                                    |
|------------|----------------------------------------------------------------|
| sowValid   | 1 = Valid SOW and fSOW (see Time Validity section for details) |
| weekValid  | 1 = Valid week (see Time Validity section for details)         |
| leapSValid | 1 = Valid leap second                                          |

## <span id="page-408-0"></span>**32.17.28 UBX-NAV-TIMEGAL (0x01 0x25)**

## **32.17.28.1 Galileo time solution**

| Message           | UBX-NAV-TIMEGAL            |                       |    |                                                                                         |         |                     |  |  |
|-------------------|----------------------------|-----------------------|----|-----------------------------------------------------------------------------------------|---------|---------------------|--|--|
| Description       |                            | Galileo time solution |    |                                                                                         |         |                     |  |  |
| Firmware          | Supported on:              |                       |    |                                                                                         |         |                     |  |  |
|                   |                            |                       |    | • u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20. |         |                     |  |  |
|                   | 3, 22, 22.01, 23 and 23.01 |                       |    |                                                                                         |         |                     |  |  |
| Type              |                            | Periodic/Polled       |    |                                                                                         |         |                     |  |  |
| Comment           |                            |                       |    | This message reports the precise Galileo time of the most recent navigation             |         |                     |  |  |
|                   |                            |                       |    | solution including validity flags and an accuracy estimate.                             |         |                     |  |  |
|                   | Header                     | Class                 | ID | Length (Bytes)                                                                          | Payload | Checksum            |  |  |
| Message Structure | 0xB5 0x62 0x01 0x25 20     |                       |    |                                                                                         |         | see below CK_A CK_B |  |  |
| Payload Contents: |                            |                       |    |                                                                                         |         |                     |  |  |

<span id="page-409-1"></span>

UBX-NAV-TIMEGAL continued

| Byte Offset | Number | Scaling | Name    | Unit | Description                                 |
|-------------|--------|---------|---------|------|---------------------------------------------|
|             | Format |         |         |      |                                             |
| Byte Offset | Number | Scaling | Name    | Unit | Description                                 |
|             | Format |         |         |      |                                             |
| 0           | U4     | -       | iTOW    | ms   | GPS time of week of the navigation epoch.   |
|             |        |         |         |      | See the description of iTOW for details.    |
| 4           | U4     | -       | galTow  | s    | Galileo time of week (rounded to seconds)   |
| 8           | I4     | -       | fGalTow | ns   | Fractional part of the Galileo time of week |
|             |        |         |         |      | (range: +/-500000000).                      |
|             |        |         |         |      | The precise Galileo time of week in         |
|             |        |         |         |      | seconds is:                                 |
|             |        |         |         |      | galTow + fGalTow * 1e-9                     |
| 12          | I2     | -       | galWno  | -    | Galileo week number                         |
| 14          | I1     | -       | leapS   | s    | Galileo leap seconds (Galileo-UTC)          |
| 15          | X1     | -       | valid   | -    | Validity Flags (see graphic below)          |
| 16          | U4     | -       | tAcc    | ns   | Time Accuracy Estimate                      |

## <span id="page-409-2"></span>**Bitfield valid**

This graphic explains the bits of valid



| Name        | Description                                                                                    |
|-------------|------------------------------------------------------------------------------------------------|
| galTowValid | 1 = Valid galTow and fGalTow (see section Time validity in the integration manual for details) |
| galWnoValid | 1 = Valid galWno (see section Time validity in the integration manual for details)             |
| leapSValid  | 1 = Valid leapS                                                                                |

## <span id="page-409-0"></span>**32.17.29 UBX-NAV-TIMEGLO (0x01 0x23)**

## **32.17.29.1 GLONASS time solution**

| Message           |                               | UBX-NAV-TIMEGLO       |    |                                                                                         |         |                     |  |  |
|-------------------|-------------------------------|-----------------------|----|-----------------------------------------------------------------------------------------|---------|---------------------|--|--|
| Description       |                               | GLONASS time solution |    |                                                                                         |         |                     |  |  |
| Firmware          |                               | Supported on:         |    |                                                                                         |         |                     |  |  |
|                   |                               |                       |    | • u-blox 8 / u-blox M8 protocol versions 17, 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, |         |                     |  |  |
|                   | 20.3, 22, 22.01, 23 and 23.01 |                       |    |                                                                                         |         |                     |  |  |
| Type              |                               | Periodic/Polled       |    |                                                                                         |         |                     |  |  |
| Comment           |                               |                       |    | This message reports the precise GLO time of the most recent navigation                 |         |                     |  |  |
|                   |                               |                       |    | solution including validity flags and an accuracy estimate.                             |         |                     |  |  |
|                   | Header                        | Class                 | ID | Length (Bytes)                                                                          | Payload | Checksum            |  |  |
| Message Structure | 0xB5 0x62 0x01 0x23 20        |                       |    |                                                                                         |         | see below CK_A CK_B |  |  |
| Payload Contents: |                               |                       |    |                                                                                         |         |                     |  |  |



#### UBX-NAV-TIMEGLO continued

| Byte Offset | Number | Scaling | Name  | Unit | Description                                 |
|-------------|--------|---------|-------|------|---------------------------------------------|
|             | Format |         |       |      |                                             |
| Byte Offset | Number | Scaling | Name  | Unit | Description                                 |
|             | Format |         |       |      |                                             |
| 0           | U4     | -       | iTOW  | ms   | GPS time of week of the navigation epoch.   |
|             |        |         |       |      | See the description of iTOW for details.    |
| 4           | U4     | -       | TOD   | s    | GLONASS time of day (rounded to integer     |
|             |        |         |       |      | seconds)                                    |
| 8           | I4     | -       | fTOD  | ns   | Fractional part of TOD (range: +/-          |
|             |        |         |       |      | 500000000).                                 |
|             |        |         |       |      | The precise GLONASS time of day in          |
|             |        |         |       |      | seconds is:                                 |
|             |        |         |       |      | TOD + fTOD * 1e-9                           |
| 12          | U2     | -       | Nt    | days | Current date (range: 1-1461), starting at 1 |
|             |        |         |       |      | from the 1st Jan of the year indicated by   |
|             |        |         |       |      | N4 and ending at 1461 at the 31st Dec of    |
|             |        |         |       |      | the third year after that indicated by N4   |
| 14          | U1     | -       | N4    | -    | Four-year interval number starting from     |
|             |        |         |       |      | 1996 (1=1996, 2=2000, 3=2004)               |
| 15          | X1     | -       | valid | -    | Validity flags (see graphic below)          |
| 16          | U4     | -       | tAcc  | ns   | Time Accuracy Estimate                      |

## <span id="page-410-0"></span>**Bitfield valid**

This graphic explains the bits of valid



| Name      | Description                                                    |
|-----------|----------------------------------------------------------------|
| todValid  | 1 = Valid TOD and fTOD (see Time Validity section for details) |
| dateValid | 1 = Valid N4 and Nt (see Time Validity section for details)    |

<span id="page-411-1"></span>

## <span id="page-411-0"></span>**32.17.30 UBX-NAV-TIMEGPS (0x01 0x20)**

## **32.17.30.1 GPS time solution**

| Message                                                                                    |        |  | UBX-NAV-TIMEGPS                           |       |    |    |                                           |                                                                         |                     |  |          |
|--------------------------------------------------------------------------------------------|--------|--|-------------------------------------------|-------|----|----|-------------------------------------------|-------------------------------------------------------------------------|---------------------|--|----------|
| Description                                                                                |        |  | GPS time solution                         |       |    |    |                                           |                                                                         |                     |  |          |
| Firmware                                                                                   |        |  | Supported on:                             |       |    |    |                                           |                                                                         |                     |  |          |
| • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |        |  |                                           |       |    |    |                                           |                                                                         |                     |  |          |
|                                                                                            |        |  | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |       |    |    |                                           |                                                                         |                     |  |          |
| Type                                                                                       |        |  | Periodic/Polled                           |       |    |    |                                           |                                                                         |                     |  |          |
| Comment                                                                                    |        |  |                                           |       |    |    |                                           | This message reports the precise GPS time of the most recent navigation |                     |  |          |
|                                                                                            |        |  |                                           |       |    |    |                                           | solution including validity flags and an accuracy estimate.             |                     |  |          |
|                                                                                            |        |  | Header                                    | Class | ID |    | Length (Bytes)                            |                                                                         | Payload             |  | Checksum |
| Message Structure                                                                          |        |  | 0xB5 0x62 0x01 0x20 16                    |       |    |    |                                           |                                                                         | see below CK_A CK_B |  |          |
| Payload Contents:                                                                          |        |  |                                           |       |    |    |                                           |                                                                         |                     |  |          |
| Byte Offset                                                                                | Number |  | Scaling                                   | Name  |    |    | Unit                                      | Description                                                             |                     |  |          |
|                                                                                            | Format |  |                                           |       |    |    |                                           |                                                                         |                     |  |          |
| 0                                                                                          | U4     |  | -                                         | iTOW  |    | ms | GPS time of week of the navigation epoch. |                                                                         |                     |  |          |
|                                                                                            |        |  |                                           |       |    |    |                                           | See the description of iTOW for details.                                |                     |  |          |
| 4                                                                                          | I4     |  | -                                         | fTOW  |    |    | ns                                        | Fractional part of iTOW (range: +/-                                     |                     |  |          |
|                                                                                            |        |  |                                           |       |    |    |                                           | 500000).                                                                |                     |  |          |
|                                                                                            |        |  |                                           |       |    |    |                                           | The precise GPS time of week in seconds                                 |                     |  |          |
|                                                                                            |        |  |                                           |       |    |    |                                           | is:                                                                     |                     |  |          |
|                                                                                            |        |  |                                           |       |    |    |                                           | (iTOW * 1e-3) + (fTOW * 1e-9)                                           |                     |  |          |
| 8                                                                                          | I2     |  | -                                         | week  |    | -  | GPS week number of the navigation epoch   |                                                                         |                     |  |          |
| 10                                                                                         | I1     |  | -                                         | leapS |    | s  | GPS leap seconds (GPS-UTC)                |                                                                         |                     |  |          |
| 11                                                                                         | X1     |  | -                                         | valid |    |    | -                                         | Validity Flags (see graphic below)                                      |                     |  |          |
| 12                                                                                         | U4     |  | -                                         | tAcc  |    |    | ns                                        | Time Accuracy Estimate                                                  |                     |  |          |

## <span id="page-411-2"></span>**Bitfield valid**

This graphic explains the bits of valid



<span id="page-412-1"></span>

| Name       | Description                                                                      |
|------------|----------------------------------------------------------------------------------|
| towValid   | 1 = Valid GPS time of week (iTOW & fTOW, (see Time Validity section for details) |
| weekValid  | 1 = Valid GPS week number (see Time Validity section for details)                |
| leapSValid | 1 = Valid GPS leap seconds                                                       |

## <span id="page-412-0"></span>**32.17.31 UBX-NAV-TIMELS (0x01 0x26)**

#### **32.17.31.1 Leap second event information**

| Message           |        |   | UBX-NAV-TIMELS                                                                          |             |                            |                                         |                  |                                                                       |         |                     |  |
|-------------------|--------|---|-----------------------------------------------------------------------------------------|-------------|----------------------------|-----------------------------------------|------------------|-----------------------------------------------------------------------|---------|---------------------|--|
| Description       |        |   | Leap second event information                                                           |             |                            |                                         |                  |                                                                       |         |                     |  |
| Firmware          |        |   | Supported on:                                                                           |             |                            |                                         |                  |                                                                       |         |                     |  |
|                   |        |   | • u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20. |             |                            |                                         |                  |                                                                       |         |                     |  |
|                   |        |   |                                                                                         |             | 3, 22, 22.01, 23 and 23.01 |                                         |                  |                                                                       |         |                     |  |
| Type              |        |   | Periodic/Polled                                                                         |             |                            |                                         |                  |                                                                       |         |                     |  |
| Comment           |        |   |                                                                                         |             |                            |                                         |                  | Information about the upcoming leap second event if one is scheduled. |         |                     |  |
|                   |        |   | Header                                                                                  | Class       | ID                         |                                         | Length (Bytes)   |                                                                       | Payload | Checksum            |  |
| Message Structure |        |   | 0xB5 0x62 0x01 0x26 24                                                                  |             |                            |                                         |                  |                                                                       |         | see below CK_A CK_B |  |
| Payload Contents: |        |   |                                                                                         |             |                            |                                         |                  |                                                                       |         |                     |  |
| Byte Offset       | Number |   | Scaling                                                                                 | Name        |                            |                                         | Unit             | Description                                                           |         |                     |  |
|                   | Format |   |                                                                                         |             |                            |                                         |                  |                                                                       |         |                     |  |
| 0                 | U4     |   | -                                                                                       | iTOW        |                            |                                         | ms               | GPS time of week of the navigation epoch.                             |         |                     |  |
|                   |        |   |                                                                                         |             |                            |                                         |                  | See the description of iTOW for details.                              |         |                     |  |
| 4                 | U1     |   | version<br>-                                                                            |             | -                          | Message version (0x00 for this version) |                  |                                                                       |         |                     |  |
| 5                 | U1[3]  |   | -                                                                                       | reserved1   |                            | -                                       | Reserved         |                                                                       |         |                     |  |
| 8                 | U1     | - |                                                                                         | srcOfCurrLs |                            | -                                       |                  | Information source for the current number                             |         |                     |  |
|                   |        |   |                                                                                         |             |                            |                                         | of leap seconds. |                                                                       |         |                     |  |
|                   |        |   |                                                                                         |             |                            |                                         |                  | 0: Default (hardcoded in the firmware, can                            |         |                     |  |
|                   |        |   |                                                                                         |             |                            |                                         |                  | be outdated)                                                          |         |                     |  |
|                   |        |   |                                                                                         |             |                            |                                         |                  | 1: Derived from time difference between                               |         |                     |  |
|                   |        |   |                                                                                         |             |                            |                                         |                  | GPS and GLONASS time                                                  |         |                     |  |
|                   |        |   |                                                                                         |             |                            |                                         |                  | 2: GPS                                                                |         |                     |  |
|                   |        |   |                                                                                         |             |                            |                                         |                  | 3: SBAS                                                               |         |                     |  |
|                   |        |   |                                                                                         |             |                            |                                         |                  | 4: BeiDou                                                             |         |                     |  |
|                   |        |   |                                                                                         |             |                            |                                         |                  | 5: Galileo                                                            |         |                     |  |
|                   |        |   |                                                                                         |             |                            |                                         |                  | 6: Aided data                                                         |         |                     |  |
|                   |        |   |                                                                                         |             |                            |                                         |                  | 7: Configured                                                         |         |                     |  |
|                   |        |   |                                                                                         |             |                            |                                         |                  | 8: NavIC<br>255: Unknown                                              |         |                     |  |
| 9                 | I1     |   | -                                                                                       | currLs      |                            |                                         | s                | Current number of leap seconds since                                  |         |                     |  |
|                   |        |   |                                                                                         |             |                            |                                         |                  | start of GPS time (Jan 6, 1980). It reflects                          |         |                     |  |
|                   |        |   |                                                                                         |             |                            |                                         |                  | how much GPS time is ahead of UTC time.                               |         |                     |  |
|                   |        |   |                                                                                         |             |                            |                                         |                  | Galileo number of leap seconds is the                                 |         |                     |  |
|                   |        |   |                                                                                         |             |                            |                                         |                  | same as GPS. BeiDou number of leap                                    |         |                     |  |
|                   |        |   |                                                                                         |             |                            |                                         |                  | seconds is 14 less than GPS. GLONASS                                  |         |                     |  |
|                   |        |   |                                                                                         |             |                            |                                         |                  | follows UTC time, so no leap seconds.                                 |         |                     |  |



#### UBX-NAV-TIMELS continued

| Byte Offset | Number | Scaling | Name          | Unit | Description                                   |
|-------------|--------|---------|---------------|------|-----------------------------------------------|
|             | Format |         |               |      |                                               |
| 10          | U1     | -       | srcOfLsChange | -    | Information source for the future leap        |
|             |        |         |               |      | second event.                                 |
|             |        |         |               |      | 0: No source                                  |
|             |        |         |               |      | 2: GPS                                        |
|             |        |         |               |      | 3: SBAS                                       |
|             |        |         |               |      | 4: BeiDou                                     |
|             |        |         |               |      | 5: Galileo                                    |
|             |        |         |               |      | 6: GLONASS                                    |
|             |        |         |               |      | 7: NavIC                                      |
| 11          | I1     | -       | lsChange      | s    | Future leap second change if one is           |
|             |        |         |               |      | scheduled. +1 = positive leap second, -1 =    |
|             |        |         |               |      | negative leap second, 0 = no future leap      |
|             |        |         |               |      | second event scheduled or no information      |
|             |        |         |               |      | available. If the value is 0, then the        |
|             |        |         |               |      | amount of leap seconds did not change         |
|             |        |         |               |      | and the event should be ignored.              |
| 12          | I4     | -       | timeToLsEvent | s    | Number of seconds until the next leap         |
|             |        |         |               |      | second event, or from the last leap second    |
|             |        |         |               |      | event if no future event scheduled. If > 0    |
|             |        |         |               |      | event is in the future, = 0 event is now, < 0 |
|             |        |         |               |      | event is in the past. Valid only if           |
|             |        |         |               |      | validTimeToLsEvent = 1.                       |
| 16          | U2     | -       | dateOfLsGpsWn | -    | GPS week number (WN) of the next leap         |
|             |        |         |               |      | second event or the last one if no future     |
|             |        |         |               |      | event scheduled. Valid only if                |
|             |        |         |               |      | validTimeToLsEvent = 1.                       |
| 18          | U2     | -       | dateOfLsGpsDn | -    | GPS day of week number (DN) for the next      |
|             |        |         |               |      | leap second event or the last one if no       |
|             |        |         |               |      | future event scheduled. Valid only if         |
|             |        |         |               |      | validTimeToLsEvent = 1. (GPS and Galileo      |
|             |        |         |               |      | DN: from 1 = Sun to 7 = Sat. BeiDou DN:       |
|             |        |         |               |      | from 0 = Sun to 6 = Sat.)                     |
| 20          | U1[3]  | -       | reserved2     | -    | Reserved                                      |
| 23          | X1     | -       | valid         | -    | Validity flags (see graphic below)            |

<span id="page-414-1"></span>

## **Bitfield valid**

<span id="page-414-2"></span>This graphic explains the bits of valid



| Name          | Description                                                                                    |
|---------------|------------------------------------------------------------------------------------------------|
| validCurrLs   | 1 = Valid current number of leap seconds value.                                                |
| validTimeToLs | 1 = Valid time to next leap second event or from the last leap second event if no future event |
| Event         | scheduled.                                                                                     |

## <span id="page-414-0"></span>**32.17.32 UBX-NAV-TIMEUTC (0x01 0x21)**

## **32.17.32.1 UTC time solution**

| Message           |                                          |         | UBX-NAV-TIMEUTC                           |       |                                                                                            |    |                |                                                                               |         |                     |  |
|-------------------|------------------------------------------|---------|-------------------------------------------|-------|--------------------------------------------------------------------------------------------|----|----------------|-------------------------------------------------------------------------------|---------|---------------------|--|
| Description       |                                          |         | UTC time solution                         |       |                                                                                            |    |                |                                                                               |         |                     |  |
| Firmware          |                                          |         | Supported on:                             |       |                                                                                            |    |                |                                                                               |         |                     |  |
|                   |                                          |         |                                           |       | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |    |                |                                                                               |         |                     |  |
|                   |                                          |         | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |       |                                                                                            |    |                |                                                                               |         |                     |  |
| Type              |                                          |         | Periodic/Polled                           |       |                                                                                            |    |                |                                                                               |         |                     |  |
| Comment           |                                          |         |                                           |       |                                                                                            |    |                | Note that during a leap second there may be more or less than 60 seconds in a |         |                     |  |
|                   |                                          |         | minute.                                   |       |                                                                                            |    |                |                                                                               |         |                     |  |
|                   |                                          |         |                                           |       |                                                                                            |    |                | See the description of leap seconds for details.                              |         |                     |  |
|                   |                                          | Header  |                                           | Class | ID                                                                                         |    | Length (Bytes) |                                                                               | Payload | Checksum            |  |
|                   | 0xB5 0x62 0x01 0x21<br>Message Structure |         |                                           |       |                                                                                            | 20 |                |                                                                               |         | see below CK_A CK_B |  |
| Payload Contents: |                                          |         |                                           |       |                                                                                            |    |                |                                                                               |         |                     |  |
| Byte Offset       | Number                                   | Scaling |                                           |       | Name                                                                                       |    | Unit           | Description                                                                   |         |                     |  |
|                   | Format                                   |         |                                           |       |                                                                                            |    |                |                                                                               |         |                     |  |
| 0                 | U4                                       |         | -                                         |       | iTOW                                                                                       |    | ms             | GPS time of week of the navigation epoch.                                     |         |                     |  |
|                   |                                          |         |                                           |       |                                                                                            |    |                | See the description of iTOW for details.                                      |         |                     |  |
| 4                 | U4                                       |         | -                                         | tAcc  |                                                                                            |    | ns             | Time accuracy estimate (UTC)                                                  |         |                     |  |
| 8                 | I4                                       |         | -                                         | nano  |                                                                                            |    | ns             | Fraction of second, range -1e9  1e9 (UTC)                                     |         |                     |  |
| 12                | U2                                       |         | -                                         | year  |                                                                                            |    | y              | Year, range 19992099 (UTC)                                                    |         |                     |  |
| 14                | U1                                       |         | -                                         | month |                                                                                            |    | month          | Month, range 112 (UTC)                                                        |         |                     |  |
| 15                | U1                                       |         | -                                         | day   |                                                                                            |    | d              | Day of month, range 131 (UTC)                                                 |         |                     |  |
| 16                | U1                                       |         | -                                         |       | hour                                                                                       |    | h              | Hour of day, range 023 (UTC)                                                  |         |                     |  |
| 17                | U1                                       |         | -                                         | min   |                                                                                            |    | min            | Minute of hour, range 059 (UTC)                                               |         |                     |  |
| 18                | U1                                       |         | -                                         | sec   |                                                                                            |    | s              | Seconds of minute, range 060 (UTC)                                            |         |                     |  |
| 19                | X1                                       |         | -                                         | valid |                                                                                            |    | -              | Validity Flags (see graphic below)                                            |         |                     |  |

<span id="page-415-1"></span>

## **Bitfield valid**

This graphic explains the bits of valid

<span id="page-415-2"></span>

| Name        | Description                                                    |  |  |  |  |  |  |  |
|-------------|----------------------------------------------------------------|--|--|--|--|--|--|--|
| validTOW    | 1 = Valid Time of Week (see Time Validity section for details) |  |  |  |  |  |  |  |
| validWKN    | 1 = Valid Week Number (see Time Validity section for details)  |  |  |  |  |  |  |  |
| validUTC    | 1 = Valid UTC Time                                             |  |  |  |  |  |  |  |
| utcStandard | UTC standard identifier.                                       |  |  |  |  |  |  |  |
|             | 0: Information not available                                   |  |  |  |  |  |  |  |
|             | 1: Communications Research Labratory (CRL), Tokyo, Japan       |  |  |  |  |  |  |  |
|             | 2: National Institute of Standards and Technology (NIST)       |  |  |  |  |  |  |  |
|             | 3: U.S. Naval Observatory (USNO)                               |  |  |  |  |  |  |  |
|             | 4: International Bureau of Weights and Measures (BIPM)         |  |  |  |  |  |  |  |
|             | 5: European laboratories                                       |  |  |  |  |  |  |  |
|             | 6: Former Soviet Union (SU)                                    |  |  |  |  |  |  |  |
|             | 7: National Time Service Center (NTSC), China                  |  |  |  |  |  |  |  |
|             | 8: National Physics Laboratory India (NPLI)                    |  |  |  |  |  |  |  |
|             | 15: Unknown                                                    |  |  |  |  |  |  |  |

## <span id="page-415-0"></span>**32.17.33 UBX-NAV-VELECEF (0x01 0x11)**

#### **32.17.33.1 Velocity solution in ECEF**

| Message           |        | UBX-NAV-VELECEF                           |        |    |    |                |                                                                                            |         |                     |
|-------------------|--------|-------------------------------------------|--------|----|----|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|
| Description       |        | Velocity solution in ECEF                 |        |    |    |                |                                                                                            |         |                     |
| Firmware          |        | Supported on:                             |        |    |    |                |                                                                                            |         |                     |
|                   |        |                                           |        |    |    |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |
|                   |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |        |    |    |                |                                                                                            |         |                     |
| Type              |        | Periodic/Polled                           |        |    |    |                |                                                                                            |         |                     |
| Comment           |        |                                           |        |    |    |                | See important comments concerning validity of position given in section                    |         |                     |
|                   |        | Navigation Output Filters.                |        |    |    |                |                                                                                            |         |                     |
|                   |        | Header                                    | Class  | ID |    | Length (Bytes) |                                                                                            | Payload | Checksum            |
| Message Structure |        | 0xB5 0x62 0x01 0x11                       |        |    | 20 |                |                                                                                            |         | see below CK_A CK_B |
| Payload Contents: |        |                                           |        |    |    |                |                                                                                            |         |                     |
| Byte Offset       | Number | Scaling                                   | Name   |    |    | Unit           | Description                                                                                |         |                     |
|                   | Format |                                           |        |    |    |                |                                                                                            |         |                     |
| 0                 | U4     | -                                         | iTOW   |    |    | ms             | GPS time of week of the navigation epoch.                                                  |         |                     |
|                   |        |                                           |        |    |    |                | See the description of iTOW for details.                                                   |         |                     |
| 4<br>I4           |        | -                                         | ecefVX |    |    | cm/s           | ECEF X velocity                                                                            |         |                     |
| 8<br>I4           |        | -                                         | ecefVY |    |    | cm/s           | ECEF Y velocity                                                                            |         |                     |
| 12                | I4     | -                                         | ecefVZ |    |    | cm/s           | ECEF Z velocity                                                                            |         |                     |
| 16                | U4     | -                                         | sAcc   |    |    | cm/s           | Speed accuracy estimate                                                                    |         |                     |

<span id="page-416-1"></span>

## <span id="page-416-0"></span>**32.17.34 UBX-NAV-VELNED (0x01 0x12)**

## **32.17.34.1 Velocity solution in NED frame**

| Message           |        |  | UBX-NAV-VELNED                            |         |    |    |                |                                                                                            |         |                     |
|-------------------|--------|--|-------------------------------------------|---------|----|----|----------------|--------------------------------------------------------------------------------------------|---------|---------------------|
| Description       |        |  | Velocity solution in NED frame            |         |    |    |                |                                                                                            |         |                     |
| Firmware          |        |  | Supported on:                             |         |    |    |                |                                                                                            |         |                     |
|                   |        |  |                                           |         |    |    |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |
|                   |        |  | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |         |    |    |                |                                                                                            |         |                     |
| Type              |        |  | Periodic/Polled                           |         |    |    |                |                                                                                            |         |                     |
| Comment           |        |  |                                           |         |    |    |                | See important comments concerning validity of position given in section                    |         |                     |
|                   |        |  | Navigation Output Filters.                |         |    |    |                |                                                                                            |         |                     |
|                   |        |  | Header                                    | Class   | ID |    | Length (Bytes) |                                                                                            | Payload | Checksum            |
| Message Structure |        |  | 0xB5 0x62 0x01 0x12                       |         |    | 36 |                |                                                                                            |         | see below CK_A CK_B |
| Payload Contents: |        |  |                                           |         |    |    |                |                                                                                            |         |                     |
| Byte Offset       | Number |  | Scaling                                   | Name    |    |    | Unit           | Description                                                                                |         |                     |
|                   | Format |  |                                           |         |    |    |                |                                                                                            |         |                     |
| 0                 | U4     |  | -                                         | iTOW    |    |    | ms             | GPS time of week of the navigation epoch.                                                  |         |                     |
|                   |        |  |                                           |         |    |    |                | See the description of iTOW for details.                                                   |         |                     |
| 4                 | I4     |  | -                                         | velN    |    |    | cm/s           | North velocity component                                                                   |         |                     |
| 8                 | I4     |  | -                                         | velE    |    |    | cm/s           | East velocity component                                                                    |         |                     |
| 12                | I4     |  | -                                         | velD    |    |    | cm/s           | Down velocity component                                                                    |         |                     |
| 16                | U4     |  | -                                         | speed   |    |    | cm/s           | Speed (3-D)                                                                                |         |                     |
| 20                | U4     |  | -                                         | gSpeed  |    |    | cm/s           | Ground speed (2-D)                                                                         |         |                     |
| 24<br>I4          |        |  | 1e-5                                      | heading |    |    | deg            | Heading of motion 2-D                                                                      |         |                     |
| 28<br>U4          |        |  | -                                         | sAcc    |    |    | cm/s           | Speed accuracy Estimate                                                                    |         |                     |
| 32<br>U4          |        |  | 1e-5                                      | cAcc    |    |    | deg            | Course / Heading accuracy estimate                                                         |         |                     |

<span id="page-417-0"></span>

## **32.18 UBX-RXM (0x02)**

Receiver Manager Messages: i.e. Satellite Status, RTC Status.

Messages in the RXM class are used to output status and result data from the Receiver Manager.

## <span id="page-417-1"></span>**32.18.1 UBX-RXM-IMES (0x02 0x61)**

#### **32.18.1.1 Indoor Messaging System information**

| Message                               |        |      | UBX-RXM-IMES                        |         |             |                |                                                                                         |         |                     |
|---------------------------------------|--------|------|-------------------------------------|---------|-------------|----------------|-----------------------------------------------------------------------------------------|---------|---------------------|
| Description                           |        |      | Indoor Messaging System information |         |             |                |                                                                                         |         |                     |
| Firmware                              |        |      | Supported on:                       |         |             |                |                                                                                         |         |                     |
|                                       |        |      | 3, 22, 22.01, 23 and 23.01          |         |             |                | • u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20. |         |                     |
| Type                                  |        |      | Periodic/Polled                     |         |             |                |                                                                                         |         |                     |
| Comment                               |        |      |                                     |         |             |                | This message shows the IMES stations the receiver is currently tracking, their          |         |                     |
|                                       |        |      |                                     |         |             |                | data rate, the signal level, the Doppler (with respect to 1575.4282MHz) and what        |         |                     |
|                                       |        |      |                                     |         |             |                | data (without protocol specific overhead) it has received from these stations so        |         |                     |
|                                       |        | far. |                                     |         |             |                |                                                                                         |         |                     |
|                                       |        |      |                                     |         |             |                | This message is sent out at the navigation rate the receiver is currently set to.       |         |                     |
|                                       |        |      |                                     |         |             |                | Therefore it allows users to get an overview on the receiver's current state from       |         |                     |
|                                       |        |      | the IMES perspective.               |         |             |                |                                                                                         |         |                     |
|                                       |        |      | Header                              | Class   | ID          | Length (Bytes) |                                                                                         | Payload | Checksum            |
| Message Structure                     |        |      | 0xB5 0x62 0x02 0x61                 |         |             | 4 + 44*numTx   |                                                                                         |         | see below CK_A CK_B |
| Payload Contents:                     |        |      |                                     |         |             |                |                                                                                         |         |                     |
| Byte Offset                           | Number |      | Scaling                             | Name    |             | Unit           | Description                                                                             |         |                     |
|                                       | Format |      |                                     |         |             |                |                                                                                         |         |                     |
| 0                                     | U1     |      | -                                   | numTx   |             | -              | Number of transmitters contained in the                                                 |         |                     |
|                                       |        |      |                                     |         |             |                | message                                                                                 |         |                     |
| 1                                     | U1     |      | -                                   | version |             | -              | Message version (0x01 for this version)                                                 |         |                     |
| 2                                     | U1[2]  |      | -                                   |         | reserved1   | -              | Reserved                                                                                |         |                     |
| Start of repeated block (numTx times) |        |      |                                     |         |             |                |                                                                                         |         |                     |
| 4 + 44*N                              | U1     |      | -                                   |         | reserved2   | -              | Reserved                                                                                |         |                     |
| 5 + 44*N                              | U1     |      | -                                   | txId    |             | -              | Transmitter identifier                                                                  |         |                     |
| 6 + 44*N                              | U1[3]  |      | -                                   |         | reserved3   | -              | Reserved                                                                                |         |                     |
| 9 + 44*N                              | U1     |      | -                                   | cno     |             | dBHz           | Carrier to Noise Ratio (Signal Strength)                                                |         |                     |
| 10 + 44*N                             | U1[2]  |      | -                                   |         | reserved4   | -              | Reserved                                                                                |         |                     |
| 12 + 44*N                             | I4     |      | 2^-12                               | doppler |             | Hz             | Doppler frequency with respect to 1575.<br>4282MHz [IIIII.FFF Hz]                       |         |                     |
| 16 + 44*N                             | X4     |      | -                                   |         | position1_1 | -              | Position 1 Frame (part 1/2) (see graphic                                                |         |                     |
|                                       |        |      |                                     |         | position1_2 |                | below)                                                                                  |         |                     |
| 20 + 44*N                             | X4     |      | -                                   |         |             | -              | Position 1 Frame (part 2/2) (see graphic<br>below)                                      |         |                     |
| 24 + 44*N                             | X4     |      | -                                   |         | position2_1 | -              | Position 2 Frame (part 1/3) (see graphic                                                |         |                     |
|                                       |        |      |                                     |         |             |                | below)                                                                                  |         |                     |
| 28 + 44*N                             | I4     |      | 180*2^-                             | lat     |             | deg            | Latitude, Position 2 Frame (part 2/3)                                                   |         |                     |
|                                       |        |      | 24                                  |         |             |                |                                                                                         |         |                     |
| 32 + 44*N<br>I4                       |        |      | 360*2^-                             | lon     |             | deg            | Longitude, Position 2 Frame (part 3/3)                                                  |         |                     |
|                                       |        |      | 25                                  |         |             |                |                                                                                         |         |                     |



UBX-RXM-IMES continued

| Byte Offset           | Number | Scaling | Name         | Unit | Description                             |
|-----------------------|--------|---------|--------------|------|-----------------------------------------|
|                       | Format |         |              |      |                                         |
| 36 + 44*N             | X4     | -       | shortIdFrame | -    | Short ID Frame (see graphic below)      |
| 40 + 44*N             | U4     | -       | mediumIdLSB  | -    | Medium ID LSB, Medium ID Frame (part    |
|                       |        |         |              |      | 1/2)                                    |
| 44 + 44*N             | X4     | -       | mediumId_2   | -    | Medium ID Frame (part 2/2) (see graphic |
|                       |        |         |              |      | below)                                  |
| End of repeated block |        |         |              |      |                                         |

## <span id="page-418-0"></span>**Bitfield position1\_1**

This graphic explains the bits of position1\_1

|  |  |  |  |  |  |  |  |  |  |  |  |  | 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 |  |  |  |
|--|--|--|--|--|--|--|--|--|--|--|--|--|----------------------------------------------------------------------------------|--|--|--|
|  |  |  |  |  |  |  |  |  |  |  |  |  |                                                                                  |  |  |  |

| Name      | Description                                             |
|-----------|---------------------------------------------------------|
| pos1Floor | Floor number [1.0 floor resolution] (Offset: -50 floor) |
| pos1Lat   | Latitude [deg * (180 / 2^23)]                           |

## <span id="page-418-1"></span>**Bitfield position1\_2**

This graphic explains the bits of position1\_2

| Name      | Description                    |  |  |  |  |  |  |  |  |  |  |  |  |  |
|-----------|--------------------------------|--|--|--|--|--|--|--|--|--|--|--|--|--|
| pos1Lon   | Longitude [deg * (360 / 2^24)] |  |  |  |  |  |  |  |  |  |  |  |  |  |
| pos1Valid | Position 1 Frame valid         |  |  |  |  |  |  |  |  |  |  |  |  |  |

## <span id="page-418-2"></span>**Bitfield position2\_1**

This graphic explains the bits of position2\_1





| Name      | Description                                             |
|-----------|---------------------------------------------------------|
| pos2Floor | Floor number [0.5 floor resolution] (Offset: -50 floor) |
| pos2Alt   | Altitude [m] (Offset: -95m)                             |
| pos2Acc   | Accuracy Index (0:undef, 1:<7m, 2:<15m, 3:>15m)         |
| pos2Valid | Position 2 Frame valid                                  |

## <span id="page-419-0"></span>**Bitfield shortIdFrame**

This graphic explains the bits of shortIdFrame

|                     |  |  |  |  |  |  |  |  |          |                     |                               |  |  | 13   12   11   10   9   8   7   6   5   4   3   2   1 |  |  | O |
|---------------------|--|--|--|--|--|--|--|--|----------|---------------------|-------------------------------|--|--|-------------------------------------------------------|--|--|---|
|                     |  |  |  |  |  |  |  |  | ⊃∩       | ਨ<br>$\overline{a}$ | ರ<br>$\overline{\phantom{0}}$ |  |  |                                                       |  |  |   |
|                     |  |  |  |  |  |  |  |  | tBoundar | ya1<br>پ∓           | 훓                             |  |  |                                                       |  |  |   |
|                     |  |  |  |  |  |  |  |  |          | shor                |                               |  |  |                                                       |  |  |   |
|                     |  |  |  |  |  |  |  |  | Ξ<br>ळ   |                     |                               |  |  |                                                       |  |  |   |
| $\Box$ signed value |  |  |  |  |  |  |  |  |          |                     |                               |  |  |                                                       |  |  |   |

| Name          | Description          |
|---------------|----------------------|
| shortId       | Short ID             |
| shortValid    | Short ID Frame valid |
| shortBoundary | Boundary Bit         |

## <span id="page-419-1"></span>**Bitfield mediumId\_2**

This graphic explains the bits of mediumId\_2

|                                               |  |  |  |  |  |  |  |  |  |  |  |  |  | っ                  |                         |             |
|-----------------------------------------------|--|--|--|--|--|--|--|--|--|--|--|--|--|--------------------|-------------------------|-------------|
|                                               |  |  |  |  |  |  |  |  |  |  |  |  |  | ゕ<br>mediumboundar | ా<br>i<br>unVal<br>medi | mediumIdMSB |
| █signed value<br>█unsigned value<br>█reserved |  |  |  |  |  |  |  |  |  |  |  |  |  |                    |                         |             |

| Name          | Description           |
|---------------|-----------------------|
| mediumIdMSB   | Medium ID MSB         |
| mediumValid   | Medium ID Frame valid |
| mediumboundar | Boundary Bit          |
| y             |                       |

<span id="page-420-1"></span>

### <span id="page-420-0"></span>**32.18.2 UBX-RXM-MEASX (0x02 0x14)**

#### **32.18.2.1 Satellite measurements for RRLP**

| Message           |                  |  | UBX-RXM-MEASX                               |         |            |                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |         |                     |
|-------------------|------------------|--|---------------------------------------------|---------|------------|----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|---------------------|
| Description       |                  |  | Satellite measurements for RRLP             |         |            |                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |         |                     |
| Firmware          |                  |  | Supported on:<br>3, 22, 22.01, 23 and 23.01 |         |            |                | • u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |         |                     |
| Type              |                  |  | Periodic/Polled                             |         |            |                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |         |                     |
| Comment           |                  |  | position response to the SMLC.              |         |            |                | The message payload data is, where possible and appropriate, according to the<br>Radio Resource LCS (Location Services) Protocol (RRLP) [1]. One exception is the<br>satellite and GNSS IDs, which here are given according to the Satellite<br>Numbering scheme. The correct satellites have to be selected and their satellite<br>ID translated accordingly [1, tab. A.10.14] for use in a RRLP Measure Position<br>Response Component. Similarly, the measurement reference time of week has<br>to be forwarded correctly (modulo 14400000 for the 24 LSB GPS measurements<br>variant, modulo 3600000 for the 22 LSB Galileo and Additional Navigation<br>Satelllite Systems (GANSS) measurements variant) of the RRLP measure<br>Reference: [1] ETSI TS 144 031 V11.0.0 (2012-10), Digital cellular<br>telecommunications system (Phase 2+), Location Services (LCS), Mobile Station<br>(MS) - Serving Mobile Location Centre (SMLC), Radio Resource LCS Protocol<br>(RRLP), (3GPP TS 44.031 version 11.0.0 Release 11). |         |                     |
|                   |                  |  | Header                                      | Class   | ID         | Length (Bytes) |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Payload | Checksum            |
| Message Structure |                  |  | 0xB5 0x62 0x02 0x14                         |         |            | 44 + 24*numSV  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |         | see below CK_A CK_B |
| Payload Contents: |                  |  |                                             |         |            |                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |         |                     |
| Byte Offset       | Number<br>Format |  | Scaling                                     | Name    |            | Unit           | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |         |                     |
| 0                 | U1               |  | -                                           | version |            | -              | Message version, currently 0x01                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |         |                     |
| 1                 | U1[3]            |  | -                                           |         | reserved1  | -              | Reserved                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |         |                     |
| 4                 | U4               |  | -                                           | gpsTOW  |            | ms             | GPS measurement reference time                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |         |                     |
| 8                 | U4               |  | -                                           | gloTOW  |            | ms             | GLONASS measurement reference time                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |         |                     |
| 12                | U4               |  | -                                           | bdsTOW  |            | ms             | BeiDou measurement reference time                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |         |                     |
| 16                | U1[4]            |  | -                                           |         | reserved2  | -              | Reserved                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |         |                     |
| 20                | U4               |  | -                                           | qzssTOW |            | ms             | QZSS measurement reference time                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |         |                     |
| 24                | U2               |  | 2^-4                                        |         | gpsTOWacc  | ms             | GPS measurement reference time<br>accuracy (0xffff = > 4s)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |         |                     |
| 26                | U2               |  | 2^-4                                        |         | gloTOWacc  | ms             | GLONASS measurement reference time<br>accuracy (0xffff = > 4s)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |         |                     |
| 28<br>U2          |                  |  | 2^-4                                        |         | bdsTOWacc  | ms             | BeiDou measurement reference time<br>accuracy (0xffff = > 4s)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |         |                     |
| 30                | U1[2]            |  | -                                           |         | reserved3  | -              | Reserved                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |         |                     |
| 32                | U2               |  | 2^-4                                        |         | qzssTOWacc | ms             | QZSS measurement reference time<br>accuracy (0xffff = > 4s)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |         |                     |
| 34                | U1               |  | -                                           | numSV   |            | -              | Number of satellites in repeated block                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |         |                     |
| 35<br>U1          |                  |  | -                                           | flags   |            | -              | Flags (see graphic below)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |         |                     |
| 36<br>U1[8]       |                  |  | -                                           |         | reserved4  | -              | Reserved                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |         |                     |

<span id="page-421-1"></span>

UBX-RXM-MEASX continued

| Byte Offset                           | Number | Scaling | Name          | Unit | Description                                 |
|---------------------------------------|--------|---------|---------------|------|---------------------------------------------|
|                                       | Format |         |               |      |                                             |
| Start of repeated block (numSV times) |        |         |               |      |                                             |
| 44 + 24*N                             | U1     | -       | gnssId        | -    | GNSS ID (see Satellite Numbering)           |
| 45 + 24*N                             | U1     | -       | svId          | -    | Satellite ID (see Satellite Numbering)      |
| 46 + 24*N                             | U1     | -       | cNo           | -    | carrier noise ratio (063)                   |
| 47 + 24*N                             | U1     | -       | mpathIndic    | -    | multipath index (according to [1]) (0 = not |
|                                       |        |         |               |      | measured, 1 = low, 2 = medium, 3 = high)    |
| 48 + 24*N                             | I4     | 0.04    | dopplerMS     | m/s  | Doppler measurement                         |
| 52 + 24*N                             | I4     | 0.2     | dopplerHz     | Hz   | Doppler measurement                         |
| 56 + 24*N                             | U2     | -       | wholeChips    | -    | whole value of the code phase               |
|                                       |        |         |               |      | measurement (01022 for GPS)                 |
| 58 + 24*N                             | U2     | -       | fracChips     | -    | fractional value of the code phase          |
|                                       |        |         |               |      | measurement (01023)                         |
| 60 + 24*N                             | U4     | 2^-21   | codePhase     | ms   | Code phase                                  |
| 64 + 24*N                             | U1     | -       | intCodePhase  | ms   | Integer (part of the) code phase            |
| 65 + 24*N                             | U1     | -       | pseuRangeRMSE | -    | pseudorange RMS error index (according      |
|                                       |        |         | rr            |      | to [1]) (063)                               |
| 66 + 24*N                             | U1[2]  | -       | reserved5     | -    | Reserved                                    |
|                                       |        |         |               |      |                                             |

## <span id="page-421-2"></span>End of repeated block

## **Bitfield flags**

This graphic explains the bits of flags



| Name   | Description                    |
|--------|--------------------------------|
| towSet | TOW set (0 = no, 1 or 2 = yes) |

## <span id="page-421-0"></span>**32.18.3 UBX-RXM-PMREQ (0x02 0x41)**

#### **32.18.3.1 Power management request**

| Message           | UBX-RXM-PMREQ            |       |    |                                                                                                                                         |         |                     |
|-------------------|--------------------------|-------|----|-----------------------------------------------------------------------------------------------------------------------------------------|---------|---------------------|
| Description       | Power management request |       |    |                                                                                                                                         |         |                     |
| Firmware          | Supported on:            |       |    | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01,<br>20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |         |                     |
| Type              | Command                  |       |    |                                                                                                                                         |         |                     |
| Comment           |                          |       |    | This message requests a power management related task of the receiver.                                                                  |         |                     |
|                   | Header                   | Class | ID | Length (Bytes)                                                                                                                          | Payload | Checksum            |
| Message Structure | 0xB5 0x62 0x02 0x41      |       |    | 8                                                                                                                                       |         | see below CK_A CK_B |
| Payload Contents: |                          |       |    |                                                                                                                                         |         |                     |

<span id="page-422-0"></span>

#### UBX-RXM-PMREQ continued

| Byte Offset | Number | Scaling | Name     | Unit | Description                               |
|-------------|--------|---------|----------|------|-------------------------------------------|
|             | Format |         |          |      |                                           |
| Byte Offset | Number | Scaling | Name     | Unit | Description                               |
|             | Format |         |          |      |                                           |
| 0           | U4     | -       | duration | ms   | Duration of the requested task. The       |
|             |        |         |          |      | maximum supported value is 12 days. Set   |
|             |        |         |          |      | to 0 to wait for a wakeup signal on a pin |
| 4           | X4     | -       | flags    | -    | task flags (see graphic below)            |

## <span id="page-422-1"></span>**Bitfield flags**

This graphic explains the bits of flags

| Name   | Description                                                                                       |
|--------|---------------------------------------------------------------------------------------------------|
| backup | The receiver goes into backup mode for a time period defined by duration, provided that it is not |
|        | connected to USB                                                                                  |

#### **32.18.3.2 Power management request**

| Message           |        |        | UBX-RXM-PMREQ              |                                           |               |    |                |                                                                                         |                     |                     |  |  |  |  |  |
|-------------------|--------|--------|----------------------------|-------------------------------------------|---------------|----|----------------|-----------------------------------------------------------------------------------------|---------------------|---------------------|--|--|--|--|--|
| Description       |        |        | Power management request   |                                           |               |    |                |                                                                                         |                     |                     |  |  |  |  |  |
| Firmware          |        |        | Supported on:              |                                           |               |    |                |                                                                                         |                     |                     |  |  |  |  |  |
|                   |        |        |                            |                                           |               |    |                | • u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20. |                     |                     |  |  |  |  |  |
|                   |        |        | 3, 22, 22.01, 23 and 23.01 |                                           |               |    |                |                                                                                         |                     |                     |  |  |  |  |  |
| Type              |        |        | Command                    |                                           |               |    |                |                                                                                         |                     |                     |  |  |  |  |  |
| Comment           |        |        |                            |                                           |               |    |                | This message requests a power management related task of the receiver.                  |                     |                     |  |  |  |  |  |
|                   |        | Header |                            | Class                                     | ID            |    | Length (Bytes) |                                                                                         | Payload<br>Checksum |                     |  |  |  |  |  |
| Message Structure |        |        | 0xB5 0x62 0x02 0x41        |                                           |               | 16 |                |                                                                                         |                     | see below CK_A CK_B |  |  |  |  |  |
| Payload Contents: |        |        |                            |                                           |               |    |                |                                                                                         |                     |                     |  |  |  |  |  |
| Byte Offset       | Number |        | Scaling                    | Name                                      |               |    | Unit           | Description                                                                             |                     |                     |  |  |  |  |  |
|                   | Format |        |                            |                                           |               |    |                |                                                                                         |                     |                     |  |  |  |  |  |
| 0                 | U1     |        | -                          | version                                   |               |    | -              | Message version (0x00 for this version)                                                 |                     |                     |  |  |  |  |  |
| 1                 | U1[3]  |        | -                          |                                           | reserved1     |    | -              | Reserved                                                                                |                     |                     |  |  |  |  |  |
| 4                 | U4     |        | -                          |                                           | duration      |    | ms             | Duration of the requested task. The                                                     |                     |                     |  |  |  |  |  |
|                   |        |        |                            |                                           |               |    |                | maximum supported value is 12 days. Set                                                 |                     |                     |  |  |  |  |  |
|                   |        |        |                            | to 0 to wait for a wakeup signal on a pin |               |    |                |                                                                                         |                     |                     |  |  |  |  |  |
| 8                 | X4     |        | -                          | flags                                     |               |    | -              | task flags (see graphic below)                                                          |                     |                     |  |  |  |  |  |
| 12                | X4     |        | -                          |                                           | wakeupSources |    | -              | Configure pins to wake up the receiver.                                                 |                     |                     |  |  |  |  |  |
|                   |        |        |                            |                                           |               |    |                | The receiver wakes up if there is either a                                              |                     |                     |  |  |  |  |  |
|                   |        |        |                            |                                           |               |    |                | falling or a rising edge on one of the                                                  |                     |                     |  |  |  |  |  |
|                   |        |        |                            |                                           |               |    |                | configured pins. (see graphic below)                                                    |                     |                     |  |  |  |  |  |

<span id="page-423-1"></span>

## **Bitfield flags**

<span id="page-423-2"></span>This graphic explains the bits of flags

|                                  |  |  |  |  |  |  |  |  |  |  | -      |   |  |
|----------------------------------|--|--|--|--|--|--|--|--|--|--|--------|---|--|
|                                  |  |  |  |  |  |  |  |  |  |  | R<br>õ |   |  |
| █signed value<br>█unsigned value |  |  |  |  |  |  |  |  |  |  | ⊕      | œ |  |

| Name   | Description                                                                                       |
|--------|---------------------------------------------------------------------------------------------------|
| backup | The receiver goes into backup mode for a time period defined by duration, provided that it is not |
|        | connected to USB                                                                                  |
| force  | Force receiver backup while USB is connected. USB interface will be disabled.                     |

## <span id="page-423-3"></span>**Bitfield wakeupSources**

This graphic explains the bits of wakeupSources

|  |  |  |  |  | $\overline{\phantom{0}}$ | -<br>ь                  | 5                                      | $\sim$<br><u>.</u> |  |
|--|--|--|--|--|--------------------------|-------------------------|----------------------------------------|--------------------|--|
|  |  |  |  |  | 臾<br>⊶<br>芴              | ↤<br>Ė<br>↵<br>. .<br>w | ⊣<br>$\tilde{\phantom{a}}$<br>. .<br>Φ | טיי<br>÷<br>-      |  |

| Name    | Description                                                 |
|---------|-------------------------------------------------------------|
| uartrx  | Wake up the receiver if there is an edge on the UART RX pin |
| extint0 | Wake up the receiver if there is an edge on the EXTINT0 pin |
| extint1 | Wake up the receiver if there is an edge on the EXTINT1 pin |
| spics   | Wake up the receiver if there is an edge on the SPI CS pin  |

## <span id="page-423-0"></span>**32.18.4 UBX-RXM-RAWX (0x02 0x15)**

### **32.18.4.1 Multi-GNSS raw measurement data**

| Message           |        |        | UBX-RXM-RAWX                    |       |    |  |                 |                                                                                |         |                     |  |  |
|-------------------|--------|--------|---------------------------------|-------|----|--|-----------------|--------------------------------------------------------------------------------|---------|---------------------|--|--|
| Description       |        |        | Multi-GNSS raw measurement data |       |    |  |                 |                                                                                |         |                     |  |  |
| Firmware          |        |        | Supported on:                   |       |    |  |                 |                                                                                |         |                     |  |  |
|                   |        |        |                                 |       |    |  |                 | • u-blox 8 / u-blox M8 with protocol version 17 (only with Time Sync products) |         |                     |  |  |
| Type              |        |        | Periodic/Polled                 |       |    |  |                 |                                                                                |         |                     |  |  |
| Comment           |        |        |                                 |       |    |  |                 | This message contains the information needed to be able to generate a RINEX 3  |         |                     |  |  |
|                   |        |        |                                 |       |    |  |                 | multi-GNSS observation file (see ftp://ftp.igs.org/pub/data/format/).          |         |                     |  |  |
|                   |        |        |                                 |       |    |  |                 | This message contains pseudorange, Doppler, carrier phase, phase lock and      |         |                     |  |  |
|                   |        |        |                                 |       |    |  |                 | signal quality information for GNSS satellites once signals have been          |         |                     |  |  |
|                   |        |        |                                 |       |    |  |                 | synchronized. This message supports all active GNSS.                           |         |                     |  |  |
|                   |        | Header |                                 | Class | ID |  | Length (Bytes)  |                                                                                | Payload | Checksum            |  |  |
| Message Structure |        |        | 0xB5 0x62 0x02 0x15             |       |    |  | 16 + 32*numMeas |                                                                                |         | see below CK_A CK_B |  |  |
| Payload Contents: |        |        |                                 |       |    |  |                 |                                                                                |         |                     |  |  |
| Byte Offset       | Number |        | Scaling                         | Name  |    |  | Unit            | Description                                                                    |         |                     |  |  |
|                   | Format |        |                                 |       |    |  |                 |                                                                                |         |                     |  |  |



#### UBX-RXM-RAWX continued

| Byte Offset                             | Number | Scaling | Name      | Unit   | Description                                                                                                                                                         |
|-----------------------------------------|--------|---------|-----------|--------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                         | Format |         |           |        |                                                                                                                                                                     |
| 0                                       | R8     | -       | rcvTow    | s      | Measurement time of week in receiver<br>local time approximately aligned to the<br>GPS time system. The receiver local time<br>of week, week number and leap second |
|                                         |        |         |           |        | information can be used to translate the<br>time to other time systems. More                                                                                        |
|                                         |        |         |           |        | information about the difference in time                                                                                                                            |
|                                         |        |         |           |        | systems can be found in the RINEX 3                                                                                                                                 |
|                                         |        |         |           |        | format documentation. For a receiver                                                                                                                                |
|                                         |        |         |           |        | operating in GLONASS only mode, UTC                                                                                                                                 |
|                                         |        |         |           |        | time can be determined by subtracting                                                                                                                               |
|                                         |        |         |           |        | the leapS field from GPS time regardless                                                                                                                            |
|                                         |        |         |           |        | of whether the GPS leap seconds are valid.                                                                                                                          |
| 8                                       | U2     | -       | week      | weeks  | GPS week number in receiver local time.                                                                                                                             |
| 10                                      | I1     | -       | leapS     | s      | GPS leap seconds (GPS-UTC). This field                                                                                                                              |
|                                         |        |         |           |        | represents the receiver's best knowledge                                                                                                                            |
|                                         |        |         |           |        | of the leap seconds offset. A flag is given                                                                                                                         |
|                                         |        |         |           |        | in the recStat bitfield to indicate if the                                                                                                                          |
|                                         |        |         |           |        | leap seconds are known.                                                                                                                                             |
| 11                                      | U1     | -       | numMeas   | -      | Number of measurements to follow                                                                                                                                    |
| 12                                      | X1     | -       | recStat   | -      | Receiver tracking status bitfield (see                                                                                                                              |
|                                         |        |         |           |        | graphic below)                                                                                                                                                      |
| 13                                      | U1[3]  | -       | reserved1 | -      | Reserved                                                                                                                                                            |
| Start of repeated block (numMeas times) |        |         |           |        |                                                                                                                                                                     |
| 16 + 32*N                               | R8     | -       | prMes     | m      | Pseudorange measurement [m].                                                                                                                                        |
|                                         |        |         |           |        | GLONASS inter frequency channel delays                                                                                                                              |
|                                         |        |         |           |        | are compensated with an internal                                                                                                                                    |
|                                         |        |         |           |        | calibration table.                                                                                                                                                  |
| 24 + 32*N                               | R8     | -       | cpMes     | cycles | Carrier phase measurement [cycles]. The                                                                                                                             |
|                                         |        |         |           |        | carrier phase initial ambiguity is initialized                                                                                                                      |
|                                         |        |         |           |        | using an approximate value to make the                                                                                                                              |
|                                         |        |         |           |        | magnitude of the phase close to the                                                                                                                                 |
|                                         |        |         |           |        | pseudorange measurement. Clock resets                                                                                                                               |
|                                         |        |         |           |        | are applied to both phase and code                                                                                                                                  |
|                                         |        |         |           |        | measurements in accordance with the                                                                                                                                 |
|                                         |        |         |           |        | RINEX specification.                                                                                                                                                |
| 32 + 32*N                               | R4     | -       | doMes     | Hz     | Doppler measurement (positive sign for                                                                                                                              |
|                                         |        |         |           |        | approaching satellites) [Hz]                                                                                                                                        |
| 36 + 32*N                               | U1     | -       | gnssId    | -      | GNSS identifier (see Satellite Numbering                                                                                                                            |
| 37 + 32*N                               | U1     | -       | svId      | -      | for a list of identifiers)<br>Satellite identifier (see Satellite                                                                                                   |
|                                         |        |         |           |        | Numbering)                                                                                                                                                          |
| 38 + 32*N                               | U1     | -       | reserved2 | -      | Reserved                                                                                                                                                            |
|                                         |        |         |           |        |                                                                                                                                                                     |



UBX-RXM-RAWX continued

| Byte Offset           | Number | Scaling | Name      | Unit   | Description                                 |
|-----------------------|--------|---------|-----------|--------|---------------------------------------------|
|                       | Format |         |           |        |                                             |
| 39 + 32*N             | U1     | -       | freqId    | -      | Only used for GLONASS: This is the          |
|                       |        |         |           |        | frequency slot + 7 (range from 0 to 13)     |
| 40 + 32*N             | U2     | -       | locktime  | ms     | Carrier phase locktime counter (maximum     |
|                       |        |         |           |        | 64500ms)                                    |
| 42 + 32*N             | U1     | -       | cno       | dBHz   | Carrier-to-noise density ratio (signal      |
|                       |        |         |           |        | strength) [dB-Hz]                           |
| 43 + 32*N             | X1     | 0.      | prStdev   | m      | Estimated pseudorange measurement           |
|                       |        | 01*2^n  |           |        | standard deviation (see graphic below)      |
| 44 + 32*N             | X1     | 0.004   | cpStdev   | cycles | Estimated carrier phase measurement         |
|                       |        |         |           |        | standard deviation (note a raw value of     |
|                       |        |         |           |        | 0x0F indicates the value is invalid) (see   |
|                       |        |         |           |        | graphic below)                              |
| 45 + 32*N             | X1     | 0.      | doStdev   | Hz     | Estimated Doppler measurement               |
|                       |        | 002*2^  |           |        | standard deviation. (see graphic below)     |
|                       |        | n       |           |        |                                             |
| 46 + 32*N             | X1     | -       | trkStat   | -      | Tracking status bitfield (see graphic below |
|                       |        |         |           |        | )                                           |
| 47 + 32*N             | U1     | -       | reserved3 | -      | Reserved                                    |
| End of repeated block |        |         |           |        |                                             |

## <span id="page-425-0"></span>**Bitfield recStat**

This graphic explains the bits of recStat



| Name     | Description                                                                                         |
|----------|-----------------------------------------------------------------------------------------------------|
| leapSec  | Leap seconds have been determined                                                                   |
| clkReset | Clock reset applied. Typically the receiver clock is changed in increments of integer milliseconds. |

## <span id="page-425-1"></span>**Bitfield prStdev**

This graphic explains the bits of prStdev





| Name  | Description                              |
|-------|------------------------------------------|
| prStd | Estimated pseudorange standard deviation |

## <span id="page-426-0"></span>**Bitfield cpStdev**

This graphic explains the bits of cpStdev



| Name  | Description                                |
|-------|--------------------------------------------|
| cpStd | Estimated carrier phase standard deviation |

## <span id="page-426-1"></span>**Bitfield doStdev**

This graphic explains the bits of doStdev



## <span id="page-426-2"></span>**Bitfield trkStat**

This graphic explains the bits of trkStat



| Name       | Description                      |
|------------|----------------------------------|
| prValid    | Pseudorange valid                |
| cpValid    | Carrier phase valid              |
| halfCyc    | Half cycle valid                 |
| subHalfCyc | Half cycle subtracted from phase |

<span id="page-427-0"></span>

#### **32.18.4.2 Multi-GNSS raw measurements**

| Message           |        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | UBX-RXM-RAWX                |         |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |          |                 |                                                                                                                                                                                                            |  |                     |  |  |
|-------------------|--------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|---------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|-----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--|---------------------|--|--|
| Description       |        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Multi-GNSS raw measurements |         |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |          |                 |                                                                                                                                                                                                            |  |                     |  |  |
| Firmware          |        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Supported on:               |         |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |          |                 | • u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.<br>3, 22, 22.01, 23 and 23.01 (only with ADR or High Precision GNSS or Time Sync                                   |  |                     |  |  |
|                   |        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | products)                   |         |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |          |                 |                                                                                                                                                                                                            |  |                     |  |  |
| Type              |        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Periodic/Polled             |         |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |          |                 |                                                                                                                                                                                                            |  |                     |  |  |
| Comment           |        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |                             |         | This message contains the information needed to be able to generate a RINEX 3<br>multi-GNSS observation file (see ftp://ftp.igs.org/pub/data/format/).<br>This message contains pseudorange, Doppler, carrier phase, phase lock and<br>signal quality information for GNSS satellites once signals have been<br>synchronized. This message supports all active GNSS.<br>The only difference between this version of the message and the previous |          |                 |                                                                                                                                                                                                            |  |                     |  |  |
|                   |        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |                             |         |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |          |                 | version (UBX-RXM-RAWX-DATA0) is the addition of the version field.                                                                                                                                         |  |                     |  |  |
|                   |        | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                             |         |                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Checksum |                 |                                                                                                                                                                                                            |  |                     |  |  |
| Message Structure |        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 0xB5 0x62 0x02 0x15         |         |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |          | 16 + 32*numMeas |                                                                                                                                                                                                            |  | see below CK_A CK_B |  |  |
| Payload Contents: |        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |                             |         |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |          |                 |                                                                                                                                                                                                            |  |                     |  |  |
| Byte Offset       | Number |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Scaling                     | Name    |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |          | Unit            | Description                                                                                                                                                                                                |  |                     |  |  |
| 0                 | R8     | Format<br>rcvTow<br>-<br>s<br>Measurement time of week in receiver<br>local time approximately aligned to the<br>GPS time system.<br>The receiver local time of week, week<br>number and leap second information can<br>be used to translate the time to other time<br>systems. More information about the<br>difference in time systems can be found in<br>the RINEX 3 format documentation. For a<br>receiver operating in GLONASS only mode,<br>UTC time can be determined by<br>subtracting the leapS field from GPS time<br>regardless of whether the GPS leap<br>seconds are valid. |                             |         |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |          |                 |                                                                                                                                                                                                            |  |                     |  |  |
| 8                 | U2     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | -                           | week    |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |          | weeks           | GPS week number in receiver local time.                                                                                                                                                                    |  |                     |  |  |
| 10                | I1     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | -                           | leapS   |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |          | s               | GPS leap seconds (GPS-UTC). This field<br>represents the receiver's best knowledge<br>of the leap seconds offset. A flag is given<br>in the recStat bitfield to indicate if the<br>leap seconds are known. |  |                     |  |  |
| 11                | U1     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | -                           | numMeas |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |          | -               | Number of measurements to follow                                                                                                                                                                           |  |                     |  |  |
| 12                | X1     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | -                           | recStat |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |          | -               | Receiver tracking status bitfield (see<br>graphic below)                                                                                                                                                   |  |                     |  |  |
| 13                | U1     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | -                           | version |                                                                                                                                                                                                                                                                                                                                                                                                                                                  |          | -               | Message version (0x01 for this version)                                                                                                                                                                    |  |                     |  |  |
| 14                | U1[2]  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | -                           |         | reserved1                                                                                                                                                                                                                                                                                                                                                                                                                                        |          | -               | Reserved                                                                                                                                                                                                   |  |                     |  |  |

Start of repeated block (numMeas times)



UBX-RXM-RAWX continued

| Byte Offset           | Number | Scaling | Name      | Unit   | Description                                    |
|-----------------------|--------|---------|-----------|--------|------------------------------------------------|
|                       | Format |         |           |        |                                                |
| 16 + 32*N             | R8     | -       | prMes     | m      | Pseudorange measurement [m].                   |
|                       |        |         |           |        | GLONASS inter frequency channel delays         |
|                       |        |         |           |        | are compensated with an internal               |
|                       |        |         |           |        | calibration table.                             |
| 24 + 32*N             | R8     | -       | cpMes     | cycles | Carrier phase measurement [cycles]. The        |
|                       |        |         |           |        | carrier phase initial ambiguity is initialized |
|                       |        |         |           |        | using an approximate value to make the         |
|                       |        |         |           |        | magnitude of the phase close to the            |
|                       |        |         |           |        | pseudorange measurement. Clock resets          |
|                       |        |         |           |        | are applied to both phase and code             |
|                       |        |         |           |        | measurements in accordance with the            |
|                       |        |         |           |        | RINEX specification.                           |
| 32 + 32*N             | R4     | -       | doMes     | Hz     | Doppler measurement (positive sign for         |
|                       |        |         |           |        | approaching satellites) [Hz]                   |
| 36 + 32*N             | U1     | -       | gnssId    | -      | GNSS identifier (see Satellite Numbering       |
|                       |        |         |           |        | for a list of identifiers)                     |
| 37 + 32*N             | U1     | -       | svId      | -      | Satellite identifier (see Satellite            |
|                       |        |         |           |        | Numbering)                                     |
| 38 + 32*N             | U1     | -       | sigId     | -      | New style signal identifier (see Signal        |
|                       |        |         |           |        | Identifiers).(not supported in protocol        |
|                       |        |         |           |        | versions less than 27)                         |
| 39 + 32*N             | U1     | -       | freqId    | -      | Only used for GLONASS: This is the             |
|                       |        |         |           |        | frequency slot + 7 (range from 0 to 13)        |
| 40 + 32*N             | U2     | -       | locktime  | ms     | Carrier phase locktime counter (maximum        |
|                       |        |         |           |        | 64500ms)                                       |
| 42 + 32*N             | U1     | -       | cno       | dBHz   | Carrier-to-noise density ratio (signal         |
|                       |        |         |           |        | strength) [dB-Hz]                              |
| 43 + 32*N             | X1     | 0.      | prStdev   | m      | Estimated pseudorange measurement              |
|                       |        | 01*2^n  |           |        | standard deviation (see graphic below)         |
| 44 + 32*N             | X1     | 0.004   | cpStdev   | cycles | Estimated carrier phase measurement            |
|                       |        |         |           |        | standard deviation (note a raw value of        |
|                       |        |         |           |        | 0x0F indicates the value is invalid) (see      |
|                       |        |         |           |        | graphic below)                                 |
| 45 + 32*N             | X1     | 0.      | doStdev   | Hz     | Estimated Doppler measurement                  |
|                       |        | 002*2^  |           |        | standard deviation. (see graphic below)        |
|                       |        | n       |           |        |                                                |
| 46 + 32*N             | X1     | -       | trkStat   | -      | Tracking status bitfield (see graphic below    |
|                       |        |         |           |        | )                                              |
| 47 + 32*N             | U1     | -       | reserved2 | -      | Reserved                                       |
| End of repeated block |        |         |           |        |                                                |



## **Bitfield recStat**

This graphic explains the bits of recStat

<span id="page-429-0"></span>

Name Description leapSec Leap seconds have been determined clkReset Clock reset applied. Typically the receiver clock is changed in increments of integer milliseconds.

## <span id="page-429-1"></span>**Bitfield prStdev**

This graphic explains the bits of prStdev



## <span id="page-429-2"></span>**Bitfield cpStdev**

This graphic explains the bits of cpStdev



## <span id="page-429-3"></span>**Bitfield doStdev**

This graphic explains the bits of doStdev



<span id="page-430-1"></span>

| Name  | Description                          |
|-------|--------------------------------------|
| doStd | Estimated Doppler standard deviation |

## <span id="page-430-2"></span>**Bitfield trkStat**

This graphic explains the bits of trkStat



| Name       | Description                      |
|------------|----------------------------------|
| prValid    | Pseudorange valid                |
| cpValid    | Carrier phase valid              |
| halfCyc    | Half cycle valid                 |
| subHalfCyc | Half cycle subtracted from phase |

## <span id="page-430-0"></span>**32.18.5 UBX-RXM-RLM (0x02 0x59)**

## **32.18.5.1 Galileo SAR short-RLM report**

| Message                                 |                  |  | UBX-RXM-RLM                                 |         |           |                                                                                                                                                  |         |                                                                                                                                  |  |                     |  |
|-----------------------------------------|------------------|--|---------------------------------------------|---------|-----------|--------------------------------------------------------------------------------------------------------------------------------------------------|---------|----------------------------------------------------------------------------------------------------------------------------------|--|---------------------|--|
| Description                             |                  |  | Galileo SAR short-RLM report                |         |           |                                                                                                                                                  |         |                                                                                                                                  |  |                     |  |
| Firmware                                |                  |  | Supported on:<br>3, 22, 22.01, 23 and 23.01 |         |           |                                                                                                                                                  |         | • u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.                                          |  |                     |  |
| Type                                    |                  |  | Output                                      |         |           |                                                                                                                                                  |         |                                                                                                                                  |  |                     |  |
| Comment                                 |                  |  |                                             |         |           |                                                                                                                                                  |         | This message contains the contents of any Galileo Search and Rescue (SAR)<br>Short Return Link Message detected by the receiver. |  |                     |  |
| Header<br>Class<br>ID<br>Length (Bytes) |                  |  |                                             |         |           |                                                                                                                                                  | Payload | Checksum                                                                                                                         |  |                     |  |
| Message Structure                       |                  |  | 0xB5 0x62 0x02 0x59 16                      |         |           |                                                                                                                                                  |         |                                                                                                                                  |  | see below CK_A CK_B |  |
| Payload Contents:                       |                  |  |                                             |         |           |                                                                                                                                                  |         |                                                                                                                                  |  |                     |  |
| Byte Offset                             | Number<br>Format |  | Scaling                                     | Name    |           |                                                                                                                                                  | Unit    | Description                                                                                                                      |  |                     |  |
| 0                                       | U1               |  | -                                           | version |           |                                                                                                                                                  | -       | Message version (0x00 for this version)                                                                                          |  |                     |  |
| 1                                       | U1               |  | -                                           | type    |           |                                                                                                                                                  | -       | Message type (0x01 for Short-RLM)                                                                                                |  |                     |  |
| 2                                       | U1               |  | -                                           | svId    |           |                                                                                                                                                  | -       | Identifier of transmitting satellite (see<br>Satellite Numbering)                                                                |  |                     |  |
| 3                                       | U1               |  | -                                           |         | reserved1 |                                                                                                                                                  | -       | Reserved                                                                                                                         |  |                     |  |
| 4                                       | U1[8]<br>-       |  | beacon                                      |         | -         | Beacon identifier (60 bits), with bytes<br>ordered by earliest transmitted (most<br>significant) first. Top four bits of first byte<br>are zero. |         |                                                                                                                                  |  |                     |  |
| 12                                      | U1               |  | -                                           | message |           |                                                                                                                                                  | -       | Message code (4 bits)                                                                                                            |  |                     |  |
| 13                                      | U1[2]            |  | -                                           | params  |           |                                                                                                                                                  | -       | Parameters (16 bits), with bytes ordered<br>by earliest transmitted (most significant)<br>first.                                 |  |                     |  |

<span id="page-431-0"></span>

UBX-RXM-RLM continued

| Byte Offset | Number | Scaling | Name      | Unit | Description |
|-------------|--------|---------|-----------|------|-------------|
|             | Format |         |           |      |             |
| 15          | U1     | -       | reserved2 | -    | Reserved    |

#### **32.18.5.2 Galileo SAR long-RLM report**

| Message           |        |        | UBX-RXM-RLM                                 |         |           |  |                |                                                                                                                                 |         |                     |  |
|-------------------|--------|--------|---------------------------------------------|---------|-----------|--|----------------|---------------------------------------------------------------------------------------------------------------------------------|---------|---------------------|--|
| Description       |        |        | Galileo SAR long-RLM report                 |         |           |  |                |                                                                                                                                 |         |                     |  |
| Firmware          |        |        | Supported on:<br>3, 22, 22.01, 23 and 23.01 |         |           |  |                | • u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20.                                         |         |                     |  |
| Type              |        |        | Output                                      |         |           |  |                |                                                                                                                                 |         |                     |  |
| Comment           |        |        |                                             |         |           |  |                | This message contains the contents of any Galileo Search and Rescue (SAR)<br>Long Return Link Message detected by the receiver. |         |                     |  |
|                   |        | Header |                                             | Class   | ID        |  | Length (Bytes) |                                                                                                                                 | Payload | Checksum            |  |
| Message Structure |        |        | 0xB5 0x62 0x02 0x59 28                      |         |           |  |                |                                                                                                                                 |         | see below CK_A CK_B |  |
| Payload Contents: |        |        |                                             |         |           |  |                |                                                                                                                                 |         |                     |  |
| Byte Offset       | Number |        | Scaling                                     | Name    |           |  | Unit           | Description                                                                                                                     |         |                     |  |
|                   | Format |        |                                             |         |           |  |                |                                                                                                                                 |         |                     |  |
| 0                 | U1     |        | -                                           | version |           |  | -              | Message version (0x00 for this version)                                                                                         |         |                     |  |
| 1                 | U1     |        | -                                           | type    |           |  | -              | Message type (0x02 for Long-RLM)                                                                                                |         |                     |  |
| 2                 | U1     |        | -                                           | svId    |           |  | -              | Identifier of transmitting satellite (see                                                                                       |         |                     |  |
|                   |        |        |                                             |         |           |  |                | Satellite Numbering)                                                                                                            |         |                     |  |
| 3                 | U1     |        | -                                           |         | reserved1 |  | -              | Reserved                                                                                                                        |         |                     |  |
| 4                 | U1[8]  |        | -                                           | beacon  |           |  | -              | Beacon identifier (60 bits), with bytes                                                                                         |         |                     |  |
|                   |        |        |                                             |         |           |  |                | ordered by earliest transmitted (most                                                                                           |         |                     |  |
|                   |        |        |                                             |         |           |  |                | significant) first. Top four bits of first byte                                                                                 |         |                     |  |
|                   |        |        |                                             |         |           |  |                | are zero.                                                                                                                       |         |                     |  |
| 12                | U1     |        | -                                           | message |           |  | -              | Message code (4 bits)                                                                                                           |         |                     |  |
| 13                | U1[12] |        | -                                           | params  |           |  | -              | Parameters (96 bits), with bytes ordered                                                                                        |         |                     |  |
|                   |        |        |                                             |         |           |  |                | by earliest transmitted (most significant)                                                                                      |         |                     |  |
|                   |        |        |                                             |         |           |  |                | first.                                                                                                                          |         |                     |  |
| 25                | U1[3]  |        | -                                           |         | reserved2 |  | -              | Reserved                                                                                                                        |         |                     |  |

<span id="page-432-1"></span>

## <span id="page-432-0"></span>**32.18.6 UBX-RXM-RTCM (0x02 0x32)**

## **32.18.6.1 RTCM input status**

| Message           |        |                                                                              | UBX-RXM-RTCM                                                                |         |            |  |                                         |                                                                     |         |                     |  |  |  |
|-------------------|--------|------------------------------------------------------------------------------|-----------------------------------------------------------------------------|---------|------------|--|-----------------------------------------|---------------------------------------------------------------------|---------|---------------------|--|--|--|
| Description       |        |                                                                              | RTCM input status                                                           |         |            |  |                                         |                                                                     |         |                     |  |  |  |
| Firmware          |        |                                                                              | Supported on:                                                               |         |            |  |                                         |                                                                     |         |                     |  |  |  |
|                   |        |                                                                              |                                                                             |         |            |  |                                         | • u-blox 8 / u-blox M8 protocol versions 20.01, 20.1, 20.2 and 20.3 |         |                     |  |  |  |
| Type              |        |                                                                              | Output                                                                      |         |            |  |                                         |                                                                     |         |                     |  |  |  |
| Comment           |        |                                                                              | This message shows info on a received RTCM input message. It is output upon |         |            |  |                                         |                                                                     |         |                     |  |  |  |
|                   |        | successful parsing of an RTCM input message, irrespective of whether the     |                                                                             |         |            |  |                                         |                                                                     |         |                     |  |  |  |
|                   |        |                                                                              |                                                                             |         |            |  |                                         | RTCM message is supported or not by the receiver.                   |         |                     |  |  |  |
|                   |        |                                                                              | Header                                                                      | Class   | ID         |  | Length (Bytes)                          |                                                                     | Payload | Checksum            |  |  |  |
| Message Structure |        |                                                                              | 0xB5 0x62 0x02 0x32 8                                                       |         |            |  |                                         |                                                                     |         | see below CK_A CK_B |  |  |  |
| Payload Contents: |        |                                                                              |                                                                             |         |            |  |                                         |                                                                     |         |                     |  |  |  |
| Byte Offset       | Number |                                                                              | Scaling                                                                     | Name    |            |  | Unit                                    | Description                                                         |         |                     |  |  |  |
|                   | Format |                                                                              |                                                                             |         |            |  |                                         |                                                                     |         |                     |  |  |  |
| 0                 | U1     |                                                                              | -                                                                           | version |            |  | -                                       | Message version (0x02 for this version)                             |         |                     |  |  |  |
| 1                 | X1     |                                                                              | -                                                                           | flags   |            |  | -                                       | RTCM input status flags (see graphic                                |         |                     |  |  |  |
|                   |        |                                                                              |                                                                             |         |            |  |                                         | below)                                                              |         |                     |  |  |  |
| 2                 | U2     |                                                                              | -                                                                           |         | subType    |  | -                                       | Message subtype, only applicable to u                               |         |                     |  |  |  |
|                   |        |                                                                              |                                                                             |         |            |  | blox proprietary RTCM message 4072 (not |                                                                     |         |                     |  |  |  |
|                   |        |                                                                              |                                                                             |         |            |  |                                         | available on all products)                                          |         |                     |  |  |  |
| 4                 | U2     |                                                                              | -                                                                           |         | refStation |  | -                                       | Reference station ID:                                               |         |                     |  |  |  |
|                   |        |                                                                              |                                                                             |         |            |  |                                         | For RTCM 2.3: Reference station ID of the                           |         |                     |  |  |  |
|                   |        |                                                                              |                                                                             |         |            |  |                                         | received RTCM 2 input message. Valid                                |         |                     |  |  |  |
|                   |        |                                                                              |                                                                             |         |            |  |                                         | range 0-1023.                                                       |         |                     |  |  |  |
|                   |        |                                                                              |                                                                             |         |            |  |                                         | For RTCM 3.3: Reference station ID                                  |         |                     |  |  |  |
|                   |        |                                                                              |                                                                             |         |            |  |                                         | (DF003) of the received RTCM input                                  |         |                     |  |  |  |
|                   |        | message. Valid range 0-4095. Reported<br>only for the standard RTCM messages |                                                                             |         |            |  |                                         |                                                                     |         |                     |  |  |  |
|                   |        |                                                                              |                                                                             |         |            |  |                                         | that include the DF003 field and for the u                          |         |                     |  |  |  |
|                   |        |                                                                              |                                                                             |         |            |  |                                         | blox proprietary RTCM messages 4072.x.                              |         |                     |  |  |  |
|                   |        |                                                                              |                                                                             |         |            |  |                                         | For all other messages, reports 0xFFFF.                             |         |                     |  |  |  |
| 6                 | U2     |                                                                              | -                                                                           | msgType |            |  | -                                       | Message type                                                        |         |                     |  |  |  |
|                   |        |                                                                              |                                                                             |         |            |  |                                         |                                                                     |         |                     |  |  |  |

## <span id="page-432-2"></span>**Bitfield flags**



<span id="page-433-1"></span>

| Name      | Description                                                                                    |
|-----------|------------------------------------------------------------------------------------------------|
| crcFailed | 0 when RTCM message received and passed CRC check, 1 when failed, in which case refStation and |
|           | msgType might be corrupted and misleading                                                      |
| msgUsed   | 2 = RTCM message used successfully by the receiver, 1 = not used, 0 = do not know              |

## <span id="page-433-0"></span>**32.18.7 UBX-RXM-SFRBX (0x02 0x13)**

#### **32.18.7.1 Broadcast navigation data subframe**

| Message                                  |        |                                                                               | UBX-RXM-SFRBX                      |         |           |                |                                     |                                                                                |                     |          |  |  |  |
|------------------------------------------|--------|-------------------------------------------------------------------------------|------------------------------------|---------|-----------|----------------|-------------------------------------|--------------------------------------------------------------------------------|---------------------|----------|--|--|--|
| Description                              |        |                                                                               | Broadcast navigation data subframe |         |           |                |                                     |                                                                                |                     |          |  |  |  |
| Firmware                                 |        |                                                                               | Supported on:                      |         |           |                |                                     |                                                                                |                     |          |  |  |  |
|                                          |        |                                                                               |                                    |         |           |                |                                     | • u-blox 8 / u-blox M8 with protocol version 17 (only with Time Sync products) |                     |          |  |  |  |
| Type                                     |        |                                                                               | Output                             |         |           |                |                                     |                                                                                |                     |          |  |  |  |
| Comment                                  |        | This message reports a complete subframe of broadcast navigation data         |                                    |         |           |                |                                     |                                                                                |                     |          |  |  |  |
|                                          |        |                                                                               |                                    |         |           |                |                                     | decoded from a single signal. The number of data words reported in each        |                     |          |  |  |  |
|                                          |        | message depends on the nature of the signal. See section Broadcast Navigation |                                    |         |           |                |                                     |                                                                                |                     |          |  |  |  |
|                                          |        |                                                                               | Data for further details.          |         |           |                |                                     |                                                                                |                     |          |  |  |  |
| Header                                   |        |                                                                               |                                    | Class   | ID        | Length (Bytes) |                                     |                                                                                | Payload             | Checksum |  |  |  |
| 0xB5 0x62 0x02 0x13<br>Message Structure |        |                                                                               |                                    |         |           | 8 + 4*numWords |                                     |                                                                                | see below CK_A CK_B |          |  |  |  |
| Payload Contents:                        |        |                                                                               |                                    |         |           |                |                                     |                                                                                |                     |          |  |  |  |
| Byte Offset                              | Number |                                                                               | Scaling                            | Name    |           |                | Unit                                | Description                                                                    |                     |          |  |  |  |
|                                          | Format |                                                                               |                                    |         |           |                |                                     |                                                                                |                     |          |  |  |  |
| 0                                        | U1     |                                                                               | -                                  | gnssId  |           |                | -                                   | GNSS identifier (see Satellite Numbering)                                      |                     |          |  |  |  |
| 1                                        | U1     |                                                                               | -                                  | svId    |           | -              | Satellite identifier (see Satellite |                                                                                |                     |          |  |  |  |
|                                          |        |                                                                               |                                    |         |           |                |                                     | Numbering)                                                                     |                     |          |  |  |  |
| 2                                        | U1     |                                                                               | -                                  |         | reserved1 |                | -                                   | Reserved                                                                       |                     |          |  |  |  |
| 3                                        | U1     |                                                                               | -                                  | freqId  |           |                | -                                   | Only used for GLONASS: This is the                                             |                     |          |  |  |  |
|                                          |        |                                                                               |                                    |         |           |                |                                     | frequency slot + 7 (range from 0 to 13)                                        |                     |          |  |  |  |
| 4                                        | U1     |                                                                               | -                                  |         | numWords  |                | -                                   | The number of data words contained in                                          |                     |          |  |  |  |
|                                          |        |                                                                               |                                    |         |           |                |                                     | this message (016)                                                             |                     |          |  |  |  |
| 5                                        | U1     |                                                                               | -                                  |         | reserved2 |                | -                                   | Reserved                                                                       |                     |          |  |  |  |
| 6                                        | U1     |                                                                               | -                                  | version |           |                | -                                   | Message version (0x01 for this version)                                        |                     |          |  |  |  |
| 7                                        | U1     |                                                                               | -                                  |         | reserved3 |                | -                                   | Reserved                                                                       |                     |          |  |  |  |
| Start of repeated block (numWords times) |        |                                                                               |                                    |         |           |                |                                     |                                                                                |                     |          |  |  |  |
| 8 + 4*N                                  | U4     |                                                                               | -                                  | dwrd    |           |                | -                                   | The data words                                                                 |                     |          |  |  |  |
| End of repeated block                    |        |                                                                               |                                    |         |           |                |                                     |                                                                                |                     |          |  |  |  |

<span id="page-434-0"></span>

| Message                                  |        |  | UBX-RXM-SFRBX                                                           |        |           |  |                |                                                                                         |          |                     |  |  |  |
|------------------------------------------|--------|--|-------------------------------------------------------------------------|--------|-----------|--|----------------|-----------------------------------------------------------------------------------------|----------|---------------------|--|--|--|
| Description                              |        |  | Broadcast navigation data subframe                                      |        |           |  |                |                                                                                         |          |                     |  |  |  |
| Firmware                                 |        |  | Supported on:                                                           |        |           |  |                |                                                                                         |          |                     |  |  |  |
|                                          |        |  |                                                                         |        |           |  |                | • u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20. |          |                     |  |  |  |
|                                          |        |  | 3, 22, 22.01, 23 and 23.01                                              |        |           |  |                |                                                                                         |          |                     |  |  |  |
| Type                                     |        |  | Output                                                                  |        |           |  |                |                                                                                         |          |                     |  |  |  |
| Comment                                  |        |  | This message reports a complete subframe of broadcast navigation data   |        |           |  |                |                                                                                         |          |                     |  |  |  |
|                                          |        |  | decoded from a single signal. The number of data words reported in each |        |           |  |                |                                                                                         |          |                     |  |  |  |
|                                          |        |  | message depends on the nature of the signal.                            |        |           |  |                |                                                                                         |          |                     |  |  |  |
|                                          |        |  | See section Broadcast Navigation Data for further details.              |        |           |  |                |                                                                                         |          |                     |  |  |  |
| Header                                   |        |  |                                                                         | Class  | ID        |  | Length (Bytes) | Payload                                                                                 | Checksum |                     |  |  |  |
| Message Structure                        |        |  | 0xB5 0x62 0x02 0x13                                                     |        |           |  | 8 + 4*numWords |                                                                                         |          | see below CK_A CK_B |  |  |  |
| Payload Contents:                        |        |  |                                                                         |        |           |  |                |                                                                                         |          |                     |  |  |  |
| Byte Offset                              | Number |  | Scaling                                                                 | Name   |           |  | Unit           | Description                                                                             |          |                     |  |  |  |
|                                          | Format |  |                                                                         |        |           |  |                |                                                                                         |          |                     |  |  |  |
| 0                                        | U1     |  | -                                                                       | gnssId |           |  | -              | GNSS identifier (see Satellite Numbering)                                               |          |                     |  |  |  |
| 1                                        | U1     |  | -                                                                       | svId   |           |  | -              | Satellite identifier (see Satellite                                                     |          |                     |  |  |  |
|                                          |        |  |                                                                         |        |           |  |                | Numbering)                                                                              |          |                     |  |  |  |
| 2                                        | U1     |  | -                                                                       | sigId  |           |  | -              | Signal identifier (see Signal Identifiers)                                              |          |                     |  |  |  |
| 3                                        | U1     |  | -                                                                       | freqId |           |  | -              | Only used for GLONASS: This is the                                                      |          |                     |  |  |  |
|                                          |        |  |                                                                         |        |           |  |                | frequency slot + 7 (range from 0 to 13)                                                 |          |                     |  |  |  |
| 4                                        | U1     |  | -                                                                       |        | numWords  |  | -              | The number of data words contained in                                                   |          |                     |  |  |  |
|                                          |        |  |                                                                         |        |           |  |                | this message (up to 10, for currently                                                   |          |                     |  |  |  |
|                                          |        |  |                                                                         |        |           |  |                | supported signals)                                                                      |          |                     |  |  |  |
| 5                                        | U1     |  | -                                                                       | chn    |           |  | -              | The tracking channel number the                                                         |          |                     |  |  |  |
|                                          |        |  |                                                                         |        |           |  |                | message was received on                                                                 |          |                     |  |  |  |
| 6                                        | U1     |  | -                                                                       |        | version   |  |                | Message version, (0x02 for this version)                                                |          |                     |  |  |  |
| 7                                        | U1     |  | -                                                                       |        | reserved1 |  | -              | Reserved                                                                                |          |                     |  |  |  |
| Start of repeated block (numWords times) |        |  |                                                                         |        |           |  |                |                                                                                         |          |                     |  |  |  |
| 8 + 4*N                                  | U4     |  | -                                                                       | dwrd   |           |  | -              | The data words                                                                          |          |                     |  |  |  |
| End of repeated block                    |        |  |                                                                         |        |           |  |                |                                                                                         |          |                     |  |  |  |

## **32.18.7.2 Broadcast navigation data subframe**

<span id="page-435-1"></span>

## <span id="page-435-0"></span>**32.18.8 UBX-RXM-SVSI (0x02 0x20)**

#### **32.18.8.1 SV status info**

| Message                               |        |  | UBX-RXM-SVSI                              |        |      |       |                                           |                                                                                            |         |                     |  |
|---------------------------------------|--------|--|-------------------------------------------|--------|------|-------|-------------------------------------------|--------------------------------------------------------------------------------------------|---------|---------------------|--|
| Description                           |        |  | SV status info                            |        |      |       |                                           |                                                                                            |         |                     |  |
| Firmware                              |        |  | Supported on:                             |        |      |       |                                           |                                                                                            |         |                     |  |
|                                       |        |  |                                           |        |      |       |                                           | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |  |
|                                       |        |  | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |        |      |       |                                           |                                                                                            |         |                     |  |
| Type                                  |        |  | Periodic/Polled                           |        |      |       |                                           |                                                                                            |         |                     |  |
| Comment                               |        |  |                                           |        |      |       |                                           | Status of the receiver manager knowledge about GPS Orbit Validity                          |         |                     |  |
|                                       |        |  |                                           |        |      |       |                                           | This message has only been retained for backwards compatibility; users are                 |         |                     |  |
|                                       |        |  |                                           |        |      |       |                                           | recommended to use the UBX-NAV-ORB message in preference.                                  |         |                     |  |
|                                       |        |  | Header                                    | Class  | ID   |       | Length (Bytes)                            |                                                                                            | Payload | Checksum            |  |
| Message Structure                     |        |  | 0xB5 0x62 0x02 0x20 8 + 6*numSV           |        |      |       |                                           |                                                                                            |         | see below CK_A CK_B |  |
| Payload Contents:                     |        |  |                                           |        |      |       |                                           |                                                                                            |         |                     |  |
| Byte Offset                           | Number |  | Scaling                                   | Name   |      | Unit  | Description                               |                                                                                            |         |                     |  |
|                                       | Format |  |                                           |        |      |       |                                           |                                                                                            |         |                     |  |
| 0                                     | U4     |  | -                                         | iTOW   |      | ms    | GPS time of week of the navigation epoch. |                                                                                            |         |                     |  |
|                                       |        |  |                                           |        |      |       |                                           | See the description of iTOW for details.                                                   |         |                     |  |
| 4                                     | I2     |  | -                                         | week   |      | weeks | GPS week number of the navigation epoch   |                                                                                            |         |                     |  |
| 6                                     | U1     |  | -                                         | numVis |      |       | -                                         | Number of visible satellites                                                               |         |                     |  |
| 7                                     | U1     |  | -                                         | numSV  |      |       | -                                         | Number of per-SV data blocks following                                                     |         |                     |  |
| Start of repeated block (numSV times) |        |  |                                           |        |      |       |                                           |                                                                                            |         |                     |  |
| 8 + 6*N                               | U1     |  | -                                         | svid   |      |       | -                                         | Satellite ID                                                                               |         |                     |  |
| 9 + 6*N                               | X1     |  | -                                         | svFlag |      |       | -                                         | Information Flags (see graphic below)                                                      |         |                     |  |
| 10 + 6*N                              | I2     |  | -                                         |        | azim |       | -                                         | Azimuth                                                                                    |         |                     |  |
| 12 + 6*N                              | I1     |  | -                                         | elev   |      |       | -                                         | Elevation                                                                                  |         |                     |  |
| 13 + 6*N                              | X1     |  | -                                         | age    |      |       | -                                         | Age of Almanac and Ephemeris: (see                                                         |         |                     |  |
|                                       |        |  |                                           |        |      |       |                                           | graphic below)                                                                             |         |                     |  |
| End of repeated block                 |        |  |                                           |        |      |       |                                           |                                                                                            |         |                     |  |

## <span id="page-435-2"></span>**Bitfield svFlag**





| Name     | Description                     |
|----------|---------------------------------|
| ura      | Figure of Merit (URA) range 015 |
| healthy  | SV healthy flag                 |
| ephVal   | Ephemeris valid                 |
| almVal   | Almanac valid                   |
| notAvail | SV not available                |

## <span id="page-436-0"></span>**Bitfield age**

| Name   | Description                                   |  |  |  |  |  |  |
|--------|-----------------------------------------------|--|--|--|--|--|--|
| almAge | Age of ALM in days offset by 4                |  |  |  |  |  |  |
|        | i.e. the reference time may be in the future: |  |  |  |  |  |  |
|        | ageOfAlm = (age & 0x0f) - 4                   |  |  |  |  |  |  |
| ephAge | Age of EPH in hours offset by 4.              |  |  |  |  |  |  |
|        | i.e. the reference time may be in the future: |  |  |  |  |  |  |
|        | ageOfEph = ((age & 0xf0) >> 4) - 4            |  |  |  |  |  |  |

<span id="page-437-0"></span>

## **32.19 UBX-SEC (0x27)**

Security Feature Messages

Messages in the SEC class are used for security features of the receiver.

## <span id="page-437-1"></span>**32.19.1 UBX-SEC-UNIQID (0x27 0x03)**

## **32.19.1.1 Unique chip ID**

| Message           |        |        | UBX-SEC-UNIQID                                                                |         |                            |  |                           |                                                                                         |  |                     |  |
|-------------------|--------|--------|-------------------------------------------------------------------------------|---------|----------------------------|--|---------------------------|-----------------------------------------------------------------------------------------|--|---------------------|--|
| Description       |        |        | Unique chip ID                                                                |         |                            |  |                           |                                                                                         |  |                     |  |
| Firmware          |        |        | Supported on:                                                                 |         |                            |  |                           |                                                                                         |  |                     |  |
|                   |        |        |                                                                               |         |                            |  |                           | • u-blox 8 / u-blox M8 protocol versions 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.2, 20. |  |                     |  |
|                   |        |        |                                                                               |         | 3, 22, 22.01, 23 and 23.01 |  |                           |                                                                                         |  |                     |  |
| Type              |        |        | Output                                                                        |         |                            |  |                           |                                                                                         |  |                     |  |
| Comment           |        |        | This message is used to retrieve a unique chip identifier (40 bits, 5 bytes). |         |                            |  |                           |                                                                                         |  |                     |  |
|                   |        | Header |                                                                               | Class   | ID                         |  | Length (Bytes)<br>Payload |                                                                                         |  | Checksum            |  |
| Message Structure |        |        | 0xB5 0x62 0x27 0x03 9                                                         |         |                            |  |                           |                                                                                         |  | see below CK_A CK_B |  |
| Payload Contents: |        |        |                                                                               |         |                            |  |                           |                                                                                         |  |                     |  |
| Byte Offset       | Number |        | Scaling                                                                       | Name    |                            |  | Unit                      | Description                                                                             |  |                     |  |
|                   | Format |        |                                                                               |         |                            |  |                           |                                                                                         |  |                     |  |
| 0                 | U1     |        | -                                                                             | version |                            |  | -                         | Message version (0x01 for this version)                                                 |  |                     |  |
| 1                 | U1[3]  |        | -                                                                             |         | reserved1                  |  | -                         | Reserved                                                                                |  |                     |  |
| 4                 | U1[5]  |        | -                                                                             |         | uniqueId                   |  | -                         | Unique chip ID                                                                          |  |                     |  |

<span id="page-438-0"></span>

## **32.20 UBX-TIM (0x0D)**

Timing Messages: i.e. Time Pulse Output, Time Mark Results.

Messages in the TIM class are used to output timing information from the receiver, like Time Pulse and Time Mark measurements.

## <span id="page-438-1"></span>**32.20.1 UBX-TIM-DOSC (0x0D 0x11)**

## **32.20.1.1 Disciplined oscillator control**

| Message           |        |  | UBX-TIM-DOSC                                                                       |         |           |                                          |                |                                                                                           |         |          |  |
|-------------------|--------|--|------------------------------------------------------------------------------------|---------|-----------|------------------------------------------|----------------|-------------------------------------------------------------------------------------------|---------|----------|--|
| Description       |        |  | Disciplined oscillator control                                                     |         |           |                                          |                |                                                                                           |         |          |  |
| Firmware          |        |  | Supported on:                                                                      |         |           |                                          |                |                                                                                           |         |          |  |
|                   |        |  |                                                                                    |         |           |                                          |                | • u-blox 8 / u-blox M8 protocol versions 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20. |         |          |  |
|                   |        |  | 2, 20.3, 22, 22.01, 23 and 23.01 (only with Time & Frequency Sync products)        |         |           |                                          |                |                                                                                           |         |          |  |
| Type              |        |  | Output                                                                             |         |           |                                          |                |                                                                                           |         |          |  |
| Comment           |        |  | The receiver sends this message when it is disciplining an external oscillator and |         |           |                                          |                |                                                                                           |         |          |  |
|                   |        |  | the external oscillator is set up to be controlled via the host.                   |         |           |                                          |                |                                                                                           |         |          |  |
|                   |        |  | Header                                                                             | Class   | ID        |                                          | Length (Bytes) |                                                                                           | Payload | Checksum |  |
| Message Structure |        |  | 0xB5 0x62 0x0D 0x11<br>8<br>see below CK_A CK_B                                    |         |           |                                          |                |                                                                                           |         |          |  |
| Payload Contents: |        |  |                                                                                    |         |           |                                          |                |                                                                                           |         |          |  |
| Byte Offset       | Number |  | Scaling                                                                            | Name    |           |                                          | Unit           | Description                                                                               |         |          |  |
|                   | Format |  |                                                                                    |         |           |                                          |                |                                                                                           |         |          |  |
| 0                 | U1     |  | -                                                                                  | version |           |                                          | -              | Message version (0x00 for this version)                                                   |         |          |  |
| 1                 | U1[3]  |  | -                                                                                  |         | reserved1 |                                          | -              | Reserved                                                                                  |         |          |  |
| 4                 | U4     |  | -                                                                                  | value   |           |                                          | -              | The raw value to be applied to the DAC                                                    |         |          |  |
|                   |        |  |                                                                                    |         |           | controlling the external oscillator. The |                |                                                                                           |         |          |  |
|                   |        |  | least significant bits should be written to                                        |         |           |                                          |                |                                                                                           |         |          |  |
|                   |        |  |                                                                                    |         |           |                                          |                | the DAC, with the higher bits being                                                       |         |          |  |
|                   |        |  |                                                                                    |         |           |                                          |                | ignored.                                                                                  |         |          |  |

## <span id="page-438-2"></span>**32.20.2 UBX-TIM-FCHG (0x0D 0x16)**

## **32.20.2.1 Oscillator frequency changed notification**

| Message           |        |         | UBX-TIM-FCHG                                                                |         |    |    |                |                                                                                           |         |                     |  |
|-------------------|--------|---------|-----------------------------------------------------------------------------|---------|----|----|----------------|-------------------------------------------------------------------------------------------|---------|---------------------|--|
| Description       |        |         | Oscillator frequency changed notification                                   |         |    |    |                |                                                                                           |         |                     |  |
| Firmware          |        |         | Supported on:                                                               |         |    |    |                |                                                                                           |         |                     |  |
|                   |        |         |                                                                             |         |    |    |                | • u-blox 8 / u-blox M8 protocol versions 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20. |         |                     |  |
|                   |        |         | 2, 20.3, 22, 22.01, 23 and 23.01 (only with Time & Frequency Sync products) |         |    |    |                |                                                                                           |         |                     |  |
| Type              |        |         | Periodic/Polled                                                             |         |    |    |                |                                                                                           |         |                     |  |
| Comment           |        |         | This message reports frequency changes commanded by the sync manager for    |         |    |    |                |                                                                                           |         |                     |  |
|                   |        |         |                                                                             |         |    |    |                | the internal and external oscillator. It is output at the configured rate even if the     |         |                     |  |
|                   |        |         |                                                                             |         |    |    |                | sync manager decides not to command a frequency change.                                   |         |                     |  |
|                   |        |         | Header                                                                      | Class   | ID |    | Length (Bytes) |                                                                                           | Payload | Checksum            |  |
| Message Structure |        |         | 0xB5 0x62 0x0D 0x16                                                         |         |    | 32 |                |                                                                                           |         | see below CK_A CK_B |  |
| Payload Contents: |        |         |                                                                             |         |    |    |                |                                                                                           |         |                     |  |
| Byte Offset       | Number | Scaling |                                                                             | Name    |    |    | Unit           | Description                                                                               |         |                     |  |
|                   | Format |         |                                                                             |         |    |    |                |                                                                                           |         |                     |  |
| 0                 | U1     |         | -                                                                           | version |    |    | -              | Message version (0x00 for this version)                                                   |         |                     |  |

<span id="page-439-1"></span>

#### UBX-TIM-FCHG continued

| Byte Offset | Number | Scaling | Name          | Unit | Description                              |
|-------------|--------|---------|---------------|------|------------------------------------------|
|             | Format |         |               |      |                                          |
| 1           | U1[3]  | -       | reserved1     | -    | Reserved                                 |
| 4           | U4     | -       | iTOW          | ms   | GPS time of week of the navigation epoch |
|             |        |         |               |      | from which the sync manager obtains the  |
|             |        |         |               |      | GNSS specific data.                      |
|             |        |         |               |      | Like for the NAV message, the iTOW can   |
|             |        |         |               |      | be used to group messages of a single    |
|             |        |         |               |      | sync manager run together (See the       |
|             |        |         |               |      | description of iTOW for details)         |
| 8           | I4     | 2^-8    | intDeltaFreq  | ppb  | Frequency increment of the internal      |
|             |        |         |               |      | oscillator                               |
| 12          | U4     | 2^-8    | intDeltaFreqU | ppb  | Uncertainty of the internal oscillator   |
|             |        |         | nc            |      | frequency increment                      |
| 16          | U4     | -       | intRaw        | -    | Current raw DAC setting commanded to     |
|             |        |         |               |      | the internal oscillator                  |
| 20          | I4     | 2^-8    | extDeltaFreq  | ppb  | Frequency increment of the external      |
|             |        |         |               |      | oscillator                               |
| 24          | U4     | 2^-8    | extDeltaFreqU | ppb  | Uncertainty of the external oscillator   |
|             |        |         | nc            |      | frequency increment                      |
| 28          | U4     | -       | extRaw        | -    | Current raw DAC setting commanded to     |
|             |        |         |               |      | the external oscillator                  |

## <span id="page-439-0"></span>**32.20.3 UBX-TIM-HOC (0x0D 0x17)**

## **32.20.3.1 Host oscillator control**

| Message           | UBX-TIM-HOC         |                                                                                     |    |                                                                                           |         |                     |  |  |  |
|-------------------|---------------------|-------------------------------------------------------------------------------------|----|-------------------------------------------------------------------------------------------|---------|---------------------|--|--|--|
| Description       |                     | Host oscillator control                                                             |    |                                                                                           |         |                     |  |  |  |
| Firmware          |                     | Supported on:                                                                       |    |                                                                                           |         |                     |  |  |  |
|                   |                     |                                                                                     |    | • u-blox 8 / u-blox M8 protocol versions 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20. |         |                     |  |  |  |
|                   |                     |                                                                                     |    | 2, 20.3, 22, 22.01, 23 and 23.01 (only with Time & Frequency Sync products)               |         |                     |  |  |  |
| Type              | Input               |                                                                                     |    |                                                                                           |         |                     |  |  |  |
| Comment           |                     |                                                                                     |    | This message can be sent by the host to force the receiver to bypass the                  |         |                     |  |  |  |
|                   |                     |                                                                                     |    | disciplining algorithms in the SMGR and carry out the instructed changes to               |         |                     |  |  |  |
|                   |                     | internal or external oscillator frequency. No checks are carried out on the size of |    |                                                                                           |         |                     |  |  |  |
|                   |                     | the frequency change requested, so normal limits imposed by the SMGR are            |    |                                                                                           |         |                     |  |  |  |
|                   | ignored.            |                                                                                     |    |                                                                                           |         |                     |  |  |  |
|                   |                     |                                                                                     |    | It is recommended that the disciplining of that oscillator is disabled before this        |         |                     |  |  |  |
|                   |                     |                                                                                     |    | message is sent (i.e. by clearing the enableInternal or enableExternal flag in the        |         |                     |  |  |  |
|                   |                     |                                                                                     |    | UBX-CFG-SMGR message), otherwise the autonomous disciplining processes may                |         |                     |  |  |  |
|                   |                     |                                                                                     |    | cancel the effect of the direct command.                                                  |         |                     |  |  |  |
|                   |                     |                                                                                     |    | Note that the GNSS subsystem may temporarily lose track of some/all satellite             |         |                     |  |  |  |
|                   |                     |                                                                                     |    | signals if a large change of the internal oscillator is made.                             |         |                     |  |  |  |
|                   | Header              | Class                                                                               | ID | Length (Bytes)                                                                            | Payload | Checksum            |  |  |  |
| Message Structure | 0xB5 0x62 0x0D 0x17 |                                                                                     |    | 8                                                                                         |         | see below CK_A CK_B |  |  |  |
| Payload Contents: |                     |                                                                                     |    |                                                                                           |         |                     |  |  |  |

<span id="page-440-1"></span>

#### UBX-TIM-HOC continued

| Byte Offset | Number | Scaling | Name      | Unit  | Description                              |
|-------------|--------|---------|-----------|-------|------------------------------------------|
|             | Format |         |           |       |                                          |
| Byte Offset | Number | Scaling | Name      | Unit  | Description                              |
|             | Format |         |           |       |                                          |
| 0           | U1     | -       | version   | -     | Message version (0x00 for this version)  |
| 1           | U1     | -       | oscId     | -     | Id of oscillator:                        |
|             |        |         |           |       | 0: internal oscillator                   |
|             |        |         |           |       | 1: external oscillator                   |
| 2           | U1     | -       | flags     | -     | Flags (see graphic below)                |
| 3           | U1     | -       | reserved1 | -     | Reserved                                 |
| 4           | I4     | 2^-8    | value     | ppb/- | Required frequency offset or raw output, |
|             |        |         |           |       | depending on the flags                   |

## <span id="page-440-2"></span>**Bitfield flags**

This graphic explains the bits of flags



| Name       | Description                      |  |  |  |  |  |  |
|------------|----------------------------------|--|--|--|--|--|--|
| raw        | Type of value:                   |  |  |  |  |  |  |
|            | 0: frequency offset              |  |  |  |  |  |  |
|            | 1: raw digital output            |  |  |  |  |  |  |
| difference | Nature of value:                 |  |  |  |  |  |  |
|            | 0: absolute (i.e. relative to 0) |  |  |  |  |  |  |
|            | 1: relative to current setting   |  |  |  |  |  |  |

## <span id="page-440-0"></span>**32.20.4 UBX-TIM-SMEAS (0x0D 0x13)**

## **32.20.4.1 Source measurement**

| Message     | UBX-TIM-SMEAS                                                                             |
|-------------|-------------------------------------------------------------------------------------------|
| Description | Source measurement                                                                        |
| Firmware    | Supported on:                                                                             |
|             | • u-blox 8 / u-blox M8 protocol versions 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20. |
|             | 2, 20.3, 22, 22.01, 23 and 23.01 (only with Time & Frequency Sync products)               |
| Type        | Input/Output                                                                              |
| Comment     | Frequency and/or phase measurement of synchronization sources. The                        |
|             | measurements are relative to the nominal frequency and nominal phase.                     |
|             | The receiver reports the measurements on its sync sources using this message.             |
|             | Which measurements are reported can be configured using UBX-CFG-SMGR.                     |
|             | The host may report offset of the receiver's outputs with this message as well.           |
|             | The receiver has to be configured using UBX-CFG-SMGR to enable the use of the             |
|             | external measurement messages. Otherwise the receiver will ignore them.                   |



|                                         |        |  | Header              | Class   | ID            |                                        | Length (Bytes)  |                                              | Payload | Checksum            |  |  |
|-----------------------------------------|--------|--|---------------------|---------|---------------|----------------------------------------|-----------------|----------------------------------------------|---------|---------------------|--|--|
| Message Structure                       |        |  | 0xB5 0x62 0x0D 0x13 |         |               |                                        | 12 + 24*numMeas |                                              |         | see below CK_A CK_B |  |  |
| Payload Contents:                       |        |  |                     |         |               |                                        |                 |                                              |         |                     |  |  |
| Byte Offset                             | Number |  | Scaling             | Name    |               |                                        | Unit            | Description                                  |         |                     |  |  |
|                                         | Format |  |                     |         |               |                                        |                 |                                              |         |                     |  |  |
| 0                                       | U1     |  | -                   | version |               |                                        | -               | Message version (0x00 for this version)      |         |                     |  |  |
| 1                                       | U1     |  | -                   | numMeas |               |                                        | -               | Number of measurements in repeated           |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | block                                        |         |                     |  |  |
| 2                                       | U1[2]  |  | -                   |         | reserved1     |                                        | -               | Reserved                                     |         |                     |  |  |
| 4                                       | U4     |  | -                   | iTOW    |               |                                        | ms              | Time of the week                             |         |                     |  |  |
| 8                                       | U1[4]  |  | -                   |         | reserved2     |                                        | -               | Reserved                                     |         |                     |  |  |
| Start of repeated block (numMeas times) |        |  |                     |         |               |                                        |                 |                                              |         |                     |  |  |
| 12 + 24*N                               | U1     |  | -                   |         | sourceId      |                                        | -               | Index of source. SMEAS can provide six       |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | measurement sources. The first four          |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | sourceId values represent measurements       |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | made by the receiver and sent to the host.   |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | The first of these with a sourceId value of  |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | 0 is a measurement of the internal           |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | oscillator against the current receiver      |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | time-and-frequency estimate. The             |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | internal oscillator is being disciplined     |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | against that estimate and this result        |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | represents the current offset between the    |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | actual and desired internal oscillator       |         |                     |  |  |
|                                         |        |  |                     |         |               | states. The next three sourceId values |                 |                                              |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | represent frequency and time                 |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | measurements made by the receiver            |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | against the internal oscillator. sourceId 1  |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | represents the GNSS-derived frequency        |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | and time compared with the internal          |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | oscillator frequency and time. sourceId2     |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | give measurements of a signal coming in      |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | on EXTINT0. sourceId 3 corresponds to a      |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | similar measurement on EXTINT1. The          |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | remaining two of these measurements          |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | (sourceId 4 and 5) are made by the host      |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | and sent to the receiver. A measurement      |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | with sourceId 4 is a measurement by the      |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | host of the internal oscillator and sourceId |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | 5 indicates a host measurement of the        |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | external oscillator.                         |         |                     |  |  |
| 13 + 24*N                               | X1     |  | -                   | flags   |               |                                        | -               | Flags (see graphic below)                    |         |                     |  |  |
| 14 + 24*N                               | I1     |  | 2^-8                |         | phaseOffsetFr |                                        | ns              | Sub-nanosecond phase offset; the total       |         |                     |  |  |
|                                         |        |  |                     | ac      |               |                                        |                 | offset is the sum of phaseOffset and         |         |                     |  |  |
|                                         |        |  |                     |         |               |                                        |                 | phaseOffsetFrac                              |         |                     |  |  |
| 15 + 24*N                               | U1     |  | 2^-8                |         | phaseUncFrac  |                                        | ns              | Sub-nanosecond phase uncertainty             |         |                     |  |  |

<span id="page-442-1"></span>

#### UBX-TIM-SMEAS continued

| Byte Offset           | Number | Scaling | Name        | Unit | Description                               |
|-----------------------|--------|---------|-------------|------|-------------------------------------------|
|                       | Format |         |             |      |                                           |
| 16 + 24*N             | I4     | -       | phaseOffset | ns   | Phase offset, positive if the source lags |
|                       |        |         |             |      | accurate phase and negative if the source |
|                       |        |         |             |      | is early                                  |
| 20 + 24*N             | U4     | -       | phaseUnc    | ns   | Phase uncertainty (one standard           |
|                       |        |         |             |      | deviation)                                |
| 24 + 24*N             | U1[4]  | -       | reserved3   | -    | Reserved                                  |
| 28 + 24*N             | I4     | 2^-8    | freqOffset  | ppb  | Frequency offset, positive if the source  |
|                       |        |         |             |      | frequency is too high, negative if the    |
|                       |        |         |             |      | frequency is too low.                     |
| 32 + 24*N             | U4     | 2^-8    | freqUnc     | ppb  | Frequency uncertainty (one standard       |
|                       |        |         |             |      | deviation)                                |
| End of repeated block |        |         |             |      |                                           |

## <span id="page-442-2"></span>**Bitfield flags**

This graphic explains the bits of flags



| Name       | Description                        |
|------------|------------------------------------|
| freqValid  | 1 = frequency measurement is valid |
| phaseValid | 1 = phase measurement is valid     |

## <span id="page-442-0"></span>**32.20.5 UBX-TIM-SVIN (0x0D 0x04)**

## **32.20.5.1 Survey-in data**

| Message           |                 |                                                  | UBX-TIM-SVIN        |       |                        |                           |   |                                                                                            |          |                     |  |  |  |
|-------------------|-----------------|--------------------------------------------------|---------------------|-------|------------------------|---------------------------|---|--------------------------------------------------------------------------------------------|----------|---------------------|--|--|--|
| Description       |                 |                                                  | Survey-in data      |       |                        |                           |   |                                                                                            |          |                     |  |  |  |
| Firmware          |                 |                                                  | Supported on:       |       |                        |                           |   |                                                                                            |          |                     |  |  |  |
|                   |                 |                                                  |                     |       |                        |                           |   | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |          |                     |  |  |  |
|                   |                 |                                                  |                     |       |                        |                           |   | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 (only with Time & Frequency Sync or              |          |                     |  |  |  |
|                   |                 |                                                  | Time Sync products) |       |                        |                           |   |                                                                                            |          |                     |  |  |  |
| Type              | Periodic/Polled |                                                  |                     |       |                        |                           |   |                                                                                            |          |                     |  |  |  |
| Comment           |                 |                                                  |                     |       |                        |                           |   | This message contains information about survey-in parameters. For details                  |          |                     |  |  |  |
|                   |                 |                                                  |                     |       |                        |                           |   | about the Time mode see section Time mode configuration.                                   |          |                     |  |  |  |
|                   |                 | Header                                           |                     | Class | ID                     | Length (Bytes)<br>Payload |   |                                                                                            | Checksum |                     |  |  |  |
| Message Structure |                 |                                                  |                     |       | 0xB5 0x62 0x0D 0x04 28 |                           |   |                                                                                            |          | see below CK_A CK_B |  |  |  |
| Payload Contents: |                 |                                                  |                     |       |                        |                           |   |                                                                                            |          |                     |  |  |  |
| Byte Offset       |                 | Number<br>Scaling<br>Name<br>Unit<br>Description |                     |       |                        |                           |   |                                                                                            |          |                     |  |  |  |
|                   | Format          |                                                  |                     |       |                        |                           |   |                                                                                            |          |                     |  |  |  |
| 0                 | U4              |                                                  | -                   | dur   |                        |                           | s | Passed survey-in observation time                                                          |          |                     |  |  |  |

<span id="page-443-1"></span>

#### UBX-TIM-SVIN continued

| Byte Offset | Number | Scaling | Name      | Unit | Description                                  |
|-------------|--------|---------|-----------|------|----------------------------------------------|
|             | Format |         |           |      |                                              |
| 4           | I4     | -       | meanX     | cm   | Current survey-in mean position ECEF X       |
|             |        |         |           |      | coordinate                                   |
| 8           | I4     | -       | meanY     | cm   | Current survey-in mean position ECEF Y       |
|             |        |         |           |      | coordinate                                   |
| 12          | I4     | -       | meanZ     | cm   | Current survey-in mean position ECEF Z       |
|             |        |         |           |      | coordinate                                   |
| 16          | U4     | -       | meanV     | mm^2 | Current survey-in mean position 3D           |
|             |        |         |           |      | variance                                     |
| 20          | U4     | -       | obs       | -    | Number of position observations used         |
|             |        |         |           |      | during survey-in                             |
| 24          | U1     | -       | valid     | -    | Survey-in position validity flag, 1 = valid, |
|             |        |         |           |      | otherwise 0                                  |
| 25          | U1     | -       | active    | -    | Survey-in in progress flag, 1 = in-progress, |
|             |        |         |           |      | otherwise 0                                  |
| 26          | U1[2]  | -       | reserved1 | -    | Reserved                                     |

## <span id="page-443-0"></span>**32.20.6 UBX-TIM-TM2 (0x0D 0x03)**

## **32.20.6.1 Time mark data**

| Message           |                 | UBX-TIM-TM2                                                    |                                           |           |        |  |    |                                                                                            |  |                     |  |
|-------------------|-----------------|----------------------------------------------------------------|-------------------------------------------|-----------|--------|--|----|--------------------------------------------------------------------------------------------|--|---------------------|--|
| Description       |                 |                                                                | Time mark data                            |           |        |  |    |                                                                                            |  |                     |  |
| Firmware          |                 |                                                                | Supported on:                             |           |        |  |    |                                                                                            |  |                     |  |
|                   |                 |                                                                |                                           |           |        |  |    | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |                     |  |
|                   |                 |                                                                | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |           |        |  |    |                                                                                            |  |                     |  |
| Type              | Periodic/Polled |                                                                |                                           |           |        |  |    |                                                                                            |  |                     |  |
| Comment           |                 |                                                                |                                           |           |        |  |    | This message contains information for high precision time stamping / pulse                 |  |                     |  |
|                   |                 |                                                                | counting.                                 |           |        |  |    |                                                                                            |  |                     |  |
|                   |                 |                                                                |                                           |           |        |  |    | The delay figures and timebase given in UBX-CFG-TP5 are also applied to the                |  |                     |  |
|                   |                 |                                                                | time results output in this message.      |           |        |  |    |                                                                                            |  |                     |  |
|                   |                 | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload<br>Checksum |                                           |           |        |  |    |                                                                                            |  |                     |  |
| Message Structure |                 |                                                                | 0xB5 0x62 0x0D 0x03 28                    |           |        |  |    |                                                                                            |  | see below CK_A CK_B |  |
| Payload Contents: |                 |                                                                |                                           |           |        |  |    |                                                                                            |  |                     |  |
| Byte Offset       | Number          |                                                                | Scaling                                   |           | Name   |  |    | Description                                                                                |  |                     |  |
|                   | Format          |                                                                |                                           |           |        |  |    |                                                                                            |  |                     |  |
| 0                 | U1              |                                                                | -                                         | ch        |        |  | -  | Channel (i.e. EXTINT) upon which the                                                       |  |                     |  |
|                   |                 |                                                                |                                           |           |        |  |    | pulse was measured                                                                         |  |                     |  |
| 1                 | X1              |                                                                | -                                         | flags     |        |  | -  | Bitmask (see graphic below)                                                                |  |                     |  |
| 2                 | U2              |                                                                | -                                         | count     |        |  | -  | Rising edge counter                                                                        |  |                     |  |
| 4                 | U2              |                                                                | -                                         | wnR       |        |  | -  | Week number of last rising edge                                                            |  |                     |  |
| 6                 | U2<br>-         |                                                                |                                           |           |        |  | -  | Week number of last falling edge                                                           |  |                     |  |
| 8                 | U4<br>-         |                                                                |                                           |           | towMsR |  | ms | Tow of rising edge                                                                         |  |                     |  |
| 12                | U4<br>-         |                                                                |                                           | towSubMsR |        |  | ns | Millisecond fraction of tow of rising edge                                                 |  |                     |  |
|                   |                 |                                                                |                                           |           |        |  |    | in nanoseconds                                                                             |  |                     |  |
| 16                | U4              |                                                                | -                                         | towMsF    |        |  | ms | Tow of falling edge                                                                        |  |                     |  |

<span id="page-444-1"></span>

UBX-TIM-TM2 continued

| Byte Offset | Number | Scaling | Name      | Unit | Description                                 |
|-------------|--------|---------|-----------|------|---------------------------------------------|
|             | Format |         |           |      |                                             |
| 20          | U4     | -       | towSubMsF | ns   | Millisecond fraction of tow of falling edge |
|             |        |         |           |      | in nanoseconds                              |
| 24          | U4     | -       | accEst    | ns   | Accuracy estimate                           |

## <span id="page-444-2"></span>**Bitfield flags**

This graphic explains the bits of flags



| Name          | Description                                                                                     |
|---------------|-------------------------------------------------------------------------------------------------|
| mode          | 0=single                                                                                        |
|               | 1=running                                                                                       |
| run           | 0=armed                                                                                         |
|               | 1=stopped                                                                                       |
| newFallingEdg | New falling edge detected                                                                       |
| e             |                                                                                                 |
| timeBase      | 0=Time base is Receiver time                                                                    |
|               | 1=Time base is GNSS time (the system according to the configuration in UBX-CFG-TP5 for tpIdx=0) |
|               | 2=Time base is UTC (the variant according to the configuration in UBX-CFG-NAV5)                 |
| utc           | 0=UTC not available                                                                             |
|               | 1=UTC available                                                                                 |
| time          | 0=Time is not valid                                                                             |
|               | 1=Time is valid (Valid GNSS fix)                                                                |
| newRisingEdge | New rising edge detected                                                                        |

## <span id="page-444-0"></span>**32.20.7 UBX-TIM-TOS (0x0D 0x12)**

## **32.20.7.1 Time pulse time and frequency data**

| Message     | UBX-TIM-TOS                                                                               |
|-------------|-------------------------------------------------------------------------------------------|
| Description | Time pulse time and frequency data                                                        |
| Firmware    | Supported on:                                                                             |
|             | • u-blox 8 / u-blox M8 protocol versions 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20. |
|             | 2, 20.3, 22, 22.01, 23 and 23.01 (only with Time & Frequency Sync products)               |
| Type        | Periodic                                                                                  |
| Comment     | This message contains information about the time pulse that has just happened             |
|             | and the state of the disciplined oscillators(s) at the time of the pulse. It gives the    |
|             | UTC and GNSS times and time uncertainty of the pulse together with frequency              |
|             | and frequency uncertainty of the disciplined oscillators. It also supplies leap           |
|             | second information.                                                                       |



|                   |            |  | Header              | Class     | ID           |               | Length (Bytes) |                                           | Payload | Checksum            |  |  |
|-------------------|------------|--|---------------------|-----------|--------------|---------------|----------------|-------------------------------------------|---------|---------------------|--|--|
| Message Structure |            |  | 0xB5 0x62 0x0D 0x12 |           |              | 56            |                |                                           |         | see below CK_A CK_B |  |  |
| Payload Contents: |            |  |                     |           |              |               |                |                                           |         |                     |  |  |
| Byte Offset       | Number     |  | Scaling             | Name      |              |               | Unit           | Description                               |         |                     |  |  |
|                   | Format     |  |                     |           |              |               |                |                                           |         |                     |  |  |
| 0                 | U1         |  | -                   | version   |              |               | -              | Message version (0x00 for this version)   |         |                     |  |  |
| 1                 | U1         |  | -                   | gnssId    |              |               | -              | GNSS system used for reporting GNSS       |         |                     |  |  |
|                   |            |  |                     |           |              |               |                | time (see Satellite Numbering)            |         |                     |  |  |
| 2                 | U1[2]      |  | -                   | reserved1 |              |               | -              | Reserved                                  |         |                     |  |  |
| 4                 | X4         |  | -                   | flags     |              |               | -              | Flags (see graphic below)                 |         |                     |  |  |
| 8                 | U2         |  | -                   | year      |              |               | y              | Year of UTC time                          |         |                     |  |  |
| 10                | U1         |  | -                   | month     |              |               | month          | Month of UTC time                         |         |                     |  |  |
| 11                | U1<br>-    |  |                     | day       |              |               | d              | Day of UTC time                           |         |                     |  |  |
| 12                | U1<br>-    |  |                     | hour      |              |               | h              | Hour of UTC time                          |         |                     |  |  |
| 13                | U1<br>-    |  |                     |           | minute       |               | min            | Minute of UTC time                        |         |                     |  |  |
| 14                | U1         |  | -                   | second    |              |               | s              | Second of UTC time                        |         |                     |  |  |
| 15                | U1<br>-    |  |                     |           | utcStandard  |               | -              | UTC standard identifier:                  |         |                     |  |  |
|                   |            |  |                     |           |              |               |                | 0: unknown                                |         |                     |  |  |
|                   |            |  |                     |           |              |               |                | 3: UTC as operated by the U.S. Naval      |         |                     |  |  |
|                   |            |  |                     |           |              |               |                | Observatory (USNO)                        |         |                     |  |  |
|                   |            |  |                     |           |              |               |                | 6: UTC as operated by the former Soviet   |         |                     |  |  |
|                   |            |  |                     |           |              |               |                | Union                                     |         |                     |  |  |
|                   |            |  |                     |           |              |               |                | 7: UTC as operated by the National Time   |         |                     |  |  |
|                   |            |  |                     |           |              |               |                | Service Center (NTSC), China              |         |                     |  |  |
| 16                | I4         |  | -                   |           | utcOffset    |               | ns             | Time offset between the preceding pulse   |         |                     |  |  |
|                   |            |  |                     |           |              |               |                | and UTC top of second                     |         |                     |  |  |
| 20                | U4         |  | -                   |           |              | utcUncertaint | ns             | Uncertainty of utcOffset                  |         |                     |  |  |
|                   |            |  |                     | y         |              |               |                |                                           |         |                     |  |  |
| 24                | U4         |  | -                   | week      |              |               | -              | GNSS week number                          |         |                     |  |  |
| 28                | U4         |  | -                   | TOW       |              |               | s              | GNSS time of week                         |         |                     |  |  |
| 32                | I4         |  | -                   |           | gnssOffset   |               | ns             | Time offset between the preceding pulse   |         |                     |  |  |
|                   |            |  |                     |           |              |               |                | and GNSS top of second                    |         |                     |  |  |
| 36                | U4         |  | -                   |           |              | gnssUncertain | ns             | Uncertainty of gnssOffset                 |         |                     |  |  |
|                   |            |  |                     | ty        |              |               |                |                                           |         |                     |  |  |
| 40                | I4<br>2^-8 |  |                     |           | intOscOffset |               | ppb            | Internal oscillator frequency offset      |         |                     |  |  |
| 44                | U4<br>2^-8 |  |                     |           |              | intOscUncerta | ppb            | Internal oscillator frequency uncertainty |         |                     |  |  |
|                   |            |  |                     | inty      |              |               |                |                                           |         |                     |  |  |
| 48                | I4<br>2^-8 |  |                     |           | extOscOffset |               | ppb            | External oscillator frequency offset      |         |                     |  |  |
| 52                | U4         |  | 2^-8                |           |              | extOscUncerta | ppb            | External oscillator frequency uncertainty |         |                     |  |  |
|                   |            |  |                     | inty      |              |               |                |                                           |         |                     |  |  |

<span id="page-446-1"></span>

## <span id="page-446-2"></span>**Bitfield flags**

This graphic explains the bits of flags

|  |  |  |  |  |  |  |  |  | 13                                                             |                                                    | 11          | 10                     | 9 | 8 |                                                    | 6                                                                            | 5                                                                           | 4                                                                   | з                                                                                |                                                                              |                                                 | 0                                  |
|--|--|--|--|--|--|--|--|--|----------------------------------------------------------------|----------------------------------------------------|-------------|------------------------|---|---|----------------------------------------------------|------------------------------------------------------------------------------|-----------------------------------------------------------------------------|---------------------------------------------------------------------|----------------------------------------------------------------------------------|------------------------------------------------------------------------------|-------------------------------------------------|------------------------------------|
|  |  |  |  |  |  |  |  |  | 8<br>$\overline{\phantom{0}}$<br>v<br>$\overline{\phantom{0}}$ | ഄ<br>Ø<br>$\overline{\phantom{0}}$<br>ō<br>$\circ$ | ε<br>İ<br>呕 | ٥<br>s.<br>Ė<br>$\Box$ |   |   | İ<br>$\overline{\phantom{0}}$<br>Æ,<br>⋗<br>ε<br>⊣ | İ<br>$\overline{\phantom{0}}$<br>ඟ<br>⋗<br>w<br>ε<br>Ė<br>–<br>ø<br>竺<br>ñο. | İ<br>ε<br>$\overline{a}$<br>$\mathbf{\mathbf{H}}$<br>٥<br>ø<br>▭<br>↩<br>йi | Έ<br>$\overline{a}$<br>≂<br>$\overline{a}$<br>٥<br>ø<br>ő<br>د<br>∽ | i<br>ε<br>$\overline{a}$<br>$\overline{\phantom{0}}$<br>왙<br>$\overline{a}$<br>↩ | Φ<br>İ<br>ىد<br>Ė<br>ø<br>ö<br>Ω.<br>Ω<br>心<br>Φ<br>$\overline{\phantom{0}}$ | s.<br>Ω<br>4U<br>Ф.<br>$\overline{\phantom{0}}$ | eapNow<br>$\overline{\phantom{0}}$ |

| Name          | Description                                                                                       |
|---------------|---------------------------------------------------------------------------------------------------|
| leapNow       | 1 = currently in a leap second                                                                    |
| leapSoon      | 1 = leap second scheduled in current minute                                                       |
| leapPositive  | 1 = positive leap second                                                                          |
| timeInLimit   | 1 = time pulse is within tolerance limit (UBX-CFG-SMGR timeTolerance field)                       |
| intOscInLimit | 1 = internal oscillator is within tolerance limit (UBX-CFG-SMGR freqTolerance field)              |
| extOscInLimit | 1 = external oscillator is within tolerance limit (UBX-CFG-SMGR freqTolerance field)              |
| gnssTimeValid | 1 = GNSS time is valid                                                                            |
| UTCTimeValid  | 1 = UTC time is valid                                                                             |
| DiscSrc       | Disciplining source identifier:                                                                   |
|               | 0: internal oscillator                                                                            |
|               | 1: GNSS                                                                                           |
|               | 2: EXTINT0                                                                                        |
|               | 3: EXTINT1                                                                                        |
|               | 4: internal oscillator measured by the host                                                       |
|               | 5: external oscillator measured by the host                                                       |
| raim          | 1 = (T)RAIM system is currently active. Note this flag only reports the current state of the GNSS |
|               | solution; it is not affected by whether or not the GNSS solution is being used to discipline the  |
|               | oscillator.                                                                                       |
| cohPulse      | 1 = coherent pulse generation is currently in operation                                           |
| lockedPulse   | 1 = time pulse is locked                                                                          |

## <span id="page-446-0"></span>**32.20.8 UBX-TIM-TP (0x0D 0x01)**

## **32.20.8.1 Time pulse time data**

| Message     | UBX-TIM-TP                                                                                 |
|-------------|--------------------------------------------------------------------------------------------|
| Description | Time pulse time data                                                                       |
| Firmware    | Supported on:                                                                              |
|             | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |
|             | 20.1, 20.2, 20.3 and 22                                                                    |
| Type        | Periodic/Polled                                                                            |
| Comment     | This message contains information on the timing of the next pulse at the                   |
|             | TIMEPULSE0 output. The recommended configuration when using this                           |
|             | message is to set both the measurement rate (UBX-CFG-RATE) and the                         |
|             | timepulse frequency (UBX-CFG-TP5) to 1 Hz.                                                 |
|             | For more information see section Time pulse.                                               |
|             | TIMEPULSE0 and this message are not available from DR products using the                   |
|             | dedicated I2C sensor interface, including NEO-M8L and NEO-M8U modules                      |



#### u-blox 8 / u-blox M8 Receiver description - Manual

|                        |         |         | Header                 | Class   | ID       |   | Length (Bytes)            |                                           | Payload | Checksum            |  |  |
|------------------------|---------|---------|------------------------|---------|----------|---|---------------------------|-------------------------------------------|---------|---------------------|--|--|
| Message Structure      |         |         | 0xB5 0x62 0x0D 0x01 16 |         |          |   |                           |                                           |         | see below CK_A CK_B |  |  |
| Payload Contents:      |         |         |                        |         |          |   |                           |                                           |         |                     |  |  |
| Byte Offset            | Number  | Scaling |                        | Name    |          |   | Unit                      | Description                               |         |                     |  |  |
|                        | Format  |         |                        |         |          |   |                           |                                           |         |                     |  |  |
| 0                      | U4<br>- |         |                        |         | towMS    |   |                           | Time pulse time of week according to time |         |                     |  |  |
|                        |         |         |                        |         |          |   |                           | base                                      |         |                     |  |  |
| 4                      | U4      |         | 2^-32                  |         | towSubMS |   | ms                        | Submillisecond part of towMS              |         |                     |  |  |
| 8                      | I4      |         | -                      | qErr    |          |   | ps                        | Quantization error of time pulse          |         |                     |  |  |
| 12                     | U2      |         | -                      | week    |          |   | weeks                     | Time pulse week number according to       |         |                     |  |  |
|                        |         |         |                        |         |          |   |                           | time base                                 |         |                     |  |  |
| flags<br>14<br>X1<br>- |         |         |                        |         |          | - | Flags (see graphic below) |                                           |         |                     |  |  |
| 15<br>X1<br>-          |         |         |                        | refInfo |          |   | -                         | Time reference information (see graphic   |         |                     |  |  |
|                        |         |         |                        |         |          |   | below)                    |                                           |         |                     |  |  |

## <span id="page-447-0"></span>**Bitfield flags**



| Name        | Description                                                                         |
|-------------|-------------------------------------------------------------------------------------|
| timeBase    | 0 = Time base is GNSS                                                               |
|             | 1 = Time base is UTC                                                                |
| utc         | 0 = UTC not available                                                               |
|             | 1 = UTC available                                                                   |
| raim        | (T)RAIM information                                                                 |
|             | 0 = Information not available                                                       |
|             | 1 = Not active                                                                      |
|             | 2 = Active                                                                          |
| qErrInvalid | 0 = Quantization error valid                                                        |
|             | 1 = Quantization error invalid                                                      |
| TpNotLocked | 0 = Next TP is locked to GNSS                                                       |
|             | 1 = Next TP is based on local time and not locked to GNSS - week/tow may be invalid |

<span id="page-448-1"></span>

## **Bitfield refInfo**

<span id="page-448-2"></span>This graphic explains the bits of refInfo



| Name        | Description                                                               |  |  |  |  |  |  |  |  |
|-------------|---------------------------------------------------------------------------|--|--|--|--|--|--|--|--|
| timeRefGnss | GNSS reference information. Only valid if time base is GNSS (timeBase=0). |  |  |  |  |  |  |  |  |
|             | 0 = GPS                                                                   |  |  |  |  |  |  |  |  |
|             | 1 = GLONASS                                                               |  |  |  |  |  |  |  |  |
|             | 2 = BeiDou                                                                |  |  |  |  |  |  |  |  |
|             | 3 = Galileo                                                               |  |  |  |  |  |  |  |  |
|             | 4 = NavIC                                                                 |  |  |  |  |  |  |  |  |
|             | 15 = Unknown                                                              |  |  |  |  |  |  |  |  |
| utcStandard | UTC standard identifier. Only valid if time base is UTC (timeBase=1).     |  |  |  |  |  |  |  |  |
|             | 0 = Information not available                                             |  |  |  |  |  |  |  |  |
|             | 1 = Communications Research Laboratory (CRL), Tokyo, Japan                |  |  |  |  |  |  |  |  |
|             | 2 = National Institute of Standards and Technology (NIST)                 |  |  |  |  |  |  |  |  |
|             | 3 = U.S. Naval Observatory (USNO)                                         |  |  |  |  |  |  |  |  |
|             | 4 = International Bureau of Weights and Measures (BIPM)                   |  |  |  |  |  |  |  |  |
|             | 5 = European laboratories                                                 |  |  |  |  |  |  |  |  |
|             | 6 = Former Soviet Union (SU)                                              |  |  |  |  |  |  |  |  |
|             | 7 = National Time Service Center (NTSC), China                            |  |  |  |  |  |  |  |  |
|             | 8 = National Physics Laboratory India (NPLI)                              |  |  |  |  |  |  |  |  |
|             | 15 = Unknown                                                              |  |  |  |  |  |  |  |  |

## <span id="page-448-0"></span>**32.20.9 UBX-TIM-VCOCAL (0x0D 0x15)**

## **32.20.9.1 Stop calibration**

| Message                                                                     |         |                                                  | UBX-TIM-VCOCAL      |       |      |                          |                |                                                                                           |         |          |  |
|-----------------------------------------------------------------------------|---------|--------------------------------------------------|---------------------|-------|------|--------------------------|----------------|-------------------------------------------------------------------------------------------|---------|----------|--|
| Description                                                                 |         |                                                  | Stop calibration    |       |      |                          |                |                                                                                           |         |          |  |
| Firmware                                                                    |         |                                                  | Supported on:       |       |      |                          |                |                                                                                           |         |          |  |
|                                                                             |         |                                                  |                     |       |      |                          |                | • u-blox 8 / u-blox M8 protocol versions 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20. |         |          |  |
| 2, 20.3, 22, 22.01, 23 and 23.01 (only with Time & Frequency Sync products) |         |                                                  |                     |       |      |                          |                |                                                                                           |         |          |  |
| Type                                                                        | Command |                                                  |                     |       |      |                          |                |                                                                                           |         |          |  |
| Comment                                                                     |         |                                                  |                     |       |      |                          |                | Stop all ongoing calibration (both oscillators are affected)                              |         |          |  |
|                                                                             |         | Header                                           |                     | Class | ID   |                          | Length (Bytes) |                                                                                           | Payload | Checksum |  |
| Message Structure                                                           |         |                                                  | 0xB5 0x62 0x0D 0x15 |       |      | 1<br>see below CK_A CK_B |                |                                                                                           |         |          |  |
| Payload Contents:                                                           |         |                                                  |                     |       |      |                          |                |                                                                                           |         |          |  |
| Byte Offset                                                                 |         | Number<br>Scaling<br>Name<br>Unit<br>Description |                     |       |      |                          |                |                                                                                           |         |          |  |
|                                                                             | Format  |                                                  |                     |       |      |                          |                |                                                                                           |         |          |  |
| 0                                                                           | U1<br>- |                                                  |                     |       | type |                          |                | Message type (0 for this message)                                                         |         |          |  |

<span id="page-449-0"></span>

| Message           |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                  | UBX-TIM-VCOCAL |    |                                                                                  |                |                                                                                                                                                                          |         |                     |  |
|-------------------|------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|----------------|----|----------------------------------------------------------------------------------|----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|---------------------|--|
| Description       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | VCO calibration extended command |                |    |                                                                                  |                |                                                                                                                                                                          |         |                     |  |
| Firmware          |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Supported on:                    |                |    |                                                                                  |                | • u-blox 8 / u-blox M8 protocol versions 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20.<br>2, 20.3, 22, 22.01, 23 and 23.01 (only with Time & Frequency Sync products) |         |                     |  |
| Type              |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Command                          |                |    |                                                                                  |                |                                                                                                                                                                          |         |                     |  |
| Comment           |                  | Calibrate (measure) gain of the voltage controlled oscillator. The calibration is<br>performed by varying the raw oscillator control values between the limits<br>specified in raw0 and raw1. maxStepSize is the largest step change that can be<br>used during the calibration process. The "raw values" are either PWM duty cycle<br>values or DAC values depending on how the VCTCXO is connected to the<br>system. The measured gain is the transfer function<br>dRelativeFrequencyChange/dRaw (not dFrequency/dVoltage). The calibration<br>process works as follows:<br>Starting from the current raw output the control value is changed in the<br>direction of raw0 in steps of size at most maxStepSize. Then the frequency is<br>measured and the control value is changed towards raw1, again in steps of<br>maxStepSize. When raw1 is reached, the frequency is again measured and the<br>message version DATA0 is output containing the measured result. Normal<br>operation then resumes. If the control value movement is less than maxStepSize<br>then the transition will happen in one step - this will give fast calibration.<br>Care must be taken when calibrating the internal oscillator against the GNSS<br>source. In that case the changes applied to the oscillator frequency could be<br>severe enough to lose satellite signal tracking, especially when signals are weak.<br>If too many signals are lost, the GNSS system will lose its fix and be unable to<br>measure the oscillator frequency - the calibration will then fail. In this case<br>maxStepSize must be reasonably small.<br>It is also important that only the chosen frequency source is enabled during the<br>calibration process and that it remains stable throughout the calibration period;<br>otherwise incorrect oscillator measurements will be made and this will lead to<br>miscalibration and poor subsequent operation of the receiver. |                                  |                |    |                                                                                  |                |                                                                                                                                                                          |         |                     |  |
|                   |                  | Header                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                  | Class          | ID |                                                                                  | Length (Bytes) |                                                                                                                                                                          | Payload | Checksum            |  |
| Message Structure |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 0xB5 0x62 0x0D 0x15              |                |    | 12                                                                               |                |                                                                                                                                                                          |         | see below CK_A CK_B |  |
| Payload Contents: |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                  |                |    |                                                                                  |                |                                                                                                                                                                          |         |                     |  |
| Byte Offset       | Number<br>Format |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Scaling                          | Name           |    |                                                                                  | Unit           | Description                                                                                                                                                              |         |                     |  |
| 0                 | U1               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | -                                | type           |    |                                                                                  | -              | Message type (2 for this message)                                                                                                                                        |         |                     |  |
| 1                 | U1               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | -                                | version        |    |                                                                                  | -              | Message version (0x00 for this version)                                                                                                                                  |         |                     |  |
| 2                 | U1<br>-          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | oscId                            |                | -  | Oscillator to be calibrated:<br>0: internal oscillator<br>1: external oscillator |                |                                                                                                                                                                          |         |                     |  |

## **32.20.9.2 VCO calibration extended command**

<span id="page-450-0"></span>

UBX-TIM-VCOCAL continued

| Byte Offset | Number | Scaling | Name        | Unit   | Description                                 |
|-------------|--------|---------|-------------|--------|---------------------------------------------|
|             | Format |         |             |        |                                             |
| 3           | U1     | -       | srcId       | -      | Reference source:                           |
|             |        |         |             |        | 0: internal oscillator                      |
|             |        |         |             |        | 1: GNSS                                     |
|             |        |         |             |        | 2: EXTINT0                                  |
|             |        |         |             |        | 3: EXTINT1                                  |
|             |        |         |             |        | Option 0 should be used when calibrating    |
|             |        |         |             |        | the external oscillator. Options 1-3 should |
|             |        |         |             |        | be used when calibrating the internal       |
|             |        |         |             |        | oscillator.                                 |
| 4           | U1[2]  | -       | reserved1   | -      | Reserved                                    |
| 6           | U2     | -       | raw0        | -      | First value used for calibration            |
| 8           | U2     | -       | raw1        | -      | Second value used for calibration           |
| 10          | U2     | -       | maxStepSize | raw    | Maximum step size to be used                |
|             |        |         |             | value/ |                                             |
|             |        |         |             | s      |                                             |

## **32.20.9.3 Results of the calibration**

| Message                                                                               |        | UBX-TIM-VCOCAL |                                                                                  |                           |           |                        |                                              |                                                                                           |         |                     |  |  |  |
|---------------------------------------------------------------------------------------|--------|----------------|----------------------------------------------------------------------------------|---------------------------|-----------|------------------------|----------------------------------------------|-------------------------------------------------------------------------------------------|---------|---------------------|--|--|--|
| Description                                                                           |        |                | Results of the calibration                                                       |                           |           |                        |                                              |                                                                                           |         |                     |  |  |  |
| Firmware                                                                              |        |                | Supported on:                                                                    |                           |           |                        |                                              |                                                                                           |         |                     |  |  |  |
|                                                                                       |        |                |                                                                                  |                           |           |                        |                                              | • u-blox 8 / u-blox M8 protocol versions 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, 20.1, 20. |         |                     |  |  |  |
|                                                                                       |        |                |                                                                                  |                           |           |                        |                                              | 2, 20.3, 22, 22.01, 23 and 23.01 (only with Time & Frequency Sync products)               |         |                     |  |  |  |
| Type                                                                                  |        |                | Periodic/Polled                                                                  |                           |           |                        |                                              |                                                                                           |         |                     |  |  |  |
| Comment                                                                               |        |                |                                                                                  |                           |           |                        |                                              | This message is sent when the oscillator gain calibration process is finished             |         |                     |  |  |  |
| (successful or unsuccessful). It notifies the user of the calibrated oscillator gain. |        |                |                                                                                  |                           |           |                        |                                              |                                                                                           |         |                     |  |  |  |
| If the oscillator gain calibration process was successful, this message will          |        |                |                                                                                  |                           |           |                        |                                              |                                                                                           |         |                     |  |  |  |
| contain the measured gain (field gainVco) and its uncertainty (field                  |        |                |                                                                                  |                           |           |                        |                                              |                                                                                           |         |                     |  |  |  |
|                                                                                       |        |                | gainUncertainty). The calibration process can however fail. In that case the two |                           |           |                        |                                              |                                                                                           |         |                     |  |  |  |
|                                                                                       |        |                |                                                                                  |                           |           |                        |                                              | fields gainVco and gainUncertainty are set to zero.                                       |         |                     |  |  |  |
|                                                                                       |        |                | Header                                                                           | Class                     | ID        |                        | Length (Bytes)                               |                                                                                           | Payload | Checksum            |  |  |  |
| Message Structure                                                                     |        |                |                                                                                  | 0xB5 0x62 0x0D 0x15<br>12 |           |                        |                                              |                                                                                           |         | see below CK_A CK_B |  |  |  |
| Payload Contents:                                                                     |        |                |                                                                                  |                           |           |                        |                                              |                                                                                           |         |                     |  |  |  |
| Byte Offset                                                                           | Number |                | Scaling                                                                          | Name                      |           |                        | Unit                                         | Description                                                                               |         |                     |  |  |  |
|                                                                                       | Format |                |                                                                                  |                           |           |                        |                                              |                                                                                           |         |                     |  |  |  |
| 0                                                                                     | U1     |                | -                                                                                | type                      |           |                        | -                                            | Message type (3 for this message)                                                         |         |                     |  |  |  |
| 1                                                                                     | U1     |                | -                                                                                | version                   |           |                        | -                                            | Message version (0x00 for this version)                                                   |         |                     |  |  |  |
| 2                                                                                     | U1     |                | -                                                                                | oscId                     |           |                        | -                                            | Id of oscillator:                                                                         |         |                     |  |  |  |
|                                                                                       |        |                |                                                                                  |                           |           | 0: internal oscillator |                                              |                                                                                           |         |                     |  |  |  |
|                                                                                       |        |                |                                                                                  |                           |           |                        | 1: external oscillator                       |                                                                                           |         |                     |  |  |  |
| 3                                                                                     | U1[3]  |                | -                                                                                |                           | reserved1 |                        | -                                            | Reserved                                                                                  |         |                     |  |  |  |
| 6                                                                                     | U2     |                | gainUncertain<br>2^-16                                                           |                           |           | 1/1                    | Relative gain uncertainty after calibration, |                                                                                           |         |                     |  |  |  |
|                                                                                       |        |                | ty                                                                               |                           |           |                        | 0 if calibration failed                      |                                                                                           |         |                     |  |  |  |

<span id="page-451-1"></span>

UBX-TIM-VCOCAL continued

| Byte Offset | Number | Scaling | Name    | Unit   | Description                                |
|-------------|--------|---------|---------|--------|--------------------------------------------|
|             | Format |         |         |        |                                            |
| 8           | I4     | 2^-16   | gainVco | ppb/ra | Calibrated gain or 0 if calibration failed |
|             |        |         |         | w LSB  |                                            |

#### <span id="page-451-0"></span>**32.20.10 UBX-TIM-VRFY (0x0D 0x06)**

#### **32.20.10.1 Sourced time verification**

| Message           |                                                                    |          | UBX-TIM-VRFY                                       |                |      |                           |                          |                                                                                            |  |          |  |
|-------------------|--------------------------------------------------------------------|----------|----------------------------------------------------|----------------|------|---------------------------|--------------------------|--------------------------------------------------------------------------------------------|--|----------|--|
| Description       |                                                                    |          | Sourced time verification                          |                |      |                           |                          |                                                                                            |  |          |  |
| Firmware          |                                                                    |          | Supported on:                                      |                |      |                           |                          |                                                                                            |  |          |  |
|                   |                                                                    |          |                                                    |                |      |                           |                          | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |          |  |
|                   |                                                                    |          | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01          |                |      |                           |                          |                                                                                            |  |          |  |
| Type              |                                                                    |          | Periodic/Polled                                    |                |      |                           |                          |                                                                                            |  |          |  |
| Comment           |                                                                    |          |                                                    |                |      |                           |                          | This message contains verification information about previous time received via            |  |          |  |
|                   |                                                                    |          | assistance data or from RTC.                       |                |      |                           |                          |                                                                                            |  |          |  |
|                   |                                                                    |          | Header<br>Class<br>ID<br>Length (Bytes)<br>Payload |                |      |                           |                          |                                                                                            |  | Checksum |  |
|                   | 0xB5 0x62 0x0D 0x06 20<br>see below CK_A CK_B<br>Message Structure |          |                                                    |                |      |                           |                          |                                                                                            |  |          |  |
| Payload Contents: |                                                                    |          |                                                    |                |      |                           |                          |                                                                                            |  |          |  |
| Byte Offset       | Number                                                             |          | Scaling                                            | Name           |      | Unit                      | Description              |                                                                                            |  |          |  |
|                   | Format                                                             |          |                                                    |                |      |                           |                          |                                                                                            |  |          |  |
| 0                 | I4                                                                 |          | -                                                  | itow           |      |                           | ms                       | integer millisecond tow received by source                                                 |  |          |  |
| 4                 | I4                                                                 |          | -                                                  | frac           |      |                           | ns                       | sub-millisecond part of tow                                                                |  |          |  |
| 8                 | I4                                                                 |          | -                                                  | deltaMs        |      |                           | ms                       | integer milliseconds of delta time (current                                                |  |          |  |
|                   |                                                                    |          |                                                    |                |      |                           | time minus sourced time) |                                                                                            |  |          |  |
| 12                | I4                                                                 |          | deltaNs<br>-                                       |                |      |                           | ns                       | Sub-millisecond part of delta time                                                         |  |          |  |
| 16                | U2                                                                 | wno<br>- |                                                    |                | week | Week number               |                          |                                                                                            |  |          |  |
| 18                | X1<br>-                                                            |          | flags                                              |                | -    | Flags (see graphic below) |                          |                                                                                            |  |          |  |
| 19                | U1                                                                 |          | -                                                  | reserved1<br>- |      |                           |                          | Reserved                                                                                   |  |          |  |

## <span id="page-451-2"></span>**Bitfield flags**



<span id="page-452-0"></span>

## **32.21 UBX-UPD (0x09)**

Firmware Update Messages: i.e. Memory/Flash erase/write, Reboot, Flash identification, etc. Messages in the UPD class are used to update the firmware and identify any attached flash device.

## <span id="page-452-1"></span>**32.21.1 UBX-UPD-SOS (0x09 0x14)**

#### **32.21.1.1 Poll backup restore status**

| Message           |                                                 | UBX-UPD-SOS                                                                                |    |                                                                                  |         |          |  |  |  |  |
|-------------------|-------------------------------------------------|--------------------------------------------------------------------------------------------|----|----------------------------------------------------------------------------------|---------|----------|--|--|--|--|
| Description       |                                                 | Poll backup restore status                                                                 |    |                                                                                  |         |          |  |  |  |  |
| Firmware          |                                                 | Supported on:                                                                              |    |                                                                                  |         |          |  |  |  |  |
|                   |                                                 | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |    |                                                                                  |         |          |  |  |  |  |
|                   |                                                 | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                                  |    |                                                                                  |         |          |  |  |  |  |
| Type              | Poll Request                                    |                                                                                            |    |                                                                                  |         |          |  |  |  |  |
| Comment           |                                                 |                                                                                            |    | Sending this (empty) message to the receiver results in the receiver returning a |         |          |  |  |  |  |
|                   |                                                 |                                                                                            |    | System restored from backup message as defined below.                            |         |          |  |  |  |  |
|                   | Header                                          | Class                                                                                      | ID | Length (Bytes)                                                                   | Payload | Checksum |  |  |  |  |
| Message Structure | 0xB5 0x62 0x09 0x14<br>0<br>see below CK_A CK_B |                                                                                            |    |                                                                                  |         |          |  |  |  |  |
| No payload        |                                                 |                                                                                            |    |                                                                                  |         |          |  |  |  |  |

## **32.21.1.2 Create backup in flash**

| Message                                                                        |        |        | UBX-UPD-SOS                                                              |       |           |      |                     |                                                                            |  |         |                                                                                            |  |
|--------------------------------------------------------------------------------|--------|--------|--------------------------------------------------------------------------|-------|-----------|------|---------------------|----------------------------------------------------------------------------|--|---------|--------------------------------------------------------------------------------------------|--|
| Description                                                                    |        |        | Create backup in flash                                                   |       |           |      |                     |                                                                            |  |         |                                                                                            |  |
| Firmware                                                                       |        |        | Supported on:                                                            |       |           |      |                     |                                                                            |  |         |                                                                                            |  |
|                                                                                |        |        |                                                                          |       |           |      |                     |                                                                            |  |         | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |
|                                                                                |        |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                |       |           |      |                     |                                                                            |  |         |                                                                                            |  |
| Type                                                                           |        |        | Command                                                                  |       |           |      |                     |                                                                            |  |         |                                                                                            |  |
| Comment                                                                        |        |        |                                                                          |       |           |      |                     | The host can send this message in order to save part of the battery-backed |  |         |                                                                                            |  |
|                                                                                |        |        |                                                                          |       |           |      |                     |                                                                            |  |         | memory (BBR) in a file in the flash file system. The feature is designed in order to       |  |
| emulate the presence of the backup battery even if it is not present; the host |        |        |                                                                          |       |           |      |                     |                                                                            |  |         |                                                                                            |  |
|                                                                                |        |        |                                                                          |       |           |      |                     | can issue the save on shutdown command before switching off the device     |  |         |                                                                                            |  |
|                                                                                |        |        | supply. It is recommended to issue a GNSS stop command using UBX-CFG-RST |       |           |      |                     |                                                                            |  |         |                                                                                            |  |
|                                                                                |        |        |                                                                          |       |           |      |                     | before in order to keep the BBR memory content consistent.                 |  |         |                                                                                            |  |
|                                                                                |        | Header |                                                                          | Class | ID        |      | Length (Bytes)      |                                                                            |  | Payload | Checksum                                                                                   |  |
| Message Structure                                                              |        |        | 0xB5 0x62 0x09 0x14                                                      |       |           | 4    |                     |                                                                            |  |         | see below CK_A CK_B                                                                        |  |
| Payload Contents:                                                              |        |        |                                                                          |       |           |      |                     |                                                                            |  |         |                                                                                            |  |
| Byte Offset                                                                    | Number |        | Scaling                                                                  | Name  |           | Unit | Description         |                                                                            |  |         |                                                                                            |  |
|                                                                                | Format |        |                                                                          |       |           |      |                     |                                                                            |  |         |                                                                                            |  |
| 0                                                                              | U1     | -      |                                                                          | cmd   |           | -    | Command (must be 0) |                                                                            |  |         |                                                                                            |  |
| 1                                                                              | U1[3]  |        | -                                                                        |       | reserved1 |      | -                   | Reserved                                                                   |  |         |                                                                                            |  |

<span id="page-453-0"></span>

#### **32.21.1.3 Clear backup in flash**

| Message           |                                                                             |                                                                                | UBX-UPD-SOS                                                                |              |    |                     |             |                                                                                            |  |         |                     |  |
|-------------------|-----------------------------------------------------------------------------|--------------------------------------------------------------------------------|----------------------------------------------------------------------------|--------------|----|---------------------|-------------|--------------------------------------------------------------------------------------------|--|---------|---------------------|--|
| Description       |                                                                             |                                                                                | Clear backup in flash                                                      |              |    |                     |             |                                                                                            |  |         |                     |  |
| Firmware          |                                                                             |                                                                                | Supported on:                                                              |              |    |                     |             |                                                                                            |  |         |                     |  |
|                   |                                                                             |                                                                                |                                                                            |              |    |                     |             | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |  |         |                     |  |
|                   |                                                                             |                                                                                | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01                                  |              |    |                     |             |                                                                                            |  |         |                     |  |
| Type              |                                                                             |                                                                                | Command                                                                    |              |    |                     |             |                                                                                            |  |         |                     |  |
| Comment           | The host can send this message in order to erase the backup file present in |                                                                                |                                                                            |              |    |                     |             |                                                                                            |  |         |                     |  |
|                   |                                                                             | flash. It is recommended that the clear operation is issued after the host has |                                                                            |              |    |                     |             |                                                                                            |  |         |                     |  |
|                   |                                                                             |                                                                                | received the notification that the memory has been restored after a reset. |              |    |                     |             |                                                                                            |  |         |                     |  |
|                   |                                                                             |                                                                                | Alternatively the host can parse the startup string Restored data saved on |              |    |                     |             |                                                                                            |  |         |                     |  |
|                   |                                                                             |                                                                                | shutdown or poll the UBX-UPD-SOS message for obtaining the status.         |              |    |                     |             |                                                                                            |  |         |                     |  |
|                   |                                                                             |                                                                                | Header                                                                     | Class        | ID | Length (Bytes)      |             |                                                                                            |  | Payload | Checksum            |  |
| Message Structure |                                                                             |                                                                                | 0xB5 0x62 0x09 0x14                                                        |              |    | 4                   |             |                                                                                            |  |         | see below CK_A CK_B |  |
| Payload Contents: |                                                                             |                                                                                |                                                                            |              |    |                     |             |                                                                                            |  |         |                     |  |
| Byte Offset       | Number                                                                      |                                                                                | Scaling                                                                    | Name<br>Unit |    |                     | Description |                                                                                            |  |         |                     |  |
|                   | Format                                                                      |                                                                                |                                                                            |              |    |                     |             |                                                                                            |  |         |                     |  |
| 0                 | U1                                                                          | cmd<br>-                                                                       |                                                                            |              | -  | Command (must be 1) |             |                                                                                            |  |         |                     |  |
| 1                 | U1[3]<br>-                                                                  |                                                                                |                                                                            | reserved1    |    | -                   | Reserved    |                                                                                            |  |         |                     |  |

## **32.21.1.4 Backup creation acknowledge**

| Message                                                                       |                                                                                  |                | UBX-UPD-SOS                               |       |    |                          |                |                                                                                            |         |          |
|-------------------------------------------------------------------------------|----------------------------------------------------------------------------------|----------------|-------------------------------------------|-------|----|--------------------------|----------------|--------------------------------------------------------------------------------------------|---------|----------|
| Description                                                                   |                                                                                  |                | Backup creation acknowledge               |       |    |                          |                |                                                                                            |         |          |
| Firmware                                                                      |                                                                                  |                | Supported on:                             |       |    |                          |                |                                                                                            |         |          |
|                                                                               |                                                                                  |                |                                           |       |    |                          |                | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |          |
|                                                                               |                                                                                  |                | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |       |    |                          |                |                                                                                            |         |          |
| Type                                                                          |                                                                                  |                | Output                                    |       |    |                          |                |                                                                                            |         |          |
| Comment                                                                       | The message is sent from the device as confirmation of creation of a backup file |                |                                           |       |    |                          |                |                                                                                            |         |          |
| in flash. The host can safely shut down the device after having received this |                                                                                  |                |                                           |       |    |                          |                |                                                                                            |         |          |
| message.                                                                      |                                                                                  |                |                                           |       |    |                          |                |                                                                                            |         |          |
|                                                                               |                                                                                  | Header         |                                           | Class | ID |                          | Length (Bytes) |                                                                                            | Payload | Checksum |
| Message Structure                                                             |                                                                                  |                | 0xB5 0x62 0x09 0x14                       |       |    | 8<br>see below CK_A CK_B |                |                                                                                            |         |          |
| Payload Contents:                                                             |                                                                                  |                |                                           |       |    |                          |                |                                                                                            |         |          |
| Byte Offset                                                                   | Number                                                                           |                | Scaling                                   | Name  |    |                          | Unit           | Description                                                                                |         |          |
|                                                                               | Format                                                                           |                |                                           |       |    |                          |                |                                                                                            |         |          |
| 0                                                                             | U1                                                                               |                | -                                         | cmd   |    |                          | -              | Command (must be 2)                                                                        |         |          |
| 1                                                                             | U1[3]                                                                            | reserved1<br>- |                                           |       | -  | Reserved                 |                |                                                                                            |         |          |
| 4                                                                             | U1                                                                               | response<br>-  |                                           |       | -  | 0 = Not acknowledged     |                |                                                                                            |         |          |
|                                                                               |                                                                                  |                |                                           |       |    | 1 = Acknowledged         |                |                                                                                            |         |          |
| 5                                                                             | U1[3]                                                                            |                | reserved2<br>-                            |       | -  | Reserved                 |                |                                                                                            |         |          |

<span id="page-454-0"></span>

#### **32.21.1.5 System restored from backup**

| Message                                                                          |        |        | UBX-UPD-SOS                               |                          |                              |          |                                  |                                                                                            |         |                     |
|----------------------------------------------------------------------------------|--------|--------|-------------------------------------------|--------------------------|------------------------------|----------|----------------------------------|--------------------------------------------------------------------------------------------|---------|---------------------|
| Description                                                                      |        |        | System restored from backup               |                          |                              |          |                                  |                                                                                            |         |                     |
| Firmware                                                                         |        |        | Supported on:                             |                          |                              |          |                                  |                                                                                            |         |                     |
|                                                                                  |        |        |                                           |                          |                              |          |                                  | • u-blox 8 / u-blox M8 protocol versions 15, 15.01, 16, 17, 18, 19, 19.1, 19.2, 20, 20.01, |         |                     |
|                                                                                  |        |        | 20.1, 20.2, 20.3, 22, 22.01, 23 and 23.01 |                          |                              |          |                                  |                                                                                            |         |                     |
| Type                                                                             |        |        | Output                                    |                          |                              |          |                                  |                                                                                            |         |                     |
| Comment                                                                          |        |        |                                           |                          |                              |          |                                  | The message is sent from the device to notify the host the BBR has been                    |         |                     |
| restored from a backup file in the flash file sysetem. The host should clear the |        |        |                                           |                          |                              |          |                                  |                                                                                            |         |                     |
|                                                                                  |        |        |                                           |                          |                              |          |                                  | backup file after receiving this message. If the UBX-UPD-SOS message is polled,            |         |                     |
|                                                                                  |        |        | this message will be resent.              |                          |                              |          |                                  |                                                                                            |         |                     |
|                                                                                  |        | Header |                                           | Class                    | ID<br>Length (Bytes)         |          |                                  |                                                                                            | Payload | Checksum            |
| Message Structure                                                                |        |        |                                           | 0xB5 0x62 0x09 0x14<br>8 |                              |          |                                  |                                                                                            |         | see below CK_A CK_B |
| Payload Contents:                                                                |        |        |                                           |                          |                              |          |                                  |                                                                                            |         |                     |
| Byte Offset                                                                      | Number |        | Scaling                                   | Name                     |                              |          | Unit                             | Description                                                                                |         |                     |
|                                                                                  | Format |        |                                           |                          |                              |          |                                  |                                                                                            |         |                     |
| 0                                                                                | U1     |        | -                                         | cmd                      |                              |          | -                                | Command (must be 3)                                                                        |         |                     |
| 1                                                                                | U1[3]  |        | -                                         |                          | reserved1                    |          | -                                | Reserved                                                                                   |         |                     |
| 4                                                                                | U1     | -      |                                           |                          | response                     |          | -                                | 0 = Unknown                                                                                |         |                     |
|                                                                                  |        |        |                                           |                          |                              |          | 1 = Failed restoring from backup |                                                                                            |         |                     |
|                                                                                  |        |        |                                           |                          |                              |          |                                  | 2 = Restored from backup                                                                   |         |                     |
|                                                                                  |        |        |                                           |                          | 3 = Not restored (no backup) |          |                                  |                                                                                            |         |                     |
| 5<br>U1[3]<br>-                                                                  |        |        | reserved2                                 |                          | -                            | Reserved |                                  |                                                                                            |         |                     |



## <span id="page-455-0"></span>**33 RTCM Protocol**

The RTCM (Radio Technical Commission for Maritime Services) protocol is a protocol that is used to supply the GNSS receiver with real-time differential correction data. The RTCM protocol specification is available from [http://www.rtcm.org.](http://www.rtcm.org)

## <span id="page-455-1"></span>**33.1 RTCM2**

## <span id="page-455-2"></span>**33.1.1 Introduction**

This feature is only applicable to GPS operation.

- This feature only supports code differential positioning.
- For effective differential positioning accuracy, it is necessary that the reference station antenna is situated in a low multipath environment with an unobstructed view of the sky. It is recommended that reference receiver applies phase smoothing to the broadcast corrections.

This feature is not available with the High Precision GNSS products.

## <span id="page-455-3"></span>**33.1.2 Supported Messages**

The following RTCM 2.3 messages are supported:

| Message | Description                  |
|---------|------------------------------|
| Type    |                              |
| 1       | Differential GPS Corrections |
| 2       | Delta Differential GPS       |

9 GPS Partial Correction Set

## **Supported RTCM 2.3 Message Types**

Corrections 3 GPS Reference Station Parameters

## <span id="page-455-4"></span>**33.1.3 Configuration**

The DGPS feature does not need any configuration to work properly. When an RTCM stream is input on any of the communication interfaces, the data will be parsed and applied if possible, which will put the receiver into DGPS mode.

The only configurable parameter of DGPS mode is the timeout that can be specified using [UBX-](#page-230-1)[CFG-NAV5](#page-230-1). This value defines the time after which old RTCM data will be discarded.

The RTCM protocol can be disabled/enabled on communication interfaces by means of the [UBX-](#page-257-1)[CFG-PRT](#page-257-1) message. By default, RTCM is enabled.

## <span id="page-455-5"></span>**33.1.4 Output**

DGPS mode will result in following modified output:

• [NMEA-GGA](#page-161-1): The quality field will be 2 (see [NMEA Positon Fix Flags](#page-155-1)). The age of DGPS corrections and Reference station ID will be set.



- [NMEA-GLL](#page-163-1), [NMEA-RMC](#page-171-1), [NMEA-VTG](#page-175-1), [NMEA-GNS](#page-165-1): The posMode indicator will be D (see [NMEA Positon](#page-155-1) [Fix Flags\)](#page-155-1).
- [NMEA-PUBX-POSITION](#page-178-1): The status will be D2/D3; The age of DGPS corrections will be set.
- [UBX-NAV-SOL](#page-400-1): The DGPS flag will be set.
- [UBX-NAV-PVT](#page-389-1): The diffSoln flag will be set.
- [UBX-NAV-STATUS](#page-402-1): The diffSoln flag will be set; the diffCorr flag will be set.
- [UBX-NAV-SVINFO](#page-404-1): The DGPS flag will be set for channels with valid DGPS correction data.
- [UBX-NAV-DGPS](#page-374-1): This message will contain all valid DGPS data
- If the base line exceeds 100 km and a message type 3 is received, a [UBX-INF-WARNING](#page-307-1) will be output, e.g. "WARNING: DGNSS baseline big: 330.3km"

## <span id="page-456-0"></span>**33.1.5 Restrictions**

The following restrictions apply to DGPS mode:

- The DGPS solution will only include measurements from satellites for which DGPS corrections were provided. This is because the navigation algorithms cannot mix corrected with uncorrected measurements.
- [SBAS corrections](#page-29-1) will not be applied when using RTCM correction data.
- Precise Point Positioning will be deactivated when using RTCM correction data.
- RTCM correction data cannot be applied when using AssistNow Offline or AssistNow Autonomous.

## <span id="page-456-1"></span>**33.1.6 Reference**

The RTCM2 support is implemented according to RTCM 10402.3 ("RECOMMENDED STANDARDS FOR DIFFERENTIAL GNSS").

## <span id="page-456-2"></span>**33.2 RTCM version 3**

(Note: the RTCM3 protocol is not supported in [protocol versions less than 20\)](#page-15-2).

## <span id="page-456-3"></span>**33.2.1 Introduction**





## <span id="page-457-0"></span>**33.2.2 Supported Messages**

The following RTCM 3.3 input messages are supported:

## **Supported RTCM 3.3 Input Messages**

| Message Type   | Description                                              |
|----------------|----------------------------------------------------------|
| 1001           | L1-only GPS RTK observations                             |
| 1002           | Extended L1-only GPS RTK observations                    |
| 1003           | L1/L2 GPS RTK observations                               |
| 1004           | Extended L1/L2 GPS RTK observations                      |
| 1005           | Stationary RTK reference station ARP                     |
| 1006           | Stationary RTK reference station ARP with antenna height |
| 1007           | Antenna descriptor                                       |
| 1009           | L1-only GLONASS RTK observations                         |
| 1010           | Extended L1-only GLONASS RTK observations                |
| 1011           | L1/L2 GLONASS RTK observations                           |
| 1012           | Extended L1/L2 GLONASS RTK observations                  |
| 1074           | GPS MSM4                                                 |
| 1075           | GPS MSM5                                                 |
| 1077           | GPS MSM7                                                 |
| 1084           | GLONASS MSM4                                             |
| 1085           | GLONASS MSM5                                             |
| 1087           | GLONASS MSM7                                             |
| 1124           | BeiDou MSM4                                              |
| 1125           | BeiDou MSM5                                              |
| 1127           | BeiDou MSM7                                              |
| 1230           | GLONASS code-phase biases                                |
| 4072, sub-type | Reference station PVT (u-blox proprietary RTCM Message)  |
| 0              |                                                          |

## The following RTCM 3.3 output messages are supported:

When configuring RTCM output messages using the UBX protocol message UBX-CFG-MSG, the Class/IDs shown in the table shall be used.

#### **Supported RTCM 3.3 Output Messages**

| Message Type   | Cls/ID    | Description                                             |
|----------------|-----------|---------------------------------------------------------|
| 1005           | 0xF5 0x05 | Stationary RTK reference station ARP                    |
| 1074           | 0xF5 0x4A | GPS MSM4                                                |
| 1077           | 0xF5 0x4D | GPS MSM7                                                |
| 1084           | 0xF5 0x54 | GLONASS MSM4                                            |
| 1087           | 0xF5 0x57 | GLONASS MSM7                                            |
| 1124           | 0xF5 0x7C | BeiDou MSM4                                             |
| 1127           | 0xF5 0x7F | BeiDou MSM7                                             |
| 1230           | 0xF5 0xE6 | GLONASS code-phase biases                               |
| 4072, sub-type | 0xF5 0xFE | Reference station PVT (u-blox proprietary RTCM Message) |
| 0              |           |                                                         |



## <span id="page-458-0"></span>**33.2.3 u-blox Proprietary RTCM Messages**

The RTCM message type 4072 is the u-blox proprietary RTCM message. It is supported by the RTCM standard version 3.2 and above.

## **33.2.3.1 Sub-Types**

There are different available sub-types of the RTCM message type 4072. The table below shows the available RTCM 4072 sub-types.

## **RTCM 4072 Sub-Types**

| Sub  | Message Type | Sub-Type | Description          | Message Data (Payload) Length (bits) |
|------|--------------|----------|----------------------|--------------------------------------|
| Type | Number       | Number   |                      |                                      |
| 1    | 0xFE8        | 0x001    | Additional reference | 112+48*(2*N)                         |
|      |              |          | station information  | (N = the number of enabled GNSS      |
|      |              |          |                      | constellations)                      |

## <span id="page-458-1"></span>**33.2.4 Configuration**

The configuration of the RTK rover and reference station is explained in the [RTK Mode](#page-110-0) [Configuration](#page-110-0) section.

The RTCM3 protocol can be disabled/enabled on communication interfaces by means of the UBX-CFG-PRT message. By default, RTCM3 is enabled.

The configuration of the RTCM3 correction stream must be done according to the following rules:

- The RTCM3 stream must contain a reference station message (type 1005 or type 1006) in addition to the GNSS observation messages.
- The RTCM3 stream must contain a reference station message (type 1005, type 1006, or [type](#page-14-0) [4072, sub-type 0](#page-14-0)) in addition to the GNSS observation messages.
- All observation messages must be broadcast at the same rate.
- The reference station ID field in the GNSS observation messages must be consistent with the reference station ID field in the reference station message otherwise the rover will not be able to compute its position.
- The RTCM3 stream must contain the GLONASS code-phase biases message (type 1230) otherwise the GLONASS ambiguities can only be estimated as float unless the receiver is able to identify the code-phase bias from receiver descriptor message (RTCM 1033), even in RTK fixed mode.
- The static reference station message (type 1005 or type 1006) does not need to be broadcast at the same rate as the observation messages but the rover will not be able to compute its position until it has received a valid reference station message.
- The moving baseline reference message ([type 4072, sub-type 0](#page-14-0)) must be broadcast at the same rate as the observation messages.
- The RTCM3 stream should only contain one type of observation messages per constellation. When using a multi-constellation configuration, all constellations should use the same type of observation messages. Mixing RTK and MSM messages will result in undefined rover behavior.
- The moving baseline reference message ([type 4072, sub-type 0](#page-14-0)) should only be used in combination with MSM7 observation messages.
- If the receiver is configured to output RTCM messages on several ports, they must all have the same RTCM configuration otherwise the MSM multiple message bit might not be set properly.





## <span id="page-459-0"></span>**33.2.5 Output**

RTK Rover and MB Rover Modes will result in following modified output:

- [NMEA-GGA](#page-161-1): The quality field will be 4 for RTK fixed and 5 for RTK float (see [NMEA Positon Fix](#page-155-1) [Flags](#page-155-1)). The age of differential corrections and reference station ID will be set.
- [NMEA-GLL](#page-163-1), [NMEA-VTG](#page-175-1): The posMode indicator will be D for RTK float and RTK fixed (see [NMEA](#page-155-1) [Positon Fix Flags](#page-155-1)).
- [NMEA-RMC](#page-171-1), [NMEA-GNS](#page-165-1): The posMode indicator will be F for RTK float and R for RTK fixed (see [NMEA Positon Fix Flags](#page-155-1)).
- [UBX-NAV-PVT](#page-389-1): The carrSoln flag will be set to 1 for RTK float and 2 for RTK fixed.
- [UBX-NAV-RELPOSNED](#page-393-1): The diffSoln and refPosValid flags will be set. The carrSoln flag will be set to 1 for RTK float and 2 for RTK fixed. In moving baseline rover mode, the isMoving flag will be set, and the refPosMiss and refObsMiss flags will be set for epochs during which extrapolated reference position or observations have been used.
- [UBX-NAV-SAT](#page-395-2): The diffCorr flag will be set for satellites with valid RTCM data. The rtcmCorrUsed, prCorrUsed, and crCorrUsed flags will be set for satellites for which the RTCM corrections have been applied. In moving baseline rover mode, the doCorrUsed flag will also be set.
- [UBX-NAV-STATUS](#page-402-1): The diffSoln flag will be set; the diffCorr flag will be set.
- If the baseline exceeds 10 km and a message type 1005, type 1006 or [type 4072, sub-type 0](#page-14-0) is received, a [UBX-INF-WARNING](#page-307-1) will be output, e.g. "WARNING: DGNSS baseline big: 12.7km"

## <span id="page-459-1"></span>**33.2.6 Reference**

The RTCM3 support is implemented according to RTCM STANDARD 10403.3 DIFFERENTIAL GNSS (GLOBAL NAVIGATION SATELLITE SYSTEMS) SERVICES - VERSION 3.

<span id="page-460-0"></span>

# **Appendix**

## <span id="page-460-1"></span>**A Satellite Numbering**

A summary of all the SV numbering schemes is provided in the following table.

## **Satellite numbering**

| GNSS Type | SV range | UBX gnssId: | UBX svId    | NMEA 2.X     | NMEA 2.X-4.0 | NMEA 4.10+ | NMEA 4.10+  |
|-----------|----------|-------------|-------------|--------------|--------------|------------|-------------|
|           |          | svId        |             | 4.0 (strict) | (extended)   | (strict)   | (extended)  |
| GPS       | G1-G32   | 0:1-32      | 1-32        | 1-32         | 1-32         | 1-32       | 1-32        |
| SBAS      | S120-    | 1:120-158   | 120-158     | 33-64        | 33-64,152-   | 33-64      | 33-64,152-  |
|           | S158     |             |             |              | 158          |            | 158         |
| Galileo   | E1-E36   | 2:1-36      | 211-246     | -            | 301-336      | 1-36       | 1-36        |
| BeiDou    | B1-B37   | 3:1-37      | 159-163,33- | -            | 401-437      | 1-37       | 1-37        |
|           |          |             | 64          |              |              |            |             |
| IMES      | I1-I10   | 4:1-10      | 173-182     | -            | 173-182      | -          | 173-182     |
| QZSS      | Q1-Q10   | 5:1-10      | 193-202     | -            | 193-202      | -          | 193-202     |
| GLONAS    | R1-R32,  | 6:1-32, 6:  | 65-96, 255  | 65-96,       | 65-96, null  | 65-96,     | 65-96, null |
| S         | R?       | 255         |             | null         |              | null       |             |

## <span id="page-460-2"></span>**B UBX and NMEA Signal Identifiers**

UBX and NMEA protocols use signal identifiers (commonly abbreviated as "sigId") to distinguish between different signals from GNSS.

Signal identifiers are only valid when combined with a GNSS identifier (see [above](#page-460-1)). The table below shows the range of identifiers currently supported in the firmware.

## <span id="page-460-3"></span>**C u-blox 8 / u-blox M8 Default Settings**

The default settings listed in this section apply to u-blox 8 / u-blox M8 receivers. These values assume that the default levels of the configuration pins have been left unchanged and no setting that affects the default configuration was written to the eFuse. Default settings are dependent on the configuration pin and eFuse settings. For information regarding these settings, consult the applicable data sheet.

If nothing else is mentioned, the default settings apply to u-blox 8 and u-blox M8 receivers.

## <span id="page-460-4"></span>**C.1 Antenna Supervisor Settings (UBX-CFG-ANT)**

For parameter and protocol description see section [UBX-CFG-ANT](#page-205-0).

## **Antenna Supervisor Default Settings**

| Parameter       | SPG 2.xx | SPG 3.xx, | ADR 3.xx | ADR 4.xx, | FTS 1.xx | TIM 1.0x | TIM 1.1x |
|-----------------|----------|-----------|----------|-----------|----------|----------|----------|
|                 |          | HPG 1.xx  |          | UDR 1.xx  |          |          |          |
| flags-svcs      | 1        | 1         | 1        | 1         | 0        | 1        | 1        |
| flags-scd       | 1        | 1         | 0        | 0         | 0        | 1        | 0        |
| flags-pdwnOnSCD | 1        | 1         | 0        | 0         | 0        | 0        | 0        |
| flags-recovery  | 1        | 1         | 0        | 0         | 0        | 1        | 0        |
| flags-ocd       | 0        | 0         | 0        | 0         | 0        | 0        | 0        |



Antenna Supervisor Default Settings continued

| Parameter      | SPG 2.xx | SPG 3.xx, | ADR 3.xx | ADR 4.xx, | FTS 1.xx | TIM 1.0x | TIM 1.1x |
|----------------|----------|-----------|----------|-----------|----------|----------|----------|
|                |          | HPG 1.xx  |          | UDR 1.xx  |          |          |          |
| pins-pinSwitch | 16       | 16        | 16       | 16        | 31       | 16       | 16       |
| pins-pinSCD    | 15       | 15        | 31       | 15        | 31       | 15       | 15       |
| pins-pinOCD    | 31       | 14        | 31       | 14        | 31       | 31       | 14       |

## <span id="page-461-0"></span>**C.2 Data Batching Settings (UBX-CFG-BATCH)**

For parameter and protocol description see section [UBX-CFG-BATCH](#page-206-1).

## **Data Batching Default Settings**

| Parameter          | SPG 3.51 |
|--------------------|----------|
| flags-enable       | 0        |
| flags-extraPvt     | 1        |
| flags-extraOdo     | 1        |
| flags-pioEnable    | 0        |
| flags-pioActiveLow | 0        |
| bufSize            | 0        |
| notifThrs          | 0        |
| pioId              | 0        |

## <span id="page-461-1"></span>**C.3 Datum Settings (UBX-CFG-DAT)**

For parameter and protocol description see section [UBX-CFG-DAT](#page-209-1).

## **Datum Default Settings**

| Parameter | SPG 2.xx, SPG 3.xx, ADR 3.xx, FTS 1.xx, TIM 1.xx, ADR 4.xx, UDR 1.xx, HPG 1.xx |
|-----------|--------------------------------------------------------------------------------|
| datumNum  | 0                                                                              |
| datumName | WGS84                                                                          |
| majA      | 6378137                                                                        |
| flat      | 298.257223563                                                                  |
| dX        | 0                                                                              |
| dY        | 0                                                                              |
| dZ        | 0                                                                              |
| rotX      | 0                                                                              |
| rotY      | 0                                                                              |
| rotZ      | 0                                                                              |
| scale     | 0                                                                              |

## <span id="page-461-2"></span>**C.4 Geofencing Settings (UBX-CFG-GEOFENCE)**

For parameter and protocol description see section [UBX-CFG-GEOFENCE](#page-220-1).

#### **Geofencing Default Settings**

| Parameter   | SPG 2.xx, SPG 3.xx, HPG 1.xx, ADR 3.xx, ADR 4.xx, UDR 1.xx |
|-------------|------------------------------------------------------------|
| numFences   | 0                                                          |
| confLvl     | 0                                                          |
| pioEnabled  | 0                                                          |
| pinPolarity | 0                                                          |



Geofencing Default Settings continued

| Parameter | SPG 2.xx, SPG 3.xx, HPG 1.xx, ADR 3.xx, ADR 4.xx, UDR 1.xx |
|-----------|------------------------------------------------------------|
| pin       | 0                                                          |

## <span id="page-462-0"></span>**C.5 High Navigation Rate Settings (UBX-CFG-HNR)**

For parameter and protocol description see section [UBX-CFG-HNR](#page-224-2).

## **High Navigation Rate Default Settings**

| Parameter   | ADR 3.xx, UDR 1.xx | ADR 4.xx |
|-------------|--------------------|----------|
| highNavRate | 0                  | 10       |

## <span id="page-462-1"></span>**C.6 GNSS System Settings (UBX-CFG-GNSS)**

For parameter and protocol description see section [UBX-CFG-GNSS](#page-221-1).

## **GNSS System Default Settings**

| Parameter       | SPG 2.xx,   | SPG 3.0x    | ADR 4.xx,   | FTS 1.xx    | TIM 1.0x    | TIM 1.1x,   | HPG 1.xx   |
|-----------------|-------------|-------------|-------------|-------------|-------------|-------------|------------|
|                 | ADR 3.xx    |             | UDR 1.xx    |             |             | SPG 3.5x    |            |
| numTrkChHw      | 32          | 32          | 28          | 32          | 32          | 32          | 32         |
| numTrkChUse     | 32          | 32          | 28          | 32          | 32          | 32          | 28         |
| numConfigBlocks | 5           | 7           | 7           | 5           | 6           | 7           | 4          |
| gnssId          | 0, 1, 3, 5, | 0, 1, 2, 3, | 0, 1, 2, 3, | 0, 1, 3, 5, | 0, 1, 3, 4, | 0, 1, 2, 3, | 0, 3, 5, 6 |
|                 | 6           | 4, 5, 6     | 4, 5, 6     | 6           | 5, 6        | 4, 5, 6     |            |
| flags-enable    | 1, 1, 0, 1, | 1, 1, 0, 0, | 1, 1, 0, 0, | 1, 0, 0, 1, | 1, 0, 0, 0, | 1, 0, 0, 0, | 1, 0, 1, 1 |
|                 | 1           | 0, 1, 1     | 0, 1, 1     | 1           | 1, 1        | 0, 1, 1     |            |
| resTrkCh        | 8, 1, 8, 0, | 8, 1, 4, 8, | 8, 1, 4, 8, | 8, 1, 8, 0, | 8, 1, 8, 0, | 8, 1, 4, 8, | 8, 8, 0, 8 |
|                 | 8           | 0, 0, 8     | 0, 0, 8     | 8           | 0, 8        | 0, 0, 8     |            |
| maxTrkCh        | 16, 3, 16,  | 16, 3, 8,   | 16, 3, 8,   | 16, 3, 16,  | 16, 3, 16,  | 16, 3, 8,   | 16, 16, 3, |
|                 | 3, 14       | 16, 8, 3,   | 16, 8, 3,   | 3, 14       | 8, 3, 14    | 16, 8, 3,   | 14         |
|                 |             | 14          | 14          |             |             | 14          |            |

## <span id="page-462-2"></span>**C.7 INF Messages Settings (UBX-CFG-INF)**

For parameter and protocol description see section [UBX-CFG-INF](#page-224-2).

## <span id="page-462-3"></span>**C.7.1 UBX Protocol**

## **INF Messages Default Settings for UBX protocol**

| Parameter          | SPG 2.xx, SPG 3.xx, FTS 1.xx, TIM 1.xx, HPG 1.xx, ADR 3.xx, ADR 4.xx, UDR 1.xx |
|--------------------|--------------------------------------------------------------------------------|
| protocolID         | 0                                                                              |
| infMsgMask-ERROR   | 0,0,0,0,0,0                                                                    |
| infMsgMask-WARNING | 0,0,0,0,0,0                                                                    |
| infMsgMask-NOTICE  | 0,0,0,0,0,0                                                                    |
| infMsgMask-TEST    | 0,0,0,0,0,0                                                                    |
| infMsgMask-DEBUG   | 0,0,0,0,0,0                                                                    |



## <span id="page-463-0"></span>**C.7.2 NMEA Protocol**

## **INF Messages Default Settings for NMEA protocol**

| Parameter          | SPG 2.xx, TIM 1.0x, FTS 1.xx, | SPG 3.xx, TIM 1.1x, HPG 1.xx | ADR 4.xx, UDR 1.xx |
|--------------------|-------------------------------|------------------------------|--------------------|
|                    | ADR 3.xx                      |                              |                    |
| protocolID         | 1                             | 1                            | 1                  |
| infMsgMask-ERROR   | 1,1,1,1,1,1                   | 1,1,0,1,1,0                  | 1,1,0,1,1,0        |
| infMsgMask-WARNING | 1,1,1,1,1,1                   | 1,1,0,1,1,0                  | 1,1,0,1,1,0        |
| infMsgMask-NOTICE  | 1,1,1,1,1,1                   | 1,1,0,1,1,0                  | 1,1,0,1,1,0        |
| infMsgMask-TEST    | 0,0,0,0,0,0                   | 0,0,0,0,0,0                  | 0,0,0,0,0,0        |
| infMsgMask-DEBUG   | 0,0,0,0,0,0                   | 0,0,0,0,0,0                  | 0,0,0,0,0,0        |

## <span id="page-463-1"></span>**C.8 Jammer/Interference Monitor Settings (UBX-CFG-ITFM)**

For parameter and protocol description see section [UBX-CFG-ITFM](#page-226-1).

## **Jamming/Interference Monitor Default Settings**

| Parameter          | SPG 2.xx, SPG 3.xx, ADR 3.xx, FTS 1.xx, TIM 1.xx, ADR 4.xx, UDR 1.xx, HPG 1.xx |
|--------------------|--------------------------------------------------------------------------------|
| config-bbThreshold | 3                                                                              |
| config-cwThreshold | 15                                                                             |
| config-enable      | 0                                                                              |
| config2-antSetting | 0                                                                              |
| config2-enable2    | 0                                                                              |

## <span id="page-463-2"></span>**C.9 Logging Settings (UBX-CFG-LOGFILTER)**

For parameter and protocol description see section [UBX-CFG-LOGFILTER](#page-227-1).

### **Logging Default Settings**

| Parameter                    | SPG 2.xx, SPG 3.xx, ADR 3.xx, FTS 1.xx, TIM 1.xx, ADR 4.xx, UDR 1.xx, HPG 1.xx |
|------------------------------|--------------------------------------------------------------------------------|
| flags-recordEnabled          | 0                                                                              |
| flags                        | 0                                                                              |
| psmOncePerWakupEnable        |                                                                                |
| d                            |                                                                                |
| flags-applyAllFilterSettings | 0                                                                              |
| minInterval                  | 0                                                                              |
| timeThreshold                | 0                                                                              |
| speedThreshold               | 0                                                                              |
| positionThreshold            | 0                                                                              |

## <span id="page-463-3"></span>**C.10 Navigation Settings (UBX-CFG-NAV5)**

For parameter and protocol description see section [UBX-CFG-NAV5](#page-230-1).

#### **Navigation Default Settings**

| Parameter       | SPG 2.xx, | SPG 3.xx | ADR 4.xx, | FTS 1.xx | TIM 1.0x | TIM 1.1x | HPG 1.xx |
|-----------------|-----------|----------|-----------|----------|----------|----------|----------|
|                 | ADR 3.xx  |          | UDR 1.xx  |          |          |          |          |
| mask-dyn        | 1         | 1        | 1         | 1        | 1        | 1        | 1        |
| mask-minEl      | 1         | 1        | 1         | 1        | 1        | 1        | 1        |
| mask-posFixMode | 1         | 1        | 1         | 1        | 1        | 1        | 1        |
| mask-drLim      | 1         | 1        | 1         | 1        | 1        | 1        | 1        |



Navigation Default Settings continued

| Parameter           | SPG 2.xx, | SPG 3.xx | ADR 4.xx, | FTS 1.xx | TIM 1.0x | TIM 1.1x | HPG 1.xx |
|---------------------|-----------|----------|-----------|----------|----------|----------|----------|
|                     | ADR 3.xx  |          | UDR 1.xx  |          |          |          |          |
| mask-posMask        | 1         | 1        | 1         | 1        | 1        | 1        | 1        |
| mask-timeMask       | 1         | 1        | 1         | 1        | 1        | 1        | 1        |
| mask-staticHoldMask | 1         | 1        | 1         | 1        | 1        | 1        | 1        |
| mask-dgpsMask       | 1         | 1        | 1         | 1        | 1        | 1        | 1        |
| mask-cnoThreshold   | 1         | 1        | 1         | 1        | 1        | 1        | 1        |
| mask-utc            | 1         | 1        | 1         | 1        | 1        | 1        | 1        |
| dynModel            | 0         | 0        | 4         | 2        | 2        | 2        | 0        |
| fixMode             | 3         | 3        | 3         | 3        | 3        | 3        | 3        |
| fixedAlt            | 0         | 0        | 0         | 0        | 0        | 0        | 0        |
| fixedAltVar         | 1         | 1        | 1         | 1        | 1        | 1        | 1        |
| minElev             | 5         | 5        | 10        | 5        | 5        | 5        | 10       |
| drLimit             | 0         | 0        | 0         | 0        | 0        | 0        | 0        |
| pDop                | 25        | 25       | 25        | 25       | 25       | 25       | 25       |
| tDop                | 25        | 25       | 25        | 25       | 25       | 25       | 25       |
| pAcc                | 100       | 100      | 100       | 100      | 100      | 100      | 100      |
| tAcc                | 300       | 350      | 350       | 300      | 350      | 350      | 350      |
| staticHoldThresh    | 0         | 0        | 0         | 0        | 0        | 0        | 0        |
| dgpsTimeOut         | 60        | 60       | 60        | 60       | 60       | 60       | 60       |
| cnoThreshNumSVs     | 0         | 0        | 0         | 0        | 0        | 0        | 0        |
| cnoThresh           | 0         | 0        | 0         | 0        | 0        | 0        | 0        |
| staticHoldMaxDist   | 200       | 0        | 0         | 200      | 200      | 0        | 0        |
| utcStandard         | 0         | 0        | 0         | 3        | 3        | 3        | 0        |

## <span id="page-464-0"></span>**C.11 Navigation Settings (UBX-CFG-NAVX5)**

For parameter and protocol description see section [UBX-CFG-NAVX5](#page-233-1).

## **Navigation Default Settings (SPG/FTS/TIM)**

| Parameter          | SPG 2.xx | SPG 3.0x | SPG 3.5x | FTS 1.xx, TIM 1. | TIM 1.1x |
|--------------------|----------|----------|----------|------------------|----------|
|                    |          |          |          | 0x               |          |
| mask1-minMax       | 1        | 1        | 1        | 1                | 1        |
| mask1-minCno       | 1        | 1        | 1        | 1                | 1        |
| mask1-initial3dfix | 1        | 1        | 1        | 1                | 1        |
| mask1-wknRoll      | 1        | 1        | 1        | 1                | 1        |
| mask1-ackAid       | 1        | 1        | 1        | 1                | 1        |
| mask1-ppp          | 1        | 1        | 1        | 1                | 1        |
| mask1-aop          | 1        | 1        | 1        | 1                | 1        |
| mask2-adr          | 0        | 0        | 0        | 0                | 0        |
| minSVs             | 3        | 3        | 3        | 1                | 1        |
| maxSVs             | 20       | 32       | 32       | 20               | 32       |
| minCNO             | 6        | 6        | 6        | 9                | 9        |
| iniFix3D           | 0        | 0        | 0        | 0                | 0        |
| ackAiding          | 0        | 0        | 0        | 0                | 0        |



Navigation Default Settings (SPG/FTS/TIM) continued

| Parameter               | SPG 2.xx | SPG 3.0x     | SPG 3.5x | FTS 1.xx, TIM 1. | TIM 1.1x    |
|-------------------------|----------|--------------|----------|------------------|-------------|
|                         |          |              |          | 0x               |             |
| wknRollover             | 1756     | 1867 (<3.05) | 1936     | 1756             | 1867 (1.10, |
|                         |          | 2152 (3.05)  |          |                  | 1.11)       |
|                         |          |              |          |                  | 2243 (1.12) |
| usePPP                  | 0        | 0            | 0        | 0                | 0           |
| aopCfg-useAOP           | 0        | 0            | 0        | 0                | 0           |
| aopOrbMaxErr            | 100      | 100          | 100      | 100              | 100         |
| gnssTofsCfg-tolerance   | 0        | 0            | 0        | 0                | 0           |
| gnssTofsCfg             | 0        | 0            | 0        | 0                | 0           |
| useMeasVarTest          |          |              |          |                  |             |
| gnssTofsCfg             | 0        | 0            | 0        | 0                | 0           |
| aopPreCalEnabled        |          |              |          |                  |             |
| gnssTofsCfg-aopPreCalDt | 0        | 0            | 0        | 0                | 0           |
| gnssTofsCfg             | 0        | 0            | 0        | 0                | 0           |
| aopPreCalInhInt         |          |              |          |                  |             |
| useAdr                  | 0        | 0            | 0        | 0                | 0           |

## **Navigation Default Settings (ADR/UDR/HPG)**

| Parameter          | ADR 3.xx | ADR 4.0x, | ADR 4.2x, | UDR 1.00 | HPG 1.30 | HPG 1.40 |
|--------------------|----------|-----------|-----------|----------|----------|----------|
|                    |          | ADR 4.1x  | ADR 4.3x, |          |          |          |
|                    |          |           | UDR 1.2x, |          |          |          |
|                    |          |           | UDR 1.3x  |          |          |          |
| mask1-minMax       | 1        | 1         | 1         | 1        | 1        | 1        |
| mask1-minCno       | 1        | 1         | 1         | 1        | 1        | 1        |
| mask1-initial3dfix | 1        | 1         | 1         | 1        | 1        | 1        |
| mask1-wknRoll      | 1        | 1         | 1         | 1        | 1        | 1        |
| mask1-ackAid       | 1        | 1         | 1         | 1        | 1        | 1        |
| mask1-ppp          | 1        | 1         | 1         | 1        | 1        | 1        |
| mask1-aop          | 1        | 1         | 1         | 1        | 1        | 1        |
| mask2-adr          | 0        | 0         | 0         | 0        | 0        | 0        |
| mask2-sigAttenComp | n/a      | 0         | 0         | 0        | 0        | 0        |
| minSVs             | 2        | 5         | 5         | 5        | 3        | 3        |
| maxSVs             | 20       | 24        | 24        | 24       | 20       | 20       |
| minCNO             | 6        | 12        | 20        | 12       | 6        | 6        |
| iniFix3D           | 0        | 0         | 0         | 0        | 0        | 0        |
| ackAiding          | 0        | 0         | 0         | 0        | 0        | 0        |
| wknRollover        | 1756     | 1867      | -         | 1867     | 1867     | 1867     |
| sigAttenCompMode   | n/a      | 0         | 0         | 0        | 0        | 0        |
| usePPP             | 0        | 0         | 0         | 0        | 1        | 1        |
| aopCfg-useAOP      | 0        | 0         | 0         | 0        | 0        | 0        |
| aopOrbMaxErr       | 100      | 100       | 100       | 100      | 100      | 100      |
| useAdr             | 1        | 1         | 1         | 1        | 0        | 0        |



wknRollover default value depends on the firmware build date.



## <span id="page-466-0"></span>**C.12 NMEA Protocol Settings (UBX-CFG-NMEA)**

For parameter and protocol description see section [UBX-CFG-NMEA](#page-240-1).

## **NMEA Protocol Default Settings**

| Parameter            | SPG 2.xx, SPG 3.xx, ADR 3.xx, FTS 1.xx, TIM 1.xx, ADR 4.xx, UDR 1.xx, HPG 1.xx |
|----------------------|--------------------------------------------------------------------------------|
| filter-posFilt       | 0                                                                              |
| filter-mskPosFilt    | 0                                                                              |
| filter-timeFilt      | 0                                                                              |
| filter-dateFilt      | 0                                                                              |
| filter-gpsOnlyFilter | 0                                                                              |
| filter-trackFilt     | 0                                                                              |
| nmeaVersion          | 0x40                                                                           |
| numSV                | 0                                                                              |
| flags-compat         | 0                                                                              |
| flags-consider       | 1                                                                              |
| flags-limit82        | 0                                                                              |
| flags-highPrec       | 0                                                                              |
| gnssToFilter-gps     | 0                                                                              |
| gnssToFilter-sbas    | 0                                                                              |
| gnssToFilter-qzss    | 0                                                                              |
| gnssToFilter-glonass | 0                                                                              |
| gnssToFilter-beidou  | 0                                                                              |
| svNumbering          | 0                                                                              |
| mainTalkerId         | 0                                                                              |
| gsvTalkerId          | 0                                                                              |
| bdsTalkerId          | not set                                                                        |

## <span id="page-466-1"></span>**C.13 Odometer Settings (UBX-CFG-ODO)**

For parameter and protocol description see section [UBX-CFG-ODO](#page-248-1).

## **ODO Default Settings**

| Parameter      | SPG 2.xx, SPG 3.0x, ADR 3.xx, FTS 1.xx, TIM 1.xx, ADR 4.xx, UDR 1.xx, HPG | SPG 3.5x |
|----------------|---------------------------------------------------------------------------|----------|
|                | 1.xx                                                                      |          |
| flags-useODO   | 0                                                                         | 1        |
| flags-useCOG   | 0                                                                         | 1        |
| flags-outLPVel | 0                                                                         | 1        |
| flags-outLPCog | 0                                                                         | 1        |
| odoCfg-profile | 0                                                                         | 0        |
| cogMaxSpeed    | 1                                                                         | 1        |
| cogMaxPosAcc   | 50                                                                        | 50       |
| velLpGain      | 153                                                                       | 153      |
| cogLpGain      | 76                                                                        | 76       |

## <span id="page-466-2"></span>**C.14 Power Management 2 Configuration (UBX-CFG-PM2)**

For parameter and protocol description see section [UBX-CFG-PM2](#page-249-1).



## **Power Management 2 Configuration Default Settings**

| Parameter            | SPG 2.xx, ADR   | SPG 3.0x | SPG 3.51 | TIM 1.0x | TIM 1.1x |
|----------------------|-----------------|----------|----------|----------|----------|
|                      | 3.xx, FTS 1.xx, |          |          |          |          |
|                      | ADR 4.xx, UDR   |          |          |          |          |
|                      | 1.xx            |          |          |          |          |
| maxStartupStateDur   | 0               | 0        | 0        | 0        | 0        |
| flags-extintSel      | 0               | 0        | 0        | 0        | 0        |
| flags-extintWake     | 0               | 0        | 0        | 0        | 0        |
| flags-extintBackup   | 0               | 0        | 0        | 0        | 0        |
| flags-extintInactive | n/a             | 0        | 0        | n/a      | 0        |
| flags-limitPeakCurr  | 0               | 0        | 0        | 0        | 0        |
| flags-waitTimeFix    | 0               | 0        | 0        | 1        | 1        |
| flags-updateRTC      | 0               | 0        | 0        | 0        | 0        |
| flags-updateEPH      | 1               | 1        | 0        | 1        | 1        |
| flags-doNotEnterOff  | 0               | 0        | 1        | 0        | 0        |
| flags-mode           | 1               | 1        | 1        | 1        | 1        |
| updatePeriod         | 1000            | 1000     | 1000     | 1000     | 1000     |
| searchPeriod         | 10000           | 10000    | 10000    | 10000    | 10000    |
| gridOffset           | 0               | 0        | 0        | 0        | 0        |
| onTime               | 0               | 0        | 0        | 0        | 0        |
| minAcqTime           | 0               | 0        | 300      | 0        | 0        |
| extintInactivityMs   | n/a             | 0        | 0        | n/a      | 0        |

## <span id="page-467-0"></span>**C.15 Port Configuration (UBX-CFG-PRT)**

For parameter and protocol description see section [UBX-CFG-PRT](#page-257-1).

## <span id="page-467-1"></span>**C.15.1 UART Port Configuration**

For parameter and protocol description see section [UBX-CFG-PRT-UART](#page-257-1).

## **UART 1 Default Settings**

| Parameter               | SPG 2.xx, SPG 3.xx, FTS 1. | ADR 3.xx, ADR 4.xx, UDR 1. | HPG 1.xx        |
|-------------------------|----------------------------|----------------------------|-----------------|
|                         | xx, TIM 1.xx               | xx                         |                 |
| txReady-en              | 0                          | 0                          | 0               |
| txReady-pol             | 0                          | 0                          | 0               |
| txReady-pin             | 0                          | 0                          | 0               |
| txReady-thres           | 0                          | 0                          | 0               |
| baudRate                | 9600                       | 9600                       | 9600            |
| inProtoMask             | inUbx,inNmea,inRtcm        | inUbx,inNmea,inRtcm        | inUbx,inNmea,   |
|                         |                            |                            | inRtcm3         |
| outProtoMask            | outUbx,outNmea             | outUbx,outNmea             | outUbx,outNmea, |
|                         |                            |                            | outRtcm3        |
| flags-extendedTxTimeout | 0                          | 0                          | 0               |

## <span id="page-467-2"></span>**C.15.2 USB Port Configuration**

For parameter and protocol description see section [UBX-CFG-PRT-USB](#page-260-0).



## **USB Default Settings**

| Parameter               | SPG 2.xx, SPG 3.xx, ADR 3.xx, FTS 1.xx, TIM | HPG 1.xx                |
|-------------------------|---------------------------------------------|-------------------------|
|                         | 1.xx, ADR 4.xx, UDR 1.xx                    |                         |
| txReady-en              | 0                                           | 0                       |
| txReady-pol             | 0                                           | 0                       |
| txReady-pin             | 0                                           | 0                       |
| txReady-thres           | 0                                           | 0                       |
| inProtoMask             | inUbx,inNmea,inRtcm                         | inUbx,inNmea,inRtcm3    |
| outProtoMask            | outUbx,outNmea                              | outUbx,outNmea,outRtcm3 |
| flags-extendedTxTimeout | 0                                           | 0                       |

## <span id="page-468-0"></span>**C.15.3 SPI Port Configuration**

For parameter and protocol description see section [UBX-CFG-PRT-SPI](#page-262-0).

## **SPI Default Settings**

| Parameter               | SPG 2.xx, SPG 3.xx, ADR 3.xx, FTS 1.xx, TIM 1.xx, ADR 4.xx, UDR 1.xx, HPG 1.xx |
|-------------------------|--------------------------------------------------------------------------------|
| txReady-en              | 0                                                                              |
| txReady-pol             | 0                                                                              |
| txReady-pin             | 0                                                                              |
| txReady-thres           | 0                                                                              |
| mode-spiMode            | 0                                                                              |
| mode-flowControl        | 0                                                                              |
| mode-ffCnt              | 0                                                                              |
| inProtoMask             | None                                                                           |
| outProtoMask            | None                                                                           |
| flags-extendedTxTimeout | 0                                                                              |

## <span id="page-468-1"></span>**C.15.4 DDC Port Configuration**

For parameter and protocol description see section [UBX-CFG-PRT-DDC](#page-265-0).

#### **DDC Default Settings**

| Parameter               | SPG 2.xx, SPG 3.xx, ADR 3.xx, FTS 1.xx, TIM | HPG 1.xx                |
|-------------------------|---------------------------------------------|-------------------------|
|                         | 1.xx, ADR 4.xx, UDR 1.xx                    |                         |
| txReady-en              | 0                                           | 0                       |
| txReady-pol             | 0                                           | 0                       |
| txReady-pin             | 0                                           | 0                       |
| txReady-thres           | 0                                           | 0                       |
| mode-slaveAddr          | 0x42                                        | 0x42                    |
| inProtoMask             | inUbx,inNmea,inRtcm                         | inUbx,inNmea,inRtcm3    |
| outProtoMask            | outUbx,outNmea                              | outUbx,outNmea,outRtcm3 |
| flags-extendedTxTimeout | 0                                           | 0                       |

## <span id="page-468-2"></span>**C.16 Output Rate Settings (UBX-CFG-RATE)**

For parameter and protocol description see section [UBX-CFG-RATE](#page-268-1).



## **Output Rate Default Settings**

| Parameter | SPG 2.xx, SPG 3.xx, ADR 3.xx, FTS 1.xx, TIM 1.xx, ADR 4.xx, UDR 1.xx, HPG 1.xx |
|-----------|--------------------------------------------------------------------------------|
| measRate  | 1000                                                                           |
| navRate   | 1                                                                              |
| timeRef   | 1                                                                              |

## <span id="page-469-0"></span>**C.17 Remote Inventory Settings (UBX-CFG-RINV)**

For parameter and protocol description see section [UBX-CFG-RINV](#page-269-1).

## **Remote Inventory Default Settings**

| Parameter    | SPG 2.xx, SPG 3.xx, ADR 3.xx, FTS 1.xx, TIM 1.xx, HPG 1.xx |
|--------------|------------------------------------------------------------|
| flags-dump   | 0                                                          |
| flags-binary | 0                                                          |

## <span id="page-469-1"></span>**C.18 Receiver Manager Configuration Settings (UBX-CFG-RXM)**

For parameter and protocol description see section [UBX-CFG-RXM](#page-272-1).

## **Power Management Default Settings**

| Parameter | SPG 2.xx, FTS 1. | SPG 3.0x, TIM 1. | ADR 3.xx | ADR 4.xx, UDR | SPG 3.5x |
|-----------|------------------|------------------|----------|---------------|----------|
|           | xx, TIM 1.0x     | 1x, HPG 1.xx     |          | 1.xx          |          |
| lpMode    | 0                | 0                | 0        | 0             | 1        |

## <span id="page-469-2"></span>**C.19 SBAS Configuration Settings (UBX-CFG-SBAS)**

For parameter and protocol description see section [UBX-CFG-SBAS](#page-273-1).

## **SBAS Configuration Default Settings**

| Parameter       | SPG 2.xx,     | SPG 3.0x | SPG 3.5x | ADR 3.xx | ADR 4.xx, | TIM 1.1x |
|-----------------|---------------|----------|----------|----------|-----------|----------|
|                 | FTS 1.xx, TIM |          |          |          | UDR 1.xx  |          |
|                 | 1.0x          |          |          |          |           |          |
| mode-enabled *  | 1             | 1        | 1        | 1        | 1         | 0        |
| mode-test       | 0             | 0        | 0        | 0        | 0         | 0        |
| usage-range     | 1             | 1        | 1        | 1        | 1         | 1        |
| usage-diffCorr  | 1             | 1        | 1        | 1        | 1         | 1        |
| usage-integrity | 0             | 0        | 0        | 0        | 0         | 0        |
| maxSBAS *       | 3             | 3        | 3        | 3        | 3         | 3        |
| scanmode2       | None          | None     | None     | None     | None      | None     |
| scanmode1       | 120,124,      | 120,123, | 120,123, | 120,124, | 120,123,  | 120,123, |
|                 | 126,129,      | 127-129, | 127-129, | 126,127- | 127-129,  | 127-129, |
|                 | 133,135,      | 133,135- | 133,135- | 129,133, | 133,135-  | 133,135- |
|                 | 137,138       | 138      | 138      | 135,137, | 138       | 138      |
|                 |               |          |          | 138      |           |          |

**\*** These parameters are deprecated; use [UBX-CFG-GNSS](#page-221-1) instead.



## <span id="page-470-0"></span>**C.20 Timepulse Settings (UBX-CFG-TP5)**

For parameter and protocol description see section [UBX-CFG-TP5](#page-284-1).

## **TIMEPULSE1 Default Settings**

| Parameter            | SPG 2.xx | SPG 3.xx, HPG 1. | ADR 3.xx, ADR  | FTS 1.xx | TIM 1.xx |
|----------------------|----------|------------------|----------------|----------|----------|
|                      |          | xx               | 4.xx, UDR 1.xx |          |          |
| antCableDelay        | 50       | 50               | 50             | 50       | 50       |
| rfGroupDelay         | 0        | 0                | 0              | 0        | 0        |
| freqPeriod           | 1000000  | 1000000          | 0              | 0        | 1000000  |
| freqPeriodLock       | 1000000  | 1000000          | 0              | 0        | 1000000  |
| pulseLenRatio        | 0        | 0                | 0              | 0        | 0        |
| pulseLenRatioLock    | 100000   | 100000           | 0              | 0        | 100000   |
| userConfigDelay      | 0        | 0                | 0              | 0        | 0        |
| flags-active         | 1        | 1                | 0              | 1        | 1        |
| flags-lockGpsFreq    | 1        | n/a              | n/a            | n/a      | n/a      |
| flags-lockGnssFreq   | n/a      | 1                | 1              | 1        | 1        |
| flags-lockedOtherSet | 1        | 1                | 1              | 1        | 1        |
| flags-isFreq         | 0        | 0                | 0              | 0        | 0        |
| flags-isLength       | 1        | 1                | 1              | 1        | 1        |
| flags-alignToTow     | 1        | 1                | 1              | 1        | 1        |
| flags-polarity       | 1        | 1                | 0              | 0        | 1        |
| flags-gridUtcGps     | 0        | n/a              | n/a            | n/a      | n/a      |
| flags-gridUtcGnss    | n/a      | 0                | 0              | 1        | 1        |
| flags-syncMode       | n/a      | 0                | 0              | 0        | 0        |

## <span id="page-470-1"></span>**C.21 USB Settings (UBX-CFG-USB)**

For parameter and protocol description see section [UBX-CFG-USB](#page-289-1).

## **USB Default Settings**

| Parameter        | SPG 2.xx, ADR 3.xx, FTS 1.xx, TIM 1.0x, ADR | SPG 3.xx, TIM 1.1x, HPG 1.xx |
|------------------|---------------------------------------------|------------------------------|
|                  | 4.xx, UDR 1.xx                              |                              |
| vendorID         | 0x1546                                      | 0x1546                       |
| productID        | 0x01A8                                      | 0x01A8                       |
| powerConsumption | 100                                         | 100                          |
| flags-reEnum     | 0                                           | 0                            |
| flags-powerMode  | 1                                           | 1                            |
| vendorString     | u-blox AG - www.u-blox.com                  | u-blox AG - www.u-blox.com   |
| productString    | u-blox GNSS receiver                        | u-blox GNSS receiver         |
| serialNumber     | not set                                     | not set                      |



# <span id="page-471-0"></span>**Related Documents**

## <span id="page-471-1"></span>**Overview**

As part of our commitment to customer support, u-blox maintains an extensive volume of technical documentation for our products. In addition to product-specific data sheets and integration manuals, general documents are also available. These include:

- GPS Compendium, [GPS-X-02007](https://www.u-blox.com/sites/default/files/products/documents/GPS-Compendium_Book_%28GPS-X-02007%29.pdf)
- GPS Antennas RF Design Considerations for u-blox GPS Receivers, [GPS-X-08014](https://www.u-blox.com/sites/default/files/products/documents/GPS-Antenna_AppNote_%28GPS-X-08014%29.pdf)

Our website [www.u-blox.com](http://www.u-blox.com) is a valuable resource for general and product-specific documentation.

For design and integration projects the Receiver description including interface description should be used together with the Data sheet and Hardware integration manual of the GNSS receiver.

<span id="page-472-0"></span>

# **Revision History**

| Revision | Date        | Name    | Status / Comments                                             |  |
|----------|-------------|---------|---------------------------------------------------------------|--|
| R01      | 30-Sep-2013 | efav    | Added u-blox M8 firmware 2.00                                 |  |
| R02      | 01-Nov-2013 | efav    | Added u-blox M8 firmware 2.01                                 |  |
| R03      | 15-Dec-2013 | efav    | Added u-blox M8 ADR product variant                           |  |
| R04      | 10-Feb-2014 | efav    | Added u-blox M8 Time & Frequency Sync product variant         |  |
| R05      | 27-Jun-2014 | efav    | Added u-blox M8 Timing product variant                        |  |
| R06      | 09-Sep-2014 | mfre    | Minor corrections                                             |  |
| R07      | 09-Sep-2014 | mfre    | Added u-blox M8 firmware 2.30                                 |  |
| R08      | 19-Nov-2014 | mfre    | Added u-blox M8 L-type modules product variant                |  |
| R09      | 30-Nov-2015 | mfre    | Added u-blox 8 / u-blox M8 SPG 3.01 firmware                  |  |
| R10      | 15-Feb-2016 | mfre    | Added u-blox 8 / u-blox M8 TIM 1.10 firmware                  |  |
| R11      | 04-May-2016 | mfre    | Added u-blox 8 / u-blox M8 ADR 4.00 and UDR 1.00 firmware     |  |
| R12      | 28-Apr-2017 | jhak    | Added u-blox 8 / u-blox M8 ADR 4.10, HPG 1.40 and SPG 3.51    |  |
|          |             |         | firmware                                                      |  |
| R13      | 06-Jul-2017 | jhak    | Added HPG 1.40 firmware information                           |  |
| R14      | 24-Oct-2017 | jhak    | Added ADR 4.11 firmware information                           |  |
| R15      | 06-Mar-2018 | jhak    | Updated Super-E messages                                      |  |
| R16      | 05-Nov-2018 | jhak    | Added ADR 4.21 and UDR 1.21 firmware information              |  |
| R17      | 17-May-2019 | ssid    | Minor corrections                                             |  |
| R18      | 24-Mar-2020 | ssid    | Added ADR 4.31 and UDR 1.31 firmware information              |  |
| R19      | 14-May-2020 | dama    | Added TIM 1.11 firmware information                           |  |
| R20      | 26-Jun-2020 | ssid    | Type numbers updated                                          |  |
|          |             |         | NEO-M8N-0-11, NEO-M8Q-0-11, NEO-8Q-0-11, NEO-M8P-0-12,        |  |
|          |             |         | NEO-M8P-2-12,NEO-M8T-0-11                                     |  |
| R21      | 25-Sep-2020 | ssid    | ADR/UDR scope changed to public, NEO-M8L added to the         |  |
|          |             |         | product list                                                  |  |
|          |             |         | New messages added: UBX-CFG-ESFALG, UBX-CFG-ESFG,             |  |
|          |             |         | UBX-CFG-ESFA, UBX-CFG-ESFWT, UBX-CFG-SENIF, UBX               |  |
|          |             |         | CFG-SPT, UBX-ESF-ALG, UBX-HNR-ATT, UBX-MON-SPT, UBX           |  |
|          |             |         | NAV-COV, UBX-NAV-EELL, NMEA-GxTHS                             |  |
|          |             |         | Automotive Dead Reckoning: Solution types, installation       |  |
|          |             |         | configuration, sensor configuration, ADR system               |  |
|          |             |         | configuration, operation                                      |  |
|          |             |         | Untethered Dead Reckoning: Installation configuration, sensor |  |
|          |             |         | configuration, UDR system configuration, operation            |  |
| R22      | 05-Feb-2021 | jesk    | Galileo-specific information added to UBX-CFG-GNSS and        |  |
|          |             |         | UBX-CFG-RST                                                   |  |
| R23      | 23-Feb-2021 | jesk/ss | Clarified UBX-CFG-GNSS                                        |  |
|          |             | id      | Added ADR 4.50 and UDR 1.50 firmware information              |  |
| R24      | 22-Jun-2021 | jesk    | Added NEO-M8J and firmware 3.05                               |  |
|          |             |         | NEO-M8M, NEO-M8N, and NEO-M8Q type numbers updated            |  |
| R25      | 19-Aug-2021 | dama    | Update for M8P FW 3.05 HPG 1.43 maintenance release           |  |
| R26      | 23-Nov-2021 | jesk    | ZOE-M8B and ZOE-M8G type numbers updated                      |  |
| R27      | 25-Aug-2022 | ssid    | AID-MAPM update - Temperature compensation topic update       |  |



continued

| Revision | Date        | Name | Status / Comments                   |
|----------|-------------|------|-------------------------------------|
| R28      | 30-Jan-2023 | viha | Added TIM 1.12 firmware information |

<span id="page-474-0"></span>

# **Contact**

For complete contact information visit us at [www.u-blox.com](https://www.u-blox.com)

## <span id="page-474-1"></span>**u-blox Offices**

#### **North, Central and South America**

#### **u-blox America, Inc.**

Phone: +1 703 483 3180 E-mail: info\_us@u-blox.com

#### **Regional Office West Coast:**

Phone: +1 408 573 3640 E-mail: info\_us@u-blox.com

#### **Technical Support:**

| Phone:  | +1 703 483 3185       |
|---------|-----------------------|
| E-mail: | support_us@u-blox.com |

#### **Headquarters Europe, Middle East, Africa**

**u-blox AG** Phone: +41 44 722 74 44 E-mail: info@u-blox.com Support: support@u-blox.com

#### **Asia, Australia, Pacific**

#### **u-blox Singapore Pte. Ltd.**

Phone: +65 6734 3811 E-mail: info\_ap@u-blox.com Support: support\_ap@u-blox.com

#### **Regional Office Australia:**

Phone: +61 3 9566 7255 E-mail: info\_anz@u-blox.com Support: support\_ap@u-blox.com

#### **Regional Office China (Beijing):**

Phone: +86 10 68 133 545 E-mail: info\_cn@u-blox.com Support: support\_cn@u-blox.com

#### **Regional Office China (Chongqing):**

| Phone:   | +86 23 6815 1588      |
|----------|-----------------------|
| E-mail:  | info_cn@u-blox.com    |
| Support: | support_cn@u-blox.com |

#### **Regional Office China (Shanghai):**

| Phone:   | +86 21 6090 4832      |
|----------|-----------------------|
| E-mail:  | info_cn@u-blox.com    |
| Support: | support_cn@u-blox.com |

#### **Regional Office China (Shenzhen):**

Phone: +86 755 8627 1083 E-mail: info\_cn@u-blox.com Support: support\_cn@u-blox.com

#### **Regional Office India:**

Phone: +91 80 4050 9200 E-mail: info\_in@u-blox.com Support: support\_in@u-blox.com

#### **Regional Office Japan (Osaka):**

Phone: +81 6 6941 3660 E-mail: info\_jp@u-blox.com Support: support\_jp@u-blox.com

#### **Regional Office Japan (Tokyo):**

Phone: +81 3 5775 3850 E-mail: info\_jp@u-blox.com Support: support\_jp@u-blox.com

#### **Regional Office Korea:**

Phone: +82 2 542 0861 E-mail: info\_kr@u-blox.com Support: support\_kr@u-blox.com

#### **Regional Office Taiwan:**

Phone: +886 2 2657 1090 E-mail: info\_tw@u-blox.com Support: support\_tw@u-blox.com